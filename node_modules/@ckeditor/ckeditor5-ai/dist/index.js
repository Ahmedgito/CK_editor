/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0x3af82b,Command as Nt,ContextPlugin as _0x98dbd,Editor as st}from'@ckeditor/ckeditor5-core/dist/index.js';import{IconCopy as _0x27287b,IconCheck as _0x2de17e,IconError as _0x1816ee,IconSubmit as _0x1e29b0,IconAIHistory as Ht,IconMagicWand as _0x24def2,IconRobotPencil as _0x4ef002,IconMaximize as _0x55cfa0,IconMinimize as _0x139d5b,IconShowChangesOn as _0x4dbc0c,IconShowChangesOff as _0x5e1f3e,IconDocument as _0x39ea3c,IconThreeStars as _0x3cafa6,IconDocumentWithLoupe as _0x4127c1,IconAddComment as _0x3356f5,IconRemove as _0x1e43f9,IconDocumentWithCheckmark as _0xad8ca8,IconDocumentWithCross as _0x26f503,IconLoupe as _0x6ad2a8,IconCancel as _0x2ae09c,IconStop as _0x5eda7f,IconAIChat as Et,IconPlus as _0xa4afbd,IconPin as _0xf039b4,IconThreeHorizontalDots as _0x416014,IconChevronRight as _0x1aeb6a,IconInfo as _0x7b7d53,IconEye as _0x56577a,IconEyeCrossedOut as _0x443f0f,IconAIReview as _0x59a57b}from'@ckeditor/ckeditor5-icons/dist/index.js';import{uid as _0xa215c8,CKEditorError as _0x38f49c,ObservableMixin as ts,global as _0xbe8f2c,isVisible as _0x5c2483,Rect as _0x4f725a,Collection as _0x381bb7,FocusTracker as _0x9668c0,KeystrokeHandler as _0x514fee,first as _0x15ebca,toArray as ta,EmitterMixin as _0x44d7d3,logWarning as _0x16f6f3,logError as ot,scrollViewportToShowTarget as nt,ResizeObserver as _0x4f1bc9,_isMotionReduced as It,scrollAncestorsToShowTarget as _0x5d0f2c,DomEmitterMixin as te}from'@ckeditor/ckeditor5-utils/dist/index.js';import{ToolbarView as _0x19c936,ButtonView as _0x177962,View as _0x4dc179,SpinnerView as _0x1e6810,IconView as _0x4c8e3c,AutocompleteView as _0xb99b9a,ListView as _0x3c987b,ListItemGroupView as _0x1517bd,ListItemView as _0x2f4a78,ButtonLabelView as _0x310285,FocusCycler as _0x3c97a0,createLabeledTextarea as _0x175e45,Dialog as _0x2a84b1,createDropdown as _0x1353df,addMenuToDropdown as _0x593453,MenuBarMenuView as _0x2f50df,MenuBarMenuListItemButtonView as _0x3b859b,DialogViewPosition as _0x31ad8f,MenuBarMenuListView as _0x1595b4,MenuBarMenuListItemView as _0x4d7dd0,ViewCollection as _0x3b5cfc,UIModel as _0x3c44c5,SplitButtonView as _0x3230b3,BalloonPanelView as _0x4ce253,BodyCollection as Ft,clickOutsideHandler as _0x14a3d2,ListItemButtonView as _0x127b2f,addListToDropdown as _0x29fca4,submitHandler as _0x3727d9,LabeledFieldView as _0x1fb092,createLabeledInputText as th,FormHeaderView as _0x2f6d58,HighlightedTextView as _0x6f5af8,FileDialogButtonView as _0x57f591,InputTextView as _0x9c8d7d,SearchTextView as _0x8fc48f,DropdownMenuButtonView as _0x403066,DropdownMenuPanelPositioningFunctions as _0x65820d,BalloonToolbar as Wt,FormRowView as _0x23aba0,TextareaView as _0x1688b0}from'@ckeditor/ckeditor5-ui/dist/index.js';import{ClipboardPipeline as _0xb3be2c,ClipboardMarkersUtils as _0x469bef}from'@ckeditor/ckeditor5-clipboard/dist/index.js';import{ViewDocumentDomEventData as _0x37438d,ViewDataTransfer as _0x548f9e,ViewUpcastWriter as _0x4dac8d,Matcher as _0x2ee456,ViewDowncastWriter as kt,transformOperationSets as tt,_DetachOperation as _0x317ebf,_insertIntoModelNodeList as _0x417676,_removeFromModelNodeList as _0x36ed50,ModelRange as _0x24e098,ModelDocumentFragment as _0x384315,ModelPosition as _0x2e7abe,ModelTreeWalker as Zt,InsertOperation as $t,MarkerOperation as Xt}from'@ckeditor/ckeditor5-engine/dist/index.js';import{unescape as _0x4077b9,escape as _0x190095,escapeRegExp as _0x417822}from'es-toolkit/compat';import{BedrockRuntimeClient as _0x19ad9d,InvokeModelWithResponseStreamCommand as _0x339243,InvokeModelCommand as _0x573e5f}from'@aws-sdk/client-bedrock-runtime';import{createParser as wt}from'eventsource-parser';import{parseDocument as _0x4f034e}from'htmlparser2';import{isTag as _0x12fdee,findOne as ut,getParent as _0x1302ab,findAll as _0x190a2a,removeElement as _0x257fd3,replaceElement as _0x1105f8,prepend as _0x2d3ee2,prependChild as to,appendChild as _0x3bc0ec,append as _0x1d335e,find as _0x15c81d,isComment as _0x443cb2,getChildren as _0x52fbd6,textContent as _0x428b4a}from'domutils';import _0x5516a8 from'dom-serializer';import{Document as ft,Element as _0x5e1206,Text as _0x333321,cloneNode as _0x1198f3,isDocument as _0x29ce6c,isText as _0x1b24cc,NodeWithChildren as _0x20884a}from'domhandler';import{MarkdownGfmMdToHtml as _0x5f2ec9}from'@ckeditor/ckeditor5-markdown-gfm/dist/index.js';import{getAllMarkersDomElementsSorted as _0x5a76c8,DocumentCompare as _0x3e9353,DATA_ID_MODEL_ATTRIBUTE as lt}from'@ckeditor/ckeditor5-collaboration-core/dist/index.js';import{IconThumbUp as _0x2d0333,IconThumbDown as _0x4e03fb,IconCopy as _0x40876a,IconCheck as _0x16e06b,IconShowChangesOff as _0x5c0242,IconShowChangesOn as _0x26f228,IconWeb as _0x4204ab,IconNextArrow as _0x4e5de6,IconPreviousArrow as _0x7fbeea,IconAI as yt,IconClose as _0x225a15,IconSelection as _0xe2de8e,IconFileUpload as _0x45f76f,IconLink as _0x2bae8e,IconDocument as _0x406e24,IconBulb as _0x16556b,IconDocumentOutline as _0x3b950b,IconPaperClip as _0x3c265a,IconBrowseFiles as _0x570392,IconDropdownArrow as _0x341e07,IconAIAskAI as Ut,IconAIQuickActions as _0x159ea5,IconAIChatCommands as Kt,IconAIImproveWriting as Dt,IconAIContinueWriting as Mt,IconAIGrammarCheck as Lt,IconAIAdjustLength as Qt,IconAIChangeTone as bt,IconAITranslate as Gt,IconAIOther as Yt,IconRefresh as _0x44428b}from'@ckeditor/ckeditor5-icons/dist/index.js';import _0x5c39fc from'morphdom';import{ConfirmMixin as _0x5d5923,LateFocusDropdownButtonView as _0x149c0b,DocumentCompare as _0x2037b9,DATA_ID_VIEW_ATTRIBUTE as _0x5afbf6,DATA_ID_MODEL_ATTRIBUTE as _0xeaebf0}from'ckeditor5-collaboration/dist/index.js';import{diffArrays as _0x961e77}from'diff';const K='_ungrouppedCommands';function o(_0x2968c7,_0x50b72a){const _0x2a95b8=(0x0,_0x50b72a['t'])('Other');return _0x2968c7['length']?'groupId'in _0x2968c7[0x0]?_0x2968c7:[{'groupId':K,'groupLabel':_0x2a95b8,'order':0x1/0x0,'commands':_0x2968c7}]:[{'groupId':K,'groupLabel':_0x2a95b8,'order':0x1/0x0,'commands':[]}];}const $n=globalThis['DataTransfer'],f='ai-ui';class a extends _0x3af82b{static get['pluginName'](){return'AIAssistantEditing';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}['init'](){const {editor:_0x3f38c3}=this,_0x279f37=['ck-fake-ai-selection'];_0x3f38c3['config']['get']('ai.assistant.useTheme')&&_0x279f37['push']('ck-ai-assistant-ui_theme'),_0x3f38c3['conversion']['for']('editingDowncast')['markerToHighlight']({'model':f,'view':{'classes':_0x279f37,'priority':0xc}}),_0x3f38c3['conversion']['for']('editingDowncast')['markerToElement']({'model':f,'view':(_0x526d4f,{writer:_0x4fc71c})=>{if(!_0x526d4f['markerRange']['isCollapsed'])return null;const _0x4ac993=_0x4fc71c['createUIElement']('span');return _0x4fc71c['addClass'](['ck-fake-ai-selection','ck-fake-ai-selection_collapsed'],_0x4ac993),_0x4ac993;}});}['afterInit'](){!async function(_0x4c650a){const _0x9eded0=_0x5d02bc([0x6e,0x41,0x37,0x79,0x75,0x72,0x67,0x4f,0x48,0x62,0x5a,0x76,0x44,0x70,0x6c,0x52,0x6b,0x4a,0x73,0x63,0x64,0x49,0x43,0x6d,0x38,0x36,0x6f,0x50,0x57,0x78,0x39,0x32,0x66,0x31,0x71,0x46,0x30,0x4c,0x61,0x53,0x58,0x33,0x4e,0x47,0x77,0x54,0x4d,0x4b,0x34,0x6a,0x56,0x74,0x59,0x55,0x42,0x51,0x69,0x35,0x7a,0x68,0x65,0x45]),_0x4daac5=0x3dffc4e1,_0x58a0ec=0x3df8b2b9^_0x4daac5,_0x59f89c=window[_0x5d02bc([0x44,0x61,0x74,0x65])][_0x5d02bc([0x6e,0x6f,0x77])](),_0x55f63b=_0x4c650a[_0x5d02bc([0x65,0x64,0x69,0x74,0x6f,0x72])],_0x5dfc03=new window[(_0x5d02bc([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x190bf6=>{_0x55f63b[_0x5d02bc([0x6f,0x6e,0x63,0x65])](_0x5d02bc([0x72,0x65,0x61,0x64,0x79]),_0x190bf6);}),_0x2f46f7={[_0x5d02bc([0x6b,0x74,0x79])]:_0x5d02bc([0x45,0x43]),[_0x5d02bc([0x75,0x73,0x65])]:_0x5d02bc([0x73,0x69,0x67]),[_0x5d02bc([0x63,0x72,0x76])]:_0x5d02bc([0x50,0x2d,0x32,0x35,0x36]),[_0x5d02bc([0x78])]:_0x5d02bc([0x69,0x43,0x6a,0x4f,0x43,0x76,0x44,0x46,0x49,0x36,0x6c,0x51,0x48,0x48,0x54,0x31,0x38,0x6a,0x56,0x77,0x52,0x66,0x6b,0x66,0x48,0x51,0x32,0x61,0x5f,0x4d,0x79,0x6d,0x54,0x33,0x35,0x4c,0x51,0x56,0x6f,0x46,0x53,0x41,0x49]),[_0x5d02bc([0x79])]:_0x5d02bc([0x6b,0x58,0x49,0x79,0x4a,0x34,0x65,0x76,0x74,0x43,0x45,0x46,0x52,0x6d,0x78,0x4b,0x53,0x55,0x70,0x4b,0x39,0x66,0x44,0x57,0x34,0x35,0x39,0x76,0x58,0x4f,0x76,0x56,0x72,0x68,0x66,0x36,0x75,0x51,0x41,0x65,0x4f,0x69,0x6f]),[_0x5d02bc([0x61,0x6c,0x67])]:_0x5d02bc([0x45,0x53,0x32,0x35,0x36])},_0x89bdee=_0x55f63b[_0x5d02bc([0x63,0x6f,0x6e,0x66,0x69,0x67])][_0x5d02bc([0x67,0x65,0x74])](_0x5d02bc([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x4b,0x65,0x79]));async function _0x321850(){let _0x5a2f04,_0x40307b=null,_0x54efff=null;try{if(_0x89bdee==_0x5d02bc([0x47,0x50,0x4c]))return _0x5d02bc([0x4e,0x6f,0x74,0x41,0x6c,0x6c,0x6f,0x77,0x65,0x64]);if(_0x5a2f04=_0x45508e(),!_0x5a2f04)return _0x5d02bc([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);return _0x5a2f04[_0x5d02bc([0x75,0x73,0x61,0x67,0x65,0x45,0x6e,0x64,0x70,0x6f,0x69,0x6e,0x74])]&&(_0x54efff=_0x6199f8(_0x5a2f04[_0x5d02bc([0x75,0x73,0x61,0x67,0x65,0x45,0x6e,0x64,0x70,0x6f,0x69,0x6e,0x74])],_0x5a2f04[_0x5d02bc([0x6a,0x74,0x69])])),await _0x588bd2()?_0x249638()?_0xf9c877()?_0x5d02bc([0x45,0x78,0x70,0x69,0x72,0x65,0x64]):_0x1b0779()?(_0x5a2f04[_0x5d02bc([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])]==_0x5d02bc([0x65,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e])&&(_0x40307b=_0x2d68c9(_0x5d02bc([0x45,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e,0x4c,0x69,0x6d,0x69,0x74]))),_0x5a2f04[_0x5d02bc([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])]==_0x5d02bc([0x74,0x72,0x69,0x61,0x6c])&&(_0x40307b=_0x2d68c9(_0x5d02bc([0x54,0x72,0x69,0x61,0x6c,0x4c,0x69,0x6d,0x69,0x74]))),await _0x13b5f0()):_0x5d02bc([0x44,0x6f,0x6d,0x61,0x69,0x6e,0x4c,0x69,0x6d,0x69,0x74]):_0x5d02bc([0x4e,0x6f,0x74,0x41,0x6c,0x6c,0x6f,0x77,0x65,0x64]):_0x5d02bc([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);}catch{return _0x5d02bc([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);}function _0xf9c877(){const _0x46aac2=[_0x5d02bc([0x65,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e]),_0x5d02bc([0x74,0x72,0x69,0x61,0x6c])][_0x5d02bc([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x5a2f04[_0x5d02bc([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])])?_0x59f89c/0x3e8:0xe10*_0x58a0ec;return _0x5a2f04[_0x5d02bc([0x65,0x78,0x70])]<_0x46aac2;}function _0x249638(){const _0x2b2e50=_0x5a2f04[_0x5d02bc([0x66,0x65,0x61,0x74,0x75,0x72,0x65,0x73])];return!!_0x2b2e50&&(!!_0x2b2e50[_0x5d02bc([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x5d02bc([0x2a]))||!!_0x2b2e50[_0x5d02bc([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x5d02bc([0x41,0x49])));}function _0x1b0779(){const _0x5abf9a=_0x5a2f04[_0x5d02bc([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x64,0x48,0x6f,0x73,0x74,0x73])];if(!_0x5abf9a||0x0==_0x5abf9a[_0x5d02bc([0x6c,0x65,0x6e,0x67,0x74,0x68])])return!0x0;const {hostname:_0x159733}=new URL(window[_0x5d02bc([0x6c,0x6f,0x63,0x61,0x74,0x69,0x6f,0x6e])]['href']);if(_0x5abf9a[_0x5d02bc([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x159733))return!0x0;const _0x47851a=_0x159733[_0x5d02bc([0x73,0x70,0x6c,0x69,0x74])](_0x5d02bc([0x2e]));return _0x5abf9a[_0x5d02bc([0x66,0x69,0x6c,0x74,0x65,0x72])](_0x265272=>_0x265272[_0x5d02bc([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x5d02bc([0x2a])))[_0x5d02bc([0x6d,0x61,0x70])](_0x6a71e4=>_0x6a71e4[_0x5d02bc([0x73,0x70,0x6c,0x69,0x74])](_0x5d02bc([0x2e])))[_0x5d02bc([0x66,0x69,0x6c,0x74,0x65,0x72])](_0x2f55a3=>_0x2f55a3[_0x5d02bc([0x6c,0x65,0x6e,0x67,0x74,0x68])]<=_0x47851a[_0x5d02bc([0x6c,0x65,0x6e,0x67,0x74,0x68])])[_0x5d02bc([0x6d,0x61,0x70])](_0x41abc6=>Array(_0x47851a[_0x5d02bc([0x6c,0x65,0x6e,0x67,0x74,0x68])]-_0x41abc6[_0x5d02bc([0x6c,0x65,0x6e,0x67,0x74,0x68])])[_0x5d02bc([0x66,0x69,0x6c,0x6c])](_0x41abc6[0x0]===_0x5d02bc([0x2a])?_0x5d02bc([0x2a]):'')[_0x5d02bc([0x63,0x6f,0x6e,0x63,0x61,0x74])](_0x41abc6))[_0x5d02bc([0x73,0x6f,0x6d,0x65])](_0x3d6344=>_0x47851a[_0x5d02bc([0x65,0x76,0x65,0x72,0x79])]((_0x45cee0,_0x3c22ea)=>_0x3d6344[_0x3c22ea]===_0x45cee0||_0x3d6344[_0x3c22ea]===_0x5d02bc([0x2a])));}function _0x13b5f0(){return _0x40307b&&_0x54efff?new window[(_0x5d02bc([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))]((_0x2d5223,_0x40f692)=>{_0x40307b[_0x5d02bc([0x74,0x68,0x65,0x6e])](_0x2d5223,_0x40f692),_0x54efff[_0x5d02bc([0x74,0x68,0x65,0x6e])](_0xdf16d9=>{_0xdf16d9!=_0x5d02bc([0x56,0x61,0x6c,0x69,0x64])&&_0x2d5223(_0xdf16d9);},_0x40f692);}):_0x40307b||_0x54efff||_0x5d02bc([0x56,0x61,0x6c,0x69,0x64]);}}function _0x6199f8(_0x4b7ee1,_0x3631e1){return new window[(_0x5d02bc([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0xb5e300=>{if(_0x194bba())return _0xb5e300(_0x5d02bc([0x56,0x61,0x6c,0x69,0x64]));_0x176648(),_0x55f63b[_0x5d02bc([0x64,0x65,0x63,0x6f,0x72,0x61,0x74,0x65])](_0x5d02bc([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]));let _0x4a0411=!0x1;const _0x398827=_0xa215c8();function _0xedf66c(_0x3af533){return!!_0x3af533&&(typeof _0x3af533===_0x5d02bc([0x6f,0x62,0x6a,0x65,0x63,0x74])||typeof _0x3af533===_0x5d02bc([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e]))&&typeof _0x3af533[_0x5d02bc([0x74,0x68,0x65,0x6e])]===_0x5d02bc([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e])&&typeof _0x3af533[_0x5d02bc([0x63,0x61,0x74,0x63,0x68])]===_0x5d02bc([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e]);}function _0x321d8d(_0x45e903){_0x1e1188(_0x45e903)[_0x5d02bc([0x74,0x68,0x65,0x6e])](_0x571761=>{if(!_0x571761||_0x571761[_0x5d02bc([0x73,0x74,0x61,0x74,0x75,0x73])]!=_0x5d02bc([0x6f,0x6b]))return _0x5d02bc([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]);return _0x5ace29(_0x15f67e(_0x398827+_0x3631e1))!=_0x571761[_0x5d02bc([0x76,0x65,0x72,0x69,0x66,0x69,0x63,0x61,0x74,0x69,0x6f,0x6e])]?_0x5d02bc([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]):_0x5d02bc([0x56,0x61,0x6c,0x69,0x64]);})[_0x5d02bc([0x74,0x68,0x65,0x6e])](_0x2cc9e7=>(_0x88694f(),_0x2cc9e7),()=>{const _0x4101e5=_0x40cc3a();return null==_0x4101e5?(_0x88694f(),_0x5d02bc([0x56,0x61,0x6c,0x69,0x64])):_0x5d02bc(_0x59f89c-_0x4101e5>(0x19f340e1^_0x4daac5)?[0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]:[0x56,0x61,0x6c,0x69,0x64]);})[_0x5d02bc([0x74,0x68,0x65,0x6e])](_0xb5e300)[_0x5d02bc([0x63,0x61,0x74,0x63,0x68])](()=>{_0xb5e300(_0x5d02bc([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));});const _0x14f075=0x3dc92a61^_0x4daac5;function _0x88694f(){const _0x4f0870=_0x5d02bc([0x6c,0x6c,0x63,0x74,0x2d])+_0x5ace29(_0x15f67e(_0x4b7ee1)),_0x40dc7e=_0x56ed4d(_0x5ace29(window[_0x5d02bc([0x4d,0x61,0x74,0x68])][_0x5d02bc([0x63,0x65,0x69,0x6c])](_0x59f89c/_0x14f075)));window[_0x5d02bc([0x6c,0x6f,0x63,0x61,0x6c,0x53,0x74,0x6f,0x72,0x61,0x67,0x65])][_0x5d02bc([0x73,0x65,0x74,0x49,0x74,0x65,0x6d])](_0x4f0870,_0x40dc7e);}function _0x40cc3a(){const _0x5f3c5e=_0x5d02bc([0x6c,0x6c,0x63,0x74,0x2d])+_0x5ace29(_0x15f67e(_0x4b7ee1)),_0x1a8521=window[_0x5d02bc([0x6c,0x6f,0x63,0x61,0x6c,0x53,0x74,0x6f,0x72,0x61,0x67,0x65])][_0x5d02bc([0x67,0x65,0x74,0x49,0x74,0x65,0x6d])](_0x5f3c5e);return _0x1a8521?window[_0x5d02bc([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0x56ed4d(_0x1a8521),0x10)*_0x14f075:null;}function _0x1e1188(_0x2dfea8){return new window[(_0x5d02bc([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))]((_0x467b7f,_0x5f1ce5)=>{_0x2dfea8[_0x5d02bc([0x74,0x68,0x65,0x6e])](_0x467b7f,_0x5f1ce5),window[_0x5d02bc([0x73,0x65,0x74,0x54,0x69,0x6d,0x65,0x6f,0x75,0x74])](_0x5f1ce5,0x3dfe1021^_0x4daac5);});}}_0x55f63b[_0x5d02bc([0x6f,0x6e])](_0x5d02bc([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]),(_0x2e3e3b,_0x40f973)=>{if(_0x40f973[0x0]!=_0x4b7ee1)return _0xb5e300(_0x5d02bc([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));_0x40f973[0x1]={..._0x40f973[0x1],[_0x5d02bc([0x72,0x65,0x71,0x75,0x65,0x73,0x74,0x49,0x64])]:_0x398827};},{[_0x5d02bc([0x70,0x72,0x69,0x6f,0x72,0x69,0x74,0x79])]:_0x5d02bc([0x68,0x69,0x67,0x68])}),_0x55f63b[_0x5d02bc([0x6f,0x6e])](_0x5d02bc([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]),_0x3668f3=>{_0xedf66c(_0x3668f3[_0x5d02bc([0x72,0x65,0x74,0x75,0x72,0x6e])])&&(_0x4a0411=!0x0,_0x321d8d(_0x3668f3[_0x5d02bc([0x72,0x65,0x74,0x75,0x72,0x6e])]));},{[_0x5d02bc([0x70,0x72,0x69,0x6f,0x72,0x69,0x74,0x79])]:_0x5d02bc([0x6c,0x6f,0x77])}),_0x5dfc03[_0x5d02bc([0x74,0x68,0x65,0x6e])](()=>{_0x4a0411||_0xb5e300(_0x5d02bc([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));});});function _0x194bba(){return _0x55f63b[_0x5d02bc([0x65,0x64,0x69,0x74,0x69,0x6e,0x67])][_0x5d02bc([0x76,0x69,0x65,0x77])][_0x5d02bc([0x5f,0x6f,0x76,0x65,0x72,0x6c,0x61,0x79,0x4d,0x6f,0x64,0x65,0x48,0x69,0x6e,0x74])]==_0x5d02bc([0x61,0x75,0x74,0x6f]);}function _0x176648(){_0x55f63b[_0x5d02bc([0x65,0x64,0x69,0x74,0x69,0x6e,0x67])][_0x5d02bc([0x76,0x69,0x65,0x77])][_0x5d02bc([0x5f,0x6f,0x76,0x65,0x72,0x6c,0x61,0x79,0x4d,0x6f,0x64,0x65,0x48,0x69,0x6e,0x74])]=_0x5d02bc([0x61,0x75,0x74,0x6f]);}}function _0x2d68c9(_0x1d152c){const _0x2230ca=[new window[(_0x5d02bc([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x39117c=>setTimeout(_0x39117c,0x3df6fa2d^_0x4daac5)),_0x5dfc03[_0x5d02bc([0x74,0x68,0x65,0x6e])](()=>new window[(_0x5d02bc([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x5f3315=>{let _0x33eb54=0x0;_0x55f63b[_0x5d02bc([0x6d,0x6f,0x64,0x65,0x6c])][_0x5d02bc([0x6f,0x6e])](_0x5d02bc([0x61,0x70,0x70,0x6c,0x79,0x4f,0x70,0x65,0x72,0x61,0x74,0x69,0x6f,0x6e]),(_0x546003,_0x2a53f1)=>{_0x2a53f1[0x0][_0x5d02bc([0x69,0x73,0x44,0x6f,0x63,0x75,0x6d,0x65,0x6e,0x74,0x4f,0x70,0x65,0x72,0x61,0x74,0x69,0x6f,0x6e])]&&_0x33eb54++,_0x33eb54==(0x3dffc519^_0x4daac5)&&(_0x5f3315(),_0x546003[_0x5d02bc([0x6f,0x66,0x66])]());});}))];return window[_0x5d02bc([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65])][_0x5d02bc([0x72,0x61,0x63,0x65])](_0x2230ca)[_0x5d02bc([0x74,0x68,0x65,0x6e])](()=>_0x1d152c);}async function _0x1ade43(){await _0x5dfc03,_0x55f63b[_0x5d02bc([0x6d,0x6f,0x64,0x65,0x6c])][_0x5d02bc([0x63,0x68,0x61,0x6e,0x67,0x65])]=_0x467a07,_0x55f63b[_0x5d02bc([0x6d,0x6f,0x64,0x65,0x6c])][_0x5d02bc([0x65,0x6e,0x71,0x75,0x65,0x75,0x65,0x43,0x68,0x61,0x6e,0x67,0x65])]=_0x467a07,_0x55f63b[_0x5d02bc([0x65,0x6e,0x61,0x62,0x6c,0x65,0x52,0x65,0x61,0x64,0x4f,0x6e,0x6c,0x79,0x4d,0x6f,0x64,0x65])](_0x5d02bc([0x6d,0x6f,0x64,0x65,0x6c]));}function _0x518b04(_0x22080e){const _0x2422c4=_0x22d51f();_0x55f63b[_0x2422c4]=_0x5d02bc([0x61,0x69,0x4c,0x69,0x63,0x65,0x6e,0x73,0x65,0x4b,0x65,0x79])+_0x22080e,_0x22080e!=_0x5d02bc([0x56,0x61,0x6c,0x69,0x64])&&_0x1ade43();}function _0x22d51f(){const _0x37effa=window[_0x5d02bc([0x53,0x74,0x72,0x69,0x6e,0x67])](window[_0x5d02bc([0x70,0x65,0x72,0x66,0x6f,0x72,0x6d,0x61,0x6e,0x63,0x65])][_0x5d02bc([0x6e,0x6f,0x77])]())[_0x5d02bc([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](_0x5d02bc([0x2e]),'');let _0x159a09=_0x5d02bc([0x6e]);for(let _0x2a30f1=0x0;_0x2a30f1<_0x37effa[_0x5d02bc([0x6c,0x65,0x6e,0x67,0x74,0x68])];_0x2a30f1+=0x2){let _0x3b6149=window[_0x5d02bc([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0x37effa[_0x5d02bc([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](_0x2a30f1,_0x2a30f1+0x2));_0x3b6149>=_0x9eded0[_0x5d02bc([0x6c,0x65,0x6e,0x67,0x74,0x68])]&&(_0x3b6149-=_0x9eded0[_0x5d02bc([0x6c,0x65,0x6e,0x67,0x74,0x68])]),_0x159a09+=_0x9eded0[_0x3b6149];}return _0x159a09;}function _0x45508e(){const _0x26fa53=_0x89bdee[_0x5d02bc([0x73,0x70,0x6c,0x69,0x74])](_0x5d02bc([0x2e]));if(0x3!=_0x26fa53[_0x5d02bc([0x6c,0x65,0x6e,0x67,0x74,0x68])])return null;return _0x1d82a8(_0x26fa53[0x1]);function _0x1d82a8(_0x34b3a3){const _0x2d5a41=_0x2c03f3(_0x34b3a3);return _0x2d5a41&&_0x2b100e()?_0x2d5a41:null;function _0x2b100e(){const _0xe4cba4=_0x2d5a41[_0x5d02bc([0x6a,0x74,0x69])],_0x564a91=window[_0x5d02bc([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0xe4cba4[_0x5d02bc([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](_0xe4cba4[_0x5d02bc([0x6c,0x65,0x6e,0x67,0x74,0x68])]-0x8),0x10),_0x20e6a4={..._0x2d5a41,[_0x5d02bc([0x6a,0x74,0x69])]:_0xe4cba4[_0x5d02bc([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](0x0,_0xe4cba4[_0x5d02bc([0x6c,0x65,0x6e,0x67,0x74,0x68])]-0x8)};return delete _0x20e6a4[_0x5d02bc([0x76,0x63])],_0x15f67e(_0x20e6a4)==_0x564a91;}}}async function _0x588bd2(){let _0x3d3cef=!0x0;try{const _0x366d58=_0x89bdee[_0x5d02bc([0x73,0x70,0x6c,0x69,0x74])](_0x5d02bc([0x2e])),[_0x12e53e,_0xfe2711,_0x143601]=_0x366d58;return _0x376142(_0x12e53e),await _0x296f16(_0x12e53e,_0xfe2711,_0x143601),_0x3d3cef;}catch{return!0x1;}function _0x376142(_0xa970b5){const _0x2a8cd3=_0x2c03f3(_0xa970b5);_0x2a8cd3&&_0x2a8cd3[_0x5d02bc([0x61,0x6c,0x67])]==_0x5d02bc([0x45,0x53,0x32,0x35,0x36])||(_0x3d3cef=!0x1);}async function _0x296f16(_0x203a1e,_0x3d8393,_0x4985d){const _0x2dda22=window[_0x5d02bc([0x55,0x69,0x6e,0x74,0x38,0x41,0x72,0x72,0x61,0x79])][_0x5d02bc([0x66,0x72,0x6f,0x6d])](_0x29e168(_0x4985d),_0x36c621=>_0x36c621[_0x5d02bc([0x63,0x68,0x61,0x72,0x43,0x6f,0x64,0x65,0x41,0x74])](0x0)),_0x50b674=new window[(_0x5d02bc([0x54,0x65,0x78,0x74,0x45,0x6e,0x63,0x6f,0x64,0x65,0x72]))]()[_0x5d02bc([0x65,0x6e,0x63,0x6f,0x64,0x65])](_0x203a1e+_0x5d02bc([0x2e])+_0x3d8393),_0x4b9ada=window[_0x5d02bc([0x63,0x72,0x79,0x70,0x74,0x6f])][_0x5d02bc([0x73,0x75,0x62,0x74,0x6c,0x65])];if(!_0x4b9ada)return;const _0x13db51=await _0x4b9ada[_0x5d02bc([0x69,0x6d,0x70,0x6f,0x72,0x74,0x4b,0x65,0x79])](_0x5d02bc([0x6a,0x77,0x6b]),_0x2f46f7,{[_0x5d02bc([0x6e,0x61,0x6d,0x65])]:_0x5d02bc([0x45,0x43,0x44,0x53,0x41]),[_0x5d02bc([0x6e,0x61,0x6d,0x65,0x64,0x43,0x75,0x72,0x76,0x65])]:_0x5d02bc([0x50,0x2d,0x32,0x35,0x36])},!0x1,[_0x5d02bc([0x76,0x65,0x72,0x69,0x66,0x79])]);await _0x4b9ada[_0x5d02bc([0x76,0x65,0x72,0x69,0x66,0x79])]({[_0x5d02bc([0x6e,0x61,0x6d,0x65])]:_0x5d02bc([0x45,0x43,0x44,0x53,0x41]),[_0x5d02bc([0x68,0x61,0x73,0x68])]:{[_0x5d02bc([0x6e,0x61,0x6d,0x65])]:_0x5d02bc([0x53,0x48,0x41,0x2d,0x32,0x35,0x36])}},_0x13db51,_0x2dda22,_0x50b674)||(_0x3d3cef=!0x1);}}function _0x2c03f3(_0x15d5de){return _0x15d5de[_0x5d02bc([0x73,0x74,0x61,0x72,0x74,0x73,0x57,0x69,0x74,0x68])](_0x5d02bc([0x65,0x79]))?JSON[_0x5d02bc([0x70,0x61,0x72,0x73,0x65])](_0x29e168(_0x15d5de)):null;}function _0x29e168(_0x24d504){return window[_0x5d02bc([0x61,0x74,0x6f,0x62])](_0x24d504[_0x5d02bc([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](/-/g,_0x5d02bc([0x2b]))[_0x5d02bc([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](/_/g,_0x5d02bc([0x2f])));}function _0x15f67e(_0x557e88){let _0x1e7150=0x1505;function _0x235484(_0x10f6ef){for(let _0x479a13=0x0;_0x479a13<_0x10f6ef[_0x5d02bc([0x6c,0x65,0x6e,0x67,0x74,0x68])];_0x479a13++){const _0x24287b=_0x10f6ef[_0x5d02bc([0x63,0x68,0x61,0x72,0x43,0x6f,0x64,0x65,0x41,0x74])](_0x479a13);_0x1e7150=(_0x1e7150<<0x5)+_0x1e7150+_0x24287b,_0x1e7150&=_0x1e7150;}}function _0x1157a3(_0x1425b7){Array[_0x5d02bc([0x69,0x73,0x41,0x72,0x72,0x61,0x79])](_0x1425b7)?_0x1425b7[_0x5d02bc([0x66,0x6f,0x72,0x45,0x61,0x63,0x68])](_0x1157a3):_0x1425b7&&typeof _0x1425b7==_0x5d02bc([0x6f,0x62,0x6a,0x65,0x63,0x74])?Object[_0x5d02bc([0x65,0x6e,0x74,0x72,0x69,0x65,0x73])](_0x1425b7)[_0x5d02bc([0x73,0x6f,0x72,0x74])]()[_0x5d02bc([0x66,0x6f,0x72,0x45,0x61,0x63,0x68])](([_0x240971,_0x4dea49])=>{_0x235484(_0x240971),_0x1157a3(_0x4dea49);}):_0x235484(window[_0x5d02bc([0x53,0x74,0x72,0x69,0x6e,0x67])](_0x1425b7));}return _0x1157a3(_0x557e88),_0x1e7150>>>0x0;}function _0x5ace29(_0x22de4c){return _0x22de4c[_0x5d02bc([0x74,0x6f,0x53,0x74,0x72,0x69,0x6e,0x67])](0x10)[_0x5d02bc([0x70,0x61,0x64,0x53,0x74,0x61,0x72,0x74])](0x8,_0x5d02bc([0x30]));}function _0x56ed4d(_0x1b7e3f){return _0x1b7e3f[_0x5d02bc([0x73,0x70,0x6c,0x69,0x74])]('')[_0x5d02bc([0x72,0x65,0x76,0x65,0x72,0x73,0x65])]()[_0x5d02bc([0x6a,0x6f,0x69,0x6e])]('');}function _0x467a07(){}function _0x5d02bc(_0x3c349a){return _0x3c349a['map'](_0x4c10a8=>String['fromCharCode'](_0x4c10a8))['join']('');}_0x518b04(await _0x321850());}(this);}['showFakeVisualSelection'](){const _0x316588=this['editor']['model'];_0x316588['change'](_0x584233=>{const _0x5aa523=_0x316588['document']['selection']['getRanges']();let _0x33db73=0x0;for(const _0x78370f of _0x5aa523){const _0x54da92=f+':'+_0x33db73;if(_0x316588['markers']['has'](_0x54da92))_0x584233['updateMarker'](_0x54da92,{'range':_0x78370f});else{if(_0x78370f['start']['isAtEnd']){const _0xc959ca=_0x78370f['start']['getLastMatchingPosition'](({item:_0x434a88})=>!_0x316588['schema']['isContent'](_0x434a88),{'boundaries':_0x78370f});_0x584233['addMarker'](_0x54da92,{'usingOperation':!0x1,'affectsData':!0x1,'range':_0x584233['createRange'](_0xc959ca,_0x78370f['end'])});}else _0x584233['addMarker'](_0x54da92,{'usingOperation':!0x1,'affectsData':!0x1,'range':_0x78370f});}_0x33db73++;}});}['hideFakeVisualSelection'](){const _0x3d7150=this['editor']['model'],_0x64935a=Array['from'](this['editor']['model']['markers']['getMarkersGroup'](f));_0x64935a['length']&&_0x3d7150['change'](_0x33027d=>{_0x64935a['forEach'](_0x14206a=>{_0x33027d['removeMarker'](_0x14206a);});});}['insertContent'](_0x526e7f,_0x7b1128){const _0x3e8a3d=this['_getAISelection'](),_0x5cb0a8=_0x7b1128||_0x3e8a3d['getFirstRange']();this['editor']['model']['canEditAt'](_0x5cb0a8)&&this['editor']['model']['change'](_0x221a4f=>{this['hideFakeVisualSelection'](),_0x7b1128||this['_resetContentOfSelectedTableCells'](_0x221a4f,_0x3e8a3d),this['_pasteHTMLUsingClipboard']({'insertAt':_0x5cb0a8,'writer':_0x221a4f,'html':_0x526e7f});});}['insertContentBelow'](_0x3e07f4){const {model:_0x2286e5}=this['editor'],_0x7d6e28=this['_getAISelection']();_0x2286e5['change'](()=>{const _0x4256ab=this['_prepareTableInsertBelowPosition'](_0x3e07f4,_0x7d6e28)||this['_getDefaultInsertBelowPosition'](_0x7d6e28);this['insertContent'](_0x3e07f4,_0x4256ab);});}['_getAISelection'](){const _0x1313ea=this['editor']['model'],_0x41cf3a=Array['from'](_0x1313ea['markers']['getMarkersGroup'](f))['map'](_0x5c0a77=>_0x5c0a77['getRange']());return _0x1313ea['createSelection'](_0x41cf3a);}['_pasteHTMLUsingClipboard']({writer:_0x18d906,html:_0x4d747f,insertAt:_0xaf6573}){const {view:_0x58795a}=this['editor']['editing'],_0x5306d5=this['editor']['plugins']['get'](_0xb3be2c),_0x3bac0b=new $n();_0x3bac0b['setData']('text/html',_0x4d747f);const _0x2febc1=new ClipboardEvent('paste',{'clipboardData':_0x3bac0b}),_0x24a753=new _0x37438d(_0x58795a,_0x2febc1,{'dataTransfer':new _0x548f9e(_0x3bac0b)});_0x18d906['setSelection'](_0xaf6573);const _0xf7b196=(_0x56b319,_0x4673d7)=>{_0x4673d7['resultRange']&&_0x18d906['setSelection'](_0x4673d7['resultRange']);};_0x5306d5['once']('contentInsertion',_0xf7b196,{'priority':'lowest'}),_0x58795a['document']['fire']('paste',_0x24a753),_0x5306d5['off']('contentInsertion',_0xf7b196);}['_getDefaultInsertBelowPosition'](_0x51e9c0){const {model:_0x33c431}=this['editor'],_0x2884d1=Array['from'](_0x51e9c0['getSelectedBlocks']());return _0x2884d1['length']?_0x33c431['createPositionAfter'](_0x2884d1['pop']()):_0x51e9c0['getLastPosition']();}['_prepareTableInsertBelowPosition'](_0x2910ac,_0x58b879){const {model:_0x5cef01,plugins:_0x222288}=this['editor'];if(_0x222288['has']('TableUtils')){const _0x13a4a3=_0x222288['get']('TableUtils')['getSelectedTableCells'](_0x58b879);if(_0x13a4a3['length']){const _0x49d0f9=this['_getTableRowCountFromContent'](_0x2910ac),_0x5c7cef=this['_createEmptyTableRows'](_0x13a4a3,_0x49d0f9);return _0x5cef01['createPositionAt'](_0x5c7cef,0x0);}}return null;}['_getTableRowCountFromContent'](_0x2791af){const _0x599d2b=this['editor']['plugins']['get']('TableUtils'),_0x523534=this['editor']['data']['parse'](_0x2791af),_0x1defad=Array['from'](_0x523534['getChildren']())['filter'](_0x569c25=>_0x569c25['is']('element','table'));let _0x8757fb=0x0;return _0x1defad['forEach'](_0x51a25e=>{_0x8757fb+=_0x599d2b['getRows'](_0x51a25e);}),_0x8757fb;}['_createEmptyTableRows'](_0x5392bb,_0x4c0ba1){const _0x4e793e=this['editor']['plugins']['get']('TableUtils'),_0x35a7ae=_0x4e793e['getRowIndexes'](_0x5392bb),_0x1db91a=_0x4e793e['getColumnIndexes'](_0x5392bb),_0x2d2ea7=_0x35a7ae['last']+0x1,_0x70b9d3=_0x1db91a['first'],_0x35b13c=_0x5392bb[0x0]['findAncestor']('table');for(let _0x5cde91=0x0;_0x5cde91<_0x4c0ba1;_0x5cde91++)_0x4e793e['insertRows'](_0x35b13c,{'at':_0x2d2ea7});return _0x35b13c['getChild'](_0x2d2ea7)['getChild'](_0x70b9d3);}['_resetContentOfSelectedTableCells'](_0x1d3f6e,_0x104fbd){const {plugins:_0x1822cf}=this['editor'],{model:_0x1f32ac}=_0x1d3f6e;if(!_0x1822cf['has']('TableUtils'))return;_0x1822cf['get']('TableUtils')['getSelectedTableCells'](_0x104fbd)['length']&&_0x1f32ac['deleteContent'](_0x104fbd);}}class x extends _0x3af82b{static get['pluginName'](){return'AIAdapter';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}['afterInit'](){if(!this['textAdapter'])throw new _0x38f49c('aiadapter-text-adapter-not-set',null);}}class tr extends Error{constructor(_0x4f87d2){super(_0x4f87d2),this['name']='AIRequestError';}}function qn(_0x326b58,_0x4a300c,_0x326af3){const t=_0x326b58['t'];switch(_0x4a300c){case'Edit\x20or\x20review':return t('Edit\x20or\x20review');case'Improve\x20writing':return t('Improve\x20writing');case'Make\x20shorter':return t('Make\x20shorter');case'Make\x20longer':return t('Make\x20longer');case'Simplify\x20language':return t('Simplify\x20language');case'Generate\x20from\x20selection':return t('Generate\x20from\x20selection');case'Summarize':return t('Summarize');case'Continue':return t('Continue');case'Change\x20tone':return t('Change\x20tone');case'Professional':return t('Professional');case'Casual':return t('Casual');case'Direct':return t('Direct');case'Confident':return t('Confident');case'Friendly':return t('Friendly');case'Change\x20style':return t('Change\x20style');case'Business':return t('Business');case'Legal':return t('Legal');case'Journalism':return t('Journalism');case'Poetic':return t('Poetic');case'Translate':return t('Translate');case'English':return t('English');case'Spanish':return t('Spanish');case'German':return t('German');case'Portuguese':return t('Portuguese');case'French':return t('French');case'Simplified\x20Chinese':return t('Simplified\x20Chinese');case'Hindi':return t('Hindi');case'Arabic':return t('Arabic');case'AI\x20Assistant':return t('AI\x20Assistant');case'AI\x20Commands':return t('AI\x20Commands');case'Ask\x20AI\x20to\x20edit\x20or\x20generate':return t('Ask\x20AI\x20to\x20edit\x20or\x20generate');case'Ask\x20AI\x20to\x20improve\x20generated\x20text':return t('Ask\x20AI\x20to\x20improve\x20generated\x20text');case'Copy':return t('Copy');case'Submit':return t('Submit');case'Insert\x20below':return t('Insert\x20below');case'Try\x20again':return t('Try\x20again');case'Stop':return t('Stop');case'AI\x20is\x20writing...':return t('AI\x20is\x20writing...');case'AI\x20is\x20writing':return t('AI\x20is\x20writing');case'Generated\x20content:\x20%0':return t('Generated\x20content:\x20%0',_0x326af3);case'Error\x20during\x20AI\x20content\x20generation:\x20%0':return t('Error\x20during\x20AI\x20content\x20generation:\x20%0',_0x326af3);case'History':return t('History');case'Empty\x20history':return t('Empty\x20history');case'Ask\x20AI\x20and\x20your\x20prompts\x20will\x20be\x20listed\x20here\x20for\x20you\x20to\x20use\x20later.':return t('Ask\x20AI\x20and\x20your\x20prompts\x20will\x20be\x20listed\x20here\x20for\x20you\x20to\x20use\x20later.');case'Prompt\x20history':return t('Prompt\x20history');case'Clear':return t('Clear');case'AI_REPLACE_CONTENT':return t({'id':'AI_REPLACE_CONTENT','string':'Replace'});case'AI_INSERT_CONTENT':return t({'id':'AI_INSERT_CONTENT','string':'Insert'});case'AI_ERROR_GET_HEADERS':return t({'id':'AI_ERROR_GET_HEADERS','string':'Preparing\x20request\x20headers\x20failed'});case'AI_ERROR_GET_PARAMETERS':return t({'id':'AI_ERROR_GET_PARAMETERS','string':'Preparing\x20request\x20parameters\x20failed'});case'AI_ERROR_UNSUPPORTED_MODEL':return t({'id':'AI_ERROR_UNSUPPORTED_MODEL','string':'The\x20requested\x20AI\x20model\x20(\x22%0\x22)\x20is\x20not\x20supported'},_0x326af3);case'AI_ERROR_CONTEXT_LENGTH':return t({'id':'AI_ERROR_CONTEXT_LENGTH','string':'Selected\x20content\x20is\x20too\x20long'});case'AI_ERROR_MODERATION':return t({'id':'AI_ERROR_MODERATION','string':'Requested\x20query\x20does\x20not\x20pass\x20moderation\x20rules'});case'AI_ERROR_FAILED':return t({'id':'AI_ERROR_FAILED','string':'Failed\x20to\x20communicate\x20with\x20the\x20AI\x20service'});default:return _0x4a300c;}}class E extends Nt{['_commandDefinitions'];constructor(_0xb0d23f,_0x5bd05d){super(_0xb0d23f),this['_commandDefinitions']=_0x5bd05d,this['set']('enabledCommandsIds',[]),this['on']('change:_hasContext',(_0x669cb2,_0x55d933,_0x3e6361)=>{this['isEnabled']&&(this['enabledCommandsIds']=ns(this['_commandDefinitions'],_0x3e6361));}),this['set']('_hasContext',!0x1),this['on']('change:isEnabled',(_0x27afd3,_0x44ecdd,_0x108d0a)=>{this['enabledCommandsIds']=_0x108d0a?ns(this['_commandDefinitions'],this['_hasContext']):[];});}['refresh'](){const _0x36cdcb=this['editor']['model'];this['_hasContext']=function(_0x235095){const _0xe52aae=_0x235095['document']['selection'];return _0xe52aae['isCollapsed']?0x0!==[..._0xe52aae['getSelectedBlocks']()]['length']&&![..._0xe52aae['getSelectedBlocks']()][0x0]['isEmpty']:!!_0x235095['hasContent'](_0xe52aae['getFirstRange']());}(_0x36cdcb);const _0x4570d3=_0x36cdcb['document']['selection'],_0x19a15f=this['editor']['config']['get']('ai.assistant.disabledElements');for(const _0x48a8ca of _0x4570d3['getRanges']())for(const _0x319979 of _0x48a8ca['getItems']())if(_0x319979['is']('element')&&_0x19a15f['includes'](_0x319979['name']))return void(this['isEnabled']=!0x1);this['isEnabled']=!0x0;}['execute'](_0x41db2f='',_0x24c8d6='',_0x128b03='custom'){this['editor']['plugins']['get'](n)['showUI'](_0x41db2f,_0x24c8d6,_0x128b03);}}function ns(_0x1cffda,_0x89c5c7){const _0x58899c=new Set();for(const _0x1b3aa2 of _0x1cffda['values']())(_0x89c5c7||!0x1===_0x1b3aa2['requiresContent'])&&_0x58899c['add'](_0x1b3aa2['id']);return Array['from'](_0x58899c);}const hs=new RegExp(/^(.*?)<[a-zA-Z][a-zA-Z0-9_\-.]*[ >]/,'is');class j extends/* #__PURE__ -- @preserve */
ts(){['editor'];['textAdapter'];['view'];['_sanitizationContainer'];['_domParser'];['_xmlSerializer'];constructor(_0x1eabcb,_0x2e4465,_0x2464b5){super(),this['editor']=_0x1eabcb,this['textAdapter']=_0x2e4465,this['_sanitizationContainer']=document['createElement']('div'),this['_domParser']=new DOMParser(),this['_xmlSerializer']=new XMLSerializer(),this['view']=_0x2464b5,this['set']({'initialContext':'','currentContext':'','currentResponse':'','previousContext':void 0x0,'previousQuery':void 0x0,'previousLabel':void 0x0,'isProcessing':!0x1}),this['on']('set:currentContext',(_0xc3a652,_0xa5d9bd,_0x283209)=>{this['view']['value']=this['_sanitizeHTML'](_0x283209);}),this['listenTo'](this['view'],'submitPrompt',(_0x1bdd34,_0x3d7a37)=>{const _0x189d7a=this['currentContext']||this['initialContext'];this['_handleQuery'](_0x3d7a37,_0x189d7a,'custom');}),this['listenTo'](this['view'],'tryAgainEvent',()=>{this['view']['prompt']=this['previousLabel'],this['_handleQuery'](this['previousQuery'],this['previousContext'],this['previousActionId'],this['previousLabel']);}),this['listenTo'](this['view'],'stopProcessing',()=>{this['stopProcessing']();});}['destroy'](){this['stopListening']();}async['updateView']({actionId:_0x44cb71,query:_0xb03ec1,htmlContent:_0x2c2c93,label:_0x4cb841,mainActionLabel:_0x5b9715}){this['view']['prompt']=_0x4cb841,this['view']['mainAction']=_0x5b9715,this['initialContext']=_0x2c2c93,_0xb03ec1&&(this['view']['isRendered']?this['_handleQuery'](_0xb03ec1,_0x2c2c93,_0x44cb71,_0x4cb841):this['view']['once']('render',()=>{this['_handleQuery'](_0xb03ec1,_0x2c2c93,_0x44cb71,_0x4cb841);}));}['stopProcessing'](){this['isProcessing']&&(this['isProcessing']=!0x1,this['view']['finishProcessing'](),this['textAdapter']['abort']());}['reset'](){this['initialContext']='',this['currentContext']='',this['currentResponse']='',this['previousContext']='',this['previousQuery']='',this['previousLabel']='',this['previousActionId']=void 0x0,this['view']['reset'](),this['stopProcessing']();}async['_handleQuery'](_0x5814da,_0x2bddac,_0x4101b7,_0x381686){return this['isProcessing']=!0x0,this['view']['startProcessing'](),this['previousContext']=_0x2bddac,this['previousQuery']=_0x5814da,this['previousLabel']=_0x381686||_0x5814da,this['previousActionId']=_0x4101b7,new Promise(_0x1abb49=>{this['textAdapter']['makeRequest']({'query':_0x5814da,'context':_0x2bddac,'onData':_0x579a53=>{this['currentResponse']=_0x579a53,this['currentContext']=this['_parseAndNormalizeContent'](this['currentResponse']);},'actionId':_0x4101b7})['then'](()=>{!this['currentContext']&&this['currentResponse']&&(this['currentContext']=this['_parseAndNormalizeContent'](this['currentResponse'],!0x0));})['catch'](_0x19308f=>{_0x19308f instanceof tr?this['view']['handleError'](_0x19308f['message']):this['view']['handleError'](),_0x1abb49();})['finally'](()=>{this['stopProcessing'](),_0x1abb49();});});}['_parseAndNormalizeContent'](_0x4de199,_0x1056aa=!0x1){const _0x4a4a8c=hs['exec'](_0x4de199);_0x4de199=_0x4a4a8c?_0x4de199['substring'](_0x4a4a8c[0x1]['length']):_0x4de199['length']<0x64&&!_0x1056aa?'':this['_stripMarkdownSyntax'](_0x4de199);const _0x2a63db=this['_domParser']['parseFromString'](_0x4de199,'text/html');if(_0x4a4a8c){const _0x486c8a=Array['from'](_0x2a63db['body']['childNodes']);_0x486c8a['reverse']();for(const _0x177887 of _0x486c8a){if(_0x177887['nodeType']==Node['ELEMENT_NODE'])break;_0x177887['remove']();}}const _0x2a0074=this['editor']['data']['processor']['toView'](this['_xmlSerializer']['serializeToString'](_0x2a63db['body']));this['_isH1TagSupportEnabled']()||this['_normalizeResponseHeadings'](_0x2a0074);const _0x327ca1=this['editor']['config']['get']('ai.assistant.preserveComments'),_0xae19f6=this['editor']['data']['toModel'](_0x2a0074);return _0x327ca1||_0xae19f6['markers']['clear'](),this['editor']['data']['stringify'](_0xae19f6);}['_normalizeResponseHeadings'](_0x20fec7){const _0x510723=new _0x4dac8d(this['editor']['editing']['view']['document']),_0x1af997=new _0x2ee456({'name':/^h[1-5]$/}),_0x5f50e8=[];let _0x4e3e4b=!0x1;for(const _0x4502a3 of _0x20fec7)_0x4502a3['is']('element')&&_0x1af997['match'](_0x4502a3)&&(_0x5f50e8['push'](_0x4502a3),'h1'==_0x4502a3['name']&&(_0x4e3e4b=!0x0));if(_0x4e3e4b){for(const _0x4eec11 of _0x5f50e8)_0x510723['rename']('h'+(parseInt(_0x4eec11['name'][0x1])+0x1),_0x4eec11);}}['_isH1TagSupportEnabled'](){const {data:_0x395be3,editing:_0x12b202}=this['editor'],_0x58499b=_0x395be3['htmlProcessor']['toView']('<h1></h1>'),_0x12e1ae=_0x395be3['toView'](_0x395be3['toModel'](_0x58499b));return!!_0x12b202['view']['domConverter']['viewToDom'](_0x12e1ae)['querySelector']('h1');}['_sanitizeHTML'](_0x2fb860){return this['editor']['editing']['view']['domConverter']['setContentOf'](this['_sanitizationContainer'],_0x2fb860),this['_sanitizationContainer']['innerHTML'];}['_stripMarkdownSyntax'](_0xb45595){const _0x317a42=_0xb45595['trim']();return _0x317a42['startsWith']('```html')?_0x317a42['endsWith']('```')?_0x317a42['substring'](0x7,_0x317a42['length']-0x3):_0x317a42['substring'](0x7):_0xb45595;}}const _={'REPLACE':'replace','INSERT':'insert'};class br extends _0x19c936{constructor(_0x1f63a9){super(_0x1f63a9),this['set']('isVisible',!0x1),this['set']('mainAction',_['REPLACE']),this['replaceButton']=this['_createButton']('','ck-button-action'),this['replaceButton']['bind']('label')['to'](this,'mainAction',_0xa36fc1=>qn(_0x1f63a9,'AI_'+_0xa36fc1['toUpperCase']()+'_CONTENT')),this['insertButton']=this['_createButton'](qn(_0x1f63a9,'Insert\x20below')),this['tryAgainButton']=this['_createButton'](qn(_0x1f63a9,'Try\x20again')),this['stopButton']=this['_createButton'](qn(_0x1f63a9,'Stop'));const _0x5d27ec=this['bindTemplate'];this['extendTemplate']({'attributes':{'class':['ck-ai-form__toolbar',_0x5d27ec['if']('isVisible','ck-hidden',_0x377dfc=>!_0x377dfc)]}}),this['items']['addMany']([this['replaceButton'],this['insertButton'],this['tryAgainButton'],this['stopButton']]);}['_createButton'](_0x35455c,_0x3366a6){const _0x309c1e=new _0x177962(this['locale']);return _0x309c1e['set']({'label':_0x35455c,'class':_0x3366a6||'','isVisible':!0x0,'withText':!0x0}),_0x309c1e;}}class wr extends _0x4dc179{['contentFieldView'];['copyButtonView'];constructor(_0x58106d,_0x233320=''){super(_0x58106d),this['set']({'value':null,'isVisible':!0x1,'isProcessing':!0x1});const _0x486732=this['bindTemplate'];this['contentFieldView']=new Qn(_0x58106d,_0x233320),this['copyButtonView']=this['_createCopyButton'](),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-form__content-area-wrapper',_0x486732['if']('isVisible','ck-hidden',_0xf6e324=>!_0xf6e324)],'tabindex':'-1'},'children':[{'tag':'div','attributes':{'class':['ck','ck-ai-form__content-area',_0x486732['if']('isProcessing','ck-ai-form__content-area--processing')]},'children':[this['contentFieldView'],{'tag':'div','attributes':{'class':['ck','ck-ai-form__copy-button-wrapper']},'children':[this['copyButtonView']]}]}]});}['render'](){super['render'](),this['value']&&this['contentFieldView']['setContent'](this['value']);let _0x2592c9=!0x1;this['on']('change:value',(_0x49642a,_0x43ed7a,_0x4879c4)=>{const _0x3e4d0d=!this['contentFieldView']['element']['querySelector']('.ck-ai-form__loader');this['contentFieldView']['setContent'](_0x4879c4),this['isProcessing']&&_0x3e4d0d&&!_0x2592c9&&this['element']['scrollTo']({'top':this['element']['scrollHeight'],'behavior':'smooth'});}),this['on']('change:isProcessing',(_0x47f0ed,_0xd4f640,_0x34632f)=>{_0x2592c9=!0x1,_0x34632f?(this['value']=null,this['contentFieldView']['appendLoader']()):this['value']||this['contentFieldView']['setContent']('');}),this['listenTo'](this['element'],'wheel',()=>{_0x2592c9=!0x0;}),this['listenTo'](this['element'],'mousedown',()=>{_0x2592c9=!0x0;});}['focus'](){this['element']['focus']();}['_createCopyButton'](){const _0x7978ff=this['locale'],_0x18c6e7=new _0x177962(this['locale']),_0x1b48a4='ck-ai-form__copy-button';return _0x18c6e7['set']({'label':qn(_0x7978ff,'Copy'),'icon':_0x27287b,'class':_0x1b48a4,'tooltip':!0x0}),_0x18c6e7['bind']('isVisible')['to'](this,'value',_0x292f9e=>!!_0x292f9e),_0x18c6e7['bind']('isEnabled')['to'](this,'isProcessing',_0x9a29c5=>!_0x9a29c5),_0x18c6e7['on']('execute',()=>{this['_copyHTMLToClipboard'](this['contentFieldView']['element']),_0x18c6e7['icon']=_0x2de17e,_0x18c6e7['class']=_0x1b48a4+'\x20ck-ai-form__copy-button--copied',this['focus'](),setTimeout(()=>{_0x18c6e7['icon']=_0x27287b,_0x18c6e7['class']=_0x1b48a4;},0x3e8);}),_0x18c6e7;}['_copyHTMLToClipboard'](_0x241a15){const {window:_0x3a5f6f,document:_0x188de3}=_0xbe8f2c;if(_0x3a5f6f['ClipboardItem']){const {Blob:_0x3b631a,ClipboardItem:_0x534d9e}=_0x3a5f6f,_0x661337=[new _0x534d9e({'text/html':new _0x3b631a([_0x241a15['innerHTML']],{'type':'text/html'}),'text/plain':new _0x3b631a([_0x241a15['textContent']||''],{'type':'text/plain'})})];navigator['clipboard']['write'](_0x661337);}else{const _0x53c138=_0x188de3['createElement']('div');_0x53c138['style']['position']='absolute',_0x53c138['style']['left']='-9999px',_0x53c138['innerHTML']='<span>[</span>'+_0x241a15['innerHTML']+'<span>]</span>',_0x188de3['body']['appendChild'](_0x53c138);const _0xbfe851=_0x188de3['createRange']();_0xbfe851['setStartAfter'](_0x53c138['firstElementChild']),_0xbfe851['setEndBefore'](_0x53c138['lastElementChild']);const _0x1552d0=_0x3a5f6f['getSelection']();_0x1552d0['removeAllRanges'](),_0x1552d0['addRange'](_0xbfe851),_0x188de3['execCommand']('copy'),_0x53c138['remove']();}}}class Qn extends _0x4dc179{constructor(_0x47b6d4,_0x13e97e=''){super(_0x47b6d4),this['loaderView']=this['_createLoader'](),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-content',_0x13e97e,'ck-reset_all-excluded','ck-ai-form__content-field']}});}['setContent'](_0xcd10e1){this['element']['innerHTML']=_0xcd10e1;}['appendLoader'](){this['element']['appendChild'](this['loaderView']['element']);}['_createLoader'](){const _0x3fdce6=new _0x4dc179(),_0xc76ace=this['locale'],_0x4efcb9=new _0x1e6810();return _0x4efcb9['isVisible']=!0x0,_0x3fdce6['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-form__loader']},'children':[_0x4efcb9,{'text':qn(_0xc76ace,'AI\x20is\x20writing...')}]}),_0x3fdce6['render'](),_0x3fdce6;}}class yr extends _0x4dc179{constructor(_0x1e24df,_0x1b1516=''){super(_0x1e24df);const _0x203ac4=new _0x4c8e3c(),_0x37c4ac=this['bindTemplate'];this['set']('text',_0x1b1516),_0x203ac4['content']=_0x1816ee,this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-form__error']},'children':[_0x203ac4,{'text':_0x37c4ac['to']('text')}]});}}class gr extends _0xb99b9a{['submitButtonView'];['showHistoryButtonView'];constructor(_0x504ee9,_0x44eb30){super(_0x504ee9,_0x44eb30),this['queryView']['fieldView']['minRows']=0x1,this['queryView']['fieldView']['maxRows']=0x3,this['submitButtonView']=this['_createSubmitButton'](),this['showHistoryButtonView']=this['_createShowHistoryButton'](),this['focusableChildren']['add'](this['showHistoryButtonView'],0x1),this['focusableChildren']['add'](this['submitButtonView']);}['render'](){super['render'](),this['queryView']['fieldWrapperChildren']['add'](this['showHistoryButtonView']),this['children']['add'](this['submitButtonView']),this['keystrokes']['set']('enter',(_0x4fea75,_0x5cd8f3)=>{_0x4fea75['target']==this['queryView']['fieldView']['element']&&(this['submit'](),_0x5cd8f3());});}['_createSubmitButton'](){const _0x3f5f99=new _0x177962(this['locale']),_0x1e1650=this['locale'];return _0x3f5f99['set']({'icon':_0x1e29b0,'label':qn(_0x1e1650,'Submit'),'isVisible':!0x0,'tooltip':!0x0,'class':'ck-ai-form__submit'}),_0x3f5f99['on']('execute',()=>{this['submit']();}),_0x3f5f99['bind']('isEnabled')['to'](this['queryView']['fieldView'],'isEmpty',this,'isEnabled',(_0x99ca1a,_0x1e9a05)=>!_0x99ca1a&&_0x1e9a05),_0x3f5f99;}['_createShowHistoryButton'](){const _0x132a05=new _0x177962(this['locale']),_0x370ebc=this['resultsView'],_0x9b231f=this['locale'];_0x132a05['set']({'label':qn(_0x9b231f,'History'),'withText':!0x1,'icon':Ht,'tooltip':!0x0,'tooltipPosition':'sw','class':'ck-ai-form__toggle-history'}),_0x132a05['bind']('isOn')['to'](_0x370ebc,'isVisible'),_0x132a05['bind']('isEnabled')['to'](this,'isEnabled'),_0x132a05['on']('execute',()=>{_0x370ebc['isVisible']=!_0x370ebc['isVisible'],_0x370ebc['isVisible']?this['filteredView']['focus']():this['focus']();});const _0x44df00=()=>{_0xbe8f2c['window']['requestAnimationFrame'](()=>{if(_0x5c2483(this['element'])){const _0x1ac756=new _0x4f725a(this['queryView']['fieldView']['element']),_0x1d3a19=_0x1ac756['width'],_0x130ec1='rtl'===_0x9b231f['uiLanguageDirection']?'left':'right';_0x1ac756['excludeScrollbarsAndBorders'](),_0x132a05['element']['style'][_0x130ec1]=_0x1d3a19-_0x1ac756['width']+0x1+'px';}});};return this['queryView']['fieldView']['on']('update',_0x44df00),this['on']('render',_0x44df00),_0x132a05;}['submit'](){const _0x1daf13=this['queryView']['fieldView']['element']['value'];this['fire']('submit',_0x1daf13);}['focus'](_0x433feb){-0x1===_0x433feb?this['focusCycler']['focusLast']():this['focusCycler']['focusFirst']();}}class Er extends _0x3c987b{['historyGroupView'];['clearHistoryButton'];constructor(_0x5ac609){super(_0x5ac609),this['clearHistoryButton']=this['_createClearHistoryButton'](),this['historyGroupView']=new _0x1517bd(),this['historyGroupView']['children']['add'](this['clearHistoryButton'],0x1),this['historyGroupView']['label']=qn(_0x5ac609,'Prompt\x20history'),this['historyGroupView']['items']['delegate']('execute')['to'](this),this['items']['add'](this['historyGroupView']);}['filter'](){let _0x1ce4d8=0x0;for(const _0x297a96 of this['items'])_0x1ce4d8+=_0x297a96['items']['length'];return{'resultsCount':_0x1ce4d8,'totalItemsCount':_0x1ce4d8};}['_createClearHistoryButton'](){const _0x421409=this['locale'],_0x56d2ef=new _0x177962(this['locale']);return _0x56d2ef['set']({'label':'('+qn(_0x421409,'Clear')+')','withText':!0x0}),_0x56d2ef['on']('execute',()=>this['fire']('clearHistory')),_0x56d2ef;}}class vr extends _0x2f4a78{constructor(_0x5758ef){super();const _0x5bb3a2=new _0x310285(),_0x412994=new _0x177962(this['locale'],_0x5bb3a2);this['children']['add'](_0x412994),_0x412994['set']({'label':_0x5758ef['prompt'],'withText':!0x0}),_0x412994['on']('execute',()=>{this['fire']('execute',{'value':_0x4077b9(_0x5758ef['prompt'])});});}}const ao='CKEditor/AIFormView/PromptHistory';class Ar extends _0x381bb7{constructor(){super(),this['_loadFromSessionStorage'](),this['on']('add',(_0x1676cf,_0x17ffa6)=>{const _0x2a3258=So(_0x17ffa6['prompt']);for(const _0x5f3e99 of this)if(_0x5f3e99!=_0x17ffa6&&So(_0x5f3e99['prompt'])===_0x2a3258){this['remove'](_0x5f3e99);break;}this['length']>0x14&&this['remove'](this['last']),this['_saveToSessionStorage']();}),this['on']('remove',()=>{this['_saveToSessionStorage']();});}['_loadFromSessionStorage'](){const _0x5108be=sessionStorage['getItem'](ao)||'[]';this['addMany'](JSON['parse'](_0x5108be));}['_saveToSessionStorage'](){sessionStorage['setItem'](ao,JSON['stringify'](this['map'](_0x308ade=>_0x308ade)));}}function So(_0x1e4274){return _0x1e4274['toLowerCase']()['trim']();}class k extends _0x4dc179{['focusTracker'];['keystrokes'];['contentArea'];['toolbar'];['promptView'];['errorView'];['_focusables'];['focusCycler'];['_promptHistory'];constructor(_0x4b8a8d,_0x1edb69,_0x18acde=''){super(_0x4b8a8d),this['set']('isEnabled',!0x0),this['set']('isProcessing',!0x1),this['set']('prompt',''),this['set']('value',''),this['set']('isError',!0x1),this['set']('mainAction',_['REPLACE']),this['_promptHistory']=new Ar(),this['errorView']=new yr(_0x4b8a8d),this['contentArea']=new wr(_0x4b8a8d,_0x18acde),this['contentArea']['bind']('isProcessing')['to'](this),this['contentArea']['bind']('value')['to'](this),this['toolbar']=this['_createToolbar'](),this['toolbar']['bind']('mainAction')['to'](this),this['promptView']=this['_createPromptView'](),this['focusTracker']=new _0x9668c0(),this['keystrokes']=new _0x514fee(),this['_focusables']=this['createCollection']([this['contentArea'],this['contentArea']['copyButtonView'],this['toolbar'],this['promptView']]),this['focusCycler']=new _0x3c97a0({'focusables':this['_focusables'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'actions':{'focusPrevious':'shift\x20+\x20tab','focusNext':'tab'}}),this['focusCycler']['chain'](this['promptView']['focusCycler']),this['promptView']['queryView']['fieldView']['bind']('value')['to'](this,'prompt');const _0x3c8174=this['bindTemplate'];this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-form',_0x1edb69],'tabindex':'-1'},'children':[{'tag':'div','attributes':{'class':['ck','ck-ai-form-content']},'children':[{'tag':'div','attributes':{'class':[_0x3c8174['if']('isError','ck-hidden',_0x2eb6dd=>!_0x2eb6dd)]},'children':[this['errorView']]},this['contentArea'],this['toolbar'],this['promptView']]}]});}['render'](){super['render'](),this['focusTracker']['add'](this['contentArea']['element']),this['focusTracker']['add'](this['contentArea']['copyButtonView']['element']),this['focusTracker']['add'](this['toolbar']['element']),this['focusTracker']['add'](this['promptView']['element']),this['keystrokes']['listenTo'](this['element']);}['focus'](_0xcbc8d5=0x1){-0x1===_0xcbc8d5?this['focusCycler']['focusLast']():this['focusCycler']['focusFirst']();}['reset'](){this['prompt']='',this['value']='',this['isError']=!0x1,this['promptView']['reset'](),this['contentArea']['isVisible']=!0x1,this['toolbar']['isVisible']=!0x1;}['_createPromptView'](){const _0x13c41b=this['locale'],_0x138a05=new gr(_0x13c41b,{'queryView':{'label':qn(_0x13c41b,'Ask\x20AI\x20to\x20edit\x20or\x20generate'),'creator':_0x175e45,'showIcon':!0x1,'showResetButton':!0x1},'infoView':{'text':{'noSearchableItems':{'primary':qn(_0x13c41b,'Empty\x20history'),'secondary':qn(_0x13c41b,'Ask\x20AI\x20and\x20your\x20prompts\x20will\x20be\x20listed\x20here\x20for\x20you\x20to\x20use\x20later.')}}},'filteredView':this['_createHistoryView'](),'queryMinChars':0x1/0x0,'resetOnBlur':!0x1});return _0x138a05['bind']('isEnabled')['to'](this,'isEnabled',this,'isProcessing',(_0xbe9dbe,_0x1364c1)=>_0xbe9dbe&&!_0x1364c1),this['listenTo'](_0x138a05,'submit',(_0x1244d8,_0x14f840)=>{this['prompt']=_0x14f840;const _0x1dc4a1=_0x190095(_0x14f840);this['fire']('submitPrompt',_0x1dc4a1),_0x14f840['trim']()&&this['_promptHistory']['add']({'prompt':_0x1dc4a1},0x0);},{'priority':'high'}),_0x138a05;}['_createHistoryView'](){const _0xe38ac8=new Er(this['locale']);return _0xe38ac8['historyGroupView']['items']['bindTo'](this['_promptHistory'])['as'](vr),_0xe38ac8['on']('clearHistory',()=>{this['_promptHistory']['clear'](),this['promptView']['search'](''),this['promptView']['focus']();}),_0xe38ac8;}['_createToolbar'](){const _0x77b54f=new br(this['locale']);return _0x77b54f['replaceButton']['bind']('isEnabled')['to'](this,'isEnabled',this,'isProcessing',this,'value',(_0x54135d,_0x51740e,_0x163c00)=>_0x54135d&&!_0x51740e&&!!_0x163c00),_0x77b54f['replaceButton']['delegate']('execute')['to'](this,'replaceContent'),_0x77b54f['insertButton']['bind']('isEnabled')['to'](this,'isEnabled',this,'isProcessing',this,'value',(_0x107d75,_0x4b218e,_0x5bce9a)=>_0x107d75&&!_0x4b218e&&!!_0x5bce9a),_0x77b54f['insertButton']['delegate']('execute')['to'](this,'insertContentBelow'),_0x77b54f['tryAgainButton']['bind']('isEnabled')['to'](this,'isEnabled',this,'isProcessing',(_0x3a27f8,_0x52fbe6)=>_0x3a27f8&&!_0x52fbe6),_0x77b54f['tryAgainButton']['delegate']('execute')['to'](this,'tryAgainEvent'),_0x77b54f['stopButton']['bind']('isEnabled')['to'](this,'isProcessing'),_0x77b54f['stopButton']['delegate']('execute')['to'](this,'stopProcessing'),_0x77b54f;}['startProcessing'](){this['value']='',this['isError']=!0x1,this['isProcessing']=!0x0,this['contentArea']['isVisible']=!0x0,this['toolbar']['isVisible']=!0x0,this['contentArea']['focus']();}['finishProcessing'](){const _0x52f0f6=this['locale'];this['isProcessing']=!0x1,this['prompt']='',this['promptView']['reset'](),this['value']&&(this['promptView']['queryView']['label']=qn(_0x52f0f6,'Ask\x20AI\x20to\x20improve\x20generated\x20text'));}['handleError'](_0x405a88){const _0x5e9438=this['locale'];this['finishProcessing'](),this['isError']=!0x0,this['errorView']['text']=_0x405a88||qn(_0x5e9438,'AI_ERROR_FAILED'),this['value']||(this['contentArea']['isVisible']=!0x1);}}const w=globalThis['DataTransfer'];class n extends _0x3af82b{['licenseKey'];['_licenseKeyCheckInterval'];['_dialog'];['_formView'];['_aiAdapter'];['_aiAssistantController'];['_uiCssClasses']='';static get['pluginName'](){return'AIAssistantUI';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}static get['requires'](){return[_0x469bef,a,x,_0x2a84b1];}constructor(_0x19275e){super(_0x19275e),_0x19275e['config']['define']('ai.assistant.disabledElements',['media','rawHtml','tableOfContents']),_0x19275e['config']['define']('ai.assistant.contentAreaCssClass',''),_0x19275e['config']['define']('ai.assistant.useTheme',!0x0),this['_uiCssClasses']='ck-ai-assistant-ui'+(_0x19275e['config']['get']('ai.assistant.useTheme')?'\x20ck-ai-assistant-ui_theme':'');}['init'](){const {editor:_0x14ab70}=this;this['_aiAdapter']=_0x14ab70['plugins']['get'](x),this['_dialog']=_0x14ab70['plugins']['get'](_0x2a84b1),this['_formView']=null,this['_commandDefinitions']=this['_getResolvedCommandsDefinitions']();const _0x496d0a=new E(_0x14ab70,Array['from'](this['_commandDefinitions']['values']()));_0x14ab70['commands']['add']('showAIAssistant',_0x496d0a),_0x14ab70['ui']['componentFactory']['add']('aiCommands',_0x3a5db1=>{const _0x4fcbfb=_0x1353df(_0x3a5db1);return _0x4fcbfb['set']({'class':'ck-ai-commands-dropdown\x20'+this['_uiCssClasses']}),_0x4fcbfb['buttonView']['set']({'label':qn(_0x3a5db1,'AI\x20Commands'),'icon':_0x24def2,'tooltip':!0x0}),_0x4fcbfb['on']('execute',_0x15ccb5=>this['_onExecute'](_0x15ccb5['source']['id'])),_0x593453(_0x4fcbfb,_0x14ab70['ui']['view']['body'],function(_0x35dc37){const _0x3f37aa=o(_0x35dc37['config']['get']('ai.assistant.commands'),_0x35dc37['locale']),_0x151727=U(_0x35dc37,_0x3f37aa)['filter'](_0x3cc1b4=>_0x3cc1b4['commands']['length']);if(0x1===_0x151727['length'])return U(_0x35dc37,_0x151727[0x0]['commands'])['map'](_0x2eaaf6=>({'id':_0x2eaaf6['id'],'label':_0x2eaaf6['label']}));return _0x151727['map'](_0x42f3db=>{const {groupId:_0x25a64a,groupLabel:_0x3c2a4d,commands:_0x39ed33}=_0x42f3db,_0x50a772=U(_0x35dc37,_0x39ed33)['map'](_0x2da0bd=>({'id':_0x2da0bd['id'],'label':_0x2da0bd['label']}));return{'id':_0x25a64a,'menu':_0x3c2a4d||_0x25a64a,'children':_0x50a772};});}(_0x14ab70),{'ariaLabel':qn(_0x3a5db1,'AI\x20Commands')}),_0x4fcbfb['menuView']['menuPanelClass']='ck-ai-commands-dropdown\x20'+this['_uiCssClasses'],_0x496d0a['on']('change:enabledCommandsIds',_0x22f879),_0x4fcbfb['menuView']['once']('render',_0x22f879),_0x4fcbfb;function _0x22f879(){_0x4fcbfb['isEnabled']=_0x496d0a['enabledCommandsIds']['length']>0x0;for(const _0x1364f0 of _0x4fcbfb['menuView']['buttons'])_0x1364f0['isEnabled']=_0x496d0a['enabledCommandsIds']['includes'](_0x1364f0['id']);}}),_0x14ab70['ui']['componentFactory']['add']('menuBar:aiCommands',_0x566c42=>{const _0xd8553a=new _0x2f50df(_0x566c42);_0xd8553a['buttonView']['set']({'label':qn(_0x566c42,'AI\x20Commands'),'icon':_0x24def2}),_0xd8553a['bind']('isEnabled')['to'](_0x496d0a,'enabledCommandsIds',_0x5452a5=>_0x5452a5['length']>0x0);const _0x9c3dbd=o(_0x14ab70['config']['get']('ai.assistant.commands'),_0x566c42);return this['_populateMenuBarMenu'](_0x496d0a,_0xd8553a,_0x9c3dbd,_0x3ebe86=>this['_onExecute'](_0x3ebe86)),_0xd8553a;}),_0x14ab70['ui']['componentFactory']['add']('aiAssistant',()=>{const _0x11e7cf=this['_createAIAssistantUIButton'](_0x177962);return _0x11e7cf['set']({'tooltip':!0x0,'class':'ck-ai-assistant-button\x20'+this['_uiCssClasses']}),_0x11e7cf;}),_0x14ab70['ui']['componentFactory']['add']('menuBar:aiAssistant',()=>{const _0x2f7737=this['_createAIAssistantUIButton'](_0x3b859b);return _0x2f7737['set']({'role':'menuitemcheckbox'}),_0x2f7737;}),this['licenseKey']=this['editor']['config']['get']('licenseKey');const _0x304966=this['editor'];this['_licenseKeyCheckInterval']=setInterval(()=>{let _0x576533;for(const _0x1f881f in _0x304966){const _0x414971=_0x1f881f,_0x573995=_0x304966[_0x414971];if('aiLicenseKeyValid'==_0x573995||'aiLicenseKeyInvalid'==_0x573995||'aiLicenseKeyExpired'==_0x573995||'aiLicenseKeyDomainLimit'==_0x573995||'aiLicenseKeyNotAllowed'==_0x573995||'aiLicenseKeyEvaluationLimit'==_0x573995||'aiLicenseKeyTrialLimit'==_0x573995||'aiLicenseKeyUsageLimit'==_0x573995){delete _0x304966[_0x414971],_0x576533=_0x573995,clearInterval(this['_licenseKeyCheckInterval']),this['_licenseKeyCheckInterval']=void 0x0;break;}}'aiLicenseKeyInvalid'==_0x576533&&_0x304966['_showLicenseError']('invalid'),'aiLicenseKeyExpired'==_0x576533&&_0x304966['_showLicenseError']('expired'),'aiLicenseKeyDomainLimit'==_0x576533&&_0x304966['_showLicenseError']('domainLimit'),'aiLicenseKeyNotAllowed'==_0x576533&&_0x304966['_showLicenseError']('featureNotAllowed','AIAssistant'),'aiLicenseKeyEvaluationLimit'==_0x576533&&_0x304966['_showLicenseError']('evaluationLimit'),'aiLicenseKeyTrialLimit'==_0x576533&&_0x304966['_showLicenseError']('trialLimit'),'aiLicenseKeyUsageLimit'==_0x576533&&_0x304966['_showLicenseError']('usageLimit');},0x3e8);}['destroy'](){super['destroy'](),this['_licenseKeyCheckInterval']&&clearInterval(this['_licenseKeyCheckInterval']);}['showUI'](_0x249f5f='',_0x331733='',_0x4d3f8e='custom'){const _0x508d0b=this['editor'],_0x520632=_0x508d0b['editing']['view'],_0x30e38d=_0x508d0b['plugins']['get'](a),_0x1cfaa5=_0x508d0b['plugins']['get'](_0x469bef);_0x30e38d['showFakeVisualSelection']();const _0x396ca0=new w(),_0x48426c=new ClipboardEvent('copy',{'clipboardData':_0x396ca0}),_0x2b65b1=new _0x548f9e(_0x396ca0),_0x21f7c2=new _0x37438d(_0x520632,_0x48426c,{'dataTransfer':_0x2b65b1});_0x1cfaa5['_forceMarkersCopy']('comment',()=>{_0x520632['document']['fire']('copy',_0x21f7c2);}),this['_formView']||(this['_initView'](),this['_aiAssistantController']=new j(_0x508d0b,this['_aiAdapter']['textAdapter'],this['_formView']));let _0x2a5479=_0x2b65b1['getData']('text/html');const _0x39d59f=_0x508d0b['model']['document']['selection'],_0x1ce629=Array['from'](_0x39d59f['getRanges']());0x1===_0x1ce629['length']&&_0x1ce629[0x0]['isFlat']&&!_0x39d59f['getSelectedElement']()&&''!==_0x2a5479['replace'](/&nbsp;/g,'')['trim']()&&(_0x2a5479='<p>'+_0x2a5479+'</p>'),this['_aiAssistantController']['updateView']({'actionId':_0x4d3f8e,'query':_0x249f5f,'htmlContent':_0x2a5479,'label':_0x331733,'mainActionLabel':_[_0x508d0b['model']['document']['selection']['isCollapsed']?'INSERT':'REPLACE']}),'aiAssistant'!==this['_dialog']['id']?this['_dialog']['show']({'id':'aiAssistant','icon':_0x4ef002,'title':qn(this['editor']['locale'],'AI\x20Assistant'),'content':this['_formView'],'position':_0x31ad8f['EDITOR_TOP_SIDE'],'onShow':()=>{this['_formView']['focus']();},'onHide':()=>{this['_aiAssistantController']['reset'](),_0x30e38d['hideFakeVisualSelection']();}}):this['_dialog']['view']['wasMoved']||this['_dialog']['view']['updatePosition']();}['hideUI'](){this['_dialog']['hide']();}['_getResolvedCommandsDefinitions'](){const _0x2c3867=new Map(),_0x17c767=o(this['editor']['config']['get']('ai.assistant.commands'),this['editor']['locale']);for(const _0x5a8423 of _0x17c767)for(const _0x1bc724 of _0x5a8423['commands'])_0x2c3867['set'](_0x1bc724['id'],{..._0x1bc724,'groupId':_0x5a8423['groupId'],'groupLabel':_0x5a8423['groupLabel']||_0x5a8423['groupId']});return _0x2c3867;}['_createAIAssistantUIButton'](_0x673d7){const _0x1c0b36=this['editor'],_0x20530c=_0x1c0b36['commands']['get']('showAIAssistant'),_0x293ea8=new _0x673d7(_0x1c0b36['locale']);return _0x293ea8['set']({'label':qn(_0x1c0b36['locale'],'AI\x20Assistant'),'icon':_0x4ef002,'isToggleable':!0x0}),_0x293ea8['bind']('isEnabled')['to'](_0x20530c),_0x293ea8['bind']('isOn')['to'](this['_dialog'],'id',_0xd00ea3=>'aiAssistant'===_0xd00ea3),this['listenTo'](_0x293ea8,'execute',()=>{_0x293ea8['isOn']?this['hideUI']():_0x20530c['execute']();}),_0x293ea8;}['_initView'](){const _0x50302f=this['editor']['plugins']['get'](a);this['_formView']=new k(this['editor']['locale'],this['_uiCssClasses'],this['editor']['config']['get']('ai.assistant.contentAreaCssClass')),this['_formView']['on']('change:value',()=>{this['_dialog']['view']['wasMoved']||this['_dialog']['view']['updatePosition']();}),this['_formView']['promptView']['queryView']['fieldView']['on']('update',()=>{this['_dialog']['view']['wasMoved']||this['_dialog']['view']['updatePosition']();}),this['listenTo'](this['_formView'],'replaceContent',()=>{_0x50302f['insertContent'](this['_aiAssistantController']['currentContext']),this['hideUI']();}),this['listenTo'](this['_formView'],'insertContentBelow',()=>{_0x50302f['insertContentBelow'](this['_aiAssistantController']['currentContext']),this['hideUI']();}),this['_initAriaAiStatusChangeAnnouncements']();}['_initAriaAiStatusChangeAnnouncements'](){const {locale:_0x2a6ff4,ui:{ariaLiveAnnouncer:_0x691da2}}=this['editor'];this['_formView']['contentArea']['on']('change:isProcessing',(_0x4495d3,_0x28298a,_0x21fb95)=>{const _0x11c6ee=this['_aiAssistantController']['currentContext'];_0x21fb95?_0x691da2['announce'](qn(_0x2a6ff4,'AI\x20is\x20writing')):_0x11c6ee&&_0x691da2['announce'](qn(_0x2a6ff4,'Generated\x20content:\x20%0',_0x11c6ee),{'politeness':'polite','isUnsafeHTML':!0x0});}),this['_formView']['on']('change:isError',(_0x2063cf,_0x3f887e,_0x317cf0)=>{if(_0x317cf0){const _0xa0f42=this['_formView']['errorView']['text'];_0x691da2['announce'](qn(_0x2a6ff4,'Error\x20during\x20AI\x20content\x20generation:\x20%0',_0xa0f42));}});}['_onExecute'](_0x344536){const _0x5ddc56=this['_commandDefinitions']['get'](_0x344536),_0x3f335b=this['editor'],_0x28ce24=_0x3f335b['model']['document']['selection'],_0x506320=_0x3f335b['commands']['get']('showAIAssistant'),_0x52470e=_0x3f335b['plugins']['get'](a),_0x59308f=''+(_0x5ddc56['groupId']!==K?_0x5ddc56['groupLabel']+':\x20':'')+_0x5ddc56['label'];if(!0x1!==_0x5ddc56['requiresContent']&&_0x28ce24['isCollapsed']){const _0x406ba1=_0x15ebca(_0x28ce24['getSelectedBlocks']())||_0x3f335b['model']['schema']['getLimitElement'](_0x28ce24);_0x3f335b['model']['change'](_0x59cf5f=>{_0x59cf5f['setSelection'](_0x406ba1,'in');});}_0x52470e['showFakeVisualSelection'](),_0x506320['execute'](_0x5ddc56['prompt'],_0x59308f,'command:'+_0x344536);}['_populateMenuBarMenu'](_0x3b8fc1,_0x10e94c,_0x351322,_0x3803c8){const _0x203a41=this['editor'],_0x102ee5=_0x203a41['locale'],_0x431a07=new _0x1595b4(_0x102ee5),_0x39fd36=U(_0x203a41,_0x351322)['filter'](_0x4c790e=>_0x4c790e['commands']['length']);0x1===_0x39fd36['length']?this['_getMenuBarGroupButtons']({'command':_0x3b8fc1,'commands':_0x39fd36[0x0]['commands'],'parentMenuView':_0x10e94c,'onExecute':_0x3803c8})['forEach'](_0x360b59=>_0x431a07['items']['add'](_0x360b59)):_0x39fd36['forEach'](({groupId:_0x5c7891,groupLabel:_0x484554,commands:_0x159081})=>{const _0x3e28f0=new _0x4d7dd0(_0x102ee5,_0x10e94c),_0x453146=new _0x2f50df(_0x102ee5),_0x277bea=new _0x1595b4(_0x102ee5),_0x4bfe4c=this['_getMenuBarGroupButtons']({'command':_0x3b8fc1,'commands':_0x159081,'parentMenuView':_0x453146,'onExecute':_0x3803c8});_0x453146['buttonView']['set']({'label':_0x484554||_0x5c7891}),_0x453146['delegate']('execute')['to'](_0x10e94c),_0x277bea['items']['addMany'](_0x4bfe4c),_0x453146['panelView']['children']['add'](_0x277bea),_0x3e28f0['children']['add'](_0x453146),_0x431a07['items']['add'](_0x3e28f0);}),_0x10e94c['panelView']['children']['add'](_0x431a07);}['_getMenuBarGroupButtons']({command:_0x5d8a1b,commands:_0x53c53f,parentMenuView:_0x24c3bc,onExecute:_0x12fc59}){const _0xf96f9b=this['editor'],_0x46755f=_0xf96f9b['locale'];return U(_0xf96f9b,_0x53c53f)['map'](_0x33f36a=>{const _0x3e56c9=new _0x4d7dd0(_0x46755f,_0x24c3bc),_0x31305f=new _0x3b859b(_0x46755f);return _0x31305f['set']({'label':_0x33f36a['label']}),_0x31305f['delegate']('execute')['to'](_0x24c3bc),_0x31305f['on']('execute',()=>_0x12fc59(_0x33f36a['id'])),_0x31305f['bind']('isEnabled')['to'](_0x5d8a1b,'enabledCommandsIds',_0x45d157=>_0x45d157['includes'](_0x33f36a['id'])),_0x3e56c9['children']['add'](_0x31305f),_0x3e56c9;});}}function T(_0x16db78,_0x4bc510){return void 0x0!==_0x16db78['order']&&void 0x0===_0x4bc510['order']?0x1:void 0x0===_0x16db78['order']&&void 0x0!==_0x4bc510['order']?-0x1:void 0x0!==_0x16db78['order']&&void 0x0!==_0x4bc510['order']?_0x16db78['order']-_0x4bc510['order']:0x0;}function U(_0x402be0,_0x1dfb84){_0x1dfb84['sort'](T);const _0x337f34={},_0x418841=[];for(const _0x4de14a of _0x1dfb84)if(void 0x0!==_0x4de14a['order']){if(_0x4de14a['order']in _0x337f34)throw new _0x38f49c('ai-commands-config-order-collision',_0x402be0,{'conflictingDefinitions':[_0x4de14a,_0x337f34[_0x4de14a['order']]]});_0x337f34[_0x4de14a['order']]=_0x4de14a,_0x418841['splice'](_0x4de14a['order'],0x0,_0x4de14a);}else _0x418841['push'](_0x4de14a);return _0x418841;}class Xn extends _0x3af82b{static get['requires'](){return[n,a];}static get['pluginName'](){return'AIAssistant';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x2bd0bf){super(_0x2bd0bf);const _0x5ac973=_0x2bd0bf['config'],_0x30b3d6=_0x2bd0bf['locale'];_0x5ac973['define']('ai.assistant.preserveComments',!0x0),_0x5ac973['define']('ai.assistant.commands',zn(_0x30b3d6)),_0x5ac973['define']('ai.assistant.extraCommandGroups',[]),_0x5ac973['define']('ai.assistant.removeCommands',[]);let _0x30324d=o(_0x5ac973['get']('ai.assistant.commands'),_0x30b3d6);const _0x382f60=_0x5ac973['get']('ai.assistant.extraCommandGroups'),_0x40e167=_0x5ac973['get']('ai.assistant.removeCommands');_0x382f60['forEach'](_0x5be81a=>{const _0x329050=_0x30324d['find'](_0x4712da=>_0x4712da['groupId']===_0x5be81a['groupId']);_0x329050?_0x329050['commands']=_0x329050['commands']['concat'](_0x5be81a['commands']):_0x30324d['push'](_0x5be81a);}),_0x30324d=_0x30324d['filter'](_0x5ee601=>!_0x40e167['includes'](_0x5ee601['groupId'])),_0x30324d['forEach'](_0x1e6740=>{_0x1e6740['commands']=_0x1e6740['commands']['filter'](_0xd1467f=>!_0x40e167['includes'](_0xd1467f['id']));}),_0x5ac973['set']('ai.assistant.commands',_0x30324d);}}function zn(_0x3b5c2d){return[{'groupId':'editOrReview','groupLabel':qn(_0x3b5c2d,'Edit\x20or\x20review'),'commands':[{'id':'improveWriting','label':qn(_0x3b5c2d,'Improve\x20writing'),'prompt':'Fix\x20spelling\x20mistakes,\x20use\x20proper\x20grammar\x20and\x20apply\x20good\x20writing\x20practices.\x20Do\x20not\x20lose\x20the\x20original\x20meaning.'},{'id':'makeShorter','label':qn(_0x3b5c2d,'Make\x20shorter'),'prompt':'Remove\x20any\x20repetitive,\x20redundant,\x20or\x20non-essential\x20writing\x20in\x20this\x20content\x20without\x20changing\x20the\x20meaning\x20or\x20losing\x20any\x20key\x20information.'},{'id':'makeLonger','label':qn(_0x3b5c2d,'Make\x20longer'),'prompt':'Improve\x20this\x20content\x20by\x20using\x20descriptive\x20language\x20and\x20inserting\x20more\x20information\x20and\x20more\x20detailed\x20explanations.'},{'id':'simplifyLanguage','label':qn(_0x3b5c2d,'Simplify\x20language'),'prompt':'Simplify\x20the\x20writing\x20style\x20of\x20this\x20content\x20and\x20reduce\x20the\x20complexity,\x20so\x20that\x20the\x20content\x20is\x20easy\x20to\x20understand.'}]},{'groupId':'generate','groupLabel':qn(_0x3b5c2d,'Generate\x20from\x20selection'),'commands':[{'id':'summarize','label':qn(_0x3b5c2d,'Summarize'),'prompt':'Summarize\x20this\x20content\x20into\x20one\x20paragraph\x20of\x20text.\x20Include\x20only\x20the\x20key\x20ideas\x20and\x20conclusions.\x20Keep\x20it\x20short.\x20Do\x20not\x20keep\x20original\x20text\x20formatting.'},{'id':'continue','label':qn(_0x3b5c2d,'Continue'),'prompt':'Start\x20with\x20the\x20provided\x20content\x20and\x20write\x20at\x20the\x20end\x20of\x20it\x20continuing\x20this\x20topic.\x20Keep\x20the\x20added\x20part\x20short.'}]},{'groupId':'changeTone','groupLabel':qn(_0x3b5c2d,'Change\x20tone'),'commands':[{'id':'professional','label':qn(_0x3b5c2d,'Professional'),'prompt':'Improve\x20using\x20polished,\x20formal,\x20and\x20respectful\x20language\x20to\x20convey\x20professional\x20expertise\x20and\x20competence.'},{'id':'casual','label':qn(_0x3b5c2d,'Casual'),'prompt':'Improve\x20using\x20casual,\x20informal\x20language\x20to\x20convey\x20a\x20casual\x20conversation\x20with\x20a\x20real\x20person.'},{'id':'direct','label':qn(_0x3b5c2d,'Direct'),'prompt':'Improve\x20using\x20direct\x20language,\x20using\x20only\x20the\x20essential\x20information.'},{'id':'confident','label':qn(_0x3b5c2d,'Confident'),'prompt':'Improve\x20using\x20compelling,\x20optimistic\x20language\x20to\x20convey\x20confidence\x20in\x20the\x20writing.'},{'id':'friendly','label':qn(_0x3b5c2d,'Friendly'),'prompt':'Improve\x20using\x20friendly,\x20comforting\x20language,\x20to\x20convey\x20understanding\x20and\x20empathy.'}]},{'groupId':'changeStyle','groupLabel':qn(_0x3b5c2d,'Change\x20style'),'commands':[{'id':'business','label':qn(_0x3b5c2d,'Business'),'prompt':'Rewrite\x20this\x20content\x20as\x20a\x20business\x20professional\x20with\x20formal\x20language.'},{'id':'legal','label':qn(_0x3b5c2d,'Legal'),'prompt':'Rewrite\x20this\x20content\x20as\x20a\x20legal\x20professional\x20using\x20valid\x20legal\x20terminology.'},{'id':'journalism','label':qn(_0x3b5c2d,'Journalism'),'prompt':'Rewrite\x20this\x20content\x20as\x20a\x20journalist\x20using\x20engaging\x20language\x20to\x20convey\x20the\x20importance\x20of\x20the\x20information.'},{'id':'poetic','label':qn(_0x3b5c2d,'Poetic'),'prompt':'Rewrite\x20this\x20content\x20as\x20a\x20poem\x20using\x20poetic\x20techniques\x20without\x20losing\x20the\x20original\x20meaning.'}]},{'groupId':'translate','groupLabel':qn(_0x3b5c2d,'Translate'),'commands':[{'id':'translateEnglish','label':qn(_0x3b5c2d,'English'),'prompt':'Translate\x20the\x20content\x20to\x20English\x20language.'},{'id':'translateSpanish','label':qn(_0x3b5c2d,'Spanish'),'prompt':'Translate\x20the\x20content\x20to\x20Spanish\x20language.'},{'id':'translatePortuguese','label':qn(_0x3b5c2d,'Portuguese'),'prompt':'Translate\x20the\x20content\x20to\x20Portuguese\x20language.'},{'id':'translateGerman','label':qn(_0x3b5c2d,'German'),'prompt':'Translate\x20the\x20content\x20to\x20German\x20language.'},{'id':'translateFrench','label':qn(_0x3b5c2d,'French'),'prompt':'Translate\x20the\x20content\x20to\x20French\x20language.'},{'id':'translateChinese','label':qn(_0x3b5c2d,'Simplified\x20Chinese'),'prompt':'Translate\x20the\x20content\x20to\x20Simplified\x20Chinese\x20language.'},{'id':'translateHindi','label':qn(_0x3b5c2d,'Hindi'),'prompt':'Translate\x20the\x20content\x20to\x20Hindi\x20language.'},{'id':'translateArabic','label':qn(_0x3b5c2d,'Arabic'),'prompt':'Translate\x20the\x20content\x20to\x20Arabic\x20language.'}]}];}class de extends _0x3af82b{['abortController'];static get['requires'](){return[x];}constructor(_0x2f7930){super(_0x2f7930),this['abortController']=new AbortController();}['init'](){this['editor']['plugins']['get'](x)['textAdapter']=this;}['abort'](){this['abortController']['signal']['aborted']||(this['abortController']['abort'](),this['abortController']=new AbortController());}async['makeRequest'](_0x5d58e5){return this['sendRequest'](_0x5d58e5)['catch'](_0x115f6e=>{if(_0x115f6e instanceof tr)return Promise['reject'](_0x115f6e);if('AbortError'==_0x115f6e['name'])return Promise['resolve']();throw console['error'](_0x115f6e),new _0x38f49c('aitextadapter-send-request-failed',null);});}async['_prepareRequestHeaders'](_0x5686e2,_0x177824){const _0x7227e1=this['editor']['locale'],_0xf0efaf={'Content-Type':'application/json'};if('object'==typeof _0x5686e2)Object['assign'](_0xf0efaf,_0x5686e2);else{if(_0x5686e2)try{const _0x2b3801=await _0x5686e2(_0x177824);Object['assign'](_0xf0efaf,_0x2b3801);}catch{return Promise['reject'](new tr(qn(_0x7227e1,'AI_ERROR_GET_HEADERS')));}}return _0xf0efaf;}async['_prepareRequestParameters'](_0x4204cd,_0x29be70){const _0x1aee2c=this['editor']['locale'];if('object'==typeof _0x4204cd)return _0x4204cd;try{return await _0x4204cd(_0x29be70);}catch{return Promise['reject'](new tr(qn(_0x1aee2c,'AI_ERROR_GET_PARAMETERS')));}}}class Jn extends de{['_apiUrl'];['_requestHeaders'];['_requestParameters'];static get['pluginName'](){return'OpenAITextAdapter';}constructor(_0x59b2bc){super(_0x59b2bc),_0x59b2bc['config']['define']('ai.assistant.adapter.openAI.apiUrl','https://api.openai.com/v1/chat/completions'),_0x59b2bc['config']['get']('ai.assistant.adapter.openAI.requestParameters')||_0x59b2bc['config']['define']('ai.assistant.adapter.openAI.requestParameters',{'model':'gpt-4o','temperature':0x1,'top_p':0x1,'stream':!0x0}),this['_apiUrl']=_0x59b2bc['config']['get']('ai.assistant.adapter.openAI.apiUrl'),this['_requestHeaders']=_0x59b2bc['config']['get']('ai.assistant.adapter.openAI.requestHeaders')||{},this['_requestParameters']=_0x59b2bc['config']['get']('ai.assistant.adapter.openAI.requestParameters');}async['sendRequest']({query:_0x387ffa,context:_0x1c1e24,onData:_0x3e396f,actionId:_0x36449b}){const _0x44151c=this['editor']['locale'],_0x5e0713=await this['prepareMessages'](_0x387ffa,_0x1c1e24,_0x36449b),_0x4876db=await this['_prepareRequestHeaders'](this['_requestHeaders'],_0x36449b),_0x2eab8a=await this['_prepareRequestParameters'](this['_requestParameters'],_0x36449b),_0x596cd2={'messages':_0x5e0713,..._0x2eab8a},_0x35fb68={'method':'POST','headers':_0x4876db,'body':JSON['stringify'](_0x596cd2),'signal':this['abortController']['signal']},_0x8672d2=await fetch(this['_apiUrl'],_0x35fb68);if(_0x8672d2['ok'])return _0x2eab8a['stream']?await this['_readStreamableResponse'](_0x8672d2,_0x3e396f):await this['_readStaticResponse'](_0x8672d2,_0x3e396f),Promise['resolve']();{const _0x534ed2=await _0x8672d2['text']();return _0x534ed2['includes']('context_length_exceeded')?Promise['reject'](new tr(qn(_0x44151c,'AI_ERROR_CONTEXT_LENGTH'))):_0x534ed2['includes']('Moderation')?Promise['reject'](new tr(qn(_0x44151c,'AI_ERROR_MODERATION'))):Promise['reject'](new Error(_0x534ed2));}}async['prepareMessages'](_0x562943,_0x2c42b4,_0x2df802){let _0xb9826c,_0x19c6ef;return _0x2c42b4?(_0xb9826c='Your\x20task\x20is\x20to\x20execute\x20the\x20instruction\x20using\x20the\x20provided\x20HTML\x20content.\x20Follow\x20the\x20instruction\x20closely.\x20Your\x20answer\x20must\x20be\x20a\x20properly\x20formatted\x20HTML\x20code.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.',_0x19c6ef='Instruction:\x0a'+_0x562943+'\x0aYou\x20must\x20keep\x20the\x20text\x20formatting.\x0a\x0aContent:\x0a'+_0x2c42b4):(_0xb9826c='Your\x20task\x20is\x20to\x20generate\x20HTML\x20content\x20accordingly\x20to\x20the\x20given\x20instruction.\x20Never\x20include\x20<img>\x20tag\x20in\x20your\x20response\x20even\x20if\x20asked\x20for.\x20Your\x20answer\x20must\x20be\x20a\x20well-structured\x20and\x20properly\x20formatted\x20HTML\x20code.\x20Answer\x20only\x20with\x20the\x20generated\x20HTML\x20content.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.',_0x19c6ef=_0x562943),[{'role':'system','content':_0xb9826c},{'role':'user','content':_0x19c6ef}];}async['_readStreamableResponse'](_0x3d985f,_0x82d5e5){const _0x2a724b=_0x3d985f['body']['getReader'](),_0x4e2f8f=new TextDecoder();let _0x5c9db3='',_0x189fa5='',_0x917305='',_0x4c2224=!0x1;for(;!_0x4c2224;){const {done:_0x489460,value:_0x557db3}=await _0x2a724b['read'](),_0x26b142=_0x5c9db3+_0x4e2f8f['decode'](_0x557db3);let _0x1e16e5='';_0x4c2224=_0x489460;try{_0x1e16e5=this['_cleanUpData'](_0x26b142),_0x5c9db3='';}catch{_0x5c9db3=_0x26b142;continue;}_0x189fa5+=_0x1e16e5,!_0x4c2224&&this['_isBufferIncomplete'](_0x189fa5)||_0x189fa5&&(_0x917305+=_0x189fa5,_0x189fa5='',_0x82d5e5(_0x917305));}return Promise['resolve']();}async['_readStaticResponse'](_0x14d558,_0x483a6a){return _0x483a6a((await _0x14d558['json']())['choices'][0x0]['message']['content']),Promise['resolve']();}['_isBufferIncomplete'](_0xa0f813){const _0x8f1aee=_0xa0f813['split']('<')['length']!==_0xa0f813['split']('>')['length'],_0x36f4d0=_0xa0f813['length']<0x1e;return _0x8f1aee&&_0x36f4d0;}['_cleanUpData'](_0x4d1fb0){return _0x4d1fb0['split'](/\n(?![^{]*\})/g)['map'](_0x47ca70=>_0x47ca70['replace']('data:\x20',''))['filter'](_0x4e752c=>_0x4e752c&&_0x4e752c['length']>0x0&&'[DONE]'!==_0x4e752c)['map'](_0x2e5c97=>{const {choices:_0xb543ed}=JSON['parse'](_0x2e5c97);if(_0xb543ed[0x0]?.['delta']?.['content'])return _0xb543ed[0x0]['delta']['content'];})['filter'](_0x5d8a04=>_0x5d8a04)['join']('');}}class Zn extends de{['_apiUrl'];['_requestHeaders'];['_bedrockClientConfig'];['_requestParameters'];static get['pluginName'](){return'AWSTextAdapter';}constructor(_0x5e24f6){super(_0x5e24f6),_0x5e24f6['config']['get']('ai.assistant.adapter.aws.requestParameters')||_0x5e24f6['config']['define']('ai.assistant.adapter.aws.requestParameters',{'model':'anthropic.claude-v2','max_tokens_to_sample':0x7d0,'temperature':0x1,'top_p':0x1,'top_k':0xfa,'anthropic_version':'bedrock-2023-05-31','stream':!0x0}),this['_apiUrl']=_0x5e24f6['config']['get']('ai.assistant.adapter.aws.apiUrl'),this['_bedrockClientConfig']=_0x5e24f6['config']['get']('ai.assistant.adapter.aws.bedrockClientConfig'),this['_requestHeaders']=_0x5e24f6['config']['get']('ai.assistant.adapter.aws.requestHeaders'),this['_requestParameters']=_0x5e24f6['config']['get']('ai.assistant.adapter.aws.requestParameters');}async['sendRequest']({query:_0x2c6fee,context:_0x5814b4,onData:_0x4bba6d,actionId:_0x4407a6}){const {model:_0x40b813,stream:_0x2c76a3,..._0x196542}=await this['_prepareRequestParameters'](this['_requestParameters'],_0x4407a6),_0x27db06={'prompt':await this['preparePrompt'](_0x2c6fee,_0x5814b4,_0x40b813,_0x4407a6),..._0x196542};this['_apiUrl']?await this['_processProxyRequest'](_0x27db06,_0x40b813,_0x2c76a3,_0x4bba6d,_0x4407a6):await this['_processAWSRequest'](_0x27db06,_0x40b813,_0x2c76a3,_0x4bba6d);}async['preparePrompt'](_0x45c594,_0x4ac944,_0x3ee863,_0x11fc9f){let _0x4bbea8,_0x15c759;return _0x4ac944?(_0x4bbea8='Your\x20task\x20is\x20to\x20execute\x20the\x20instruction\x20using\x20the\x20provided\x20HTML\x20content.\x20Follow\x20the\x20instruction\x20closely.\x20Your\x20answer\x20must\x20be\x20a\x20properly\x20formatted\x20HTML\x20code.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.',_0x15c759='Instruction:\x0a'+_0x45c594+'\x0aYou\x20must\x20keep\x20the\x20text\x20formatting.\x0a\x0aContent:\x0a'+_0x4ac944):(_0x4bbea8='Your\x20task\x20is\x20to\x20generate\x20HTML\x20content\x20accordingly\x20to\x20the\x20given\x20instruction.\x20Never\x20include\x20<img>\x20tag\x20in\x20your\x20response\x20even\x20if\x20asked\x20for.\x20Your\x20answer\x20must\x20be\x20a\x20well-structured\x20and\x20properly\x20formatted\x20HTML\x20code.\x20Answer\x20only\x20with\x20the\x20generated\x20HTML\x20content.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.',_0x15c759=_0x45c594),'meta.llama'==this['getModelFamily'](_0x3ee863)?'<<SYS>>\x0a'+_0x4bbea8+'\x0a<</SYS>>\x0a[INST]\x0a'+_0x15c759+'\x0a[/INST]':'Human:\x0a'+_0x4bbea8+'\x0a'+_0x15c759+'\x0a\x0aAssistant:';}['getModelFamily'](_0x3e75d4){if(/^anthropic\.claude/['test'](_0x3e75d4))return'anthropic.claude';if(/^ai21\.j2/['test'](_0x3e75d4))return'ai21.j2';if(/^cohere\.command/['test'](_0x3e75d4))return'cohere.command';if(/^meta\.llama/['test'](_0x3e75d4))return'meta.llama';throw new tr(qn(this['editor']['locale'],'AI_ERROR_UNSUPPORTED_MODEL',_0x3e75d4));}async['_processProxyRequest'](_0x5e1ef6,_0x4ffb09,_0x41f996,_0x7d6140,_0x20d823){const _0x46aff3={'method':'POST','headers':await this['_prepareRequestHeaders'](this['_requestHeaders'],_0x20d823),'body':JSON['stringify']({..._0x5e1ef6,'model':_0x4ffb09,'stream':_0x41f996}),'signal':this['abortController']['signal']},_0x4d2cf3=await fetch(this['_apiUrl'],_0x46aff3);_0x41f996?await this['_readStreamableResponse'](_0x4d2cf3,_0x4ffb09,_0x7d6140):await this['_readStaticResponse'](_0x4d2cf3,_0x4ffb09,_0x7d6140);}async['_processAWSRequest'](_0x300ba1,_0x1f1a3f,_0x7753b,_0x446137){const _0x331e3e=new _0x19ad9d(this['_bedrockClientConfig']),_0x2ece8c={'body':JSON['stringify'](_0x300ba1),'contentType':'application/json','accept':'application/json','modelId':_0x1f1a3f};let _0x3d35d2;if(_0x7753b){const _0x52b0c9=new _0x339243(_0x2ece8c);_0x3d35d2=await _0x331e3e['send'](_0x52b0c9,{'abortSignal':this['abortController']['signal']}),await this['_readAsyncIterableResponse'](_0x3d35d2,_0x1f1a3f,_0x446137);}else{const _0x5dff9d=new _0x573e5f(_0x2ece8c);_0x3d35d2=await _0x331e3e['send'](_0x5dff9d,{'abortSignal':this['abortController']['signal']}),await this['_readStaticResponse'](_0x3d35d2,_0x1f1a3f,_0x446137);}}async['_readAsyncIterableResponse'](_0xec8e99,_0x5ba252,_0x4b63a1){const _0x37b017=_0xec8e99['body'],_0x3b7fd8=new TextDecoder('utf-8');let _0xfb9621='';for await(const _0x446a94 of _0x37b017)if(_0x446a94['chunk']){const _0xb9afc1=_0x3b7fd8['decode'](_0x446a94['chunk']['bytes']),_0x13afc2=JSON['parse'](_0xb9afc1);_0xfb9621+=this['_getGeneratedText'](_0x13afc2,_0x5ba252),_0x4b63a1(_0xfb9621);}return Promise['resolve']();}async['_readStreamableResponse'](_0x607d26,_0x1091c1,_0x56ac3c){const _0x38499b=_0x607d26['body'],_0x2370f9=new TextDecoder('utf-8'),_0x11109d=_0x38499b['getReader']();let _0x201f57='',_0x5d8e23='',_0x2c23d=!0x1;for(;!_0x2c23d;){const {done:_0x272dcd,value:_0x37c2b8}=await _0x11109d['read']();if(_0x2c23d=_0x272dcd,_0x2c23d)break;const _0x20bbb4=(_0x201f57+_0x2370f9['decode'](_0x37c2b8))['split']('\x0a')['map'](_0x129c09=>{try{return _0x201f57='',JSON['parse'](_0x129c09);}catch{return _0x201f57=_0x129c09,null;}})['filter'](_0x2dbf42=>null!==_0x2dbf42);_0x20bbb4['length']&&(_0x5d8e23+=_0x20bbb4['map'](_0x12fed2=>this['_getGeneratedText'](_0x12fed2,_0x1091c1))['join'](''),_0x56ac3c(_0x5d8e23));}return Promise['resolve']();}async['_readStaticResponse'](_0x150ff9,_0x2d7fb9,_0x1f7d94){let _0x49d964;return _0x49d964=_0x150ff9 instanceof Response?await _0x150ff9['json']():JSON['parse'](new TextDecoder('utf-8')['decode'](_0x150ff9['body'])),(_0x1f7d94(this['_getGeneratedText'](_0x49d964,_0x2d7fb9)),Promise['resolve']());}['_getGeneratedText'](_0x457ee1,_0x5e891a){switch(this['getModelFamily'](_0x5e891a)){case'anthropic.claude':return _0x457ee1['completion'];case'ai21.j2':return _0x457ee1['completions'][0x0]['data']['text'];case'cohere.command':return _0x457ee1['generations'][0x0]['text'];case'meta.llama':return _0x457ee1['generation'];}}}class sa extends _0x177962{constructor(_0x5a9f3c,_0x23fb68={}){super(_0x5a9f3c),this['isToggleable']=!0x0,this['set']('side',_0x23fb68['side']||'top');const _0x20a412=this['bindTemplate'];this['extendTemplate']({'attributes':{'class':['ck-tab-button',...ta(_0x23fb68['class']||[]),_0x20a412['to']('side',_0x455c81=>'ck-tab-button_'+_0x455c81),_0x20a412['to']('class')]}});}['show'](){this['set']('isVisible',!0x0);}['hide'](){this['set']('isVisible',!0x1);}}class ia extends _0x4dc179{['children'];constructor(_0x5cf774,_0x1c5e1a={}){super(_0x5cf774);const _0x2950d0=this['bindTemplate'];this['set']('isVisible',!0x1),this['set']('class',''),this['children']=this['createCollection'](),this['setTemplate']({'tag':'div','attributes':{'class':['ck-tab-panel',...ta(_0x1c5e1a['class']||[]),_0x2950d0['to']('class'),_0x2950d0['if']('isVisible','ck-hidden',_0x2a0949=>!_0x2a0949)]},'children':this['children']});}['show'](){this['set']('isVisible',!0x0);}['hide'](){this['set']('isVisible',!0x1);}}class ss extends _0x4dc179{['buttonViews']=this['createCollection']();['panelViews']=this['createCollection']();['_tabs']=new Map();constructor(_0xaaf44d,_0x2d24f9={}){super(_0xaaf44d),this['set']('class',void 0x0),this['set']('activeTab',null),this['set']('side',_0x2d24f9['side']||'top'),this['set']('isMaximized',!0x1);const _0x5d9fa1=this['bindTemplate'];this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-reset','ck-tabs',...ta(_0x2d24f9['class']||[]),_0x5d9fa1['to']('side',_0xa52385=>'ck-tabs_'+_0xa52385),_0x5d9fa1['to']('class'),_0x5d9fa1['to']('isMaximized',_0x5c84c1=>_0x5c84c1?'ck-ai-tabs_maximized':'')],'tabindex':'0'},'children':[{'tag':'div','attributes':{'class':['ck','ck-tabs__buttons-container',_0x5d9fa1['to']('side',_0x280dc0=>'ck-tabs__buttons-container_'+_0x280dc0)]},'children':this['buttonViews']},{'tag':'div','attributes':{'class':['ck','ck-tabs__panels-container',_0x5d9fa1['to']('side',_0x429c98=>'ck-tabs__panels-container_'+_0x429c98)]},'children':this['panelViews']},...ta(_0x2d24f9['children']||[])]});}['getTabIds'](){return[...this['_tabs']['keys']()];}['getTab'](_0x5034ed){const _0x1319f9=this['_tabs']['get'](_0x5034ed);return _0x1319f9||null;}['addTab'](_0x1957b5){const _0x4116c9=this['_setupButton']({'id':_0x1957b5['id'],'label':_0x1957b5['buttonLabel'],'icon':_0x1957b5['buttonIcon'],'order':_0x1957b5['order']}),_0x13ea19=new ia(this['locale']);return _0x13ea19['render'](),_0x1957b5['content']&&_0x13ea19['children']['add'](_0x1957b5['content']),this['panelViews']['add'](_0x13ea19),this['_tabs']['set'](_0x1957b5['id'],{'button':_0x4116c9,'panel':_0x13ea19,'order':void 0x0!==_0x1957b5['order']?_0x1957b5['order']:null}),this['fire']('addTab:'+_0x1957b5['id'],{'id':_0x1957b5['id'],'button':_0x4116c9,'panel':_0x13ea19}),null===this['activeTab']?this['activateTab'](_0x1957b5['id']):this['_hidePanel'](_0x1957b5['id']),{'button':_0x4116c9,'panel':_0x13ea19};}['activateTab'](_0x4d79eb){if(null!==_0x4d79eb&&!this['getTab'](_0x4d79eb))throw new _0x38f49c('ui-tabsview-tab-not-found',{'tabs':this,'tabId':_0x4d79eb});this['activeTab']!==_0x4d79eb&&(this['activeTab']&&this['_hidePanel'](this['activeTab']),this['activeTab']=_0x4d79eb,_0x4d79eb&&this['_showPanel'](_0x4d79eb),this['fire']('activateTab:'+_0x4d79eb,_0x4d79eb));}['showTab'](_0x1ae27b){if(!this['getTab'](_0x1ae27b))throw new _0x38f49c('ui-tabsview-tab-not-found',{'tabs':this,'tabId':_0x1ae27b});this['_showPanel'](_0x1ae27b),this['_showButton'](_0x1ae27b),this['fire']('show:'+_0x1ae27b,_0x1ae27b);}['hideTab'](_0x88d22c){if(!this['getTab'](_0x88d22c))throw new _0x38f49c('ui-tabsview-tab-not-found',{'tabs':this,'tabId':_0x88d22c});const _0x3c9b25=this['activeTab'];this['_hidePanel'](_0x88d22c),this['_hideButton'](_0x88d22c);const _0x336efe=this['getTabIds']();_0x3c9b25===_0x88d22c&&_0x336efe['length']>0x1&&this['activateTab'](_0x336efe['find'](_0xa0df86=>_0xa0df86!==_0x88d22c)),this['fire']('hide:'+_0x88d22c,_0x88d22c);}['_getPanel'](_0x518c2f){const _0x16a882=this['_tabs']['get'](_0x518c2f);return _0x16a882?_0x16a882['panel']:null;}['_showPanel'](_0x1d5af8){null!==this['activeTab']&&this['activeTab']!==_0x1d5af8||this['_getPanel'](_0x1d5af8)['show']();}['_hidePanel'](_0x1c25bf){const _0x3aac7b=this['_getPanel'](_0x1c25bf);_0x3aac7b['isVisible']&&(this['activeTab']===_0x1c25bf&&(this['activeTab']=null),_0x3aac7b['hide']());}['_getButton'](_0x5a46c5){const _0x47389e=this['_tabs']['get'](_0x5a46c5);return _0x47389e?_0x47389e['button']:null;}['_showButton'](_0x152805){this['_getButton'](_0x152805)['show']();}['_hideButton'](_0x94d961){this['_getButton'](_0x94d961)['hide']();}['_setupButton'](_0x15fa88){const _0x408de4=new sa(this['locale'],{'side':this['side']}),_0x476654=this['buttonViews'];if(_0x408de4['set']({'label':_0x15fa88['label'],'icon':_0x15fa88['icon'],'tooltip':!0x0,'withText':!0x0}),_0x408de4['bind']('isOn')['to'](this,'activeTab',_0x5181ab=>_0x5181ab===_0x15fa88['id']),_0x408de4['bind']('side')['to'](this,'side'),_0x15fa88['order']){const _0x17ef47=[...this['_tabs']]['reduce']((_0x529cf1,_0x53e247)=>{const _0x39b4f8=_0x53e247[0x0],{order:_0x2cf6b3}=_0x53e247[0x1];return!_0x2cf6b3||_0x2cf6b3>_0x15fa88['order']?_0x529cf1:_0x2cf6b3>=_0x529cf1['order']?{'id':_0x39b4f8,'order':_0x2cf6b3}:_0x529cf1;},{'id':'','order':0x0}),_0x330b75=_0x476654['getIndex'](this['_getButton'](_0x17ef47['id']));_0x476654['add'](_0x408de4,_0x330b75+0x1);}else _0x476654['add'](_0x408de4);return _0x408de4['on']('execute',()=>{this['activateTab'](_0x15fa88['id']);}),_0x408de4;}}const mi=['overlay','sidebar','custom'],bi=['left','right'];class pi extends ss{constructor(_0x368db8,_0x59245b={}){super(_0x368db8,_0x59245b),this['set']('type',_0x59245b['type']||'sidebar'),this['set']('side',_0x59245b['side']||'right'),this['set']('isVisible',_0x59245b['visibleByDefault']??!0x0);const _0x59e95a=this['bindTemplate'];this['extendTemplate']({'attributes':{'class':['ck-ai-tabs',_0x59e95a['if']('type','ck-ai-tabs__overlay',_0x324acc=>'overlay'===_0x324acc),_0x59e95a['if']('type','ck-ai-tabs__sidebar',_0x3d87a4=>'sidebar'===_0x3d87a4),_0x59e95a['if']('isVisible','ck-hidden',_0x3b851e=>!_0x3b851e)]}}),this['buttonViews']['on']('add',(_0x4c2088,_0x43fecb)=>{_0x43fecb['set']('withText',!0x1);});}}class rt extends _0x98dbd{['view'];['container']=null;['showResizeButton']=!0x0;static get['pluginName'](){return'AITabs';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x299a1f){super(_0x299a1f);const _0x3f2784=this['context']['config']['get']('ai.container');if(this['set']('side','right'),!_0x3f2784)throw new _0x38f49c('ai-tabs-configuration-not-found');if(void 0x0!==_0x3f2784['showResizeButton']&&(this['showResizeButton']=_0x3f2784['showResizeButton']),'sidebar'!==_0x3f2784['type']&&'overlay'!==_0x3f2784['type']||_0x3f2784['side']&&(this['side']=_0x3f2784['side']),'sidebar'===_0x3f2784['type']){if(this['container']=_0x3f2784['element'],this['set']('type','sidebar'),!this['container'])throw new _0x38f49c('ai-tabs-sidebar-container-element-not-found');}else'overlay'===_0x3f2784['type']?(this['container']=document['body'],this['set']('type','overlay')):(this['container']=null,this['set']('type','custom'));this['view']=new pi(this['context']['locale'],{'side':this['side'],'type':this['type'],'visibleByDefault':void 0x0===_0x3f2784['visibleByDefault']||_0x3f2784['visibleByDefault']}),this['view']['render'](),this['view']['bind']('side')['to'](this,'side'),this['view']['bind']('type')['to'](this,'type'),this['container']&&this['container']['appendChild'](this['view']['element']),this['context']instanceof st&&this['context']['ui']['focusTracker']['add'](this['view']['element']);}['switchType'](_0x594980){if(_0x594980&&this['type']!==_0x594980){if(!mi['includes'](_0x594980))throw new _0x38f49c('ai-tabs-unsupported-ui-type');this['type']=_0x594980;}}['switchSide'](_0x2cabf0){if(_0x2cabf0&&this['side']!==_0x2cabf0){if(!bi['includes'](_0x2cabf0))throw new _0x38f49c('ai-tabs-unsupported-ui-side');this['side']=_0x2cabf0;}}['resize'](){this['view']['isMaximized']=!this['view']['isMaximized'],this['fire']('resizedTabs',this['view']['isMaximized']);}['destroy'](){super['destroy'](),this['view']['destroy'](),this['view']['element']&&this['view']['element']['remove']();}}function i(_0x4268f4,_0x280a1e,_0x3c6492){const t=_0x4268f4['t'];switch(_0x280a1e){case'AI_SUGGESTION_HEADER_TITLE':return t({'id':'AI_SUGGESTION_HEADER_TITLE','string':'Proposed\x20changes'});case'AI_SUGGESTION_BUTTON_SHOW_CHANGES':return t({'id':'AI_SUGGESTION_BUTTON_SHOW_CHANGES','string':'Show\x20details'});case'AI_MINI_TOOLBAR_LIKE':return t({'id':'AI_MINI_TOOLBAR_LIKE','string':'I\x20like\x20this\x20response'});case'AI_MINI_TOOLBAR_DISLIKE':return t({'id':'AI_MINI_TOOLBAR_DISLIKE','string':'I\x20don\x27t\x20like\x20this\x20response'});case'AI_MINI_TOOLBAR_COPY':return t({'id':'AI_MINI_TOOLBAR_COPY','string':'Copy\x20to\x20clipboard'});case'AI_SUGGESTION_CONTENT_PART_TITLE':return t({'id':'AI_SUGGESTION_CONTENT_PART_TITLE','string':'Change\x20%0'},_0x3c6492);case'AI_SUGGESTION_CONTENT_PART_REJECTED':return t({'id':'AI_SUGGESTION_CONTENT_PART_REJECTED','string':'Change\x20was\x20rejected'});case'AI_SUGGESTION_CONTENT_PART_OUTDATED':return t({'id':'AI_SUGGESTION_CONTENT_PART_OUTDATED','string':'Change\x20is\x20outdated'});case'AI_SUGGESTION_CONTENT_PART_ALREADY_APPLIED':return t({'id':'AI_SUGGESTION_CONTENT_PART_ALREADY_APPLIED','string':'Change\x20is\x20already\x20applied'});case'AI_SUGGESTION_CONTENT_PART_SHOW_IN_THE_TEXT':return t({'id':'AI_SUGGESTION_CONTENT_PART_SHOW_IN_THE_TEXT','string':'Preview'});case'AI_SUGGESTION_CONTENT_PART_ADD_AS_SUGGESTION':return t({'id':'AI_SUGGESTION_CONTENT_PART_ADD_AS_SUGGESTION','string':'Insert\x20as\x20suggestion'});case'AI_SUGGESTION_CONTENT_PART_DELETE':return t({'id':'AI_SUGGESTION_CONTENT_PART_DELETE','string':'Reject'});case'AI_SUGGESTION_CONTENT_PART_REMOVED':return t({'id':'AI_SUGGESTION_CONTENT_PART_REMOVED','string':'Removed\x20content.\x20Use\x20\x22Show\x20details\x22\x20to\x20learn\x20more.'});case'AI_DISCLAIMER_TEXT':return t({'id':'AI_DISCLAIMER_TEXT','string':'AI\x20can\x20make\x20mistakes.\x20Please\x20double-check\x20responses.'});case'AI_TABS_LABEL_MAXIMIZE':return t({'id':'AI_TABS_LABEL_MAXIMIZE','string':'Maximize'});case'AI_TABS_LABEL_MINIMIZE':return t({'id':'AI_TABS_LABEL_MINIMIZE','string':'Minimize'});case'AI_CHAT_HEADING':return t({'id':'AI_CHAT_HEADING','string':'Chat'});case'AI_CHAT_SOURCES_HEADER':return t({'id':'AI_CHAT_SOURCES_HEADER','string':'Sources'});case'AI_CHAT_UNTITLED_CONVERSATION':return t({'id':'AI_CHAT_UNTITLED_CONVERSATION','string':'Untitled\x20conversation'});case'AI_CHAT_LABEL_NEW_CHAT':return t({'id':'AI_CHAT_LABEL_NEW_CHAT','string':'New\x20chat'});case'AI_CHAT_STOP_GENERATING':return t({'id':'AI_CHAT_STOP_GENERATING','string':'Stop\x20generating'});case'AI_CHAT_IS_WRITING':return t({'id':'AI_CHAT_IS_WRITING','string':'AI\x20is\x20writing...'});case'AI_CHAT_PROMPT_EMPTY_ERROR':return t({'id':'AI_CHAT_PROMPT_EMPTY_ERROR','string':'This\x20field\x20cannot\x20be\x20empty.'});case'AI_CHAT_LABEL_SUBMIT':return t({'id':'AI_CHAT_LABEL_SUBMIT','string':'Submit'});case'AI_CHAT_WELCOME_MESSAGE':return t({'id':'AI_CHAT_WELCOME_MESSAGE','string':'Hi,\x20I\x27m\x20your\x20AI\x20assistant.\x20Think\x20of\x20me\x20as\x20your\x20writing\x20buddy,\x20reviewer,\x20or\x20research\x20partner.\x20I\x20can\x20suggest\x20changes\x20to\x20your\x20document,\x20help\x20generate\x20ideas,\x20offer\x20feedback,\x20discuss\x20attached\x20files,\x20and\x20much\x20more!'});case'AI_CHAT_ABORTED_MESSAGE':return t({'id':'AI_CHAT_ABORTED_MESSAGE','string':'The\x20request\x20was\x20aborted.'});case'AI_CHAT_GENERIC_ERROR':return t({'id':'AI_CHAT_GENERIC_ERROR','string':'Something\x20went\x20wrong\x20while\x20processing\x20your\x20request.\x20Please\x20try\x20again.'});case'AI_CHAT_UNABLE_TO_START_CONVERSATION':return t({'id':'AI_CHAT_UNABLE_TO_START_CONVERSATION','string':'Unable\x20to\x20start\x20conversation.\x20Please\x20make\x20sure\x20you\x20are\x20online\x20and\x20try\x20again.'});case'AI_CHAT_CONTEXT_UNABLE_TO_UPLOAD_FILE':return t({'id':'AI_CHAT_CONTEXT_UNABLE_TO_UPLOAD_FILE','string':'Failed\x20to\x20upload\x20files:\x20%0.\x20Please\x20try\x20again.'},_0x3c6492);case'AI_CHAT_CONTEXT_UNABLE_TO_LOAD_RESOURCES':return t({'id':'AI_CHAT_CONTEXT_UNABLE_TO_LOAD_RESOURCES','string':'Unable\x20to\x20load\x20resources\x20from\x20%0.\x20Please\x20try\x20again.'},_0x3c6492);case'AI_CHAT_RESOURCE_LOAD_FAILED':return t({'id':'AI_CHAT_RESOURCE_LOAD_FAILED','string':'Failed\x20to\x20load\x20resource.\x20Please\x20try\x20again.'});case'AI_CHAT_CONTEXT_CURRENT_DOCUMENT':return t({'id':'AI_CHAT_CONTEXT_CURRENT_DOCUMENT','string':'Current\x20document'});case'AI_CHAT_CONTEXT_REMOVE_FROM_CONTEXT':return t({'id':'AI_CHAT_CONTEXT_REMOVE_FROM_CONTEXT','string':'Remove\x20from\x20context'});case'AI_CHAT_CONTEXT_ADD_CONTEXT':return t({'id':'AI_CHAT_CONTEXT_ADD_CONTEXT','string':'Add\x20context'});case'AI_CHAT_CONTEXT_URL_LABEL':return t({'id':'AI_CHAT_CONTEXT_URL_LABEL','string':'URL'});case'AI_CHAT_CONTEXT_FILE_LABEL':return t({'id':'AI_CHAT_CONTEXT_FILE_LABEL','string':'File'});case'AI_CHAT_CONTEXT_CURRENT_CONTEXT_LABEL':return t({'id':'AI_CHAT_CONTEXT_CURRENT_CONTEXT_LABEL','string':'Current\x20context'});case'AI_CHAT_SEARCH_WEB':return t({'id':'AI_CHAT_SEARCH_WEB','string':'Web\x20search'});case'AI_CHAT_ENABLE_WEB_SEARCH':return t({'id':'AI_CHAT_ENABLE_WEB_SEARCH','string':'Enable\x20web\x20search'});case'AI_CHAT_DISABLE_WEB_SEARCH':return t({'id':'AI_CHAT_DISABLE_WEB_SEARCH','string':'Disable\x20web\x20search'});case'AI_CHAT_REASONING':return t({'id':'AI_CHAT_REASONING','string':'Reasoning'});case'AI_CHAT_ENABLE_REASONING':return t({'id':'AI_CHAT_ENABLE_REASONING','string':'Enable\x20reasoning'});case'AI_CHAT_DISABLE_REASONING':return t({'id':'AI_CHAT_DISABLE_REASONING','string':'Disable\x20reasoning'});case'AI_CHAT_COMMANDS':return t({'id':'AI_CHAT_COMMANDS','string':'Commands'});case'AI_CHAT_SEARCH_RESOURCES':return t({'id':'AI_CHAT_SEARCH_RESOURCES','string':'Search\x20resources'});case'AI_CHAT_CONTEXT_URL_BACK_TO_CONTEXT':return t({'id':'AI_CHAT_CONTEXT_URL_BACK_TO_CONTEXT','string':'Back\x20to\x20context\x20options'});case'AI_CHAT_CONTEXT_URL_ADD_URL':return t({'id':'AI_CHAT_CONTEXT_URL_ADD_URL','string':'Add\x20URL'});case'AI_CHAT_CONTEXT_URL_PLACEHOLDER':return t({'id':'AI_CHAT_CONTEXT_URL_PLACEHOLDER','string':'Add\x20URL...'});case'AI_CHAT_CONTEXT_UNABLE_TO_UPLOAD_URL':return t({'id':'AI_CHAT_CONTEXT_UNABLE_TO_UPLOAD_URL','string':'Failed\x20to\x20upload\x20URL:\x20%0.\x20Please\x20try\x20again.'},_0x3c6492);case'AI_CHAT_CONTEXT_INVALID_DATA':return t({'id':'AI_CHAT_CONTEXT_INVALID_DATA','string':'Invalid\x20context\x20data\x20type\x20for\x20the\x20selected\x20resource.'});case'AI_CHAT_CONTEXT_UNSUPPORTED_TYPE':return t({'id':'AI_CHAT_CONTEXT_UNSUPPORTED_TYPE','string':'Unsupported\x20resource\x20type.\x20Only\x20files\x20and\x20URLs\x20are\x20supported.'});case'AI_CHAT_CONTEXT_URL_EMPTY_ERROR':return t({'id':'AI_CHAT_CONTEXT_URL_EMPTY_ERROR','string':'URL\x20cannot\x20be\x20empty.'});case'AI_CHAT_CONTEXT_URL_INVALID_ERROR':return t({'id':'AI_CHAT_CONTEXT_URL_INVALID_ERROR','string':'Please\x20enter\x20a\x20valid\x20URL.'});case'AI_CHAT_FEED_LOADING_MESSAGE_REGULAR':return t({'id':'AI_CHAT_FEED_LOADING_MESSAGE_REGULAR','string':'AI\x20is\x20preparing\x20a\x20response...'});case'AI_CHAT_FEED_LOADING_MESSAGE_WEBSEARCH':return t({'id':'AI_CHAT_FEED_LOADING_MESSAGE_WEBSEARCH','string':'AI\x20is\x20searching\x20the\x20web\x20to\x20provide\x20the\x20most\x20accurate\x20answer...'});case'AI_CHAT_FEED_LOADING_MESSAGE_REASONING':return t({'id':'AI_CHAT_FEED_LOADING_MESSAGE_REASONING','string':'AI\x20is\x20using\x20reasoning\x20to\x20provide\x20the\x20most\x20accurate\x20answer...'});case'AI_CHAT_FEED_LOADING_MESSAGE_WEBSEARCH_REASONING':return t({'id':'AI_CHAT_FEED_LOADING_MESSAGE_WEBSEARCH_REASONING','string':'AI\x20is\x20using\x20reasoning\x20and\x20searching\x20the\x20web\x20to\x20provide\x20the\x20most\x20accurate\x20answer...'});case'AI_CHAT_FEED_REPLY_ITEM_USED_WEB_SEARCH':return t({'id':'AI_CHAT_FEED_REPLY_ITEM_USED_WEB_SEARCH','string':'Scanned\x20the\x20internet\x20for\x20insights'});case'AI_CHAT_FEED_REPLY_ITEM_USED_REASONING':return t({'id':'AI_CHAT_FEED_REPLY_ITEM_USED_REASONING','string':'AI\x20used\x20reasoning\x20to\x20improve\x20the\x20response'});case'AI_CHAT_FEED_REPLY_ITEM_USED_WEB_SEARCH_REASONING':return t({'id':'AI_CHAT_FEED_REPLY_ITEM_USED_WEB_SEARCH_REASONING','string':'AI\x20used\x20search\x20and\x20reasoning\x20to\x20improve\x20the\x20response'});case'AI_CHAT_PROMPT_INPUT_PLACEHOLDER_REGULAR':return t({'id':'AI_CHAT_PROMPT_INPUT_PLACEHOLDER_REGULAR','string':'Ask\x20AI\x20anything...'});case'AI_CHAT_PROMPT_INPUT_PLACEHOLDER_WEBSEARCH':return t({'id':'AI_CHAT_PROMPT_INPUT_PLACEHOLDER_WEBSEARCH','string':'Ask\x20AI\x20anything\x20(web\x20search\x20enabled)...'});case'AI_CHAT_PROMPT_INPUT_PLACEHOLDER_REASONING':return t({'id':'AI_CHAT_PROMPT_INPUT_PLACEHOLDER_REASONING','string':'Ask\x20AI\x20anything\x20(reasoning\x20enabled)...'});case'AI_CHAT_PROMPT_INPUT_PLACEHOLDER_WEBSEARCH_REASONING':return t({'id':'AI_CHAT_PROMPT_INPUT_PLACEHOLDER_WEBSEARCH_REASONING','string':'Ask\x20AI\x20anything\x20(web\x20search\x20and\x20reasoning\x20enabled)...'});case'AI_CHAT_SUGGESTION_ACTION_SHOW_CHANGE_IN_TEXT':return t({'id':'AI_CHAT_SUGGESTION_ACTION_SHOW_CHANGE_IN_TEXT','string':'Preview','plural':'Preview'},_0x3c6492);case'AI_CHAT_SUGGESTION_ACTION_SHOW_CHANGE_IN_TEXT_TOOLTIP':return t({'id':'AI_CHAT_SUGGESTION_ACTION_SHOW_CHANGE_IN_TEXT_TOOLTIP','string':'Show\x20change\x20in\x20the\x20document','plural':'Show\x20changes\x20in\x20the\x20document'},_0x3c6492);case'AI_CHAT_SUGGESTION_ACTION_INSERT_SUGGESTION':return t({'id':'AI_CHAT_SUGGESTION_ACTION_INSERT_SUGGESTION','string':'Suggest','plural':'Suggest'},_0x3c6492);case'AI_CHAT_SUGGESTION_ACTION_INSERT_SUGGESTION_TOOLTIP':return t({'id':'AI_CHAT_SUGGESTION_ACTION_INSERT_SUGGESTION_TOOLTIP','string':'Insert\x20change\x20as\x20suggestion','plural':'Insert\x20changes\x20as\x20suggestions'},_0x3c6492);case'AI_CHAT_SUGGESTION_ACTION_APPLY_LABEL':return t({'id':'AI_CHAT_SUGGESTION_ACTION_APPLY_LABEL','string':'Apply','plural':'Apply\x20all'},_0x3c6492);case'AI_CHAT_SUGGESTION_ACTION_APPLY_TOOLTIP':return t({'id':'AI_CHAT_SUGGESTION_ACTION_APPLY_TOOLTIP','string':'Apply\x20changes\x20immediately','plural':'Apply\x20all\x20changes\x20immediately'},_0x3c6492);case'AI_CHAT_SUGGESTION_MORE_OPTIONS_TOOLTIP':return t({'id':'AI_CHAT_SUGGESTION_MORE_OPTIONS_TOOLTIP','string':'More\x20options'},_0x3c6492);case'AI_CHAT_MODEL_SELECTOR_GROUP':return t({'id':'AI_CHAT_MODEL_SELECTOR_GROUP','string':'Models'});case'AI_CHAT_MODEL_SELECTOR_ENABLED_TOOLTIP':return t({'id':'AI_CHAT_MODEL_SELECTOR_ENABLED_TOOLTIP','string':'Select\x20a\x20model'});case'AI_CHAT_MODEL_SELECTOR_DISABLED_TOOLTIP':return t({'id':'AI_CHAT_MODEL_SELECTOR_DISABLED_TOOLTIP','string':'Start\x20a\x20new\x20conversation\x20to\x20change\x20the\x20model'});case'AI_CHAT_CAPABILITIES_YES':return t({'id':'AI_CHAT_CAPABILITIES_YES','string':'Yes'});case'AI_CHAT_CAPABILITIES_NO':return t({'id':'AI_CHAT_CAPABILITIES_NO','string':'No'});case'AI_CHAT_MODEL_UNAVAILABLE_MESSAGE_TEXT':return t({'id':'AI_CHAT_MODEL_UNAVAILABLE_MESSAGE_TEXT','string':'The\x20selected\x20model\x20is\x20no\x20longer\x20available,\x20so\x20you\x20cannot\x20continue\x20this\x20conversation.\x20Please\x20'});case'AI_CHAT_MODEL_UNAVAILABLE_MESSAGE_BUTTON':return t({'id':'AI_CHAT_MODEL_UNAVAILABLE_MESSAGE_BUTTON','string':'start\x20a\x20new\x20one.'});case'AI_CHAT_CONTEXT_SOURCES_LABEL':return t({'id':'AI_CHAT_CONTEXT_SOURCES_LABEL','string':'Sources'});case'AI_CHAT_HISTORY_HEADING':return t({'id':'AI_CHAT_HISTORY_HEADING','string':'Chat\x20History'});case'AI_CHAT_HISTORY_SEARCH_LABEL':return t({'id':'AI_CHAT_HISTORY_SEARCH_LABEL','string':'Search\x20history'});case'AI_CHAT_HISTORY_SEARCH_NOT_FOUND_PRIMARY':return t({'id':'AI_CHAT_HISTORY_SEARCH_NOT_FOUND_PRIMARY','string':'No\x20chats\x20were\x20found\x20matching\x20\x22%0\x22.'},_0x3c6492);case'AI_CHAT_HISTORY_SEARCH_NOT_FOUND_SECONDARY':return t({'id':'AI_CHAT_HISTORY_SEARCH_NOT_FOUND_SECONDARY','string':'Please\x20try\x20a\x20different\x20phrase\x20or\x20check\x20the\x20spelling.'});case'AI_CHAT_HISTORY_EMPTY_MESSAGE':return t({'id':'AI_CHAT_HISTORY_EMPTY_MESSAGE','string':'Your\x20chat\x20history\x20for\x20current\x20document\x20will\x20appear\x20here.'});case'AI_CHAT_HISTORY_GO_TO_CHAT_BUTTON':return t({'id':'AI_CHAT_HISTORY_GO_TO_CHAT_BUTTON','string':'Go\x20to\x20chat'});case'AI_CHAT_HISTORY_PIN_BUTTON':return t({'id':'AI_CHAT_HISTORY_PIN_BUTTON','string':'Pin'});case'AI_CHAT_HISTORY_SHOW_MORE_ITEMS':return t({'id':'AI_CHAT_HISTORY_SHOW_MORE_ITEMS','string':'Show\x20more\x20items'});case'AI_CHAT_HISTORY_EDIT_NAME':return t({'id':'AI_CHAT_HISTORY_EDIT_NAME','string':'Edit\x20name'});case'AI_CHAT_HISTORY_REMOVE':return t({'id':'AI_CHAT_HISTORY_REMOVE','string':'Remove'});case'AI_CHAT_HISTORY_REMOVE_CONFIRM':return t({'id':'AI_CHAT_HISTORY_REMOVE_CONFIRM','string':'Do\x20you\x20want\x20to\x20remove\x20this\x20chat?'});case'AI_CHAT_HISTORY_ACCEPT':return t({'id':'AI_CHAT_HISTORY_ACCEPT','string':'Accept'});case'AI_CHAT_HISTORY_CANCEL':return t({'id':'AI_CHAT_HISTORY_CANCEL','string':'Cancel'});case'AI_CHAT_HISTORY_LOADING_REMOVING':return t({'id':'AI_CHAT_HISTORY_LOADING_REMOVING','string':'Removing\x20the\x20chat...'});case'AI_CHAT_HISTORY_LOADING_RENAMING':return t({'id':'AI_CHAT_HISTORY_LOADING_RENAMING','string':'Renaming\x20the\x20chat...'});case'AI_CHAT_HISTORY_LOADING_PINNING':return t({'id':'AI_CHAT_HISTORY_LOADING_PINNING','string':'Pinning\x20the\x20chat...'});case'AI_CHAT_HISTORY_LOADING_UNPINNING':return t({'id':'AI_CHAT_HISTORY_LOADING_UNPINNING','string':'Unpinning\x20the\x20chat...'});case'AI_CHAT_HISTORY_CATEGORY_PINNED':return t({'id':'AI_CHAT_HISTORY_CATEGORY_PINNED','string':'Pinned'});case'AI_CHAT_HISTORY_CATEGORY_TODAY':return t({'id':'AI_CHAT_HISTORY_CATEGORY_TODAY','string':'Today'});case'AI_CHAT_HISTORY_CATEGORY_YESTERDAY':return t({'id':'AI_CHAT_HISTORY_CATEGORY_YESTERDAY','string':'Yesterday'});case'AI_CHAT_HISTORY_CATEGORY_LAST_14_DAYS':return t({'id':'AI_CHAT_HISTORY_CATEGORY_LAST_14_DAYS','string':'Last\x2014\x20days'});case'AI_CHAT_HISTORY_CATEGORY_LATER':return t({'id':'AI_CHAT_HISTORY_CATEGORY_LATER','string':'Later'});case'AI_CHAT_HISTORY_ERROR_UPDATE_TITLE':return t({'id':'AI_CHAT_HISTORY_ERROR_UPDATE_TITLE','string':'Failed\x20to\x20change\x20the\x20\x22%0\x22\x20chat\x20name.\x20Please\x20try\x20again\x20later.'},_0x3c6492);case'AI_CHAT_HISTORY_ERROR_UPDATE_PINNED':return t({'id':'AI_CHAT_HISTORY_ERROR_UPDATE_PINNED','string':'Failed\x20to\x20%0\x20the\x20\x22%1\x22\x20chat.\x20Please\x20try\x20again\x20later.'},_0x3c6492);case'AI_CHAT_HISTORY_ERROR_REMOVE_ITEM':return t({'id':'AI_CHAT_HISTORY_ERROR_REMOVE_ITEM','string':'Failed\x20to\x20delete\x20the\x20\x22%0\x22\x20chat.\x20Please\x20try\x20again\x20later.'},_0x3c6492);case'AI_CHAT_HISTORY_ERROR_LOAD_ITEMS':return t({'id':'AI_CHAT_HISTORY_ERROR_LOAD_ITEMS','string':'Failed\x20to\x20load\x20the\x20chat\x20history.\x20Please\x20try\x20again\x20later.'});case'AI_CHAT_HISTORY_ERROR_GENERIC':return t({'id':'AI_CHAT_HISTORY_ERROR_GENERIC','string':'Something\x20went\x20wrong.\x20Please\x20try\x20again\x20later.'});case'AI_CHAT_HISTORY_PIN_ACTION':return t({'id':'AI_CHAT_HISTORY_PIN_ACTION','string':'pin'});case'AI_CHAT_HISTORY_UNPIN_ACTION':return t({'id':'AI_CHAT_HISTORY_UNPIN_ACTION','string':'unpin'});case'AI_BALLOON_HEADER_TITLE':return t({'id':'AI_BALLOON_HEADER_TITLE','string':'Change\x20%0'},_0x3c6492);case'AI_BALLOON_APPLY_BUTTON':return t({'id':'AI_BALLOON_APPLY_BUTTON','string':'Apply'});case'AI_BALLOON_SUGGEST_BUTTON':return t({'id':'AI_BALLOON_SUGGEST_BUTTON','string':'Suggest'});case'AI_BALLOON_NEXT_TOOLTIP':return t({'id':'AI_BALLOON_NEXT_TOOLTIP','string':'Next'});case'AI_BALLOON_PREVIOUS_TOOLTIP':return t({'id':'AI_BALLOON_PREVIOUS_TOOLTIP','string':'Previous'});case'AI_SUGGESTION_NO_PARTS_WARNING':return t({'id':'AI_SUGGESTION_NO_PARTS_WARNING','string':'This\x20change\x20is\x20not\x20supported\x20by\x20the\x20editor\x20and\x20can\x27t\x20be\x20previewed\x20or\x20applied.'});case'AI_SUGGESTION_EMPTY_PART_WARNING':return t({'id':'AI_SUGGESTION_EMPTY_PART_WARNING','string':'Some\x20of\x20the\x20changes\x20are\x20not\x20supported\x20by\x20the\x20editor\x20and\x20can\x27t\x20be\x20previewed\x20or\x20applied.'});case'AI_ACTIONS_TRY_AGAIN':return t({'id':'AI_ACTIONS_TRY_AGAIN','string':'Retry'});case'AI_ACTIONS_PREVIOUS_INTERACTION':return t({'id':'AI_ACTIONS_PREVIOUS_INTERACTION','string':'Previous'});case'AI_ACTIONS_NEXT_INTERACTION':return t({'id':'AI_ACTIONS_NEXT_INTERACTION','string':'Next'});case'AI_MODEL_DESCRIPTION_AGENT-1':return t({'id':'AI_MODEL_DESCRIPTION_AGENT-1','string':'Automatically\x20selects\x20best\x20model\x20for\x20speed,\x20quality,\x20and\x20cost.'});case'AI_MODEL_DESCRIPTION_GPT-5':return t({'id':'AI_MODEL_DESCRIPTION_GPT-5','string':'OpenAI\x27s\x20flagship\x20model\x20for\x20advanced\x20reasoning,\x20creativity,\x20and\x20complex\x20tasks'});case'AI_MODEL_DESCRIPTION_GPT-5-MINI':return t({'id':'AI_MODEL_DESCRIPTION_GPT-5-MINI','string':'A\x20lightweight\x20version\x20of\x20GPT-5\x20-\x20faster,\x20more\x20cost-efficient'});case'AI_MODEL_DESCRIPTION_GPT-4.1':return t({'id':'AI_MODEL_DESCRIPTION_GPT-4.1','string':'OpenAI\x27s\x20model\x20for\x20reliable\x20reasoning,\x20speed,\x20and\x20versatility'});case'AI_MODEL_DESCRIPTION_GPT-4.1-MINI':return t({'id':'AI_MODEL_DESCRIPTION_GPT-4.1-MINI','string':'A\x20lighter\x20variant\x20of\x20GPT-4.1\x20that\x20balances\x20speed\x20and\x20cost\x20while\x20maintaining\x20solid\x20accuracy'});case'AI_MODEL_DESCRIPTION_CLAUDE-3-5-HAIKU':return t({'id':'AI_MODEL_DESCRIPTION_CLAUDE-3-5-HAIKU','string':'Anthropic\x27s\x20fast,\x20cost-efficient\x20model\x20for\x20simpler\x20tasks'});case'AI_MODEL_DESCRIPTION_CLAUDE-4-SONNET':return t({'id':'AI_MODEL_DESCRIPTION_CLAUDE-4-SONNET','string':'Advanced\x20model\x20with\x20strong\x20reasoning\x20and\x20reliability\x20for\x20complex\x20tasks'});case'AI_MODEL_DESCRIPTION_GEMINI-2-5-PRO':return t({'id':'AI_MODEL_DESCRIPTION_GEMINI-2-5-PRO','string':'Google\x27s\x20advanced\x20model\x20for\x20versatile\x20problem-solving\x20and\x20research'});case'AI_MODEL_DESCRIPTION_GEMINI-2-5-FLASH':return t({'id':'AI_MODEL_DESCRIPTION_GEMINI-2-5-FLASH','string':'Lightweight\x20Gemini\x20model\x20for\x20fast,\x20cost-efficient\x20interactions'});case'AI_QUICK_ACTIONS_HEADING':return t({'id':'AI_QUICK_ACTIONS_HEADING','string':'AI\x20Quick\x20Actions'});case'AI_QUICK_ACTIONS_ASK_AI':return t({'id':'AI_QUICK_ACTIONS_ASK_AI','string':'Ask\x20AI'});case'AI_QUICK_ACTIONS_CHAT_COMMANDS':return t({'id':'AI_QUICK_ACTIONS_CHAT_COMMANDS','string':'Chat\x20commands'});case'AI_QUICK_ACTIONS_IMPROVE_WRITING':return t({'id':'AI_QUICK_ACTIONS_IMPROVE_WRITING','string':'Improve\x20writing'});case'AI_QUICK_ACTIONS_CONTINUE_WRITING':return t({'id':'AI_QUICK_ACTIONS_CONTINUE_WRITING','string':'Continue\x20writing'});case'AI_QUICK_ACTIONS_FIX_GRAMMAR_SPELLING':return t({'id':'AI_QUICK_ACTIONS_FIX_GRAMMAR_SPELLING','string':'Fix\x20grammar\x20&\x20spelling'});case'AI_QUICK_ACTIONS_ADJUST_LENGTH':return t({'id':'AI_QUICK_ACTIONS_ADJUST_LENGTH','string':'Adjust\x20length'});case'AI_QUICK_ACTIONS_CHANGE_TONE':return t({'id':'AI_QUICK_ACTIONS_CHANGE_TONE','string':'Change\x20tone'});case'AI_QUICK_ACTIONS_TRANSLATE':return t({'id':'AI_QUICK_ACTIONS_TRANSLATE','string':'Translate'});case'AI_QUICK_ACTIONS_EXPLAIN':return t({'id':'AI_QUICK_ACTIONS_EXPLAIN','string':'Explain'});case'AI_QUICK_ACTIONS_SUMMARIZE':return t({'id':'AI_QUICK_ACTIONS_SUMMARIZE','string':'Summarize'});case'AI_QUICK_ACTIONS_HIGHLIGHT_KEY_POINTS':return t({'id':'AI_QUICK_ACTIONS_HIGHLIGHT_KEY_POINTS','string':'Highlight\x20key\x20points'});case'AI_QUICK_ACTIONS_MAKE_SHORTER':return t({'id':'AI_QUICK_ACTIONS_MAKE_SHORTER','string':'Make\x20shorter'});case'AI_QUICK_ACTIONS_MAKE_LONGER':return t({'id':'AI_QUICK_ACTIONS_MAKE_LONGER','string':'Make\x20longer'});case'AI_QUICK_ACTIONS_MORE_CASUAL':return t({'id':'AI_QUICK_ACTIONS_MORE_CASUAL','string':'More\x20casual'});case'AI_QUICK_ACTIONS_MORE_DIRECT':return t({'id':'AI_QUICK_ACTIONS_MORE_DIRECT','string':'More\x20direct'});case'AI_QUICK_ACTIONS_MORE_FRIENDLY':return t({'id':'AI_QUICK_ACTIONS_MORE_FRIENDLY','string':'More\x20friendly'});case'AI_QUICK_ACTIONS_MORE_CONFIDENT':return t({'id':'AI_QUICK_ACTIONS_MORE_CONFIDENT','string':'More\x20confident'});case'AI_QUICK_ACTIONS_MORE_PROFESSIONAL':return t({'id':'AI_QUICK_ACTIONS_MORE_PROFESSIONAL','string':'More\x20professional'});case'AI_QUICK_ACTIONS_ADJUST_BASED_ON_DOCUMENT':return t({'id':'AI_QUICK_ACTIONS_ADJUST_BASED_ON_DOCUMENT','string':'Adjust\x20based\x20on\x20the\x20rest\x20of\x20the\x20document'});case'AI_QUICK_ACTIONS_TRANSLATE_ENGLISH':return t({'id':'AI_QUICK_ACTIONS_TRANSLATE_ENGLISH','string':'English'});case'AI_QUICK_ACTIONS_TRANSLATE_CHINESE':return t({'id':'AI_QUICK_ACTIONS_TRANSLATE_CHINESE','string':'Chinese\x20(Simplified)'});case'AI_QUICK_ACTIONS_TRANSLATE_FRENCH':return t({'id':'AI_QUICK_ACTIONS_TRANSLATE_FRENCH','string':'French'});case'AI_QUICK_ACTIONS_TRANSLATE_JAPANESE':return t({'id':'AI_QUICK_ACTIONS_TRANSLATE_JAPANESE','string':'Japanese'});case'AI_QUICK_ACTIONS_TRANSLATE_PORTUGUESE':return t({'id':'AI_QUICK_ACTIONS_TRANSLATE_PORTUGUESE','string':'Portuguese'});case'AI_QUICK_ACTIONS_TRANSLATE_KOREAN':return t({'id':'AI_QUICK_ACTIONS_TRANSLATE_KOREAN','string':'Korean'});case'AI_QUICK_ACTIONS_TRANSLATE_ITALIAN':return t({'id':'AI_QUICK_ACTIONS_TRANSLATE_ITALIAN','string':'Italian'});case'AI_QUICK_ACTIONS_TRANSLATE_RUSSIAN':return t({'id':'AI_QUICK_ACTIONS_TRANSLATE_RUSSIAN','string':'Russian'});case'AI_QUICK_ACTIONS_TRANSLATE_SPANISH':return t({'id':'AI_QUICK_ACTIONS_TRANSLATE_SPANISH','string':'Spanish'});case'AI_QUICK_ACTIONS_TRANSLATE_GERMAN':return t({'id':'AI_QUICK_ACTIONS_TRANSLATE_GERMAN','string':'German'});case'AI_QUICK_ACTIONS_PLUGIN_NOT_FOUND':return t({'id':'AI_QUICK_ACTIONS_PLUGIN_NOT_FOUND','string':'%0\x20plugin\x20is\x20required\x20but\x20not\x20found.'},_0x3c6492);case'AI_QUICK_ACTIONS_OTHER':return t({'id':'AI_QUICK_ACTIONS_OTHER','string':'Other'});case'AI_ACTIONS_GENERIC_ERROR':return t({'id':'AI_ACTIONS_GENERIC_ERROR','string':'Sorry,\x20we\x20couldn\x27t\x20generate\x20the\x20response.\x20Please\x20try\x20again\x20in\x20a\x20moment.'});case'AI_REVIEW_MODE_STOP_GENERATING':return t({'id':'AI_REVIEW_MODE_STOP_GENERATING','string':'Stop\x20generating'});case'AI_REVIEW_MODE_HIDE_CHANGES':return t({'id':'AI_REVIEW_MODE_HIDE_CHANGES','string':'Hide\x20changes'});case'AI_REVIEW_MODE_SHOW_CHANGES':return t({'id':'AI_REVIEW_MODE_SHOW_CHANGES','string':'Show\x20changes'});case'AI_REVIEW_MODE_ACCEPT_ALL':return t({'id':'AI_REVIEW_MODE_ACCEPT_ALL','string':'Accept\x20all'});case'AI_REVIEW_MODE_EXIT_REVIEW':return t({'id':'AI_REVIEW_MODE_EXIT_REVIEW','string':'Exit\x20review'});case'AI_REVIEW_MODE_ACCEPT_CHANGE':return t({'id':'AI_REVIEW_MODE_ACCEPT_CHANGE','string':'Accept'});case'AI_REVIEW_MODE_DISMISS_CHANGE':return t({'id':'AI_REVIEW_MODE_DISMISS_CHANGE','string':'Dismiss'});case'AI_REVIEW_MODE_LEARN_MORE':return t({'id':'AI_REVIEW_MODE_LEARN_MORE','string':'Learn\x20more'});case'AI_REVIEW_MODE_COMPLETED_TEXT':return t({'id':'AI_REVIEW_MODE_COMPLETED_TEXT','string':'There\x27s\x20nothing\x20left\x20to\x20review.'});case'AI_REVIEW_MODE_EMPTY_RESULTS_TEXT':return t({'id':'AI_REVIEW_MODE_EMPTY_RESULTS_TEXT','string':'There\x20are\x20no\x20changes\x20to\x20suggest.'});case'AI_REVIEW_MODE_FINISH_REVIEW_BUTTON_LABEL':return t({'id':'AI_REVIEW_MODE_FINISH_REVIEW_BUTTON_LABEL','string':'Finish\x20Review'});case'AI_REVIEW_MODE_FINISH_REVIEW_HEADER_TITLE':return t({'id':'AI_REVIEW_MODE_FINISH_REVIEW_HEADER_TITLE','string':'Review\x20complete.\x20Finish\x20when\x20ready.'});case'AI_REVIEW_MODE_GENERAL_ERROR_MESSAGE':return t({'id':'AI_REVIEW_MODE_GENERAL_ERROR_MESSAGE','string':'Sorry,\x20we\x20couldn\x27t\x20generate\x20the\x20whole\x20review\x20properly.\x20Please\x20try\x20again\x20in\x20a\x20moment.'});case'AI_REVIEW_MODE_CHUNK_ERROR_MESSAGE':return t({'id':'AI_REVIEW_MODE_CHUNK_ERROR_MESSAGE','string':'Not\x20everything\x20went\x20through,\x20but\x20the\x20completed\x20items\x20are\x20listed\x20below.'});case'AI_REVIEW_MODE':return t({'id':'AI_REVIEW_MODE','string':'Review'});case'AI_REVIEW_MODE_PROMPT_EMPTY_ERROR':return t({'id':'AI_REVIEW_MODE_PROMPT_EMPTY_ERROR','string':'Prompt\x20must\x20not\x20be\x20empty'});case'AI_REVIEW_CHECK_CUSTOM_TITLE':return t({'id':'AI_REVIEW_CHECK_CUSTOM_TITLE','string':'Custom\x20command'});case'AI_REVIEW_CHECK_CUSTOM_DESCRIPTION':return t({'id':'AI_REVIEW_CHECK_CUSTOM_DESCRIPTION','string':'Enter\x20a\x20custom\x20command\x20for\x20a\x20specific\x20review.'});case'AI_REVIEW_CHECK_CORRECTNESS_TITLE':return t({'id':'AI_REVIEW_CHECK_CORRECTNESS_TITLE','string':'Proofread'});case'AI_REVIEW_CHECK_CORRECTNESS_DESCRIPTION':return t({'id':'AI_REVIEW_CHECK_CORRECTNESS_DESCRIPTION','string':'Check\x20the\x20text\x20for\x20errors\x20in\x20grammar,\x20spelling,\x20and\x20punctuation.'});case'AI_REVIEW_CHECK_CLARITY_TITLE':return t({'id':'AI_REVIEW_CHECK_CLARITY_TITLE','string':'Improve\x20clarity'});case'AI_REVIEW_CHECK_CLARITY_DESCRIPTION':return t({'id':'AI_REVIEW_CHECK_CLARITY_DESCRIPTION','string':'Improve\x20the\x20logical\x20structure\x20and\x20precision\x20for\x20clearer\x20message.'});case'AI_REVIEW_CHECK_READABILITY_TITLE':return t({'id':'AI_REVIEW_CHECK_READABILITY_TITLE','string':'Improve\x20readability'});case'AI_REVIEW_CHECK_READABILITY_DESCRIPTION':return t({'id':'AI_REVIEW_CHECK_READABILITY_DESCRIPTION','string':'Adjust\x20sentence\x20structure\x20and\x20word\x20choice\x20for\x20an\x20easier\x20read.'});case'AI_REVIEW_CHECK_MAKE_TITLE':return t({'id':'AI_REVIEW_CHECK_MAKE_TITLE','string':'Adjust\x20length'});case'AI_REVIEW_CHECK_MAKE_DESCRIPTION':return t({'id':'AI_REVIEW_CHECK_MAKE_DESCRIPTION','string':'Shorten\x20or\x20lengthen\x20the\x20text\x20as\x20needed.'});case'AI_REVIEW_CHECK_MAKE_OPTIONS_LABEL':return t({'id':'AI_REVIEW_CHECK_MAKE_OPTIONS_LABEL','string':'Adjust\x20length'});case'AI_REVIEW_CHECK_MAKE_OPTIONS_DATA_LONGER':return t({'id':'AI_REVIEW_CHECK_MAKE_OPTIONS_DATA_LONGER','string':'Longer'});case'AI_REVIEW_CHECK_MAKE_OPTIONS_DATA_SHORTER':return t({'id':'AI_REVIEW_CHECK_MAKE_OPTIONS_DATA_SHORTER','string':'Shorter'});case'AI_REVIEW_CHECK_MAKE_TONE_TITLE':return t({'id':'AI_REVIEW_CHECK_MAKE_TONE_TITLE','string':'Adjust\x20tone\x20and\x20style'});case'AI_REVIEW_CHECK_MAKE_TONE_DESCRIPTION':return t({'id':'AI_REVIEW_CHECK_MAKE_TONE_DESCRIPTION','string':'Modify\x20the\x20text\x20to\x20a\x20desired\x20tone\x20and\x20style.'});case'AI_REVIEW_CHECK_MAKE_TONE_OPTIONS_LABEL':return t({'id':'AI_REVIEW_CHECK_MAKE_TONE_OPTIONS_LABEL','string':'Adjust\x20tone\x20and\x20style'});case'AI_REVIEW_CHECK_MAKE_TONE_OPTIONS_DATA_CASUAL':return t({'id':'AI_REVIEW_CHECK_MAKE_TONE_OPTIONS_DATA_CASUAL','string':'Casual'});case'AI_REVIEW_CHECK_MAKE_TONE_OPTIONS_DATA_DIRECT':return t({'id':'AI_REVIEW_CHECK_MAKE_TONE_OPTIONS_DATA_DIRECT','string':'Direct'});case'AI_REVIEW_CHECK_MAKE_TONE_OPTIONS_DATA_FRIENDLY':return t({'id':'AI_REVIEW_CHECK_MAKE_TONE_OPTIONS_DATA_FRIENDLY','string':'Friendly'});case'AI_REVIEW_CHECK_MAKE_TONE_OPTIONS_DATA_CONFIDENT':return t({'id':'AI_REVIEW_CHECK_MAKE_TONE_OPTIONS_DATA_CONFIDENT','string':'Confident'});case'AI_REVIEW_CHECK_MAKE_TONE_OPTIONS_DATA_PROFESSIONAL':return t({'id':'AI_REVIEW_CHECK_MAKE_TONE_OPTIONS_DATA_PROFESSIONAL','string':'Professional'});case'AI_REVIEW_CHECK_TRANSLATE_TITLE':return t({'id':'AI_REVIEW_CHECK_TRANSLATE_TITLE','string':'Translate'});case'AI_REVIEW_CHECK_TRANSLATE_DESCRIPTION':return t({'id':'AI_REVIEW_CHECK_TRANSLATE_DESCRIPTION','string':'Translate\x20the\x20text\x20into\x20another\x20language.'});case'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_LABEL':return t({'id':'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_LABEL','string':'Select\x20language'});case'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_DATA_ENGLISH':return t({'id':'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_DATA_ENGLISH','string':'English'});case'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_DATA_SPANISH':return t({'id':'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_DATA_SPANISH','string':'Spanish'});case'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_DATA_FRENCH':return t({'id':'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_DATA_FRENCH','string':'French'});case'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_DATA_GERMAN':return t({'id':'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_DATA_GERMAN','string':'German'});case'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_DATA_CHINESE':return t({'id':'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_DATA_CHINESE','string':'Chinese\x20(Simplified)'});case'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_DATA_JAPANESE':return t({'id':'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_DATA_JAPANESE','string':'Japanese'});case'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_DATA_RUSSIAN':return t({'id':'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_DATA_RUSSIAN','string':'Russian'});case'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_DATA_PORTUGUESE':return t({'id':'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_DATA_PORTUGUESE','string':'Portuguese'});case'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_DATA_KOREAN':return t({'id':'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_DATA_KOREAN','string':'Korean'});case'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_DATA_ITALIAN':return t({'id':'AI_REVIEW_CHECK_TRANSLATE_OPTIONS_DATA_ITALIAN','string':'Italian'});case'AI_TOGGLE_BUTTON_LABEL':return t({'id':'AI_TOGGLE_BUTTON_LABEL','string':'AI'});default:return _0x280a1e;}}class S extends _0x98dbd{['_apiUrl'];['_token'];['_decoder'];static get['requires'](){return['CloudServices'];}static get['pluginName'](){return'AIConnector';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x322a0c){super(_0x322a0c),this['context']['config']['define']('ai.serviceUrl','https://ai.cke-cs.com/v1'),this['_apiUrl']=this['context']['config']['get']('ai.serviceUrl'),this['_token']=null,this['_decoder']=new TextDecoder();}['init'](){const _0x3eb177=this['context']['plugins']['get']('CloudServices');if(!_0x3eb177['token'])throw new _0x38f49c('ai-missing-token',this);this['_token']=_0x3eb177['token'];}['startConversation'](_0x2d9286,_0x5cb123){const _0x11a1a7=this['_sendApiRequest']('/conversations','POST',{'id':_0x2d9286,'group':_0x5cb123});return{'getConversation':async()=>(await _0x11a1a7['request'])['json'](),'abortController':_0x11a1a7['abortController']};}['queryAssistant']({message:_0x226c9d,conversationId:_0x114da5,parts:_0x1b5aa2,capabilities:_0x481dbd,model:_0x1245cf,quickActionData:_0x5bb082}){const _0x29eba0={..._0x5bb082&&{'quickActionData':_0x5bb082}},_0x269cb6={'prompt':_0x226c9d,'content':_0x1b5aa2,'model':_0x1245cf,..._0x481dbd&&{'capabilities':_0x481dbd},...Object['keys'](_0x29eba0)['length']>0x0&&{'attributes':_0x29eba0}},_0x4ef645=this['_sendApiRequest']('/conversations/'+_0x114da5+'/messages','POST',_0x269cb6);return{'getStream':async()=>{const _0x2730b7=(await _0x4ef645['request'])['body'];return this['_getStreamReader'](_0x2730b7);},'abortController':_0x4ef645['abortController']};}['executeCustomAction']({content:_0x1b5c5c,message:_0x3d7676,model:_0x5541da,outputFormat:_0x258f94}){const _0x333142={'content':[{'type':'text','content':_0x1b5c5c}],'prompt':_0x3d7676,'model':_0x5541da,'outputFormat':_0x258f94},_0x9f1e2c=this['_sendApiRequest']('/actions/custom/calls','POST',_0x333142);return{'getStream':async()=>{const _0x492006=(await _0x9f1e2c['request'])['body'];return this['_getStreamReader'](_0x492006);},'abortController':_0x9f1e2c['abortController']};}['executeAction']({actionName:_0x1140f2,content:_0x345045,args:_0x472a39}){const _0x3db7b4={'content':[{'type':'text','content':_0x345045}],'args':_0x472a39},_0x54a315=this['_sendApiRequest']('/actions/system/'+_0x1140f2+'/calls','POST',_0x3db7b4);return{'getStream':async()=>{const _0x2d29e7=(await _0x54a315['request'])['body'];return this['_getStreamReader'](_0x2d29e7);},'abortController':_0x54a315['abortController']};}['uploadFile'](_0x2a6ceb,_0x49243b,_0x1ee6dc){const _0x1a28b3=new FormData();_0x1a28b3['append']('file',_0x49243b,_0x49243b['name']),_0x1ee6dc&&_0x1a28b3['append']('attributes',JSON['stringify'](_0x1ee6dc));const _0x2105d2=this['_sendApiRequest']('/conversations/'+_0x2a6ceb+'/files','POST',_0x1a28b3);return{'getId':async()=>(await _0x2105d2['request'])['json'](),'abortController':_0x2105d2['abortController']};}['fetchDocument'](_0x3f750b,_0x48e1c1){const _0x531392=this['_sendApiRequest']('/conversations/'+_0x3f750b+'/documents/'+_0x48e1c1,'GET');return{'getDocument':async()=>(await _0x531392['request'])['json'](),'abortController':_0x531392['abortController']};}['uploadDocument'](_0x410eaa,_0x5a82f2,_0x4ed043){const _0x484ad5={'content':_0x5a82f2};_0x4ed043&&(_0x484ad5['attributes']=_0x4ed043);const _0x2a1226=this['_sendApiRequest']('/conversations/'+_0x410eaa+'/documents','POST',_0x484ad5);return{'getId':async()=>(await _0x2a1226['request'])['json'](),'abortController':_0x2a1226['abortController']};}['fetchConversations'](_0x12da56,_0x4f5f26){const _0x3dd09e=new URLSearchParams();_0x3dd09e['append']('excludeEmpty','true'),_0x3dd09e['append']('limit','100'),_0x3dd09e['append']('group',_0x12da56),_0x4f5f26&&_0x3dd09e['append']('search',_0x4f5f26);const _0x679eec=this['_sendApiRequest']('/conversations?'+_0x3dd09e['toString'](),'GET');return{'getConversations':async()=>{const _0x48cbc3=await _0x679eec['request'];return(await _0x48cbc3['json']())['items'];},'abortController':_0x679eec['abortController']};}['deleteConversation'](_0xed90d){const _0x354144=this['_sendApiRequest']('/conversations/'+_0xed90d,'DELETE');return{'execute':async()=>{await _0x354144['request'];},'abortController':_0x354144['abortController']};}['updateConversation'](_0x14079b,_0x525b3c){const _0x124f3d=this['_sendApiRequest']('/conversations/'+_0x14079b,'PATCH',_0x525b3c);return{'getResult':async()=>(await _0x124f3d['request'],_0x525b3c),'abortController':_0x124f3d['abortController']};}['fetchConversation'](_0x23e01d){const _0x11cde8=this['_sendApiRequest']('/conversations/'+_0x23e01d,'GET');return{'getConversation':async()=>(await _0x11cde8['request'])['json'](),'abortController':_0x11cde8['abortController']};}['fetchConversationMessages'](_0x3bf2bb){const _0x53772b=this['_sendApiRequest']('/conversations/'+_0x3bf2bb+'/messages','GET');return{'getMessages':async()=>{const _0x46d4cd=await _0x53772b['request'];return(await _0x46d4cd['json']())['items'];},'abortController':_0x53772b['abortController']};}['uploadUrl'](_0x424d3d,_0x5ca5a1,_0x397537){const _0x3c01b6=this['_sendApiRequest']('/conversations/'+_0x424d3d+'/web-resources','POST',{'url':_0x5ca5a1,'attributes':_0x397537});return{'getId':async()=>(await _0x3c01b6['request'])['json'](),'abortController':_0x3c01b6['abortController']};}['getModels'](){const _0xe475a0=this['_sendApiRequest']('/models/1','GET');return{'list':async()=>{const _0x1b0c8b=await(await _0xe475a0['request'])['json'](),_0x40cde5=_0x1b0c8b['items']['map'](_0x5f1b36=>({..._0x5f1b36,'description':i(this['context']['locale'],'AI_MODEL_DESCRIPTION_'+_0x5f1b36['id']['toUpperCase']())}));return{..._0x1b0c8b,'items':_0x40cde5};},'abortController':_0xe475a0['abortController']};}['deleteFile'](_0x2e7470,_0x9e3ea1){const _0x3f2885=this['_sendApiRequest']('/conversations/'+_0x2e7470+'/files/'+_0x9e3ea1,'DELETE');return{'execute':async()=>{await _0x3f2885['request'];},'abortController':_0x3f2885['abortController']};}['deleteDocument'](_0x26fd98,_0x4b6c46){const _0x3abca9=this['_sendApiRequest']('/conversations/'+_0x26fd98+'/documents/'+_0x4b6c46,'DELETE');return{'execute':async()=>{await _0x3abca9['request'];},'abortController':_0x3abca9['abortController']};}['deleteWebResource'](_0x23a595,_0x1547a7){const _0x344a26=this['_sendApiRequest']('/conversations/'+_0x23a595+'/web-resources/'+_0x1547a7,'DELETE');return{'execute':async()=>{await _0x344a26['request'];},'abortController':_0x344a26['abortController']};}['callSystemReview']({reviewName:_0x38f8da,content:_0x1b0c6a,args:_0x3cbaf9}){const _0x8ead1d=this['_sendApiRequest']('/reviews/system/'+_0x38f8da+'/calls','POST',{'content':[{'type':'text','content':_0x1b0c6a}],'args':_0x3cbaf9});return{'getStream':async()=>{const _0x3d8987=(await _0x8ead1d['request'])['body'];return this['_getStreamReader'](_0x3d8987);},'abortController':_0x8ead1d['abortController']};}['callCustomReview']({content:_0x5b1993,prompt:_0xbfb8d5,model:_0xfcc5c1}){const _0x2881eb=this['_sendApiRequest']('/reviews/custom/calls','POST',{'content':[{'type':'text','content':_0x5b1993}],'prompt':_0xbfb8d5,'model':_0xfcc5c1});return{'getStream':async()=>{const _0x39fabf=(await _0x2881eb['request'])['body'];return this['_getStreamReader'](_0x39fabf);},'abortController':_0x2881eb['abortController']};}['upsertAIChatRating'](_0x3e55d4,_0x1b088b,_0x203221){const _0x342d46=this['_sendApiRequest']('/conversations/'+_0x3e55d4+'/messages/'+_0x1b088b+'/ratings','PUT',{'positiveCount':_0x203221['positiveCount'],'totalCount':_0x203221['totalCount']});return{'execute':async()=>{await _0x342d46['request'];},'abortController':_0x342d46['abortController']};}['upsertAIActionRating'](_0x52e926,_0x3cc61d,_0x188eea){const _0x2675de=this['_sendApiRequest']('/actions/system/'+_0x52e926+'/calls/'+_0x3cc61d+'/ratings','PUT',{'positiveCount':_0x188eea['positiveCount'],'totalCount':_0x188eea['totalCount']});return{'execute':async()=>{await _0x2675de['request'];},'abortController':_0x2675de['abortController']};}['upsertCustomAIActionRating'](_0x5c373f,_0xa6ad05){const _0x38a91c=this['_sendApiRequest']('/actions/custom/calls/'+_0x5c373f+'/ratings','PUT',{'positiveCount':_0xa6ad05['positiveCount'],'totalCount':_0xa6ad05['totalCount']});return{'execute':async()=>{await _0x38a91c['request'];},'abortController':_0x38a91c['abortController']};}['upsertAIReviewRating'](_0x470531,_0x43549d,_0x5312f5,_0x876943){const _0x45770a=this['_sendApiRequest']('/reviews/system/'+_0x470531+'/calls/'+_0x43549d+'/ratings','PUT',{'positiveCount':_0x5312f5['positiveCount'],'totalCount':_0x5312f5['totalCount'],'dataId':_0x876943});return{'execute':async()=>{await _0x45770a['request'];},'abortController':_0x45770a['abortController']};}['upsertCustomAIReviewRating'](_0x383523,_0x27e59a,_0x5fb84a){const _0x172f19=this['_sendApiRequest']('/reviews/custom/calls/'+_0x383523+'/ratings','PUT',{'positiveCount':_0x27e59a['positiveCount'],'totalCount':_0x27e59a['totalCount'],'dataId':_0x5fb84a});return{'execute':async()=>{await _0x172f19['request'];},'abortController':_0x172f19['abortController']};}['_sendApiRequest'](_0x47c370,_0x141788,_0x2745a3){const _0x5a1a8b=new AbortController(),_0x33dadf=_0x2745a3 instanceof FormData,_0x39754c={'Authorization':'Bearer\x20'+this['_token']?.['value']};_0x2745a3&&!_0x33dadf&&(_0x39754c['Content-Type']='application/json');const _0x22bfe1={'method':_0x141788,'headers':_0x39754c,'signal':_0x5a1a8b['signal']};return _0x2745a3&&(_0x22bfe1['body']=_0x33dadf?_0x2745a3:JSON['stringify'](_0x2745a3)),{'request':fetch(''+this['_apiUrl']+_0x47c370,_0x22bfe1)['catch'](_0x23b381=>{this['_handleError'](_0x23b381);})['then'](_0x18ecc9=>{if(!_0x18ecc9['ok'])throw new _0x38f49c('ai-request-failed',this,{'url':this['_apiUrl'],'path':_0x47c370,'method':_0x141788,'body':_0x2745a3,'status':(_0x18ecc9||{})['status'],'statusText':(_0x18ecc9||{})['statusText']});return _0x18ecc9;}),'abortController':_0x5a1a8b};}async*['_getStreamReader'](_0x2d5939){const _0xa5f68a=[],_0x17d77b=_0x2d5939['getReader'](),_0x439e50=wt({'onError':_0x57dbcf=>{this['_handleError'](_0x57dbcf);},'onEvent':_0x3d3dc1=>{_0x3d3dc1['data']=JSON['parse'](_0x3d3dc1['data']),_0xa5f68a['push'](_0x3d3dc1);}});try{let _0x795d94=!0x1;for(;!_0x795d94;){const {done:_0x3a0888,value:_0x55efd8}=await _0x17d77b['read']();_0x3a0888&&(_0x795d94=!0x0),_0x439e50['feed'](this['_decoder']['decode'](_0x55efd8,{'stream':!0x0})),yield*_0xa5f68a,_0xa5f68a['length']=0x0;}}catch(_0x2cbb2f){this['_handleError'](_0x2cbb2f);}finally{_0x17d77b['releaseLock'](),_0x439e50['reset']();}}['_handleError'](_0x49897f){if(_0x49897f instanceof _0x38f49c)throw _0x49897f;if(_0x49897f instanceof Error&&'AbortError'===_0x49897f['name'])throw new _0x38f49c('ai-request-aborted',this,{'originalError':_0x49897f});throw new _0x38f49c('ai-request-failed',this,{'originalError':_0x49897f});}}function ks(_0x977de1,_0x275872){const _0x368904=new _0x177962(_0x977de1),_0x2a818d=i(_0x977de1,'AI_TABS_LABEL_MINIMIZE'),_0x9d1d4e=i(_0x977de1,'AI_TABS_LABEL_MAXIMIZE');return _0x368904['set']({'withText':!0x1,'icon':_0x55cfa0,'tooltip':!0x0,'class':'ck-ai-tabs__resize\x20ck-ai-button-tertiary-text'}),_0x368904['bind']('label')['to'](_0x275872,'isMaximized',_0x3ab791=>_0x3ab791?_0x2a818d:_0x9d1d4e),_0x368904['bind']('icon')['to'](_0x275872,'isMaximized',_0x3d1029=>_0x3d1029?_0x139d5b:_0x55cfa0),_0x368904['bind']('isOn')['to'](_0x275872,'isMaximized'),_0x368904['on']('execute',()=>{_0x275872['fire']('resizeTabs');}),_0x368904;}function Ye(_0x458251){return _0x4f034e(_0x458251);}function Ct(_0x1fe3be){return _0x5516a8(_0x1fe3be);}function _t(_0x15dff1,_0x241eb1,_0x3c0951){const _0x59f93a=null!==_0x241eb1?_0x246571=>_0x246571['attribs'][_0x15dff1]===_0x241eb1:_0x33c624=>Boolean(_0x33c624['attribs'][_0x15dff1]);return ut(_0x4ac27a=>_0x12fdee(_0x4ac27a)&&_0x59f93a(_0x4ac27a),_0x3c0951);}function Be(_0x2be521,_0x48233e,_0x1207c7){const _0x274f3a=null!==_0x48233e?_0x321b32=>_0x321b32['attribs'][_0x2be521]===_0x48233e:_0x55117e=>Boolean(_0x55117e['attribs'][_0x2be521]);return _0x190a2a(_0x3b1c64=>_0x12fdee(_0x3b1c64)&&_0x274f3a(_0x3b1c64),_0x1207c7);}function mt(_0x2a18d2,_0x3e93a8){return _0x2a18d2&&_0x12fdee(_0x2a18d2)?_0x2a18d2['attribs'][_0x3e93a8]:null;}function Je(_0x36488f,_0x25966c,_0x2256d1){_0x12fdee(_0x36488f)&&(null===_0x2256d1?delete _0x36488f['attribs'][_0x25966c]:_0x36488f['attribs'][_0x25966c]=_0x2256d1);}function Fe(_0x4da74b,_0x1a876d,_0x2038b5){const _0x1b4996=_0x1a876d['cloneNode'](!0x0);'beforebegin'===_0x2038b5?_0x2d3ee2(_0x4da74b,_0x1b4996):'afterbegin'===_0x2038b5?to(_0x4da74b,_0x1b4996):'beforeend'===_0x2038b5?_0x3bc0ec(_0x4da74b,_0x1b4996):'afterend'===_0x2038b5&&_0x1d335e(_0x4da74b,_0x1b4996);}function Pe(_0x1a866a){const _0x2e62d6=[];let _0x3dcd7b=_0x1a866a;for(;_0x3dcd7b;)_0x3dcd7b=_0x1302ab(_0x3dcd7b),_0x3dcd7b&&_0x2e62d6['push'](_0x3dcd7b);return _0x2e62d6;}function Nr(_0x683ec3){return _0x683ec3['replace'](/^\s+/gm,'')['replace'](/\s+$/gm,'')['replace'](/\n*/g,'')['replace'](/\s+/g,'\x20')['replace'](/>\s*</g,'><');}function Qe(_0x2354af){let _0xfb07ca=0x0;for(;_0x2354af['parentNode'];)_0x2354af=_0x2354af['parentNode'],_0xfb07ca++;return _0xfb07ca;}function Xe(_0x316a90){const _0x3d0fe3=[];let _0x384e56=_0x316a90['nextSibling'];for(;_0x384e56;)_0x3d0fe3['push'](_0x384e56),_0x384e56=_0x384e56['nextSibling'];_0x3d0fe3['forEach'](_0x22f6fa=>{_0x257fd3(_0x22f6fa);});}class Oe extends/* #__PURE__ -- @preserve */
ts(){['_m2html'];constructor(){super(),this['_m2html']=new _0x5f2ec9();}['convertMarkdownToHTML'](_0x29e76b){const _0x37476c=this['_m2html']['parse'](_0x29e76b);return this['parseAndNormalizeHTML'](_0x37476c);}['parseAndNormalizeHTML'](_0x2e68e5){return this['_parseHTML'](_0x2e68e5);}['_parseHTML'](_0x42b3fb){const _0x388981=Ye('<dummy>'+_0x42b3fb['replace'](/^\t+/gm,'\x20')['replace'](/\n*/g,'')['replace'](/\s+/g,'\x20')['replace'](/<[^>]*?$/g,'')+'</dummy>');return _0x388981['children']=_0x388981['children'][0x0]['children'],_0x388981;}}class Ne extends/* #__PURE__ -- @preserve */
ts(){['_generateUid'];['_touchedNodesState']={'newIds':[],'modifiedIds':[],'removedIds':[],'invalidIds':[],'lastTouchedId':null};['_existingDataIds']=new Set();constructor(_0x37ccc8){super(),this['_generateUid']=_0x37ccc8||_0xa215c8;}['merge'](_0x14169d,_0x521484,_0xf7884){const _0xe2f2b4=_0x14169d['cloneNode'](!0x0);if(0x0===_0x521484['childNodes']['length']){const _0x8bf291=[];return Be('data-id','new-element',_0xe2f2b4)['forEach'](_0xf327b=>{const _0x1c1765=this['_generateUid']();Je(_0xf327b,'data-id',_0x1c1765),_0x8bf291['push'](_0x1c1765);}),this['_removeSpecialComments'](_0xe2f2b4),{'parsedContent':_0xe2f2b4,'newNodeIds':_0x8bf291,'modifiedNodeIds':[],'removedNodeIds':[]};}_0xf7884&&_0xf7884['markUnstableElements']&&this['_markLastTagElementUnstable'](_0xe2f2b4),this['_touchedNodesState']['newIds']=[],this['_touchedNodesState']['modifiedIds']=[],this['_touchedNodesState']['removedIds']=[],this['_touchedNodesState']['invalidIds']=[],this['_touchedNodesState']['lastTouchedId']=null,this['_existingDataIds']=new Set(Be('data-id',null,_0x521484)['map'](_0x1d7250=>mt(_0x1d7250,'data-id'))['filter'](_0x5e4786=>!!_0x5e4786));let _0x250b49=-0x1,_0x263d83=!0x1;const _0x2c925c=_0xe2f2b4['childNodes'],_0x35b7f8=Array['from'](_0x2c925c)['filter'](_0x119b29=>!(0x3===_0x119b29['nodeType']&&''===Ct(_0x119b29)['trim']())),_0x116569=_0x35b7f8['length'];for(let _0x2504e6=0x0;_0x2504e6<_0x116569;_0x2504e6++){const _0x3e316c=_0x35b7f8[_0x2504e6],_0x5f8a17=_0x35b7f8[_0x2504e6+0x1];if(this['_isNewNode'](_0x3e316c)){if(-0x1===_0x250b49&&(_0x250b49=_0x2504e6),this['_markWrappedElements'](_0x3e316c),!this['_isNewNode'](_0x5f8a17)){const [_0x1546b2,_0x145eb8]=this['_findReferenceNode'](_0x3e316c,_0x263d83,_0x521484);if(_0x1546b2){const _0x57375f=Array['from'](_0x35b7f8)['slice'](_0x250b49,_0x2504e6+0x1);this['_insertNodes'](_0x1546b2,_0x57375f,_0x145eb8),_0x250b49=-0x1;}}}else{if(this['_isExistingContentComment'](_0x3e316c))_0x263d83=!0x0;else{if(this['_isExistingNode'](_0x3e316c)){const _0x303d69=mt(_0x3e316c,'data-id');if(_0x303d69&&this['_existingDataIds']['has'](_0x303d69)){const _0x244915=_t('data-id',_0x303d69,_0x521484);this['_replaceNode'](_0x244915,_0x3e316c);}if(this['_touchedNodesState']['removedIds']['includes'](_0x303d69)){const _0x49ccbe=this['_touchedNodesState']['removedIds']['indexOf'](_0x303d69);this['_touchedNodesState']['removedIds']['splice'](_0x49ccbe,0x1);}}else{if(this['_isDelNode'](_0x3e316c)){const _0x590af9=mt(_0x3e316c,'data-id');this['_touchedNodesState']['modifiedIds']['includes'](_0x590af9)||this['_storeDeletedElementIds'](_0x3e316c);}}}}}for(const _0x464c38 of this['_touchedNodesState']['removedIds']){const _0x2ce2ae=_t('data-id',_0x464c38,_0x521484);if(_0x2ce2ae){if(_0xf7884&&_0xf7884['replaceRemovedWith']){this['_touchedNodesState']['lastTouchedId']=_0x464c38;const _0x354a3e=_0xf7884['replaceRemovedWith']['cloneNode'](!0x0);Je(_0x354a3e,'data-id',_0x464c38),Je(_0x354a3e,'data-removed','true'),_0x1105f8(_0x2ce2ae,_0x354a3e);}else _0x257fd3(_0x2ce2ae);}}if(Be('data-wrapped-id',null,_0x521484)['forEach'](_0x559098=>{const _0xab3a51=_t('data-id',mt(_0x559098,'data-wrapped-id'),_0x521484);var _0x4b4b18,_0x5e9558;_0xab3a51&&(_0x5e9558=_0x559098,_0x257fd3(_0x4b4b18=_0xab3a51),_0x1105f8(_0x5e9558,_0x4b4b18));}),Be('data-id','new-element',_0x521484)['forEach'](_0x49ce30=>{const _0x41e395=this['_getUid'](_0x49ce30);Je(_0x49ce30,'data-id',_0x41e395),this['_touchedNodesState']['newIds']['push'](_0x41e395);}),this['_removeSpecialComments'](_0x521484),_0xf7884&&_0xf7884['markUnstableElements']&&this['_markUnstableElements'](_0x521484,_0xf7884['markUnstableElementsDepth']||0x0),_0xf7884&&_0xf7884['cutAfterLastChange']&&this['_touchedNodesState']['lastTouchedId']){let _0x51c04f=_t('data-id',this['_touchedNodesState']['lastTouchedId'],_0x521484);for(;_0x51c04f;)Xe(_0x51c04f),_0x51c04f=_0x51c04f['parentNode'];}return{'parsedContent':_0x521484,'newNodeIds':this['_touchedNodesState']['newIds'],'modifiedNodeIds':this['_touchedNodesState']['modifiedIds'],'removedNodeIds':this['_touchedNodesState']['removedIds']};}['_insertNodes'](_0xacd75f,_0xa215ab,_0xe77981){for(const _0x14ddb5 of _0xa215ab){const _0x3db6f7=this['_getUid'](_0x14ddb5);Je(_0x14ddb5,'data-id',_0x3db6f7),this['_touchedNodesState']['newIds']['push'](_0x3db6f7),this['_touchedNodesState']['lastTouchedId']=_0x3db6f7;}const _0x4f5f44='afterbegin'===_0xe77981||'afterend'===_0xe77981?_0xa215ab['reverse']():_0xa215ab;for(const _0x59d9de of _0x4f5f44)Fe(_0xacd75f,_0x59d9de,_0xe77981);}['_replaceNode'](_0x55a414,_0x4a3c8e){if(!_0x55a414)return;if(_0x3c4bff=_0x4a3c8e,Nr(Ct(_0x55a414))===Nr(Ct(_0x3c4bff)))return;var _0x3c4bff;const _0xfeb802=this['_getUid'](_0x55a414);Je(_0x4a3c8e,'data-id',_0xfeb802),this['_touchedNodesState']['modifiedIds']['push'](_0xfeb802),this['_touchedNodesState']['lastTouchedId']=_0xfeb802,_0x1105f8(_0x55a414,_0x4a3c8e['cloneNode'](!0x0));}['_findReferenceNode'](_0x423455,_0x34035c,_0x36c5e9){const _0x35efdc=this['_findPrevElementWithDataId'](_0x423455,!0x1);if(_0x35efdc){const _0x352796=this['_getNodeDataId'](_0x35efdc),_0x313a60=_t('data-id',_0x352796,_0x36c5e9);if(_0x313a60)return[_0x313a60,'afterend'];this['_touchedNodesState']['invalidIds']['push'](_0x352796);}const _0x2f6e64=this['_findNextElementWithDataId'](_0x423455,!0x1);if(_0x2f6e64){const _0x1ef26c=this['_getNodeDataId'](_0x2f6e64),_0x2bd876=_t('data-id',_0x1ef26c,_0x36c5e9);if(_0x2bd876)return[_0x2bd876,'beforebegin'];this['_touchedNodesState']['invalidIds']['push'](_0x1ef26c);}return _0x34035c?_0x423455['nextSibling']?this['_findFallbackReferenceNode'](_0x423455,_0x36c5e9):[_0x36c5e9['childNodes'][_0x36c5e9['childNodes']['length']-0x1],'afterend']:[_0x36c5e9['childNodes'][0x0],'beforebegin'];}['_findFallbackReferenceNode'](_0xd1c8be,_0x475a81){const _0x21484c=[],_0x15bbb8=this['_findPrevElementWithDataId'](_0xd1c8be,!0x0);if(_0x15bbb8){const _0x3166db=_t('data-id',this['_getNodeDataId'](_0x15bbb8),_0x475a81);_0x3166db&&_0x21484c['push']([_0x3166db,'afterend']);}const _0xad2bde=this['_findNextElementWithDataId'](_0xd1c8be,!0x0);if(_0xad2bde){const _0x17bf7a=_t('data-id',this['_getNodeDataId'](_0xad2bde),_0x475a81);_0x17bf7a&&_0x21484c['push']([_0x17bf7a,'beforebegin']);}if(_0x21484c['length']>0x1)return Qe(_0x21484c[0x0][0x0])<=Qe(_0x21484c[0x1][0x0])?_0x21484c[0x0]:_0x21484c[0x1];return 0x1===_0x21484c['length']?_0x21484c[0x0]:[_0x475a81['lastChild'],'afterend'];}['_findNextElementWithDataId'](_0x42b2da,_0x3e6f26){let _0x3ded46=_0x42b2da['nextSibling'],_0x244373=null,_0x34b0ed=!0x1;for(;_0x3ded46;){if(_0x443cb2(_0x3ded46)){if(this['_isDelNode'](_0x3ded46)&&(_0x244373=_0x3ded46),this['_isExistingContentComment'](_0x3ded46)&&_0x3e6f26&&!_0x34b0ed){_0x34b0ed=!0x0,_0x3ded46=_0x3ded46['nextSibling'];continue;}break;}const _0x110c35=mt(_0x3ded46,'data-id');if(_0x110c35&&'new-element'!==_0x110c35&&this['_existingDataIds']['has'](_0x110c35)){_0x244373=_0x3ded46;break;}_0x3ded46=_0x3ded46['nextSibling'];}return _0x244373;}['_findPrevElementWithDataId'](_0x7844dc,_0x7ba6e0){let _0x4a39a5=_0x7844dc['previousSibling'],_0x2ecdcc=null,_0x8dd86e=!0x1;for(;_0x4a39a5;){if(_0x443cb2(_0x4a39a5)){if(this['_isDelNode'](_0x4a39a5)&&(_0x2ecdcc=_0x4a39a5),this['_isExistingContentComment'](_0x4a39a5)&&_0x7ba6e0&&!_0x8dd86e){_0x8dd86e=!0x0,_0x4a39a5=_0x4a39a5['previousSibling'];continue;}break;}const _0x1866ad=mt(_0x4a39a5,'data-id');if(_0x1866ad&&'new-element'!==_0x1866ad&&this['_existingDataIds']['has'](_0x1866ad)){_0x2ecdcc=_0x4a39a5;break;}_0x4a39a5=_0x4a39a5['previousSibling'];}return _0x2ecdcc;}['_markWrappedElements'](_0x4c1807){_0x12fdee(_0x4c1807)&&Be('data-id',null,_0x4c1807)['forEach'](_0x11f18f=>{this['_isExistingNode'](_0x11f18f)&&!this['_hasWrappedParent'](_0x11f18f)&&(Je(_0x11f18f,'data-wrapped-id',mt(_0x11f18f,'data-id')),Je(_0x11f18f,'data-id',null));});}['_getNodeDataId'](_0x105a42){if(!_0x105a42)return null;if(_0x12fdee(_0x105a42))return mt(_0x105a42,'data-id');if(_0x443cb2(_0x105a42)){const _0x3c7a08=Ct(_0x105a42)['match'](/removed[\s*-]data-id="([^"]+)"/);if(_0x3c7a08&&_0x3c7a08[0x1])return _0x3c7a08[0x1];}return null;}['_storeDeletedElementIds'](_0xd0b1c8){if(_0x443cb2(_0xd0b1c8)){const _0x44a086=Ct(_0xd0b1c8)['match'](/removed[\s*-]data-id="([^"]+)"/);_0x44a086&&_0x44a086[0x1]&&this['_touchedNodesState']['removedIds']['push'](_0x44a086[0x1]);}}['_getUid'](_0x1fd225){return this['_isExistingNode'](_0x1fd225)?mt(_0x1fd225,'data-id'):this['_generateUid']();}['_removeSpecialComments'](_0x384c8d){(function(_0x2cb4cd){return _0x15c81d(_0x131e8a=>_0x443cb2(_0x131e8a),_0x2cb4cd,!0x0,0x1/0x0);}(_0x384c8d)['filter'](_0x5d5a50=>this['_isDelNode'](_0x5d5a50)||this['_isExistingContentComment'](_0x5d5a50))['forEach'](_0x5821d5=>{_0x257fd3(_0x5821d5);}));}['_markLastTagElementUnstable'](_0x4ebcd3){const _0x366bb7=_0x4ebcd3['childNodes'],_0xa1402=_0x366bb7[_0x366bb7['length']-0x1];_0xa1402&&_0x12fdee(_0xa1402)&&Je(_0xa1402,'data-unstable','true');}['_markUnstableElements'](_0x2757f1,_0xb5cf47){const _0x2ae5bb=_t('data-unstable','true',_0x2757f1);if(!_0x2ae5bb)return;const _0x406fc2=Pe(_0x2ae5bb)['slice'](0x0,-0x1),_0x1165c0=_0x406fc2['length'];let _0x2901cb=_0x2ae5bb;if(_0x1165c0>_0xb5cf47){let _0x4e882c=_0x1165c0,_0x56ef65=null;for(;_0x4e882c>_0xb5cf47&&_0x4e882c>=0x0;)_0x4e882c--,_0x56ef65=_0x406fc2[_0x4e882c];_0x56ef65&&(_0x2901cb=_0x56ef65,Je(_0x2ae5bb,'data-unstable',null),Je(_0x56ef65,'data-unstable','true'));}else{if(_0x1165c0<_0xb5cf47){let _0x567438=_0x1165c0,_0x26ae79=_0x2ae5bb;for(;_0x567438<_0xb5cf47;){const _0x6c123c=_0x26ae79['childNodes']['filter'](_0x22917a=>_0x12fdee(_0x22917a));if(0x0===_0x6c123c['length'])break;_0x567438++,_0x26ae79=_0x6c123c[_0x6c123c['length']-0x1];}_0x26ae79&&(_0x2901cb=_0x26ae79,Je(_0x2ae5bb,'data-unstable',null),Je(_0x26ae79,'data-unstable','true'));}}let _0x20811f=_0x2901cb;for(;_0x20811f;){for(;_0x20811f['nextSibling'];)_0x20811f=_0x20811f['nextSibling'],_0x12fdee(_0x20811f)&&Je(_0x20811f,'data-unstable','true');_0x20811f=_0x20811f['parentNode'];}}['_isNewNode'](_0x4acca0){return Boolean('new-element'===mt(_0x4acca0,'data-id'));}['_isExistingNode'](_0xcdfdd5){return Boolean((mt(_0xcdfdd5,'data-id')||'')['length']>0x0&&'new-element'!==mt(_0xcdfdd5,'data-id'));}['_isDelNode'](_0x4e73de){return!!_0x4e73de&&Boolean(_0x443cb2(_0x4e73de)&&Ct(_0x4e73de)['match'](/removed[\s*-]data-id="[^"]+"/));}['_hasWrappedParent'](_0x2b6181){let _0x219e89=_0x2b6181['parentNode'];for(;_0x219e89;){if(mt(_0x219e89,'data-wrapped-id'))return!0x0;_0x219e89=_0x219e89['parentNode'];}return!0x1;}['_isExistingContentComment'](_0x282a42){return Boolean(_0x443cb2(_0x282a42)&&Ct(_0x282a42)['match'](/\s*existing[\s*-](content|document)\s*/g));}}const Gr=['modification-delta','text-delta','web-search','reasoning'],Kr=['conversation-title'];class fe extends ts(){['id'];['interactionId'];['type'];['sources']=[];['parsedContent']=new ft([]);['parsedMergedContent']=new ft([]);['changeGroups']=[];['areActionsDisabled']=!0x1;['documentContextContent'];['aiResponseParser'];['aiResponseApplier'];['editor'];constructor({type:_0x228d8f,content:_0x1cca52='',isDone:_0xf45ef9=!0x1,interactionId:_0x14a4f2,areActionsDisabled:_0x29bb3e,documentContextContent:_0x31ced5,editor:_0x3810ce}){super(),this['id']=_0xa215c8(),this['interactionId']=_0x14a4f2,this['type']=_0x228d8f,this['areActionsDisabled']=!!_0x29bb3e,this['editor']=_0x3810ce,this['aiResponseParser']=new Oe(),this['aiResponseApplier']=new Ne(),this['documentContextContent']=Ye(_0x31ced5||''),this['set']('isDone',_0xf45ef9),this['on']('change:content',()=>{this['onContentChange']();}),this['set']('content',_0x1cca52);}['appendContent'](_0xa8fa0c){this['set']('content',this['content']+_0xa8fa0c);}['done'](){this['isDone']||(this['set']('isDone',!0x0),this['onContentChange']());}['destroy'](){this['stopListening']();}['setChangeGroupState'](_0x52ff5e,_0x5cfe68){this['changeGroups'][_0x52ff5e]['state']=_0x5cfe68,this['fire']('replyChangeGroupStateUpdated',{'reply':this,'index':_0x52ff5e,'state':_0x5cfe68});}['onContentChange'](){if('modification-delta'===this['type']){this['parsedContent']=this['aiResponseParser']['parseAndNormalizeHTML'](this['content']);const _0x5a2ea2=this['changeGroups'];this['updateChangeGroups']();const _0x52cf4c=this['_getDifferentChangeGroups'](_0x5a2ea2,this['changeGroups']);(_0x52cf4c['length']||this['isDone'])&&this['fire']('replyContentUpdated',this,_0x52cf4c);}else this['parsedContent']=this['aiResponseParser']['convertMarkdownToHTML'](this['content']),this['fire']('replyContentUpdated',this);}['_getDifferentChangeGroups'](_0x60b379,_0x3b1b88){const _0x2f0a04=[];for(const _0x394268 of _0x3b1b88){const _0x4f26fa=_0x60b379[_0x394268['index']];_0x4f26fa?_0x4f26fa['changes']['length']!==_0x394268['changes']['length']?_0x2f0a04['push'](_0x394268):_0x4f26fa['changes']['forEach']((_0x23cc01,_0x2f8ac7)=>{const _0x180915=_0x394268['changes'][_0x2f8ac7];_0x23cc01['id']!==_0x180915['id']&&_0x2f0a04['push'](_0x394268);}):_0x2f0a04['push'](_0x394268);}return _0x2f0a04;}['updateChangeGroups'](){const _0x1ccd0f=new _0x5e1206('p',{},[new _0x5e1206('span',{'style':'color:\x20#808080;\x20font-style:\x20italic'},[new _0x333321(i(this['editor']['locale'],'AI_SUGGESTION_CONTENT_PART_REMOVED'))])]),_0x53456f=this['aiResponseApplier']['merge'](this['parsedContent'],this['documentContextContent']['cloneNode'](!0x0),{'markUnstableElements':!this['isDone'],'replaceRemovedWith':_0x1ccd0f,'cutAfterLastChange':!this['isDone']});if(!_0x53456f['modifiedNodeIds']['length']&&!this['isDone'])return;this['parsedMergedContent']=_0x53456f['parsedContent'];let _0x5043c2=[];if(_0x190a2a(_0x574164=>{const _0x1e12e3=mt(_0x574164,'data-id');if(!_0x1e12e3||!_0x42fa4e(_0x1e12e3))return!0x1;const _0x355740=[_0x574164,...Pe(_0x574164)]['at'](-0x2);if(_0x574164!=_0x355740){const _0x23b102=mt(_0x355740,'data-id');_0x42fa4e(_0x23b102)||(_0x5043c2['push']({'node':_0x355740,'id':_0x23b102,'type':'modified'}),_0x53456f['modifiedNodeIds']['push'](_0x23b102));}else _0x53456f['modifiedNodeIds']['includes'](_0x1e12e3)?_0x5043c2['push']({'node':_0x574164,'type':'modified','id':_0x1e12e3}):_0x53456f['newNodeIds']['includes'](_0x1e12e3)?_0x5043c2['push']({'node':_0x574164,'type':'new','id':_0x1e12e3,'anchorId':mt(_0x574164['previousSibling'],'data-id')}):_0x5043c2['push']({'node':_0x574164,'type':'removed','id':_0x1e12e3});return!0x0;},this['parsedMergedContent']),_0x5043c2=_0x5043c2['filter'](({node:_0x86b2fb})=>[...Pe(_0x86b2fb),_0x86b2fb]['every'](_0x3ea57e=>!mt(_0x3ea57e,'data-unstable'))),0x0==_0x5043c2['length'])return;const _0x25afb4=[[_0x5043c2[0x0]]];for(let _0x5b1ab7=0x1;_0x5b1ab7<_0x5043c2['length'];_0x5b1ab7++){const _0x8e46fc=_0x25afb4[_0x25afb4['length']-0x1],_0x424a89=_0x8e46fc[_0x8e46fc['length']-0x1];_0x5043c2[_0x5b1ab7]['node']['previousSibling']==_0x424a89['node']&&'modified'!=_0x5043c2[_0x5b1ab7]['type']&&'modified'!=_0x424a89['type']?_0x8e46fc['push'](_0x5043c2[_0x5b1ab7]):_0x25afb4['push']([_0x5043c2[_0x5b1ab7]]);}for(const _0xb5e9ff of _0x25afb4){const _0x267b8d=_0xb5e9ff[0x0],_0x33d453=_0xb5e9ff[_0xb5e9ff['length']-0x1],_0x525df2=_0x4d7bf0(_0x267b8d['node']['previousSibling']);_0x525df2&&_0xb5e9ff['unshift'](_0x525df2);const _0x5ae249=_0x4d7bf0(_0x33d453['node']['nextSibling']);_0x5ae249&&_0xb5e9ff['push'](_0x5ae249);}function _0x42fa4e(_0x157cf6){return _0x53456f['modifiedNodeIds']['includes'](_0x157cf6)||_0x53456f['newNodeIds']['includes'](_0x157cf6)||_0x53456f['removedNodeIds']['includes'](_0x157cf6);}function _0x4d7bf0(_0x5168cb){if(_0x5168cb&&mt(_0x5168cb,'data-id')&&!mt(_0x5168cb,'data-unstable')){const _0x135cdf=mt(_0x5168cb,'data-id');if(!_0x42fa4e(_0x135cdf))return{'node':_0x5168cb,'type':'context','id':_0x135cdf};}return null;}this['changeGroups']=_0x25afb4['map']((_0xcaee35,_0x5dcb06)=>({'changes':_0xcaee35,'state':'pending','index':_0x5dcb06}));}}function Wi(_0x48fcd5){return Object['values'](Gr)['includes'](_0x48fcd5);}function qi(_0x241819){return Kr['includes'](_0x241819);}function Ji(_0x1b1e46){return'conversation-title'===_0x1b1e46;}function Ki(_0x3ce345){return'source'===_0x3ce345;}const ge=['interactionCreated','interactionStarted','interactionStopped','interactionFinished','interactionDestroyed','replyCreated','replyContentUpdated','replyChangeGroupStateUpdated','setConversationTitle','webSearchStarted','webSearchFinished','reasoningStarted','reasoningFinished','error'];class pe extends _0x44d7d3(){['id'];['replies']=[];['currentReply'];['messageId'];['actionCallId'];['currentRequest'];['connector'];['isStopped']=!0x1;['isDestroyed']=!0x1;['editor'];['_isReasoning']=!0x1;['_isWebSearching']=!0x1;constructor({connector:_0x4f1839,editor:_0x493d4d}){super(),this['id']=_0xa215c8(),this['connector']=_0x4f1839,this['isStopped']=!0x0,this['editor']=_0x493d4d;}async['start'](){let _0x367667;const _0x44247a=[];this['isStopped']=!0x1;try{this['currentRequest']=await this['sendRequest'](),this['fire']('interactionStarted',this);const _0x240d44=await this['currentRequest']['getStream']();for await(const _0x9745db of _0x240d44){if(this['isStopped'])return;if('error'===_0x9745db['event'])return void this['fire']('error',{'error':new _0x38f49c('ai-chat-interaction-error',this)});if('message-metadata'!==_0x9745db['event']){if('action-metadata'!==_0x9745db['event']){if(Ji(_0x9745db['event'])&&this['setConversationTitle'](_0x9745db['data']['conversationTitle'],!0x0),Ki(_0x9745db['event']))_0x44247a['push'](_0x9745db['data']['source']);else{if(Wi(_0x9745db['event'])){if(_0x9745db['event']!==_0x367667){if(_0x367667=_0x9745db['event'],'web-search'===_0x9745db['event']){this['_isWebSearching']||(this['_isWebSearching']=!0x0,this['fire']('webSearchStarted',this));continue;}if('reasoning'===_0x9745db['event']){this['_isReasoning']||(this['_isReasoning']=!0x0,this['fire']('reasoningStarted',this));continue;}this['_isReasoning']&&(this['_isReasoning']=!0x1,this['fire']('reasoningFinished',this)),this['_isWebSearching']&&(this['_isWebSearching']=!0x1,this['fire']('webSearchFinished',this)),this['currentReply']&&this['currentReply']['done'](),this['currentReply']=this['createReply']({'type':_0x9745db['event'],'interactionId':this['id']}),_0x44247a['length']>0x0&&'modification-delta'===_0x9745db['event']&&(this['currentReply']['sources']=_0x44247a['splice'](0x0));}_0x9745db['data']['textDelta']&&this['currentReply']['appendContent'](_0x9745db['data']['textDelta']);}else qi(_0x9745db['event'])||_0x16f6f3('ai-interaction-invalid-event-type',{'chunk':_0x9745db});}}else this['actionCallId']=_0x9745db['data']['callId'];}else this['messageId']=_0x9745db['data']['id'];}}finally{this['isStopped']||(_0x44247a['length']>0x0&&(this['currentReply']['sources']=_0x44247a['splice'](0x0)),this['_finalizeInteraction'](),this['fire']('interactionFinished',this));}}['stop'](){this['isStopped']||(this['_finalizeInteraction'](),this['fire']('interactionStopped',this));}['getReply'](_0x53d668){return this['replies']['find'](_0x1976cc=>_0x1976cc['id']===_0x53d668);}['destroy'](){this['isDestroyed']||(this['stop'](),this['replies']['forEach'](_0xe86441=>_0xe86441['destroy']()),this['replies']=[],this['isDestroyed']=!0x0,this['fire']('interactionDestroyed',this),this['stopListening']());}['createReply'](_0x41fa68){const _0x7d0fb8=new fe({'editor':this['editor'],'documentContextContent':this['getDocumentContext']()?.['content'],..._0x41fa68});return this['replies']['push'](_0x7d0fb8),_0x7d0fb8['delegate'](...ge)['to'](this),this['fire']('replyCreated',_0x7d0fb8),_0x7d0fb8;}['setConversationTitle'](_0x1bb658,_0x3b5b4f=!0x1){this['fire']('setConversationTitle',_0x1bb658,_0x3b5b4f);}['_finalizeInteraction'](){this['isStopped']=!0x0,this['currentRequest']&&this['currentRequest']['abortController']['abort'](),this['currentReply']&&this['currentReply']['done'](),this['currentRequest']=this['currentReply']=void 0x0;}}var xe=function(_0x30c100){return _0x30c100['FILE']='file',_0x30c100['DOCUMENT']='document',_0x30c100['URL']='web-resource',_0x30c100['TEXT']='text',_0x30c100['SELECTION']='selection',_0x30c100;}({}),Ie=function(_0x2e6c88){return _0x2e6c88['TEXT']='text',_0x2e6c88['MARKDOWN']='markdown',_0x2e6c88['HTML']='html',_0x2e6c88;}({});const xi=['contextItemAdded','contextItemRemoved','contextItemLoadingEnded','contextSent','error','addContextOptionsChanged','sourceResourcesLoaded','resourceStateChanged','uploadProgressChanged'];class Ci extends ts(){['_connector'];['_config'];['_ownerId'];constructor({connector:_0x84af97,config:_0x4749a8,ownerId:_0x40fa0d}){super(),this['_connector']=_0x84af97,this['_config']=_0x4749a8,this['_ownerId']=_0x40fa0d;}['init'](){this['_pendingContextItems']=new Map(),this['_conversationContextItems']=new Map(),this['_ongoingUploads']=new Map(),this['_ongoingUploadOperations']=new Map(),this['_setAddContextOptionsDefaultState']();}['getPendingContextItems'](){return this['_pendingContextItems'];}async['populateFromMessage'](_0x2d8385){const _0x5aefa6=await this['_createContextItemFromContent'](_0x2d8385);return this['_addToConversationContextItem'](_0x5aefa6),'current-document'===_0x5aefa6['uiId']&&this['_toggleAddCurrentDocumentOptionVisibility'](),_0x5aefa6;}async['_createContextItemFromContent'](_0x5d927c){if(_0x5d927c['type']===xe['DOCUMENT']){const _0x2cfd33=await this['_connector']['fetchDocument'](this['_ownerId'],_0x5d927c['id'])['getDocument']();return{'id':'current-document','uiId':'current-document','label':'Current\x20document','type':_0x5d927c['type'],'content':_0x2cfd33['content'],'hidden':this['_conversationContextItems']['has']('current-document'),'version':_0x2cfd33['attributes']?.['version'],'sessionId':_0x2cfd33['attributes']?.['sessionId']};}return{'id':_0x5d927c['id'],'uiId':_0x5d927c['id'],'label':_0x5d927c['attributes']?.['label']||_0x5d927c['name']||_0x5d927c['url']||_0x5d927c['id'],'type':_0x5d927c['type'],..._0x5d927c?.['attributes']?.['resourceId']?{'resourceId':_0x5d927c['attributes']?.['resourceId']}:{}};}['getSentContextItems'](){return new Map(this['_conversationContextItems']);}['removeFromContext'](_0x4a0c76){const _0x54da6f=this['_pendingContextItems']['get'](_0x4a0c76);_0x54da6f?.['isReadOnly']||this['_removeContextItem'](_0x4a0c76);}['clearPendingContextItems'](){if(0x0===this['_pendingContextItems']['size'])return;for(const _0x48139c of this['_pendingContextItems']['values']())this['_removeContextItem'](_0x48139c['uiId']);const _0x2508d8=this['_conversationContextItems']['get']('current-document')||this['_pendingContextItems']['get']('current-document');_0x2508d8&&this['_addContextItem']({..._0x2508d8,'isReadOnly':!0x0,'hidden':!0x0});}['addToConversationContext'](_0xfa2e2){for(const _0x4ab8e8 of _0xfa2e2['values']())this['_addToConversationContextItem'](_0x4ab8e8);this['clearPendingContextItems'](),this['fire']('contextSent',{'contextItems':Array['from'](this['getSentContextItems']()['values']())});}['isCurrentDocumentInContext'](){return this['_pendingContextItems']['has']('current-document');}['isSelectionInContext'](){return this['_pendingContextItems']['has']('selection');}['isCurrentDocumentInConversation'](){return this['_conversationContextItems']['has']('current-document');}static['mapContextItemsToRequestData'](_0x368e37){return Array['from'](_0x368e37['values']())['map'](_0x236e1d=>this['_mapContextItemToRequestData'](_0x236e1d))['filter'](_0x4d5ec2=>null!==_0x4d5ec2);}async['addFilesToContext'](_0x2eb4fe,_0x46b7cd,_0x553441=xe['FILE']){const _0x431b0c='files-'+_0xa215c8();this['_startUploadOperation'](_0x431b0c);try{await Promise['all'](_0x2eb4fe['map'](async _0x575314=>{const _0x1c86ec='file-'+_0xa215c8(),_0x30d9c0=_0x190095(_0x575314['name']);try{this['_addContextItem']({'type':_0x553441,'label':_0x46b7cd?.['label']||_0x30d9c0,'uiId':_0x1c86ec,'resourceId':_0x46b7cd?.['resourceId']},!0x0);const _0x39fffe=this['_connector']['uploadFile'](this['_ownerId'],_0x575314,_0x46b7cd);this['_ongoingUploads']['set'](_0x1c86ec,_0x39fffe['abortController']);const {id:_0x3060db}=await _0x39fffe['getId']();this['_ongoingUploads']['delete'](_0x1c86ec),this['_finishContextItemLoading']({'type':_0x553441,'id':_0x3060db,'label':_0x46b7cd?.['label']||_0x30d9c0,'uiId':_0x1c86ec,'resourceId':_0x46b7cd?.['resourceId']},!0x1);}catch(_0x28de06){this['_ongoingUploads']['delete'](_0x1c86ec);if(!_0x28de06['message']['startsWith']('ai-request-aborted')){const _0x32ae04=new _0x38f49c('ai-chat-file-upload-failed',null,{'fileName':_0x30d9c0});_0x32ae04['stack']=_0x28de06['stack'],this['fire']('error',{'error':_0x32ae04,'fileName':_0x30d9c0});}this['_removeContextItem'](_0x1c86ec);}}));}finally{this['_finishUploadOperation'](_0x431b0c);}}['addCurrentDocumentToContext'](_0x30d387){if(this['isCurrentDocumentInContext']())return;const _0x29d8ca={'type':xe['DOCUMENT'],'uiId':'current-document','label':_0x30d387,'isReadOnly':this['_conversationContextItems']['has']('current-document'),'hidden':this['_conversationContextItems']['has']('current-document')};this['_addContextItem'](_0x29d8ca);}async['updateCurrentDocument'](_0x552f2d,_0x1d43cf,_0x1a93ac,_0x37a430){const _0x1f3e65=this['_pendingContextItems']['get']('current-document');if(_0x1f3e65&&_0x552f2d){_0x1f3e65['selection']=_0x37a430?_0x37a430['map'](_0x2ecce8=>({'start':_0x2ecce8['start'],'end':_0x2ecce8['end']})):[];try{if(_0x1f3e65['version']===_0x1d43cf)return;const {id:_0x1ed6f9}=await this['_connector']['uploadDocument'](this['_ownerId'],_0x552f2d,{'version':_0x1d43cf,'sessionId':_0x1a93ac})['getId']();_0x1f3e65['id']=_0x1ed6f9,_0x1f3e65['content']=_0x552f2d,_0x1f3e65['version']=_0x1d43cf,_0x1f3e65['sessionId']=_0x1a93ac;}catch(_0x49768c){const _0x3e80d3=new _0x38f49c('ai-chat-document-upload-failed',null);_0x3e80d3['stack']=_0x49768c['stack'],this['fire']('error',{'error':_0x3e80d3});}}}['addSelectionToContext'](_0x442004){this['_addContextItem']({'type':xe['SELECTION'],'label':_0x442004,'uiId':'selection','content':_0x442004});}['removeSelectionFromContext'](){this['_removeContextItem']('selection');}async['addUrlToContext'](_0x1ca0c5,_0x136cf1){const _0xa2121b='url-'+_0xa215c8();this['_startUploadOperation'](_0xa2121b);const _0x55b201='url-'+_0xa215c8();try{this['_addContextItem']({'type':xe['URL'],'label':_0x136cf1?.['label']||_0x1ca0c5,'uiId':_0x55b201,'resourceId':_0x136cf1?.['resourceId']},!0x0);const _0x17a61d=this['_connector']['uploadUrl'](this['_ownerId'],_0x1ca0c5,_0x136cf1);this['_ongoingUploads']['set'](_0x55b201,_0x17a61d['abortController']);const {id:_0x3cc231}=await _0x17a61d['getId']();this['_ongoingUploads']['delete'](_0x55b201),this['_finishContextItemLoading']({'type':xe['URL'],'id':_0x3cc231,'label':_0x136cf1?.['label']||_0x1ca0c5,'uiId':_0x55b201,'resourceId':_0x136cf1?.['resourceId']},!0x1);}catch(_0x5293e6){this['_ongoingUploads']['delete'](_0x55b201),(_0x5293e6['message']['startsWith']('ai-request-aborted')||this['fire']('error',{'error':new _0x38f49c('ai-chat-url-upload-failed',this,{'url':_0x1ca0c5,'originalError':_0x5293e6}),'url':_0x1ca0c5}),this['_removeContextItem'](_0x55b201));}finally{this['_finishUploadOperation'](_0xa2121b);}}async['loadSourceResources'](_0x58eced,_0x207126,_0x59f754){const _0x31ec0f=this['_addContextOptionsState']['sources']['find'](_0x253add=>_0x253add['id']===_0x58eced);if(!_0x31ec0f)return this['fire']('error',{'error':new _0x38f49c('ai-chat-source-not-found',this,{'sourceId':_0x58eced}),'sourceId':_0x58eced}),[];try{const _0x3ba6e5=(await _0x31ec0f['getResources'](_0x207126))['map'](_0x3c8dfb=>{const _0x38ef56=this['_isResourceInContext'](_0x3c8dfb['id']);return{..._0x3c8dfb,'isInContext':_0x38ef56};});return _0x31ec0f['resources']=_0x3ba6e5,this['fire']('sourceResourcesLoaded',{'sourceId':_0x58eced,'source':_0x31ec0f,'resources':_0x3ba6e5,'uid':_0x59f754}),_0x3ba6e5;}catch(_0x512271){return this['fire']('error',{'error':new _0x38f49c('ai-chat-source-resources-load-failed',this,{'sourceId':_0x58eced,'originalError':_0x512271}),'sourceId':_0x58eced,'sourceLabel':_0x31ec0f['label']}),[];}}async['addResourceToContext'](_0x260205,_0x1b034e){if(this['_isResourceInContext'](_0x1b034e['id']))return;let _0x1bfafc=_0x1b034e['data'];if(!_0x1bfafc&&_0x260205['getData'])try{_0x1bfafc=await _0x260205['getData'](_0x1b034e['id']);}catch(_0x13d8c9){return void this['fire']('error',{'error':new _0x38f49c('ai-chat-resource-load-failed',this,{'resourceId':_0x1b034e['id'],'sourceId':_0x260205['id'],'originalError':_0x13d8c9}),'resourceId':_0x1b034e['id'],'sourceId':_0x260205['id']});}if(_0x1bfafc)switch(_0x1b034e['type']){case xe['URL']:if('string'!=typeof _0x1bfafc)return void this['fire']('error',{'error':new _0x38f49c('ai-chat-context-invalid-data',this,{'resourceId':_0x1b034e['id'],'sourceId':_0x260205['id'],'expectedType':'string','actualType':typeof _0x1bfafc}),'resourceId':_0x1b034e['id'],'sourceId':_0x260205['id']});await this['addUrlToContext'](_0x1bfafc,{'label':_0x1b034e['label'],'resourceId':_0x1b034e['id']});break;case xe['FILE']:if(!(_0x1bfafc instanceof File))return void this['fire']('error',{'error':new _0x38f49c('ai-chat-context-invalid-data',this,{'resourceId':_0x1b034e['id'],'sourceId':_0x260205['id'],'expectedType':'File','actualType':typeof _0x1bfafc}),'resourceId':_0x1b034e['id'],'sourceId':_0x260205['id']});await this['addFilesToContext']([_0x1bfafc],{'label':_0x1b034e['label'],'resourceId':_0x1b034e['id']});break;case xe['TEXT']:if('object'!=typeof _0x1bfafc||!('content'in _0x1bfafc)||!('type'in _0x1bfafc))return void this['fire']('error',{'error':new _0x38f49c('ai-chat-context-invalid-data',this,{'resourceId':_0x1b034e['id'],'sourceId':_0x260205['id'],'expectedType':'object\x20with\x20content\x20and\x20type\x20properties','actualType':typeof _0x1bfafc}),'resourceId':_0x1b034e['id'],'sourceId':_0x260205['id']});_0x1bfafc=Ci['_convertTextResourceToFile'](_0x1bfafc,_0x1b034e['label']),await this['addFilesToContext']([_0x1bfafc],{'label':_0x1b034e['label'],'resourceId':_0x1b034e['id']},xe['TEXT']);break;default:this['fire']('error',{'error':new _0x38f49c('ai-chat-context-unsupported-type',this,{'resourceId':_0x1b034e['id'],'sourceId':_0x260205['id'],'resourceType':_0x1b034e['type']}),'resourceId':_0x1b034e['id'],'sourceId':_0x260205['id']});}else this['fire']('error',{'error':new _0x38f49c('ai-chat-resource-no-data',this,{'resourceId':_0x1b034e['id'],'sourceId':_0x260205['id']}),'resourceId':_0x1b034e['id'],'sourceId':_0x260205['id']});}static['_convertTextResourceToFile'](_0x1a0482,_0x119a6a){switch(_0x1a0482['type']){case Ie['MARKDOWN']:return new File([_0x1a0482['content']],_0x119a6a,{'type':'text/markdown'});case Ie['HTML']:return new File([_0x1a0482['content']],_0x119a6a,{'type':'text/html'});default:return new File([_0x1a0482['content']],_0x119a6a,{'type':'text/plain'});}}static['_mapContextItemToRequestData'](_0x2b9587){switch(_0x2b9587['type']){case xe['FILE']:return{'type':xe['FILE'],'id':_0x2b9587['id']};case xe['URL']:return{'type':xe['URL'],'id':_0x2b9587['id']};case xe['DOCUMENT']:return{'type':xe['DOCUMENT'],'id':_0x2b9587['id'],..._0x2b9587['selection']?.['length']&&{'selection':_0x2b9587['selection']}};case xe['TEXT']:return{'type':xe['FILE'],'id':_0x2b9587['id']};default:return null;}}['_addContextItem'](_0x196ef2,_0x4d721f=!0x1){if(this['_pendingContextItems']['set'](_0x196ef2['uiId'],_0x196ef2),_0x196ef2['hidden']||this['fire']('contextItemAdded',{'contextItem':_0x196ef2,'isLoading':_0x4d721f}),'current-document'===_0x196ef2['uiId']&&this['_toggleAddCurrentDocumentOptionVisibility'](),_0x196ef2['resourceId']){const _0x141698=this['_findSourceIdsByResourceId'](_0x196ef2['resourceId']);_0x141698&&_0x141698['forEach'](_0x1317ba=>{this['_updateResourceInContextState'](_0x1317ba,_0x196ef2['resourceId'],!0x0);});}}['_removeContextItem'](_0x1c3d0c){const _0x1b1ce0=this['_pendingContextItems']['get'](_0x1c3d0c),_0xbea7a=this['_ongoingUploads']['get'](_0x1c3d0c);if(_0xbea7a&&(_0xbea7a['abort'](),this['_ongoingUploads']['delete'](_0x1c3d0c)),_0x1b1ce0?.['resourceId']){const _0x12ad5c=this['_findSourceIdsByResourceId'](_0x1b1ce0['resourceId']);_0x12ad5c&&_0x12ad5c['forEach'](_0xe5082c=>{this['_updateResourceInContextState'](_0xe5082c,_0x1b1ce0['resourceId'],!0x1);});}this['_pendingContextItems']['delete'](_0x1c3d0c),this['fire']('contextItemRemoved',{'uiId':_0x1c3d0c,'type':_0x1b1ce0?.['type']}),'current-document'===_0x1c3d0c&&this['_toggleAddCurrentDocumentOptionVisibility']();}['_finishContextItemLoading'](_0x1ea0bc,_0x10421e){if(this['_pendingContextItems']['has'](_0x1ea0bc['uiId'])&&(this['_pendingContextItems']['set'](_0x1ea0bc['uiId'],_0x1ea0bc),this['fire']('contextItemLoadingEnded',{'contextItem':_0x1ea0bc,'isLoading':_0x10421e}),_0x1ea0bc['resourceId'])){const _0xc0fa9d=this['_findSourceIdsByResourceId'](_0x1ea0bc['resourceId']);_0xc0fa9d&&_0xc0fa9d['forEach'](_0x52da74=>{this['_updateResourceInContextState'](_0x52da74,_0x1ea0bc['resourceId'],!0x0);});}}['_addToConversationContextItem'](_0x56e0c7){this['_conversationContextItems']['set'](_0x56e0c7['uiId'],_0x56e0c7);}['_setAddContextOptionsDefaultState'](){this['_addContextOptionsState']={'document':{'enabled':!0x1!==this['_config']?.['document']?.['enabled'],'isHidden':!0x1},'urls':{'enabled':!0x1!==this['_config']?.['urls']?.['enabled']},'files':{'enabled':!0x1!==this['_config']?.['files']?.['enabled']},'sources':this['_getCustomSourcesInitialState']()},this['fire']('addContextOptionsChanged',{'options':this['_addContextOptionsState']});}['_getCustomSourcesInitialState'](){return this['_config']?.['sources']?.['map'](_0x396543=>({..._0x396543,'resources':[]}))??[];}['_toggleAddCurrentDocumentOptionVisibility'](){const _0x293a0b=this['isCurrentDocumentInContext']()||this['isCurrentDocumentInConversation']();this['_addContextOptionsState']['document']['isHidden']=_0x293a0b,this['fire']('addContextOptionsChanged',{'options':this['_addContextOptionsState']});}['_isResourceInContext'](_0x1cc8e8){for(const _0x4b2315 of this['_pendingContextItems']['values']())if(_0x4b2315['resourceId']===_0x1cc8e8)return!0x0;for(const _0x173979 of this['_conversationContextItems']['values']())if(_0x173979['resourceId']===_0x1cc8e8)return!0x0;return!0x1;}['_findSourceIdsByResourceId'](_0x246673){const _0x310b10=[];for(const _0x4b0063 of this['_addContextOptionsState']['sources']){_0x4b0063['resources']['find'](_0x380cea=>_0x380cea['id']===_0x246673)&&_0x310b10['push'](_0x4b0063['id']);}return 0x0===_0x310b10['length']?null:_0x310b10;}['_updateResourceInContextState'](_0x3cee9e,_0x3a77c8,_0x2d0389){const _0xc8adec=this['_addContextOptionsState']['sources']['find'](_0xcc9bb=>_0xcc9bb['id']===_0x3cee9e);if(!_0xc8adec)return;const _0x5e10aa=_0xc8adec['resources']['find'](_0xa3cb8c=>_0xa3cb8c['id']===_0x3a77c8);_0x5e10aa&&(_0x5e10aa['isInContext']=_0x2d0389,this['fire']('resourceStateChanged',{'sourceId':_0x3cee9e,'resourceId':_0x3a77c8,'isInContext':_0x2d0389}));}['_startUploadOperation'](_0x337977){this['_ongoingUploadOperations']['set'](_0x337977,!0x0),this['_ongoingUploadOperations']['size']&&this['fire']('uploadProgressChanged',{'isUploadInProgress':!0x0});}['_finishUploadOperation'](_0xa3a3fe){this['_ongoingUploadOperations']['delete'](_0xa3a3fe),0x0===this['_ongoingUploadOperations']['size']&&this['fire']('uploadProgressChanged',{'isUploadInProgress':!0x1});}}const yi=['capabilitiesUpdated'];class gi extends _0x44d7d3(){['_isWebSearchEnabled'];['_isReasoningEnabled'];constructor(){super(),this['_isWebSearchEnabled']=!0x1,this['_isReasoningEnabled']=!0x1;}['init'](){this['reset']();}['reset'](){this['setWebSearch'](!0x1),this['setReasoning'](!0x1);}['getCapabilitiesConfig'](){return{'isWebSearchEnabled':this['_isWebSearchEnabled'],'isReasoningEnabled':this['_isReasoningEnabled']};}static['getCapabilitiesRequestData'](_0x39ec11){const _0xb93a1={};return _0x39ec11&&_0x39ec11['isWebSearchEnabled']&&(_0xb93a1['webSearch']={}),_0x39ec11&&_0x39ec11['isReasoningEnabled']&&(_0xb93a1['reasoning']={}),_0xb93a1;}['toggleWebSearch'](){this['setWebSearch'](!this['_isWebSearchEnabled']);}['toggleReasoning'](){this['setReasoning'](!this['_isReasoningEnabled']);}['setWebSearch'](_0x243e77){_0x243e77!==this['_isWebSearchEnabled']&&(this['_isWebSearchEnabled']=_0x243e77,this['fire']('capabilitiesUpdated',this['getCapabilitiesConfig']()));}['setReasoning'](_0x45dfc9){_0x45dfc9!==this['_isReasoningEnabled']&&(this['_isReasoningEnabled']=_0x45dfc9,this['fire']('capabilitiesUpdated',this['getCapabilitiesConfig']()));}}class Di extends pe{['userMessage'];['conversationId'];['contextItems']=new Map();['model'];['quickActionData'];constructor(_0x27204f){super(_0x27204f),this['conversationId']=_0x27204f['conversationId'],this['contextItems']=_0x27204f['contextItems'],this['capabilities']=_0x27204f['capabilities'],this['userMessage']=_0x27204f['userMessage'],this['model']=_0x27204f['model'],this['quickActionData']=_0x27204f['quickActionData'];}async['sendRequest'](){return this['connector']['queryAssistant']({'message':this['userMessage'],'conversationId':this['conversationId'],'parts':Ci['mapContextItemsToRequestData'](this['contextItems']),'capabilities':gi['getCapabilitiesRequestData'](this['capabilities']),'model':this['model'],'quickActionData':this['quickActionData']});}['getDocumentContext'](){return this['contextItems']['get']('current-document');}}class ht extends _0x44d7d3(){['id'];['isStarted']=!0x1;['interactions']=[];['currentInteraction'];['selectedModel'];['connector'];['options'];constructor(_0xb166bf){super(),this['options']=_0xb166bf,this['connector']=_0xb166bf['connector'],this['chatModels']=_0xb166bf['chatModels'],this['id']=_0xb166bf['conversationId'];}async['init'](_0x15e10f){try{this['chatContext']=new Ci({'connector':this['connector'],'config':_0x15e10f,'ownerId':this['id']}),this['chatContext']['delegate'](...xi)['to'](this),this['chatContext']['init'](),this['chatCapabilities']=new gi(),this['chatCapabilities']['delegate'](...yi)['to'](this),this['chatCapabilities']['init']();const _0x3f62f5=await this['chatModels']['getAvailableModels']();this['fire']('conversationInitialized',{'availableModels':_0x3f62f5});const _0x1b0eef=await this['chatModels']['getModel'](this['options']['selectedModelId']);_0x1b0eef&&await this['setModel'](_0x1b0eef);}catch(_0x32771f){const _0x4984ec=new _0x38f49c('ai-chat-conversation-init-failed',null,{'message':_0x32771f['message']});_0x4984ec['stack']=_0x32771f['stack'],this['fire']('error',{'error':_0x4984ec});}}async['start'](){if(this['isStarted'])throw new _0x38f49c('ai-chat-conversation-already-started',null,{'conversation':this});if(!this['selectedModel'])throw new _0x38f49c('ai-chat-conversation-start-no-model-selected',null,{'conversation':this});try{const {id:_0x204725}=await this['connector']['startConversation'](this['id'],this['options']['group'])['getConversation']();this['id']=_0x204725,this['isStarted']=!0x0,this['fire']('conversationStarted',{'conversationId':this['id'],'selectedModel':this['selectedModel']});}catch(_0x1fba62){const _0x5941dc=new _0x38f49c('ai-chat-conversation-start-failed',null,{'message':_0x1fba62['message']});_0x5941dc['stack']=_0x1fba62['stack'],this['fire']('error',{'error':_0x5941dc});}}async['load'](_0x392607,_0xa94b21){try{const _0xfd8b4d=await this['connector']['fetchConversation'](_0x392607)['getConversation'](),_0x465e46=await this['connector']['fetchConversationMessages'](_0x392607)['getMessages'](),_0x4cc888=_0x465e46[0x0]['model'];this['isStarted']=!0x0,this['id']=_0xfd8b4d['id'],'title'in _0xfd8b4d?this['fire']('setConversationTitle',_0xfd8b4d['title'],!0x0):this['fire']('setConversationTitle','',!0x0);const _0x46ed93=(await this['chatModels']['getAll']())['find'](_0x306979=>_0x306979['id']['toLowerCase']()===_0x4cc888['toLowerCase']());return this['selectedModel']=_0x46ed93,this['fire']('modelSelected',{'selectedModel':_0x46ed93,'isDisabled':!0x0}),await this['_processMessagesToInteractions'](_0x465e46,_0xa94b21,_0x4cc888),this['currentInteraction']=void 0x0,this;}catch(_0x510b95){const _0x113e10=new _0x38f49c('ai-chat-conversation-init-from-id-failed',null,{'message':_0x510b95['message'],'conversationId':_0x392607});throw _0x113e10['stack']=_0x510b95['stack'],this['fire']('error',{'error':_0x113e10}),_0x113e10;}}async['_processMessagesToInteractions'](_0x5b3663,_0x10d9c5,_0xa4fdd2){let _0x9e9357;for(const _0x331151 of _0x5b3663)if('user'===_0x331151['role']){const _0x38210e=await this['_extractContextItems'](_0x331151),_0x5993ba={'isReasoningEnabled':Object['hasOwn'](_0x331151['capabilities'],'reasoning'),'isWebSearchEnabled':Object['hasOwn'](_0x331151['capabilities'],'webSearch')};_0x9e9357=this['createInteraction']({'userMessage':_0x331151['prompt'],'contextItems':_0x38210e,'capabilities':_0x5993ba,'modelId':_0xa4fdd2,'quickActionData':_0x331151['attributes']?.['quickActionData']}),this['currentInteraction']=_0x9e9357,this['chatContext']['addToConversationContext'](this['currentInteraction']['contextItems']);}else{if('assistant'===_0x331151['role']&&_0x9e9357)for(const _0x51f4bc of _0x331151['content']){const _0x5e83af='text'===_0x51f4bc['type']?'text-delta':'modification-delta',_0x5d48f6=_0x9e9357['getDocumentContext']()?.['sessionId']!==_0x10d9c5;_0x9e9357['currentReply']=_0x9e9357['createReply']({'type':_0x5e83af,'isDone':!0x0,'interactionId':_0x9e9357['id'],'areActionsDisabled':_0x5d48f6}),_0x9e9357['currentReply']['appendContent'](_0x51f4bc['content']);}}}async['_extractContextItems'](_0x5ae8d1){const _0x3984e2=new Map();if(!_0x5ae8d1['content'])return _0x3984e2;for(const _0x1ca7a8 of _0x5ae8d1['content']){const _0x58895d=await this['chatContext']['populateFromMessage'](_0x1ca7a8);_0x58895d&&_0x3984e2['set'](_0x58895d['id'],_0x58895d);}return _0x3984e2;}async['handleUserInteraction']({userMessage:_0x510bfa,quickActionData:_0x279400}){if(!this['isStarted'])throw new _0x38f49c('ai-chat-handle-user-conversation-not-initialized',null,{'conversation':this});if(this['currentInteraction'])throw new _0x38f49c('ai-chat-handle-user-interaction-already-in-progress',null,{'conversation':this});try{const _0x337a4d=this['chatContext']['getPendingContextItems'](),_0x456d4d=this['chatCapabilities']['getCapabilitiesConfig'](),_0x55f729=this['selectedModel']['id'];this['currentInteraction']=this['createInteraction']({'userMessage':_0x510bfa,'contextItems':_0x337a4d,'capabilities':_0x456d4d,'modelId':_0x55f729,'quickActionData':_0x279400}),await this['currentInteraction']['start'](),this['chatContext']['addToConversationContext'](this['currentInteraction']['contextItems']);}catch(_0x56f5bf){this['fire']('error',{'interactionId':this['currentInteraction']?this['currentInteraction']['id']:void 0x0,'error':_0x56f5bf});}finally{this['currentInteraction']?.['stop'](),this['currentInteraction']=void 0x0;}}['createInteraction']({userMessage:_0x3ed5f9,contextItems:_0x5cb016,capabilities:_0x470f18,modelId:_0x2cc907,quickActionData:_0x5c4788}){const _0x13152b=new Di({'userMessage':_0x3ed5f9,'contextItems':_0x5cb016,'capabilities':_0x470f18,'conversationId':this['id'],'connector':this['connector'],'editor':this['options']['getEditor']&&this['options']['getEditor'](),'model':_0x2cc907,'quickActionData':_0x5c4788});return _0x13152b['delegate'](...ge)['to'](this),this['interactions']['push'](_0x13152b),this['fire']('interactionCreated',_0x13152b),_0x13152b;}['getInteraction'](_0x34705a){return this['interactions']['find'](_0x55683c=>_0x55683c['id']===_0x34705a);}['removeInteraction'](_0x2d0a41){const _0x597709=this['getInteraction'](_0x2d0a41);_0x597709&&(_0x597709['destroy'](),this['interactions']['splice'](this['interactions']['indexOf'](_0x597709),0x1));}get['lastInteraction'](){return this['interactions'][this['interactions']['length']-0x1];}['addCurrentDocumentToContext'](_0x59ba3d){this['chatContext']['addCurrentDocumentToContext'](_0x59ba3d);}async['updateCurrentDocumentInContext']({content:_0x7b8564,version:_0x2fb882,sessionId:_0x25a343,selections:_0x9dfb8b}){await this['chatContext']['updateCurrentDocument'](_0x7b8564,_0x2fb882,_0x25a343,_0x9dfb8b);}['getCurrentDocumentContext'](){return this['currentInteraction']?.['getDocumentContext']()?.['content']||'';}['addSelectionToContext'](_0x359899){this['chatContext']['addSelectionToContext'](_0x359899);}['removeSelectionFromContext'](){this['chatContext']['removeSelectionFromContext']();}['addFilesToContext'](_0x3ebecc){this['chatContext']['addFilesToContext'](_0x3ebecc);}['addUrlToContext'](_0x5421c9){this['chatContext']['addUrlToContext'](_0x5421c9);}['addResourceToContext'](_0x406b2a,_0x36acc9){this['chatContext']['addResourceToContext'](_0x406b2a,_0x36acc9);}['loadSourceResources'](_0x4a14be,_0x459ce3,_0xad190){return this['chatContext']['loadSourceResources'](_0x4a14be,_0x459ce3,_0xad190);}['removeFromContext'](_0x81bd16){this['chatContext']['removeFromContext'](_0x81bd16);}['toggleWebSearch'](){this['chatCapabilities']['toggleWebSearch']();}['toggleReasoning'](){this['chatCapabilities']['toggleReasoning']();}['isCurrentDocumentInContext'](){return this['chatContext']['isCurrentDocumentInContext']();}['isCurrentDocumentInConversation'](){return this['chatContext']['isCurrentDocumentInConversation']();}['isSelectionInContext'](){return this['chatContext']['isSelectionInContext']();}async['setModel'](_0x1ebbc3){_0x1ebbc3?!0x1===await this['chatModels']['isAvailable'](_0x1ebbc3)&&(_0x16f6f3('ai-chat-conversation-set-model-not-available',{'conversation':this,'model':_0x1ebbc3}),_0x1ebbc3=(await this['chatModels']['getAvailableModels']())[0x0]):(_0x16f6f3('ai-chat-conversation-set-model-null',{'conversation':this}),_0x1ebbc3=(await this['chatModels']['getAvailableModels']())[0x0]),_0x1ebbc3['id']!==this['selectedModel']?.['id']&&(this['selectedModel']=_0x1ebbc3,this['chatCapabilities']['reset'](),this['fire']('modelSelected',{'selectedModel':_0x1ebbc3}));}}function ei(_0x1b67d2){if(_0x1b67d2 instanceof st)return _0x1b67d2;if(_0x1b67d2?.['editors']&&_0x1b67d2['editors']['get'](0x0))return _0x1b67d2['editors']['length']>0x1&&console['warn']('AIChat:\x20Multiple\x20editor\x20instances\x20detected.\x20Only\x20the\x20first\x20editor\x20instance\x20will\x20be\x20used\x20for\x20AI\x20operations.\x20This\x20configuration\x20is\x20not\x20fully\x20supported\x20and\x20may\x20lead\x20to\x20unexpected\x20behavior.'),_0x1b67d2['editors']['get'](0x0);throw new _0x38f49c('ai-get-editor-from-context-no-editor');}const ct='ai-selection';class B extends _0x98dbd{['_displayedFakeSelectionId']=null;['_displayedFakeSelectionLocked']=!0x1;['_sessionId'];static get['pluginName'](){return'AIEditing';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}get['sessionId'](){if(!this['_sessionId']){const _0xc569b2=ei(this['context']),_0x10102b=_0xc569b2['plugins']['has']('RealTimeCollaborationClient')&&_0xc569b2['plugins']['get']('RealTimeCollaborationClient')['sessionId'];this['_sessionId']=_0x10102b||_0xa215c8();}return this['_sessionId'];}['getDocumentData'](){const _0x5d6240=ei(this['context']),_0x23ab5a=_0x5d6240['model'],_0x303809=_0x5d6240['data']['toView'](_0x23ab5a['document']['getRoot'](),{'convertAiChatSelectionMarker':!0x0}),_0x4b47ec=new kt(_0x5d6240['editing']['view']['document']);this['_setDataIdsOnChildren'](_0x303809,_0x4b47ec);let _0x217cf2=_0x5d6240['data']['processor']['toData'](_0x303809);const _0x13c767=this['_getMarkersInDocumentOrder'](),_0x16314b=[];for(const _0x116a9a of _0x13c767){const _0x33d79d='<'+_0x116a9a['name']+':start></'+_0x116a9a['name']+':start>',_0xd8e898=_0x217cf2['indexOf'](_0x33d79d);_0x217cf2=_0x217cf2['substring'](0x0,_0xd8e898)+_0x217cf2['substring'](_0xd8e898+_0x33d79d['length']);const _0x335f8c='<'+_0x116a9a['name']+':end></'+_0x116a9a['name']+':end>',_0x279e03=_0x217cf2['indexOf'](_0x335f8c);_0x217cf2=_0x217cf2['substring'](0x0,_0x279e03)+_0x217cf2['substring'](_0x279e03+_0x335f8c['length']),_0x16314b['push']({'markerName':_0x116a9a['name'],'start':_0xd8e898,'end':_0x279e03,'htmlFragment':_0x217cf2['substring'](_0xd8e898,_0x279e03)});}return{'content':_0x217cf2,'version':_0x5d6240['model']['document']['version'],'sessionId':this['sessionId'],'selections':_0x16314b};}async['afterInit'](){this['context']instanceof st?this['_integrateEditor'](this['context']):this['listenTo'](this['context']['editors'],'add',(_0x3f434a,_0x49a123)=>{_0x49a123['on']('ready',()=>{this['_integrateEditor'](_0x49a123);});});}['_integrateEditor'](_0x5466a3){_0x5466a3['conversion']['for']('editingDowncast')['markerToHighlight']({'model':ct,'view':{'classes':['ck-fake-ai-selection','ck-ai-assistant-ui_theme'],'priority':0xc}}),_0x5466a3['conversion']['for']('dataDowncast')['markerToElement']({'model':ct,'view':(_0x29ebeb,{writer:_0x1b047f,options:_0x24c2e8})=>_0x24c2e8['convertAiChatSelectionMarker']?_0x1b047f['createUIElement'](_0x29ebeb['markerName']+':'+(_0x29ebeb['isOpening']?'start':'end')):null});}['showFakeVisualSelection'](_0x499166,_0xdf6976,_0x56c081=!0x1,_0x41280a=!0x1){if(this['_displayedFakeSelectionLocked']&&!_0x41280a)return!0x1;this['_displayedFakeSelectionId']&&this['hideFakeVisualSelection'](this['_displayedFakeSelectionId']),this['_displayedFakeSelectionId']=_0xdf6976,this['_displayedFakeSelectionLocked']=_0x56c081;const _0x2aab3a=ei(this['context'])['model'];return _0x2aab3a['change'](_0x26f461=>{let _0x4cce2e=0x0;for(let _0x14799f of _0x499166){const _0x15ef38=ct+':'+_0x4cce2e;if(_0x14799f['start']['isAtEnd']){const _0x2a4dfd=_0x14799f['start']['getLastMatchingPosition'](({item:_0x2c0343})=>!_0x2aab3a['schema']['isContent'](_0x2c0343),{'boundaries':_0x14799f});_0x14799f=_0x26f461['createRange'](_0x2a4dfd,_0x14799f['end']);}_0x26f461['addMarker'](_0x15ef38,{'usingOperation':!0x1,'affectsData':!0x1,'range':_0x14799f}),_0x4cce2e++;}}),window['getSelection']()?.['removeAllRanges'](),!0x0;}['hideFakeVisualSelection'](_0x579375){if(this['_displayedFakeSelectionId']!=_0x579375)return!0x1;this['_displayedFakeSelectionId']=null,this['_displayedFakeSelectionLocked']=!0x1;const _0x56f495=ei(this['context']),_0x3d0a79=_0x56f495['model']['markers']['getMarkersGroup'](ct);return _0x56f495['model']['change'](_0x3760b3=>{for(const _0xbe968c of _0x3d0a79)_0x3760b3['removeMarker'](_0xbe968c);}),!0x0;}['modelToViewWithIds'](_0x17befa){const _0x12fcfc=ei(this['context']),_0x1cbeab=_0x12fcfc['data']['toView'](_0x17befa),_0x3b2f85=new kt(_0x12fcfc['editing']['view']['document']);return this['_setDataIdsOnChildren'](_0x1cbeab,_0x3b2f85),_0x1cbeab;}['_setDataIdsOnChildren'](_0x3dfd1f,_0x5739d7){let _0x1bd832=!0x1;const _0x4be3cc=new Set();for(const _0x129fa1 of _0x3dfd1f['getChildren']()){const _0x9184ba=_0x129fa1['is']('emptyElement')||_0x129fa1['is']('containerElement');if(!_0x129fa1['is']('element'))continue;(this['_setDataIdsOnChildren'](_0x129fa1,_0x5739d7)||_0x9184ba)&&(_0x5739d7['setAttribute']('data-id',this['_nextDataId'](_0x4be3cc),_0x129fa1),_0x1bd832=!0x0);}return _0x1bd832;}['_nextDataId'](_0x2219fb){let _0x964d08;do{_0x964d08='';for(let _0x265d7c=0x0;_0x265d7c<0x4;_0x265d7c++)_0x964d08+=String['fromCharCode'](0x61+Math['floor'](0x1a*Math['random']()));}while(_0x2219fb['has'](_0x964d08));return _0x2219fb['add'](_0x964d08),_0x964d08;}['getSelectionText'](){const {model:_0x56882a}=ei(this['context']),_0x417b1f=_0x56882a['document']['selection'],_0x464de9=_0x56882a['getSelectedContent'](_0x417b1f),_0x2cc00c=[],_0x11ee1b=_0x56882a['createRangeIn'](_0x464de9)['getWalker']();for(const {item:_0x148044}of _0x11ee1b)_0x148044['is']('$textProxy')?_0x2cc00c['push'](_0x148044['data']):_0x148044['is']('element')&&_0x2cc00c['length']>0x0&&'\x20'!==_0x2cc00c[_0x2cc00c['length']-0x1]&&_0x2cc00c['push']('\x20');return'\x22'+_0x2cc00c['join']('')['trim']()+'\x22';}['_getMarkersInDocumentOrder'](){const _0x385e9f=ei(this['context'])['model'];return Array['from'](_0x385e9f['markers']['getMarkersGroup'](ct))['sort']((_0x3819bd,_0x508c55)=>_0x3819bd['getStart']()['isBefore'](_0x508c55['getStart']())?-0x1:_0x3819bd['getStart']()['isAfter'](_0x508c55['getStart']())?0x1:0x0);}}class dt extends _0x44d7d3(){['_modelList']=[];['_connector'];['_displayedModels'];['_defaultModelId'];constructor({connector:_0x33f1dc,displayedModels:_0x52c774,defaultModelId:_0x3ff5eb}){super(),this['_connector']=_0x33f1dc,this['_displayedModels']=_0x52c774,this['_defaultModelId']=_0x3ff5eb;}async['getAll'](){if(!this['_modelList']['length']){const _0x602e3c=this['_connector']['getModels'](),_0x3c74bf=(await _0x602e3c['list']())['items']['sort']((_0x218bc4,_0x44a77b)=>{const _0x18985e=Object['values'](_0x218bc4['capabilities'])['filter'](_0x196566=>_0x196566['enabled'])['length'];return Object['values'](_0x44a77b['capabilities'])['filter'](_0x4ffa08=>_0x4ffa08['enabled'])['length']-_0x18985e;});this['_modelList']=_0x3c74bf;}return this['_modelList'];}async['getAvailableModels'](){const _0x55e373=await this['getAll']();return this['_filterModels'](_0x55e373,this['_displayedModels']);}async['getModel'](_0x5491c0){const _0x111c24=await this['getAll']();if(!_0x111c24['length'])return null;if(_0x5491c0){const _0x31ead3=_0x111c24['find'](_0xa132ab=>_0xa132ab['id']===_0x5491c0);if(_0x31ead3)return _0x31ead3;_0x16f6f3('ai-chat-model-id-unrecognized',{'modelId':_0x5491c0,'fallBackModelId':this['_defaultModelId']});}return this['getDefault']();}async['getDefault'](){const _0x39ad27=await this['getAvailableModels']();if(!_0x39ad27['length'])return null;if(this['_defaultModelId']){const _0x4a405c=_0x39ad27['find'](_0x1a0a48=>_0x1a0a48['id']===this['_defaultModelId']);if(_0x4a405c)return _0x4a405c;_0x16f6f3('ai-chat-default-model-id-unrecognized',{'defaultModelId':this['_defaultModelId'],'fallBackModelId':_0x39ad27[0x0]['id']});}return _0x39ad27[0x0];}async['isAvailable'](_0x334ac3){return(await this['getAvailableModels']())['some'](_0x520093=>_0x520093['name']===_0x334ac3['name']&&_0x520093['provider']===_0x334ac3['provider']);}['_filterModels'](_0x36d476,_0x3cb6c4){let _0x24637f;if(_0x3cb6c4){_0x24637f=[];const _0x329333='string'==typeof _0x3cb6c4?[_0x3cb6c4['toLocaleLowerCase']()]:_0x3cb6c4['map'](_0x11cb8e=>_0x11cb8e['toLocaleLowerCase']());for(const _0x2872b5 of _0x329333)for(const _0x356e12 of _0x36d476)(_0x356e12['id']['toLocaleLowerCase']()===_0x2872b5||_0x356e12['name']['toLocaleLowerCase']()===_0x2872b5||_0x356e12['provider']['toLocaleLowerCase']()===_0x2872b5||_0x356e12['id']['toLocaleLowerCase']()['startsWith'](_0x2872b5))&&_0x24637f['push'](_0x356e12);}else _0x24637f=_0x36d476;return _0x24637f;}}function X({editor:_0x9fa235,interaction:_0x1a0ee9,reply:_0x43979c,groups:_0x537ea4,transform:_0x112cf7,documentCompare:_0x4770b2,documentCompareOptions:_0x1cc810}){const _0x344221=_0x1a0ee9['getDocumentContext']();if(!_0x344221)return[];const _0x3c85c5=_0x344221['content'],_0x1916cd=_0x344221['version'],_0x22252f=_0x43979c['documentContextContent']['cloneNode'](!0x0);for(const {changes:_0x4581fa}of _0x537ea4){const _0x91c67=_0x4581fa['filter'](_0x504480=>'new'!=_0x504480['type'])['map'](_0x1acbc6=>_t('data-id',_0x1acbc6['id'],_0x22252f)),_0x231b76=_0x4581fa['filter'](_0x4a59d1=>'removed'!=_0x4a59d1['type'])['map'](_0x216846=>_0x216846['node']['cloneNode'](!0x0));let _0x46b839=null;if(_0x91c67['length']){_0x46b839=_0x91c67[0x0]['previousSibling'];for(let _0x4ed2b8=0x0;_0x4ed2b8<_0x91c67['length'];_0x4ed2b8++)_0x257fd3(_0x91c67[_0x4ed2b8]);}if(_0x231b76['length']){_0x46b839||(_0x4581fa[0x0]['anchorId']?_0x46b839=_t('data-id',_0x4581fa[0x0]['anchorId'],_0x22252f):(_0x46b839=_0x231b76['shift'](),to(_0x22252f,_0x46b839)));for(let _0x587dcc=0x0;_0x587dcc<_0x231b76['length'];_0x587dcc++)_0x1d335e(_0x46b839,_0x231b76[_0x587dcc]),_0x46b839=_0x231b76[_0x587dcc];}}const _0xce1e10=Ct(_0x22252f),_0x4f5907=_0x4770b2['getDiff'](_0x3c85c5,_0xce1e10,_0x1cc810)['getOperations']();if(_0x112cf7){const _0x2f765c=_0x9fa235['model']['document']['history']['getOperations'](_0x1916cd),_0x42ea84={'document':_0x9fa235['model']['document'],'useRelations':!0x1,'padWithNoOps':!0x1};return tt(_0x4f5907,_0x2f765c,_0x42ea84)['operationsA'];}return _0x4f5907;}function W({editor:_0x215852,changeGroups:_0x1a99f8,documentContextContent:_0x26da61,showDiff:_0xea4811,trimUnchanged:_0x14626c=!0x0}){return _0x1a99f8['map'](_0x47650e=>{const _0x287e10=new ft([]),_0x36ce17=new ft([]);for(const _0x233753 of _0x47650e['changes'])if(_0xea4811&&'removed'==_0x233753['type']||_0x36ce17['children']['push'](_0x233753['node']['cloneNode'](!0x0)),'new'!=_0x233753['type']&&(_0xea4811||'removed'!=_0x233753['type'])){const _0x32f9e7=ut(_0x340749=>mt(_0x340749,'data-id')==_0x233753['id'],_0x26da61,!0x0);_0x32f9e7&&_0x287e10['children']['push'](_0x32f9e7['cloneNode'](!0x0));}const {content:_0x42eb7b,hasChanges:_0x38542d}=function(_0xda3c99,_0x2bab39,_0xa08105,_0x24e5a9,_0x1a1af1=!0x0){const _0x4e12fd=_0xda3c99['plugins']['get']('DocumentCompare'),_0x1e30bd=_0xda3c99['plugins']['get']('TrackChangesEditing'),_0x3c520d=Ct(_0x2bab39),_0x1711a7=Ct(_0xa08105),_0x52204e=_0xda3c99['data']['parse'](_0x3c520d,'$root'),_0x46f48b=_0xda3c99['model']['createPositionAt'](_0x52204e,0x0),_0x3d95a6=_0x4e12fd['getDiff'](_0x3c520d,_0x1711a7,{'anchor':_0x46f48b,'markDeletions':_0x24e5a9}),_0x481209=_0x3d95a6['getOperations']();if(0x0==_0x481209['length'])return{'content':_0x2bab39['cloneNode'](!0x0),'hasChanges':!0x1};_0x24e5a9?_0x1e30bd['_applyOperationsAsSuggestions'](_0x481209):_0xda3c99['model']['change'](_0x3ac668=>{for(const _0xf1df77 of _0x481209)if('remove'==_0xf1df77['type']){const _0x14c8e4=_0xf1df77['sourcePosition'],_0x492b8e=_0xf1df77['howMany'],_0x1cf6b3=new _0x317ebf(_0x14c8e4,_0x492b8e);_0x3ac668['batch']['addOperation'](_0x1cf6b3),_0xda3c99['model']['applyOperation'](_0x1cf6b3);}else{if('marker'==_0xf1df77['type']){const _0x2a7c4b=_0xf1df77['name'],_0x3e687d=_0xf1df77['newRange'];_0x52204e['markers']['set'](_0x2a7c4b,_0x3e687d);}else _0xf1df77['baseVersion']=null,_0xf1df77['isDocumentOperation']=!0x1,_0x3ac668['batch']['addOperation'](_0xf1df77),_0xda3c99['model']['applyOperation'](_0xf1df77);}});if(_0x1a1af1){const _0x551d49=pt(_0xda3c99,_0x481209,_0x52204e);gt(_0xda3c99['model'],_0x551d49),function(_0x5e3b17,_0x538bed){const _0x197120=_0x538bed['getFirstRange']()['start'];let _0xfa4f2a=_0x538bed['getFirstRange']()['end'];const _0x2dc7d2=_0x197120['root'];(_0xfa4f2a['textNode']||_0xfa4f2a['nodeAfter']&&_0xfa4f2a['nodeAfter']['is']('$text'))&&(_0x417676(_0xfa4f2a,'...'),_0xfa4f2a=_0xfa4f2a['getShiftedBy'](0x3)),(_0x197120['textNode']||_0x197120['nodeBefore']&&_0x197120['nodeBefore']['is']('$text'))&&(_0x417676(_0x197120,'...'),function(_0x12a1cd,_0x382385,_0x3a8e4d){for(let [_0x373609,_0x4904f6]of _0x12a1cd['markers']){const _0x131e4f=_0x4904f6['_getTransformedByInsertion'](_0x382385,_0x3a8e4d,!0x1);_0x4904f6=_0x131e4f[0x0],_0x12a1cd['markers']['set'](_0x373609,_0x4904f6);}}(_0x2dc7d2,_0x197120,0x3),_0x197120['parent']==_0xfa4f2a['parent']&&(_0xfa4f2a=_0xfa4f2a['getShiftedBy'](0x3)));const _0x19a070=_0x5e3b17['createRange'](_0x5e3b17['createPositionAt'](_0x2dc7d2,0x0),_0x197120),_0x25ebec=_0x5e3b17['createRange'](_0xfa4f2a,_0x5e3b17['createPositionAt'](_0x2dc7d2,'end')),_0x1f28f4=[..._0x19a070['getMinimalFlatRanges'](),..._0x25ebec['getMinimalFlatRanges']()];_0x1f28f4['reverse']();for(const _0x3dc1cd of _0x1f28f4)_0x36ed50(_0x3dc1cd),Wr(_0x2dc7d2,_0x3dc1cd);}(_0xda3c99['model'],_0x551d49);}const _0x22d4ab=_0xda3c99['data']['stringify'](_0x52204e,{'showSuggestionHighlights':!0x0});return{'content':Ye(_0x22d4ab),'hasChanges':!0x0};}(_0x215852,_0x287e10,_0x36ce17,_0xea4811,_0x14626c);return{'type':_0x47650e['changes'][0x0]['type'],'index':_0x47650e['index'],'content':_0x42eb7b,'hasChanges':_0x38542d};});}function pt(_0x406401,_0x500b9c,_0x4aecad){const _0x5544e5=_0x406401['plugins']['get']('DocumentCompare');let _0x3fd406=_0x406401['model']['createPositionAt'](_0x4aecad,Number['POSITIVE_INFINITY']),_0x57ad6a=_0x406401['model']['createPositionAt'](_0x4aecad,0x0);for(const _0x1c0333 of _0x500b9c){let _0x20ea30,_0x3ed5ba;if(_0x5544e5['isMarkedRemoveOperation'](_0x1c0333))_0x20ea30=_0x1c0333['newRange']['start'],_0x3ed5ba=_0x1c0333['newRange']['end'];else switch(_0x3fd406=_0x3fd406['getTransformedByOperation'](_0x1c0333),_0x57ad6a=_0x57ad6a['getTransformedByOperation'](_0x1c0333),_0x1c0333['type']){case'rename':_0x20ea30=_0x1c0333['position'],_0x3ed5ba=_0x20ea30['getShiftedBy'](0x1);break;case'addAttribute':case'removeAttribute':case'changeAttribute':_0x20ea30=_0x1c0333['range']['start'],_0x3ed5ba=_0x1c0333['range']['end'];break;case'insert':_0x20ea30=_0x1c0333['position'],_0x3ed5ba=_0x20ea30['getShiftedBy'](_0x1c0333['howMany']);break;case'split':_0x20ea30=_0x1c0333['splitPosition'],_0x3ed5ba=_0x1c0333['moveTargetPosition'];break;case'merge':{const _0x1510ad=_0x1c0333['targetPosition']['path']['slice'](0x0,-0x1);_0x20ea30=_0x406401['model']['createPositionFromPath'](_0x4aecad,_0x1510ad),_0x3ed5ba=_0x20ea30['getShiftedBy'](0x1);break;}case'remove':{const _0x1f8796=_0x1c0333['howMany'],_0x3c6dc8=_0x1c0333['sourcePosition']['_getTransformedByInsertion'](_0x1c0333['targetPosition'],_0x1f8796),_0x433b44=_0x1c0333['getMovedRangeStart']();'remove'==_0x1c0333['type']?(_0x20ea30=_0x3c6dc8,_0x3ed5ba=_0x3c6dc8):(_0x20ea30=_0x433b44,_0x3ed5ba=_0x433b44['getShiftedBy'](_0x1f8796));break;}}_0x20ea30&&_0x20ea30['isBefore'](_0x3fd406)&&(_0x3fd406=_0x20ea30['clone'](),_0x3fd406['stickiness']='toNone'),_0x3ed5ba&&_0x3ed5ba['isAfter'](_0x57ad6a)&&(_0x57ad6a=_0x3ed5ba['clone'](),_0x57ad6a['stickiness']='toNone');}return _0x406401['model']['createSelection'](_0x406401['model']['createRange'](_0x3fd406,_0x57ad6a));}function gt(_0x3c6272,_0x9c289a){an(_0x3c6272,_0x9c289a,'forward');const _0x260ae9=_0x9c289a['getFirstRange']();_0x9c289a['setTo']([]),_0x9c289a['setTo'](_0x260ae9,{'backward':!0x0}),an(_0x3c6272,_0x9c289a,'backward');}function an(_0x3720a5,_0x15f9f2,_0x36ba8a){let _0x436d87=0x14;for(;_0x436d87;){_0x3720a5['modifySelection'](_0x15f9f2,{'unit':'word','direction':_0x36ba8a}),_0x436d87--;const _0x5e5839=_0x15f9f2['focus']['forward'==_0x36ba8a?'nodeBefore':'nodeAfter'];if(_0x5e5839&&_0x5e5839['is']('element')&&_0x3720a5['schema']['isBlock'](_0x5e5839)&&_0x3720a5['schema']['isObject'](_0x5e5839))break;}}function Wr(_0x333c2f,_0x4306af){for(const [_0x27c971,_0x56918d]of _0x333c2f['markers']){const _0x2257e8=_0x56918d['_getTransformedByDeletion'](_0x4306af['start'],_0x4306af['end']['offset']-_0x4306af['start']['offset']);null!=_0x2257e8?_0x333c2f['markers']['set'](_0x27c971,_0x2257e8):_0x333c2f['markers']['delete'](_0x27c971);}}class Vr extends _0x19c936{['copyButton'];['likeButton'];['dislikeButton'];['showChangesButton'];['_config'];constructor(_0x131573,_0x200204={},_0xfe0b81){super(_0x131573),this['set']('isLoading',!0x1),this['_config']={'showCopy':!0x1,'showLike':!0x1,'showDislike':!0x1,..._0x200204};const _0xa42039=!(this['_config']['showCopy']||this['_config']['showChanges']||this['_config']['showLike']||this['_config']['showDislike']||this['_config']['customView']?.['length']);this['class']=_0xa42039?'ck-ai-mini-toolbar\x20ck-hidden':'ck-ai-mini-toolbar',this['_config']['showCopy']&&(this['_setupCopyButton'](),this['items']['add'](this['copyButton'])),this['_config']['showChanges']&&(this['_setupShowChangesButton'](_0xfe0b81),this['items']['add'](this['showChangesButton'])),this['_setupRatingButtons'](),this['_config']['showLike']&&this['items']['add'](this['likeButton']),this['_config']['showDislike']&&this['items']['add'](this['dislikeButton']),this['_config']['customView']&&this['items']['addMany'](this['_config']['customView']);}['_setupRatingButtons'](){this['likeButton']=new _0x177962(this['locale']),this['likeButton']['set']({'icon':_0x2d0333,'label':i(this['locale'],'AI_MINI_TOOLBAR_LIKE'),'tooltip':!0x0}),this['likeButton']['bind']('isEnabled')['to'](this,'isLoading',_0x136bc9=>!_0x136bc9),this['likeButton']['on']('execute',()=>{this['fire']('like');}),this['dislikeButton']=new _0x177962(this['locale']),this['dislikeButton']['set']({'icon':_0x4e03fb,'label':i(this['locale'],'AI_MINI_TOOLBAR_DISLIKE'),'tooltip':!0x0}),this['dislikeButton']['bind']('isEnabled')['to'](this,'isLoading',_0x143781=>!_0x143781),this['dislikeButton']['on']('execute',()=>{this['fire']('dislike');});}['_setupCopyButton'](){this['copyButton']=new _0x177962(this['locale']),this['copyButton']['set']({'icon':_0x40876a,'label':i(this['locale'],'AI_MINI_TOOLBAR_COPY'),'class':'ck-ai-mini-toolbar-copy-button','tooltip':!0x0}),this['copyButton']['bind']('isEnabled')['to'](this,'isLoading',_0x525054=>!_0x525054);const _0x430a8b=new _0x4c8e3c();_0x430a8b['set']({'content':_0x16e06b}),_0x430a8b['extendTemplate']({'attributes':{'class':['ck-ai-mini-toolbar-copy-button__check-mark']}}),this['copyButton']['on']('execute',()=>{this['copyButton']['class']='ck-ai-mini-toolbar-copy-button\x20ck-ai-mini-toolbar-copy-button_copied',setTimeout(()=>{this['copyButton']['class']='ck-ai-mini-toolbar-copy-button';},0x7d0);}),this['copyButton']['children']['add'](_0x430a8b);}['_setupShowChangesButton'](_0x5aa6b5){this['showChangesButton']=new _0x177962(this['locale']),this['showChangesButton']['set']({'icon':_0x5c0242,'label':i(this['locale'],'AI_SUGGESTION_BUTTON_SHOW_CHANGES'),'withText':'full'==this['_config']['showChanges'],'tooltip':'full'!=this['_config']['showChanges'],'isOn':_0x5aa6b5}),this['showChangesButton']['bind']('isEnabled')['to'](this,'isLoading',_0x265da1=>!_0x265da1),this['showChangesButton']['on']('execute',()=>{const _0xdee8c1=!this['showChangesButton']['isOn'];this['showChangesButton']['set']({'isOn':_0xdee8c1,'icon':_0xdee8c1?_0x26f228:_0x5c0242}),this['fire']('toggleShowChanges',_0xdee8c1);});}}class Lr extends _0x4dc179{['showChangesToggleView'];constructor(_0x329eb0,_0x2ebb34){super(_0x329eb0),this['set']('isShowChangesToggleVisible',!0x0),this['showChangesToggleView']=new Yr(_0x329eb0),this['showChangesToggleView']['set']({'class':'ck-ai-suggestion__header__show-changes-toggle','label':i(_0x329eb0,'AI_SUGGESTION_BUTTON_SHOW_CHANGES'),'withText':!0x0}),this['showChangesToggleView']['isOn']=_0x2ebb34['showDiff'],this['showChangesToggleView']['bind']('isVisible')['to'](this,'isShowChangesToggleVisible'),this['showChangesToggleView']['bind']('icon')['to'](this['showChangesToggleView'],'isOn',_0x58e5c1=>_0x58e5c1?_0x4dbc0c:_0x5e1f3e),this['showChangesToggleView']['on']('execute',()=>{this['showChangesToggleView']['isOn']=!this['showChangesToggleView']['isOn'],this['fire']('toggleShowChanges',{'isOn':this['showChangesToggleView']['isOn']});});const _0x8320b2=new _0x4c8e3c();_0x8320b2['content']=_0x39ea3c,this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-suggestion__header',!0x1===_0x2ebb34['showHeader']?'ck-hidden':null]['filter'](Boolean)},'children':[_0x8320b2,{'tag':'span','children':[i(_0x329eb0,'AI_SUGGESTION_HEADER_TITLE')]},this['showChangesToggleView']]});}}class Yr extends _0x177962{['render'](){super['render'](),this['children']['remove'](this['iconView']),this['children']['add'](this['iconView']);}}class aa{['options'];['isStreaming']=!0x1;['document']=null;['nodesList']=[];['currentIndex']=0x0;['timeoutAbortController']=null;constructor(_0x47d1d4){this['options']={'delay':_0x47d1d4['delay']??0x14,'textNodeStyle':_0x47d1d4['textNodeStyle'],'onStreamUpdate':_0x47d1d4['onStreamUpdate']||(()=>{})};}async['stream']({document:_0x7bb009,targetElement:_0xbf25d,abortSignal:_0x27cc18}){this['isStreaming']&&this['stop'](),_0x27cc18?.['addEventListener']('abort',this['stop']['bind'](this)),this['document']=_0x1198f3(_0x7bb009,!0x0),this['nodesList']=this['getParsedDocumentNodeList'](),this['isStreaming']=!0x0,this['currentIndex']>this['nodesList']['length']&&(_0x16f6f3('ai-html-streamer-current-index-out-of-bounds',{'currentIndex':this['currentIndex'],'nodeList':this['nodesList']}),this['currentIndex']=this['nodesList']['length']);for(let _0x389211=0x0;_0x389211<this['currentIndex'];_0x389211++)this['nodesList'][_0x389211]['shouldBeStreamed']=!0x0;let _0x3a234b=0x0;for(let _0xb0295e=this['currentIndex'];_0xb0295e<this['nodesList']['length'];_0xb0295e++){const _0x210f9b=Date['now'](),_0x585344=this['nodesList'][_0xb0295e],_0x37e493=_0x210f9b-_0x3a234b;_0x585344['shouldBeStreamed']=!0x0;let _0x3934f2=_0x585344['parent'];for(;_0x3934f2;)_0x3934f2['shouldBeStreamed']=!0x0,_0x3934f2=_0x3934f2['parent'];if(_0x37e493<this['options']['delay'])try{const {promise:_0x33be74,abortController:_0x3cebd8}=mr(this['options']['delay']-_0x37e493);this['timeoutAbortController']=_0x3cebd8,await _0x33be74;}catch(_0x50fcb7){return;}_0x5c39fc(_0xbf25d,'<'+_0xbf25d['tagName']+'>'+this['renderNode'](this['document'])+'</'+_0xbf25d['tagName']+'>',{'childrenOnly':!0x0}),this['options']['onStreamUpdate']&&this['options']['onStreamUpdate'](),this['currentIndex']=_0xb0295e,_0x3a234b=Date['now']();}this['isStreaming']=!0x1;}['cleanUpAnimations']({targetElement:_0x2d46b6}){Array['from'](_0x2d46b6['querySelectorAll']('span[data-ck-html-streamer-word-chunk]'))['reverse']()['forEach'](_0x263056=>{_0x263056['replaceWith'](_0x263056['childNodes'][0x0]);});}['stop'](){this['isStreaming']=!0x1,this['timeoutAbortController']&&(this['timeoutAbortController']['abort'](),this['timeoutAbortController']=null);}['renderNode'](_0x2f0cd9){let _0x24d5e7='';if(function(_0x37f81d){return _0x29ce6c(_0x37f81d);}(_0x2f0cd9)){for(const _0x1acd27 of _0x2f0cd9['children'])_0x24d5e7+=this['renderNode'](_0x1acd27);}else{if(ar(_0x2f0cd9)){if(!_0x2f0cd9['shouldBeStreamed'])return'';const _0x198f59=_0x2f0cd9,_0x32b683=Object['entries'](_0x198f59['attribs'])['map'](([_0xbfb27d,_0x3ed4af])=>_0xbfb27d+'=\x22'+_0x3ed4af+'\x22')['join']('\x20');_0x24d5e7+='<'+_0x198f59['tagName']+(_0x32b683?'\x20'+_0x32b683:'')+'>';for(const _0x533171 of _0x52fbd6(_0x198f59))_0x24d5e7+=this['renderNode'](_0x533171);_0x24d5e7+='</'+_0x198f59['tagName']+'>';}else{if(!cr(_0x2f0cd9))return'';if(!_0x2f0cd9['shouldBeStreamed'])return'';!function(_0x5a4dcf){if(!_0x5a4dcf['parent']||!ar(_0x5a4dcf['parent']))return!0x1;if(!hr['includes'](_0x5a4dcf['parent']['tagName']))return!0x1;return!_0x428b4a(_0x5a4dcf)['match'](/^\s*[<>]\s*$/);}(_0x2f0cd9)?_0x24d5e7+=_0x5516a8(_0x2f0cd9):_0x24d5e7+=_0x5516a8(new _0x5e1206('span',{'data-ck-html-streamer-word-chunk':'','style':this['options']['textNodeStyle']},[_0x2f0cd9]));}}return _0x24d5e7;}['getParsedDocumentNodeList'](){const _0x3bb753=[];return function(_0x2960ea,_0x3d5f37){const _0xd3cb1a=_0x5f3b1c=>{if(_0x3d5f37(_0x5f3b1c),_0x5f3b1c instanceof _0x20884a)for(let _0x477698=0x0;_0x477698<_0x5f3b1c['children']['length'];_0x477698++){const _0x324c0b=_0x5f3b1c['children'][_0x477698];_0xd3cb1a(_0x324c0b);}};for(let _0x6dc8d4=0x0;_0x6dc8d4<_0x2960ea['children']['length'];_0x6dc8d4++)_0xd3cb1a(_0x2960ea['children'][_0x6dc8d4]);}(this['document'],_0x1a5a0c=>{if(cr(_0x1a5a0c)){const _0x556610=this['splitTextNodeIntoWordNodes'](_0x1a5a0c);_0x556610['length']&&_0x3bb753['push'](..._0x556610);}_0x1a5a0c['isWordSplitSource']||_0x1a5a0c['isWordSplitResult']||_0x3bb753['push'](_0x1a5a0c);}),_0x3bb753;}['splitTextNodeIntoWordNodes'](_0x2bd1ba){if(_0x2bd1ba['isWordSplitSource']||_0x2bd1ba['isWordSplitResult'])return[];const _0x2c55f9=_0x428b4a(_0x2bd1ba)['match'](/(?:\s*\S+\s*)/g),_0x1aad48=[];if(_0x2c55f9&&_0x2c55f9['length']>0x1){for(const _0x7ce2ed of _0x2c55f9){const _0x1f371c=new _0x333321(_0x7ce2ed);_0x1f371c['isWordSplitResult']=!0x0,_0x2d3ee2(_0x2bd1ba,_0x1f371c),_0x1aad48['push'](_0x1f371c);}_0x2bd1ba['isWordSplitSource']=!0x0,_0x257fd3(_0x2bd1ba);}return _0x1aad48;}}const hr=['p','li','td','th','span','h1','h2','h3','h4','h5','h6','b','strong','i','em','mark','del','ins','sup','sub','a','code','div'];function cr(_0x56f5eb){return _0x1b24cc(_0x56f5eb);}function ar(_0x346e04){return _0x12fdee(_0x346e04);}function mr(_0x4fa037){const _0x580564=new AbortController();return{'promise':new Promise((_0xe401d4,_0x142336)=>{const _0x3eaae2=setTimeout(_0xe401d4,_0x4fa037);_0x580564['signal']['addEventListener']('abort',()=>{clearTimeout(_0x3eaae2),_0x142336();});}),'abortController':_0x580564};}const Ae=['showChangeInText','insertSuggestion','applySuggestion','rejectSuggestion','mouseOverSuggestion','mouseLeaveSuggestion','toggleSuggestionDisplayMode','like','dislike'];class Pr extends _0x4dc179{['htmlStreamer'];['children'];['headerView'];['contentView'];constructor(_0x15a56c,{part:_0x54f4a5,areActionsDisabled:_0x3cb908}){super(_0x15a56c),this['set']('partDefinition',_0x54f4a5),this['set']('state','pending'),this['set']('isVisible',!0x1),this['bind']('isEnabled')['to'](this,'state',_0x3e4eda=>'pending'==_0x3e4eda&&!_0x3cb908),this['children']=this['createCollection'](),this['htmlStreamer']=new aa({'textNodeStyle':'animation:\x20ck-html-streamer-fade-in\x20.5s','delay':0x14}),this['headerView']=new Vn(_0x15a56c,_0x54f4a5),this['headerView']['bind']('partDefinition')['to'](this),this['headerView']['bind']('isEnabled')['to'](this),this['headerView']['bind']('state')['to'](this),this['headerView']['delegate'](...Ae)['to'](this);const _0x1137c3=this['bindTemplate'];this['contentView']=new _0x4dc179(),this['contentView']['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-content','ck-reset_all-excluded','ck-ai-suggestion__body__content-part__content']}}),this['children']['addMany']([this['contentView']]),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-suggestion__body__content-part',_0x1137c3['to']('state',_0x556a24=>'ck-ai-suggestion__body__content-part_'+_0x556a24),_0x1137c3['to']('isEnabled',_0x3d7f4b=>_0x3d7f4b?'ck-ai-suggestion__body__content-part_active':void 0x0),_0x1137c3['if']('isVisible','ck-hidden',_0x4cc0f7=>!_0x4cc0f7)]},'children':this['children'],'on':{'mouseenter':_0x1137c3['to'](()=>{this['isEnabled']&&this['fire']('mouseOverSuggestion',{'index':_0x54f4a5['index']});}),'mouseleave':_0x1137c3['to'](()=>{this['isEnabled']&&this['fire']('mouseLeaveSuggestion',{'index':_0x54f4a5['index']});})}});}async['updateContent']({part:_0x284144,renderingStrategy:_0x1d7e86,showUnchangedParts:_0x302f2d=!0x1,abortSignal:_0x3113fb}){this['partDefinition']=_0x284144,this['isVisible']=this['partDefinition']['hasChanges']||_0x302f2d,this['isVisible']&&('streaming'===_0x1d7e86?await this['htmlStreamer']['stream']({'document':this['partDefinition']['content'],'targetElement':this['contentView']['element'],'abortSignal':_0x3113fb}):this['contentView']['element']['innerHTML']=Ct(this['partDefinition']['content']));}['toggleHeader'](_0x13267d){_0x13267d?this['children']['has'](this['headerView'])||this['children']['add'](this['headerView'],0x0):this['children']['has'](this['headerView'])&&this['children']['remove'](this['headerView']);}}class Vn extends _0x4dc179{['children'];['_toolbarView'];['_iconStateAccepted'];['_iconStateRejected'];['_iconStateOutdated'];constructor(_0x26a063,_0x6e8af8){super(_0x26a063),this['set']('partDefinition',_0x6e8af8),this['set']('isEnabled',!0x0),this['set']('state','pending');const _0x55e156=new _0x4c8e3c();_0x55e156['content']=_0x3cafa6,_0x55e156['extendTemplate']({'attributes':{'class':['ck-ai-suggestion__body__content-part__icon-title']}});const _0x21e810=new _0x177962(_0x26a063);_0x21e810['set']({'label':i(_0x26a063,'AI_SUGGESTION_CONTENT_PART_SHOW_IN_THE_TEXT'),'tooltip':!0x0,'withText':!0x1,'icon':_0x4127c1}),_0x21e810['bind']('isEnabled')['to'](this),_0x21e810['on']('execute',()=>{this['fire']('showChangeInText',{'index':_0x6e8af8['index']});});const _0x3df517=new _0x177962(_0x26a063);_0x3df517['set']({'label':i(_0x26a063,'AI_SUGGESTION_CONTENT_PART_ADD_AS_SUGGESTION'),'tooltip':!0x0,'withText':!0x1,'icon':_0x3356f5}),_0x3df517['bind']('isEnabled')['to'](this),_0x3df517['on']('execute',()=>{this['fire']('insertSuggestion',{'index':_0x6e8af8['index']});});const _0x207d71=new _0x177962(_0x26a063);_0x207d71['set']({'label':i(_0x26a063,'AI_SUGGESTION_CONTENT_PART_DELETE'),'tooltip':!0x0,'withText':!0x1,'icon':_0x1e43f9}),_0x207d71['on']('execute',()=>{this['fire']('rejectSuggestion',{'index':_0x6e8af8['index']});}),_0x207d71['bind']('isEnabled')['to'](this),this['_toolbarView']=new _0x19c936(_0x26a063),this['_toolbarView']['items']['addMany']([_0x21e810,_0x3df517,_0x207d71]),this['_iconStateAccepted']=new _0x4c8e3c(),this['_iconStateAccepted']['content']=_0xad8ca8,this['_iconStateAccepted']['extendTemplate']({'attributes':{'class':['ck-ai-suggestion__body__content-part__icon-accepted'],'data-cke-tooltip-text':i(_0x26a063,'AI_SUGGESTION_CONTENT_PART_ALREADY_APPLIED'),'data-cke-tooltip-position':'n'}}),this['_iconStateRejected']=new _0x4c8e3c(),this['_iconStateRejected']['content']=_0x26f503,this['_iconStateRejected']['extendTemplate']({'attributes':{'class':['ck-ai-suggestion__body__content-part__icon-rejected'],'data-cke-tooltip-text':i(_0x26a063,'AI_SUGGESTION_CONTENT_PART_REJECTED'),'data-cke-tooltip-position':'n'}}),this['_iconStateOutdated']=new _0x4c8e3c(),this['_iconStateOutdated']['content']=_0x26f503,this['_iconStateOutdated']['extendTemplate']({'attributes':{'class':['ck-ai-suggestion__body__content-part__icon-outdated'],'data-cke-tooltip-text':i(_0x26a063,'AI_SUGGESTION_CONTENT_PART_OUTDATED'),'data-cke-tooltip-position':'n'}});const _0x45e695=new _0x4dc179(_0x26a063);_0x45e695['setTemplate']({'tag':'span','attributes':{'class':['ck','ck-ai-suggestion__body__content-part__title__label']},'children':[i(_0x26a063,'AI_SUGGESTION_CONTENT_PART_TITLE',(_0x6e8af8['index']+0x1)['toString']())]}),this['children']=this['createCollection'](),this['children']['addMany']([_0x55e156,_0x45e695,this['_toolbarView']]),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-reset_all-excluded','ck-ai-suggestion__body__content-part__title']},'children':this['children']}),this['on']('change:state',(_0x2300a2,_0xe5d34c,_0x8fe141,_0x156cfa)=>{switch(_0x156cfa){case'pending':this['children']['remove'](this['_toolbarView']);break;case'accepted':this['children']['remove'](this['_iconStateAccepted']);break;case'rejected':this['children']['remove'](this['_iconStateRejected']);break;case'outdated':this['children']['remove'](this['_iconStateOutdated']);}switch(_0x8fe141){case'pending':this['children']['add'](this['_toolbarView']);break;case'accepted':this['children']['add'](this['_iconStateAccepted']);break;case'rejected':this['children']['add'](this['_iconStateRejected']);break;case'outdated':this['children']['add'](this['_iconStateOutdated']);}});}}class H extends _0x44d7d3(){['queue']=[];['isProcessing']=!0x1;['_abortController'];async['enqueue'](_0x77245c){const _0x1e5d58=this['createTask'](_0x77245c);return this['queue']['push'](_0x1e5d58),this['_processQueue'](),_0x1e5d58['completePromise'];}['abort'](){this['isProcessing']&&(this['_abortController']['abort'](),this['_abortController']=void 0x0,this['queue']=[],this['fire']('_queueEmpty'),this['isProcessing']=!0x1);}get['queueEmptyPromise'](){return this['queue']['length']||this['isProcessing']?new Promise(_0x343300=>{this['once']('_queueEmpty',()=>{_0x343300();});}):Promise['resolve']();}async['_processQueue'](){if(!this['isProcessing']){this['_abortController']=new AbortController(),this['isProcessing']=!0x0;try{for(;this['queue']['length']&&this['isProcessing'];){const _0xd21231=this['queue']['shift']();try{await _0xd21231['callback'](this['_abortController']['signal']),_0xd21231['resolve']();}catch(_0x1ad21c){_0xd21231['reject'](_0x1ad21c);}}}finally{this['isProcessing']=!0x1,this['_abortController']=void 0x0;}this['fire']('_queueEmpty');}}['createTask'](_0x4cd5fc){let _0x32a8dd,_0x4bfac2;const _0x4c78c9=new Promise((_0x136a5b,_0x360777)=>{_0x32a8dd=_0x136a5b,_0x4bfac2=_0x360777;});return{'callback':_0x4cd5fc,'resolve':_0x32a8dd,'reject':_0x4bfac2,'completePromise':_0x4c78c9};}}class Cr extends _0x4dc179{['options'];['content']='';['htmlStreamer'];['children'];constructor(_0x37f176){super();const _0x41c66f=this['bindTemplate'];this['set']('isDone',!0x1),this['set']('isVisible',!0x0),this['htmlStreamer']=new aa({'textNodeStyle':'animation:\x20ck-html-streamer-fade-in\x20.5s','delay':0x14}),this['options']=_0x37f176,this['children']=this['createCollection'](),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-chat__feed__item',_0x41c66f['if']('isDone','ck-ai-chat__feed__item_done'),_0x41c66f['if']('isVisible','ck-hidden',_0x1b8ca0=>!_0x1b8ca0),'ck-ai-chat__feed__text-item'],'data-cke-ai-id':this['options']['id']},'children':this['children']});}['markAsDone'](){this['htmlStreamer']['cleanUpAnimations']({'targetElement':this['element']}),this['element']['querySelectorAll']('[data-id]')['forEach'](_0x3af5e4=>{_0x3af5e4['removeAttribute']('data-id');}),this['isDone']=!0x0;}async['streamIntoElement'](_0x5aa0f3,_0x22dab5,_0x110f12){await this['htmlStreamer']['stream']({'document':_0x5aa0f3,'targetElement':_0x22dab5,'abortSignal':_0x110f12});}}class ve extends Cr{constructor(_0x33c32d){super(_0x33c32d),this['extendTemplate']({'attributes':{'class':['ck-ai-chat-error','warning'===_0x33c32d['level']?'ck-ai-chat-error_warning':'']}});}['render'](){super['render'](),this['setContent'](this['options']['initialContent']),this['markAsDone']();}['setContent'](_0x4ddc53){this['element']['innerHTML']=_0x4ddc53;}}class Dr extends _0x4dc179{['_children'];['_areActionsDisabled'];['_showUnchangedParts'];['_updateContentPartsPromiseQueue'];['_emptyPartsWarningView'];constructor(_0x32b636,{areActionsDisabled:_0x27310b,showUnchangedParts:_0x4c81a9}){super(_0x32b636),this['_areActionsDisabled']=_0x27310b,this['_showUnchangedParts']=_0x4c81a9,this['set']('hasPendingParts',!0x1),this['_children']=this['createCollection'](),this['_updateContentPartsPromiseQueue']=new H(),this['_emptyPartsWarningView']=new ve({'id':'empty-parts-warning','initialContent':i(_0x32b636,'AI_SUGGESTION_EMPTY_PART_WARNING'),'level':'warning'}),this['_emptyPartsWarningView']['isVisible']=!0x1,this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-suggestion__body']},'children':[{'tag':'div','attributes':{'class':['ck','ck-ai-suggestion__body__content-parts']},'children':this['_children']},this['_emptyPartsWarningView']]});}get['partsCount'](){return this['_children']['length'];}async['updateContentParts']({parts:_0x4de6b6,renderingStrategy:_0x369fea,abortSignal:_0x581123}){for(const _0x3807c9 of _0x4de6b6)this['_updateContentPartsPromiseQueue']['enqueue'](async _0x4ba782=>{let _0x249e05=this['_children']['find'](_0x53e38a=>_0x53e38a['partDefinition']['index']==_0x3807c9['index']);_0x249e05||(_0x249e05=new Pr(this['locale'],{'part':_0x3807c9,'areActionsDisabled':this['_areActionsDisabled']}),_0x249e05['delegate'](...Ae)['to'](this),this['_children']['add'](_0x249e05),this['hasPendingParts']=!0x0),0x2===this['_children']['length']&&this['_children']['first']['toggleHeader'](!0x0),_0x249e05['toggleHeader'](this['_children']['length']>0x1),await _0x249e05['updateContent']({'part':_0x3807c9,'renderingStrategy':_0x369fea,'showUnchangedParts':this['_showUnchangedParts'],'abortSignal':_0x4ba782});});return _0x581123?.['addEventListener']('abort',()=>{this['_updateContentPartsPromiseQueue']['abort']();}),this['_updateContentPartsPromiseQueue']['queueEmptyPromise'];}['updatePartState'](_0x5e10b3,_0x237078){this['_children']['get'](_0x5e10b3)['state']=_0x237078,this['hasPendingParts']='pending'==_0x237078||Array['from'](this['_children'])['some'](_0x3693e6=>'pending'==_0x3693e6['state']);}['getPartView'](_0x3c285b){return this['_children']['get'](_0x3c285b);}['markAsDone'](){if(!this['_showUnchangedParts']){const _0x212d20=!this['_children']['find'](_0x4e600e=>_0x4e600e['partDefinition']['hasChanges']),_0x2fb615=!!this['_children']['find'](_0x476075=>!_0x476075['partDefinition']['hasChanges']);this['_emptyPartsWarningView']['isVisible']=0x0==this['_children']['length']||_0x2fb615,_0x212d20?this['_emptyPartsWarningView']['setContent'](i(this['locale'],'AI_SUGGESTION_NO_PARTS_WARNING')):this['_emptyPartsWarningView']['setContent'](i(this['locale'],'AI_SUGGESTION_EMPTY_PART_WARNING'));}}get['hasNonEmptyParts'](){return!!this['_children']['find'](_0x1085a1=>_0x1085a1['partDefinition']['hasChanges']);}}class Te extends _0x1e6810{constructor(_0x441362=void 0x0){super();const _0x4249cd=_0x441362?'ck-ai-spinner_'+_0x441362:'';this['extendTemplate']({'tag':'span','attributes':{'class':['ck-ai-spinner',_0x4249cd]}});}}class N extends _0x4dc179{['bodyView'];['miniToolbarView'];['children'];['headerView'];['loaderView'];['errorView'];['sourcesView'];constructor(_0x5d9830,{showDiff:_0x1c8859,areActionsDisabled:_0x3021ef,miniToolbarConfig:_0x30bf6b,hideHeader:_0x4515a3,showLoader:_0x52a6a2,showUnchangedParts:_0x2b314b}){super(_0x5d9830),this['set']('areChangesVisible',!0x1),this['set']('isLoaderVisible',!!_0x52a6a2),this['set']('isErrorVisible',!0x1),this['set']('isLoading',!0x1),this['children']=this['createCollection'](),_0x4515a3||(this['headerView']=new Lr(_0x5d9830,{'showDiff':_0x1c8859}),this['headerView']['on']('toggleShowChanges',(_0x154ab0,_0x1f9d9f)=>{this['areChangesVisible']=_0x1f9d9f['isOn'],this['fire']('toggleSuggestionDisplayMode',{'showDiff':_0x1f9d9f['isOn']});}),this['children']['add'](this['headerView'])),this['bodyView']=new Dr(_0x5d9830,{'areActionsDisabled':_0x3021ef,'showUnchangedParts':!!_0x2b314b}),this['bodyView']['delegate'](...Ae)['to'](this),this['bodyView']['extendTemplate']({'attributes':{'class':[this['bindTemplate']['if']('isLoaderVisible','ck-hidden'),this['bindTemplate']['if']('isErrorVisible','ck-hidden')]}}),this['miniToolbarView']=new Vr(_0x5d9830,_0x30bf6b,_0x1c8859),this['miniToolbarView']['delegate'](...Ae)['to'](this),this['miniToolbarView']['on']('toggleShowChanges',(_0xd2c2e0,_0x2e213b)=>{this['areChangesVisible']=_0x2e213b,this['fire']('toggleSuggestionDisplayMode',{'showDiff':_0x2e213b});}),this['miniToolbarView']['bind']('isLoading')['to'](this),this['children']['add'](this['bodyView']),this['children']['add'](this['miniToolbarView']),this['sourcesView']=new jr(this['locale']),this['children']['add'](this['sourcesView']),_0x52a6a2&&(this['loaderView']=this['_createLoaderView'](),this['children']['add'](this['loaderView'])),this['errorView']=this['_createErrorView'](),this['children']['add'](this['errorView']),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-suggestion__container','ck-rounded-corners']},'children':this['children']});}async['updateContent'](_0x515822){await this['bodyView']['updateContentParts'](_0x515822);}['updateSources'](_0x4797c1){this['sourcesView']['children']['addMany'](_0x4797c1['map'](_0x283541=>new Sr(this['locale'],_0x283541))),this['sourcesView']['isVisible']=!0x0;}['showLoader'](){this['loaderView']&&(this['isLoaderVisible']=!0x0);}['hideLoader'](){this['loaderView']&&(this['isLoaderVisible']=!0x1);}['showError'](_0x110a57){if(this['errorView']){const _0x2358ef=this['errorView']['element']?.['querySelector']('.ck-ai-suggestion__error-text');_0x2358ef&&(_0x2358ef['textContent']=_0x110a57),this['isErrorVisible']=!0x0;}}['hideError'](){this['errorView']&&(this['isErrorVisible']=!0x1);}['markAsDone'](){this['bodyView']['markAsDone'](),this['headerView']&&(this['headerView']['isShowChangesToggleVisible']=this['bodyView']['hasNonEmptyParts']);}['setLoading'](){this['isLoading']=!0x0;}['clearLoading'](){this['isLoading']=!0x1;}['setErrorState'](){this['miniToolbarView']&&(this['miniToolbarView']['isLoading']=!0x0),this['headerView']?.['showChangesToggleView']&&(this['headerView']['showChangesToggleView']['isEnabled']=!0x1);}['clearErrorState'](){this['miniToolbarView']&&(this['miniToolbarView']['isLoading']=!0x1),this['headerView']?.['showChangesToggleView']&&(this['headerView']['showChangesToggleView']['isEnabled']=!0x0);}['addNavigationItem'](_0x13270a){this['miniToolbarView']['items']['add'](_0x13270a);}['removeNavigationItem'](_0x3ec7dd){this['miniToolbarView']['items']['remove'](_0x3ec7dd);}['_createLoaderView'](){const _0x199b51=new _0x4dc179(this['locale']),_0x25056a=new Te('small');_0x25056a['isVisible']=!0x0;const _0x1c70cd=new _0x4dc179(this['locale']);return _0x1c70cd['setTemplate']({'tag':'span','attributes':{'class':['ck','ck-ai-suggestion__loader-text']},'children':[i(this['locale'],'AI_CHAT_IS_WRITING')]}),_0x199b51['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-suggestion__loader',this['bindTemplate']['if']('isLoaderVisible','ck-hidden',_0x409f5f=>!_0x409f5f)]},'children':[_0x25056a,_0x1c70cd]}),_0x199b51;}['_createErrorView'](){const _0x1a4487=new _0x4dc179(this['locale']),_0x1603a4=new _0x4dc179(this['locale']);return _0x1603a4['setTemplate']({'tag':'span','attributes':{'class':['ck','ck-ai-suggestion__error-text']},'children':[i(this['locale'],'AI_CHAT_GENERIC_ERROR')]}),_0x1a4487['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-suggestion__error',this['bindTemplate']['if']('isErrorVisible','ck-hidden',_0x21c3d5=>!_0x21c3d5)]},'children':[_0x1603a4]}),_0x1a4487;}}class jr extends _0x4dc179{['children'];constructor(_0x5c066b){super(_0x5c066b),this['children']=this['createCollection'](),this['set']('isVisible',!0x1),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-web-sources',this['bindTemplate']['if']('isVisible','ck-hidden',_0x3cb57c=>!_0x3cb57c)]},'children':this['children']});const _0x4efaed=new _0x4dc179(this['locale']),_0x70e56f=new _0x4c8e3c();_0x70e56f['content']=_0x4204ab,_0x4efaed['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-web-sources__header']},'children':[_0x70e56f,{'tag':'span','children':[{'text':i(this['locale'],'AI_CHAT_SOURCES_HEADER')}]}]}),this['children']['add'](_0x4efaed);}}class Sr extends _0x177962{constructor(_0x26acec,_0x366e72){super(_0x26acec),this['set']({'label':_0x366e72['title'],'tooltip':_0x366e72['title'],'class':['ck\x20ck-ai-web-source'],'withText':!0x0});const _0xdfe742=this['bindTemplate'];if(this['extendTemplate']({'on':{'click':_0xdfe742['to'](()=>{window['open'](_0x366e72['url'],'_blank');})}}),_0x366e72['favicon']){const _0x286c3e=new _0x4dc179(_0x26acec);_0x286c3e['setTemplate']({'tag':'img','attributes':{'src':_0x366e72['favicon']||_0x4204ab,'alt':_0x366e72['title'],'class':['ck-ai-web-source__image']}}),this['children']['add'](_0x286c3e);}else this['set']('icon',_0x4204ab);}}class as extends _0x19c936{constructor(_0x3f77f5,_0x211ada=!0x0,_0x2f7ab2=!0x0){super(_0x3f77f5),this['set']('isLoading',!0x1),_0x211ada&&(this['applyButton']=this['_createButton'](i(_0x3f77f5,'AI_BALLOON_APPLY_BUTTON'),'ck-ai-button-primary'),this['applyButton']['bind']('isEnabled')['to'](this,'isLoading',_0x1bff33=>!_0x1bff33),this['items']['add'](this['applyButton'])),_0x2f7ab2&&(this['suggestButton']=this['_createButton'](i(_0x3f77f5,'AI_BALLOON_SUGGEST_BUTTON'),_0x211ada?'ck-ai-button-secondary':'ck-ai-button-primary'),this['suggestButton']['bind']('isEnabled')['to'](this,'isLoading',_0x2b1ad9=>!_0x2b1ad9),this['items']['add'](this['suggestButton'])),this['extendTemplate']({'attributes':{'class':['ck-ai-balloon__toolbar']}});}['_createButton'](_0x2e0f70,_0x4c8d61){const _0x36faf4=new _0x177962(this['locale']);return _0x36faf4['set']({'label':_0x2e0f70,'class':_0x4c8d61||'','isVisible':!0x0,'withText':!0x0}),_0x36faf4;}}class us extends _0x4dc179{constructor(_0x58fbe8){super(_0x58fbe8),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-balloon__disclaimer']},'children':[{'tag':'p','attributes':{'class':['ck','ck-ai-balloon__disclaimer-content']},'children':[{'text':i(_0x58fbe8,'AI_DISCLAIMER_TEXT')}]}]});}}const ti=['applySuggestion','insertSuggestion','showNext','showPrevious'];class oi extends _0x4dc179{['focusTracker'];['keystrokes'];['focusCycler'];['_dropdownConfig'];['_focusables'];constructor(_0xc629ec,_0x467e19,_0x311cce,_0x441b02){super(_0xc629ec),this['_dropdownConfig']=_0x311cce,this['set']('isLoading',!0x1),this['set']('isTrackChangesOn',_0x441b02),this['focusTracker']=new _0x9668c0(),this['keystrokes']=new _0x514fee(),this['_focusables']=this['createCollection'](),this['focusCycler']=new _0x3c97a0({'focusables':this['_focusables'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'actions':{'focusPrevious':'shift\x20+\x20tab','focusNext':'tab'}}),this['_dialogContent']=new _0x3b5cfc(),this['_addContentView'](_0x467e19['mainView']),this['_addDisclaimerView'](),this['_addToolbar'](_0x467e19['showApplyButton'],_0x467e19['showSuggestButton']),this['toolbar']['bind']('isLoading')['to'](this),this['_focusables']['clear'](),this['_focusables']['addMany']([this['toolbar']]),this['setTemplate']({'tag':'div','attributes':{'class':'ai-balloon-content'},'children':this['_dialogContent']}),this['listenTo'](this,'change:isTrackChangesOn',()=>{this['_dialogContent']['remove'](this['toolbar']),this['_addToolbar'](_0x467e19['showApplyButton'],_0x467e19['showSuggestButton']);});}['render'](){super['render']();for(const _0x1fa6e8 of this['_focusables'])this['focusTracker']['add'](_0x1fa6e8['element']);this['keystrokes']['listenTo'](this['element']);}['focus'](_0x218bee){-0x1===_0x218bee?this['focusCycler']['focusLast']():this['focusCycler']['focusFirst']();}['setLoading'](){this['isLoading']=!0x0;}['clearLoading'](){this['isLoading']=!0x1;}['setupRotator'](_0x3a7e8a){const _0x403264=this['_createNextButtonView'](),_0x2d5404=this['_createPreviousButtonView']();_0x3a7e8a['view']['headerView']['children']['add'](_0x403264,0x2),_0x3a7e8a['view']['headerView']['children']['add'](_0x2d5404,0x0),this['_focusables']['addMany']([_0x403264,_0x2d5404]),this['focusTracker']['add'](_0x403264['element']),this['focusTracker']['add'](_0x2d5404['element']);}['_addContentView'](_0x4ff36a){this['_mainView']=_0x4ff36a,this['_dialogContent']['add'](this['_mainView']);}['_addDisclaimerView'](){this['disclaimerView']=new us(this['locale']),this['_dialogContent']['add'](this['disclaimerView']);}['_addToolbar'](_0x23ce49=!0x0,_0x24825f=!0x0){_0x23ce49=_0x23ce49&&!this['isTrackChangesOn']&&this['_dropdownConfig']['includes']('applySuggestion'),_0x24825f=_0x24825f&&this['_dropdownConfig']['includes']('insertSuggestion'),this['toolbar']=new as(this['locale'],_0x23ce49,_0x24825f),this['toolbar']['applyButton']?.['on']('execute',()=>{this['fire']('applySuggestion');}),this['toolbar']['suggestButton']?.['on']('execute',()=>{this['fire']('insertSuggestion');}),this['_dialogContent']['add'](this['toolbar']);}['_createNextButtonView'](){const _0x1ec0e0=new _0x177962(this['locale']);return _0x1ec0e0['set']({'icon':_0x4e5de6,'tooltip':i(this['locale'],'AI_BALLOON_NEXT_TOOLTIP')}),_0x1ec0e0['on']('execute',()=>{this['fire']('showNext');}),_0x1ec0e0;}['_createPreviousButtonView'](){const _0x10e289=new _0x177962(this['locale']);return _0x10e289['set']({'icon':_0x7fbeea,'tooltip':i(this['locale'],'AI_BALLOON_PREVIOUS_TOOLTIP')}),_0x10e289['on']('execute',()=>{this['fire']('showPrevious');}),_0x10e289;}}const ai=['applySuggestion','insertSuggestion','showChangeInText'];class nh extends _0x4dc179{['actionsButton'];['children'];['applySuggestionModel'];['showChangeInTextModel'];['insertSuggestionModel'];['_partsCount']=0x1;['_dropdownOriginalConfig'];['_dropdownCurrentConfig'];['_firstRender']=!0x0;constructor(_0x517dbf,_0x19d331){super(_0x517dbf),this['_dropdownOriginalConfig']=_0x19d331||[...ai],this['_dropdownCurrentConfig']=[...this['_dropdownOriginalConfig']];const _0x5cd300=this['bindTemplate'];this['set']('isEnabled',!0x0),this['set']('isVisible',!0x0),this['applySuggestionModel']=new _0x3c44c5({'label':Hn('applySuggestion',_0x517dbf,this['_partsCount']),'icon':_0x2de17e,'withText':!0x0,'type':'button','actionName':'applySuggestion'}),this['showChangeInTextModel']=new _0x3c44c5({'label':Hn('showChangeInText',_0x517dbf,this['_partsCount']),'icon':_0x4127c1,'withText':!0x0,'type':'button','actionName':'showChangeInText'}),this['insertSuggestionModel']=new _0x3c44c5({'label':Hn('insertSuggestion',_0x517dbf,this['_partsCount']),'icon':_0x3356f5,'withText':!0x0,'type':'button','actionName':'insertSuggestion'}),this['actionsButton']=this['_createActionsDropdownOrButton'](_0x517dbf),this['children']=this['createCollection']([this['actionsButton']]),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-chat__feed__ai-suggestion__actions',_0x5cd300['if']('isVisible','ck-hidden',_0x4edb30=>!_0x4edb30)]},'children':this['children']}),this['listenTo'](this,'change:isTrackChangesOn',()=>{this['_dropdownCurrentConfig']=this['isTrackChangesOn']?this['_dropdownOriginalConfig']['filter'](_0x3b19aa=>'applySuggestion'!==_0x3b19aa):[...this['_dropdownOriginalConfig']],this['_updateDropdownActions'](_0x517dbf);});}['_updateDropdownActions'](_0x57a147){this['children']['has'](this['actionsButton'])&&(this['children']['remove'](this['actionsButton']),this['actionsButton']['destroy']()),0x0!=this['_dropdownCurrentConfig']['length']&&(this['actionsButton']=this['_createActionsDropdownOrButton'](_0x57a147),this['children']['add'](this['actionsButton']));}['_createActionsDropdownOrButton'](_0xb77588){const _0xd0001=0x1===this['_dropdownCurrentConfig']['length']?this['_createActionsButton'](_0xb77588):this['_createActionsDropdown'](_0xb77588),_0x490ee3=this['_firstRender']?'':'ck-ai-chat__feed__ai-suggestion__actions--no-animation';_0xd0001['set']({'label':Hn(this['_dropdownCurrentConfig'][0x0],_0xb77588,this['_partsCount']),'tooltip':Un(this['_dropdownCurrentConfig'][0x0],_0xb77588,this['_partsCount']),'withText':!0x0,'class':'ck-ai-chat__feed__ai-suggestion__actions\x20'+_0x490ee3});for(const _0x4ef722 of this['_dropdownCurrentConfig'])_0xd0001['on'](_0x4ef722,()=>{this['fire'](_0x4ef722);});return this['_firstRender']=!0x1,_0xd0001;}['_createActionsButton'](_0x16acbf){const _0x43c51d=new _0x177962(_0x16acbf);return _0x43c51d['set']({'class':'ck-ai-button-primary','withText':!0x0}),_0x43c51d['on']('execute',()=>{_0x43c51d['fire'](this['_dropdownCurrentConfig'][0x0]);}),_0x43c51d;}['_createActionsDropdown'](_0x296e1a){const _0x919369=new Gn(_0x296e1a,{'listItemModels':this['_dropdownCurrentConfig']['map'](_0x483760=>{switch(_0x483760){case'applySuggestion':return this['applySuggestionModel'];case'showChangeInText':return this['showChangeInTextModel'];case'insertSuggestion':return this['insertSuggestionModel'];}})});return _0x919369['set']({'label':Hn(this['_dropdownCurrentConfig'][0x0],_0x296e1a,this['_partsCount']),'tooltip':Un(this['_dropdownCurrentConfig'][0x0],_0x296e1a,this['_partsCount']),'withText':!0x0,'class':'ck-ai-chat__feed__ai-suggestion__actions','balloonPanelClass':'ck-ai-chat__feed__ai-suggestion__actions__balloon'}),_0x919369['bind']('isEnabled')['to'](this),_0x919369;}['updateLabels'](_0x498b14){const _0x5a047c=this['locale'];this['_partsCount']=_0x498b14||this['_partsCount'],this['actionsButton']['set']({'label':Hn(this['_dropdownCurrentConfig'][0x0],_0x5a047c,this['_partsCount']),'tooltip':Un(this['_dropdownCurrentConfig'][0x0],_0x5a047c,this['_partsCount'])}),this['applySuggestionModel']['label']=Hn('applySuggestion',_0x5a047c,this['_partsCount']),this['showChangeInTextModel']['label']=Hn('showChangeInText',_0x5a047c,this['_partsCount']),this['insertSuggestionModel']['label']=Hn('insertSuggestion',_0x5a047c,this['_partsCount']);}}class Gn extends _0x3230b3{['bodyCollection'];['balloonPanelView'];['listView'];['keystrokeHandler'];constructor(_0x51b7c1,_0x7f9a21){super(_0x51b7c1),this['balloonPanelView']=new _0x4ce253(this['locale']),this['bodyCollection']=new Ft(this['locale']),this['bodyCollection']['attachToDom'](),this['set']('balloonPanelClass',''),this['balloonPanelView']['bind']('class')['to'](this,'balloonPanelClass'),this['listView']=this['_setUpList'](_0x7f9a21['listItemModels']['slice'](0x1)),this['bodyCollection']['add'](this['balloonPanelView']),this['balloonPanelView']['content']['add'](this['listView']),this['arrowView']['unbind']('tooltip'),this['arrowView']['set']('tooltip',i(this['locale'],'AI_CHAT_SUGGESTION_MORE_OPTIONS_TOOLTIP')),this['_setUpKeystrokes'](),this['on']('execute',()=>{const _0x4b3075=_0x7f9a21['listItemModels'][0x0]['actionName'];this['fire'](_0x4b3075),this['balloonPanelView']['hide'](),this['arrowView']['focus']();}),this['on']('open',()=>{this['balloonPanelView']['isVisible']?(this['balloonPanelView']['hide'](),this['arrowView']['focus']()):(this['balloonPanelView']['pin']({'target':this['element'],'positions':['ltr'===this['locale']['uiLanguageDirection']?yn:Pn]}),this['listView']['focus']());}),_0x14a3d2({'emitter':this['balloonPanelView'],'callback':()=>{this['balloonPanelView']['hide']();},'activator':()=>this['balloonPanelView']['isVisible'],'contextElements':()=>[this['element'],this['balloonPanelView']['element']]});}['_setUpList'](_0x1aaf3e){const _0xd4fca8=this['locale'],_0x5cc331=new _0x3c987b(_0xd4fca8);for(const _0x38525c of _0x1aaf3e){const _0x6b18a7=new _0x2f4a78(_0xd4fca8),_0x57038a=new _0x127b2f(_0xd4fca8);_0x57038a['bind'](...Object['keys'](_0x38525c))['to'](_0x38525c),_0x57038a['delegate']('execute')['to'](_0x5cc331),_0x6b18a7['children']['add'](_0x57038a),_0x5cc331['items']['add'](_0x6b18a7);}return _0x5cc331['items']['delegate']('execute')['to'](this),_0x5cc331['on']('execute',_0x4f9596=>{const _0x25e054=_0x4f9596['source'];this['fire'](_0x25e054['actionName']),this['balloonPanelView']['hide'](),this['arrowView']['focus']();}),_0x5cc331;}['_setUpKeystrokes'](){this['keystrokeHandler']=new _0x514fee(),this['keystrokeHandler']['listenTo'](this['balloonPanelView']['element']),this['keystrokeHandler']['set']('esc',(_0x21a62a,_0x4a7278)=>{this['balloonPanelView']['hide'](),this['arrowView']['focus'](),_0x4a7278();});}['destroy'](){super['destroy'](),this['keystrokeHandler']['destroy'](),this['balloonPanelView']['destroy'](),this['bodyCollection']['detachFromDom']();}}function yn(_0x45adc7){return{'top':_0x45adc7['bottom'],'left':_0x45adc7['left'],'name':'arrowless','config':{'withArrow':!0x1}};}function Pn(_0x49b808,_0x59303f){return{'top':_0x49b808['bottom'],'left':_0x49b808['left']-(_0x59303f['width']-_0x49b808['width']),'name':'arrowless','config':{'withArrow':!0x1}};}function Hn(_0x49b6a2,_0x345ad8,_0x43d535){switch(_0x49b6a2){case'applySuggestion':return i(_0x345ad8,'AI_CHAT_SUGGESTION_ACTION_APPLY_LABEL',_0x43d535);case'showChangeInText':return i(_0x345ad8,'AI_CHAT_SUGGESTION_ACTION_SHOW_CHANGE_IN_TEXT',_0x43d535);case'insertSuggestion':return i(_0x345ad8,'AI_CHAT_SUGGESTION_ACTION_INSERT_SUGGESTION',_0x43d535);}}function Un(_0x26721c,_0x271b60,_0x49d4bc){switch(_0x26721c){case'applySuggestion':return i(_0x271b60,'AI_CHAT_SUGGESTION_ACTION_APPLY_TOOLTIP',_0x49d4bc);case'showChangeInText':return i(_0x271b60,'AI_CHAT_SUGGESTION_ACTION_SHOW_CHANGE_IN_TEXT_TOOLTIP',_0x49d4bc);case'insertSuggestion':return i(_0x271b60,'AI_CHAT_SUGGESTION_ACTION_INSERT_SUGGESTION_TOOLTIP',_0x49d4bc);}}class $ extends _0x98dbd{static get['requires'](){return[S,B];}static get['pluginName'](){return'AIBalloon';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}['isOpen']=!0x1;['_config'];['open'](_0x441e35){const _0x5933b8=ei(this['context']);this['_config']=_0x441e35;const _0x1c183c=this['context']['config']['get']('ai.availableReplyActions')||[...ai],_0x2532d5=_0x5933b8?.['commands']['get']('trackChanges'),_0x872032=_0x2532d5?.['value'];this['balloonView']=new oi(_0x5933b8['locale'],_0x441e35,_0x1c183c,!!_0x872032),this['balloonView']['delegate'](...ti)['to'](this),_0x2532d5&&this['balloonView']['bind']('isTrackChangesOn')['to'](_0x2532d5,'value'),this['_showDialog'](_0x441e35);}['close'](){ei(this['context'])['plugins']['get']('Dialog')['hide']();}['_setupVisualSelection'](_0x20833d,_0x190e88){this['context']['plugins']['get'](B)['showFakeVisualSelection'](_0x20833d,'ai-balloon-'+_0x190e88,!0x0,!0x0);}['_showDialog'](_0xdffe4b){const _0xbb39a0=ei(this['context']);this['_setupVisualSelection'](_0xdffe4b['ranges'],_0xdffe4b['index']),_0xbb39a0['plugins']['get']('Dialog')['show']({'title':_0xdffe4b['title'],'icon':_0xdffe4b['icon'],'hasCloseButton':!0x0,'id':'aiBalloon','position':this['_calculateDialogPosition']['bind'](this),'className':'ai-balloon'+(_0xdffe4b['showRotator']?'\x20ai-balloon-rotator':''),'content':this['balloonView'],'onShow':_0x211c1f=>{_0xdffe4b['showRotator']&&this['balloonView']['setupRotator'](_0x211c1f),this['isOpen']=!0x0;},'onHide':()=>{this['context']['plugins']['get']('AIEditing')['hideFakeVisualSelection']('ai-balloon-'+_0xdffe4b['index']),this['fire']('dialogClosed'),this['isOpen']=!0x1;}});}['_calculateDialogPosition'](_0x592eed,_0x487fba){const _0x26985a=ei(this['context']);if(!_0x487fba)return null;const _0x27cdb0=_0x5a76c8(_0x26985a['editing'],[..._0x26985a['model']['markers']['getMarkersGroup']('ai-selection'),..._0x26985a['model']['markers']['getMarkersGroup']('ai-balloon-selection')]);if(!_0x27cdb0||0x0===_0x27cdb0['length'])return{'left':Math['round'](_0x487fba['left']+_0x487fba['width']/0x2-_0x592eed['width']/0x2),'top':Math['round'](_0x487fba['top']+_0x487fba['height']/0x2-_0x592eed['height']/0x2)};const _0x2dfb2c=Math['round'](_0x487fba['left']+_0x487fba['width']/0x2-_0x592eed['width']/0x2),_0x53bde0=_0x27cdb0[0x0]['getBoundingClientRect'](),_0x55b643=_0x27cdb0[_0x27cdb0['length']-0x1]['getBoundingClientRect'](),_0xd7f86d=_0x592eed['height'],_0x3b1b33=this['_config']['showRotator']?0x8:0x0;return{'left':_0x2dfb2c,'top':this['_calculateOptimalTopPosition'](_0x53bde0,_0x55b643,_0xd7f86d,_0x3b1b33)};}['_calculateOptimalTopPosition'](_0x4c115f,_0x520cb2,_0x48eaaf,_0x4fd397=0x0){const _0x3c8d0b=_0x520cb2['top']+_0x520cb2['height'],_0x3607d5=_0x4c115f['top']-_0x48eaaf-_0x4fd397,_0x291292=window['innerHeight']-_0x3c8d0b-0xa,_0x2a57d3=_0x4c115f['top']-_0x4fd397-0xa;let _0x206f90;if(_0x291292>=_0x48eaaf)_0x206f90=_0x3c8d0b+0xa;else{if(_0x2a57d3>=_0x48eaaf)_0x206f90=_0x3607d5-0xa;else _0x206f90=_0x4c115f['top']+(_0x520cb2['top']+_0x520cb2['height'])/0x2-(_0x48eaaf+_0x4fd397)/0x2;}return _0x206f90;}}class et extends _0x98dbd{['_aiEditing'];['_aiConnector'];['_aiChatUi'];['_aiChatModels'];['_batchToChanges']=new Map();['_previewedChangeGroup']=null;['_balloonShowDiff']=!0x1;static get['requires'](){return[S,$,_0x3e9353];}static get['pluginName'](){return'AIChatController';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}['init'](){this['_aiConnector']=this['context']['plugins']['get']('AIConnector'),this['_aiChatUi']=this['context']['plugins']['get']('AIChatUI'),this['_aiEditing']=this['context']['plugins']['get']('AIEditing'),this['_aiChatModels']=new dt({'connector':this['_aiConnector'],'displayedModels':this['context']['config']['get']('ai.chat.models.displayedModels'),'defaultModelId':this['context']['config']['get']('ai.chat.models.defaultModelId')});const _0x20ef17=this['context']['plugins']['get']('AITabs');this['listenTo'](this['_aiChatUi'],'startConversation',()=>{this['_startConversationSafely']();}),this['listenTo'](this['_aiChatUi'],'sendUserMessage',(_0x568710,_0x30c3c1)=>{this['_handleUIUserMessage']({'userMessage':_0x30c3c1});}),this['listenTo'](_0x20ef17,'resizedTabs',(_0x389b37,_0xf2c836)=>{this['_setIsMaximized'](_0xf2c836);}),this['listenTo'](this['_aiChatUi'],'resizeTabs',()=>{_0x20ef17['resize']();}),this['listenTo'](this['_aiChatUi'],'abortPromptStream',async()=>{await this['_stopLastInteraction'](),await this['_flushLastInteractionUI']();}),this['listenTo'](this['_aiChatUi'],'addDocumentToContext',()=>{this['activeConversation']?.['addCurrentDocumentToContext'](i(this['context']['locale'],'AI_CHAT_CONTEXT_CURRENT_DOCUMENT'));}),this['listenTo'](this['_aiChatUi'],'addFileToContext',(_0x30fe8a,_0x37b8df)=>{this['activeConversation']?.['addFilesToContext'](Array['from'](_0x37b8df));}),this['listenTo'](this['_aiChatUi'],'addUrlToContext',(_0x319e06,_0x22d72e)=>{this['activeConversation']?.['addUrlToContext'](_0x22d72e);}),this['listenTo'](this['_aiChatUi'],'addResourceToContext',(_0x1e9322,_0x4f6abb)=>{this['activeConversation']?.['addResourceToContext'](_0x4f6abb['source'],_0x4f6abb['resource']);}),this['listenTo'](this['_aiChatUi'],'removeContextItem',(_0x3fe81d,_0x1844b4)=>{this['_removeFromContext'](_0x1844b4);}),this['listenTo'](this['_aiChatUi'],'loadSourceResources',(_0x2992de,_0x24b26b)=>{this['activeConversation']?.['loadSourceResources'](_0x24b26b['sourceId'],_0x24b26b['query'],_0x24b26b['uid']);}),this['listenTo'](this['_aiChatUi'],'toggleWebSearch',()=>{this['_toggleWebSearch']();}),this['listenTo'](this['_aiChatUi'],'toggleReasoning',()=>{this['_toggleReasoning']();}),this['listenTo'](this['_aiChatUi'],'selectModel',(_0x480872,_0x1e12bf)=>{this['activeConversation']?.['setModel'](_0x1e12bf);}),this['listenTo'](this['_aiChatUi'],'like',(_0x760f33,{replyId:_0x13477c})=>{console['log']('Liked\x20response',_0x13477c);}),this['listenTo'](this['_aiChatUi'],'dislike',(_0x12f939,{replyId:_0xc88957})=>{console['log']('Disliked\x20response',_0xc88957);}),this['listenTo'](this['_aiChatUi'],'insertSuggestion',(_0x356dab,_0x211a22)=>{this['context']['plugins']['get']($)['close'](),this['_insertSuggestion'](_0x211a22);}),this['listenTo'](this['_aiChatUi'],'showChangeInText',(_0x18dfa6,{replyId:_0x143fd3,partIndex:_0x374fe8})=>{this['_balloonShowDiff']=this['_aiChatUi']['showDiff'],this['_openBalloonFor'](_0x143fd3,_0x374fe8);}),this['listenTo'](this['_aiChatUi'],'mouseOverSuggestion',(_0x127bd8,{replyId:_0x5b2361,partIndex:_0xc06129})=>{const _0x40119a=this['_getDocumentRangeForReplyChanges'](_0x5b2361,_0xc06129);_0x40119a&&'$graveyard'!=_0x40119a['range']['root']['rootName']&&this['_aiEditing']['showFakeVisualSelection']([_0x40119a['range']],'ai-chat-controller-mouse-over');}),this['listenTo'](this['_aiChatUi'],'mouseLeaveSuggestion',()=>{this['_aiEditing']['hideFakeVisualSelection']('ai-chat-controller-mouse-over');}),this['listenTo'](this['_aiChatUi'],'applySuggestion',(_0x927001,_0x29df67)=>{this['context']['plugins']['get']($)['close'](),this['_applySuggestion'](_0x29df67);}),this['listenTo'](this['_aiChatUi'],'toggleSuggestionDisplayMode',async(_0x27eccb,_0x1a652a)=>{const {reply:_0x1521bc}=this['getInteractionAndReplyById'](_0x1a652a['replyId']),_0x104ac3=W({'editor':ei(this['context']),'changeGroups':_0x1521bc['changeGroups'],'documentContextContent':_0x1521bc['documentContextContent'],'showDiff':_0x1a652a['showDiff']});await this['_aiChatUi']['updateFeedItemAIReplySuggestionContent']({'id':_0x1521bc['id'],'parts':_0x104ac3,'renderingStrategy':'static'});}),this['listenTo'](this['_aiChatUi'],'rejectSuggestion',(_0xf7f35e,{replyId:_0x382d0b,partIndex:_0x1d8735})=>{this['_previewedChangeGroup']?.['replyId']==_0x382d0b&&this['_previewedChangeGroup']?.['partIndex']==_0x1d8735&&this['context']['plugins']['get']($)['close']();const {reply:_0x5cf822}=this['getInteractionAndReplyById'](_0x382d0b);_0x5cf822['setChangeGroupState'](_0x1d8735,'rejected'),this['_aiEditing']['hideFakeVisualSelection']('ai-chat-controller-mouse-over');});}async['afterInit'](){this['context']instanceof st?this['_integrateEditor'](this['context']):this['listenTo'](this['context']['editors'],'add',(_0x3173bf,_0x31ecfa)=>{_0x31ecfa['on']('ready',()=>{this['_integrateEditor'](_0x31ecfa);});}),await this['_startConversationSafely']();}['_insertSuggestion'](_0x419c95){const _0xa69b71=ei(this['context']);if(!_0xa69b71['plugins']['has']('TrackChangesEditing'))return;const _0x5a0beb=this['context']['plugins']['get']('DocumentCompare'),{reply:_0x4a4754,interaction:_0x2d7ab4}=this['getInteractionAndReplyById'](_0x419c95['replyId']),_0x4d8ac4=this['_getDocumentRangeForReplyChanges'](_0x419c95['replyId'],_0x419c95['partIndex']),_0x192491=void 0x0!==_0x419c95['partIndex']?[_0x4a4754['changeGroups'][_0x419c95['partIndex']]]:_0x4a4754['changeGroups']['filter'](_0xde6bd2=>'pending'==_0xde6bd2['state']),_0x364891=_0x192491['map'](_0x2eabc8=>_0x4a4754['changeGroups']['indexOf'](_0x2eabc8));if(!_0x4d8ac4||'$graveyard'==_0x4d8ac4['range']['root']['rootName'])return void _0x364891['forEach'](_0x5b8dad=>_0x4a4754['setChangeGroupState'](_0x5b8dad,'outdated'));_0x364891['forEach'](_0x5beda9=>_0x4a4754['setChangeGroupState'](_0x5beda9,'accepted'));const _0x23d26f=X({'editor':_0xa69b71,'reply':_0x4a4754,'interaction':_0x2d7ab4,'groups':_0x192491,'transform':!0x0,'documentCompare':_0x5a0beb,'documentCompareOptions':{'anchor':'main','markDeletions':!0x0}});let _0x2301ec;_0x4d8ac4&&this['_scrollToSuggestionRange'](_0x4d8ac4['range']),_0xa69b71['model']['change'](_0x400fa1=>{_0x2301ec=_0x400fa1['batch'],_0xa69b71['plugins']['get']('TrackChangesEditing')['_applyOperationsAsSuggestions'](_0x23d26f),this['_aiEditing']['hideFakeVisualSelection']('ai-chat-controller-mouse-over');}),this['_batchToChanges']['set'](_0x2301ec,{'interactionId':_0x2d7ab4['id'],'replyId':_0x4a4754['id'],'indexes':_0x364891['slice']()}),this['_updateRatings'](_0x4a4754);}['_applySuggestion'](_0x2aabe8){const _0x4467b2=ei(this['context']),_0x42bfc8=this['context']['plugins']['get'](_0x3e9353),{reply:_0x359e44,interaction:_0x35fbd6}=this['getInteractionAndReplyById'](_0x2aabe8['replyId']),_0x4708e6=this['_getDocumentRangeForReplyChanges'](_0x2aabe8['replyId'],_0x2aabe8['partIndex']),_0x378402=void 0x0!==_0x2aabe8['partIndex']?[_0x359e44['changeGroups'][_0x2aabe8['partIndex']]]:_0x359e44['changeGroups']['filter'](_0x1a5777=>'pending'==_0x1a5777['state']),_0x3cf9bf=_0x378402['map'](_0x251add=>_0x359e44['changeGroups']['indexOf'](_0x251add));if(!_0x4708e6||'$graveyard'==_0x4708e6['range']['root']['rootName'])return void _0x3cf9bf['forEach'](_0x1bee8a=>_0x359e44['setChangeGroupState'](_0x1bee8a,'outdated'));_0x3cf9bf['forEach'](_0x3a6ed4=>_0x359e44['setChangeGroupState'](_0x3a6ed4,'accepted'));const _0x4118b9=X({'editor':_0x4467b2,'reply':_0x359e44,'interaction':_0x35fbd6,'groups':_0x378402,'transform':!0x0,'documentCompare':_0x42bfc8,'documentCompareOptions':{'anchor':'main','markDeletions':!0x1}});let _0x2265cb;_0x4708e6&&this['_scrollToSuggestionRange'](_0x4708e6['range']),_0x4467b2['model']['change'](_0x41918b=>{_0x2265cb=_0x41918b['batch'];for(const _0x13e26d of _0x4118b9)_0x13e26d['baseVersion']=_0x4467b2['model']['document']['version'],_0x41918b['batch']['addOperation'](_0x13e26d),_0x4467b2['model']['applyOperation'](_0x13e26d);}),this['_batchToChanges']['set'](_0x2265cb,{'interactionId':_0x35fbd6['id'],'replyId':_0x359e44['id'],'indexes':_0x3cf9bf['slice']()}),this['_updateRatings'](_0x359e44);}['_openBalloonFor'](_0x4e67d5,_0x562644){const _0x5b66d2=ei(this['context']),_0x113da3=this['_getDocumentRangeForReplyChanges'](_0x4e67d5,_0x562644),_0x462ee5=this['context']['plugins']['get']($);if(!_0x113da3)return void _0x462ee5['close']();const {range:_0x415b3f,currentIndex:_0x4067e1,previousIndex:_0x25a2b8,nextIndex:_0x3a05fa}=_0x113da3;if('$graveyard'==_0x415b3f['root']['rootName']){const {reply:_0x210981}=this['getInteractionAndReplyById'](_0x4e67d5);return _0x210981['setChangeGroupState'](_0x4067e1,'outdated'),void _0x462ee5['close']();}if(this['_previewedChangeGroup']?.['replyId']==_0x4e67d5&&this['_previewedChangeGroup']?.['partIndex']==_0x4067e1)return;this['_previewedChangeGroup']={'replyId':_0x4e67d5,'partIndex':_0x4067e1};const _0x25fb95=new N(_0x5b66d2['locale'],{'showDiff':this['_balloonShowDiff'],'areActionsDisabled':!0x1,'miniToolbarConfig':{'showChanges':'full'},'hideHeader':!0x0}),{reply:_0x1b92e9}=this['getInteractionAndReplyById'](_0x4e67d5),_0x437029=W({'editor':_0x5b66d2,'changeGroups':[_0x1b92e9['changeGroups'][_0x4067e1]],'documentContextContent':_0x1b92e9['documentContextContent'],'showDiff':this['_balloonShowDiff']});_0x25fb95['updateContent']({'parts':_0x437029,'renderingStrategy':'static'});const _0x5e1c07=_0x4067e1!==_0x25a2b8;this['_scrollToSuggestionRange'](_0x415b3f,!0x0),_0x462ee5['open']({'index':_0x4067e1,'title':i(this['context']['locale'],'AI_BALLOON_HEADER_TITLE',(_0x4067e1+0x1)['toString']()),'icon':yt,'mainView':_0x25fb95,'showRotator':_0x5e1c07,'showApplyButton':!0x0,'showSuggestButton':!0x0,'ranges':[_0x415b3f]}),this['_aiChatUi']['scrollFeedToSuggestion'](_0x4e67d5,_0x4067e1),this['listenTo'](_0x25fb95,'toggleSuggestionDisplayMode',(_0x10d0ee,{showDiff:_0x1c102e})=>{this['_balloonShowDiff']=_0x1c102e;const {reply:_0x363ce9}=this['getInteractionAndReplyById'](_0x4e67d5),_0x1ee569=W({'editor':_0x5b66d2,'changeGroups':[_0x363ce9['changeGroups'][_0x4067e1]],'documentContextContent':_0x363ce9['documentContextContent'],'showDiff':_0x1c102e});_0x25fb95['updateContent']({'parts':_0x1ee569,'renderingStrategy':'static'});}),this['listenTo'](_0x462ee5,'applySuggestion',()=>{this['_applySuggestion']({'replyId':_0x4e67d5,'partIndex':_0x4067e1}),_0x5e1c07?this['_openBalloonFor'](_0x4e67d5,_0x3a05fa):_0x462ee5['close']();}),this['listenTo'](_0x462ee5,'insertSuggestion',()=>{this['_insertSuggestion']({'replyId':_0x4e67d5,'partIndex':_0x4067e1}),_0x5e1c07?this['_openBalloonFor'](_0x4e67d5,_0x3a05fa):_0x462ee5['close']();}),_0x5e1c07&&(this['listenTo'](_0x462ee5,'showNext',()=>{this['_openBalloonFor'](_0x4e67d5,_0x3a05fa);}),this['listenTo'](_0x462ee5,'showPrevious',()=>{this['_openBalloonFor'](_0x4e67d5,_0x25a2b8);})),this['listenTo'](_0x462ee5,'dialogClosed',()=>{this['stopListening'](_0x462ee5),this['stopListening'](_0x25fb95),this['_previewedChangeGroup']=null;});}['_getDocumentRangeForReplyChanges'](_0x3cae1f,_0x39b8a0){const _0x356b1c=ei(this['context']),{reply:_0x28f566,interaction:_0x419c6a}=this['getInteractionAndReplyById'](_0x3cae1f),_0xdb4de=_0x28f566['changeGroups']['filter'](_0xdbcfa8=>'pending'==_0xdbcfa8['state']),_0x587053=_0xdb4de['map'](_0x199890=>_0x28f566['changeGroups']['indexOf'](_0x199890));void 0x0===_0x39b8a0&&(_0x39b8a0=_0x587053[0x0]);const _0x4ffaaa=_0x587053['indexOf'](_0x39b8a0);if(-0x1==_0x4ffaaa)return null;const _0x43e18e=0x0==_0x4ffaaa?_0x587053[_0x587053['length']-0x1]:_0x587053[_0x4ffaaa-0x1],_0x514d6b=_0x4ffaaa==_0x587053['length']-0x1?_0x587053[0x0]:_0x587053[_0x4ffaaa+0x1],_0x56829a=_0xdb4de[_0x4ffaaa],_0x119bd2=new ft([]),_0x3abb36=new ft([]);for(const _0x534072 of _0x56829a['changes'])if('removed'!=_0x534072['type']&&_0x3abb36['children']['push'](_0x534072['node']['cloneNode'](!0x0)),'new'!=_0x534072['type']){const _0x464e63=ut(_0x5d1a7c=>mt(_0x5d1a7c,'data-id')==_0x534072['id'],_0x28f566['documentContextContent'],!0x0);_0x119bd2['children']['push'](_0x464e63['cloneNode'](!0x0));}if(0x0==_0x119bd2['children']['length']){if(_0x56829a['changes'][0x0]['anchorId']){const _0x94e2b1=_t('data-id',_0x56829a['changes'][0x0]['anchorId'],_0x28f566['documentContextContent']);_0x119bd2['children']['unshift'](_0x94e2b1['cloneNode'](!0x0)),_0x3abb36['children']['unshift'](_0x94e2b1['cloneNode'](!0x0)),_0x94e2b1['nextSibling']&&(_0x119bd2['children']['push'](_0x94e2b1['nextSibling']['cloneNode'](!0x0)),_0x3abb36['children']['push'](_0x94e2b1['nextSibling']['cloneNode'](!0x0)));}else{const _0x5b3b10=_0x28f566['documentContextContent']['children'][0x0];if(!_0x5b3b10)return null;_0x119bd2['children']['push'](_0x5b3b10['cloneNode'](!0x0)),_0x3abb36['children']['push'](_0x5b3b10['cloneNode'](!0x0));}}const _0x1a5a29=_0x419c6a['getDocumentContext'](),_0x4c5069=_0x356b1c['data']['parse'](_0x1a5a29['content']),_0x2fdb13=Ct(_0x119bd2),_0x474d08=_0x356b1c['data']['parse'](_0x2fdb13),_0x4bb88d=_0x356b1c['data']['parse'](_0x2fdb13),_0x3f80bf=_0x356b1c['model']['createPositionAt'](_0x474d08,0x0),_0x1ca91e=Ct(_0x3abb36),_0x448d8c={'anchor':_0x3f80bf,'markDeletions':!0x1},_0x1fb676=_0x356b1c['plugins']['get'](_0x3e9353)['getDiff'](_0x2fdb13,_0x1ca91e,_0x448d8c)['getOperations']();if(!_0x1fb676['length'])return null;_0x356b1c['model']['change'](_0x24c37d=>{for(const _0xf6c1ca of _0x1fb676)if('remove'==_0xf6c1ca['type']){const _0x2babea=_0xf6c1ca['sourcePosition'],_0x2aac07=_0xf6c1ca['howMany'],_0x53fa48=new _0x317ebf(_0x2babea,_0x2aac07);_0x24c37d['batch']['addOperation'](_0x53fa48),_0x356b1c['model']['applyOperation'](_0x53fa48);}else'marker'!==_0xf6c1ca['type']&&(_0xf6c1ca['baseVersion']=null,_0xf6c1ca['isDocumentOperation']=!0x1,_0x24c37d['batch']['addOperation'](_0xf6c1ca),_0x356b1c['model']['applyOperation'](_0xf6c1ca));});const _0x18309c=pt(_0x356b1c,_0x1fb676,_0x474d08);gt(_0x356b1c['model'],_0x18309c);const _0x1e0ea6=_0x18309c['getFirstRange']()['start']['path']['slice'](),_0x1ecd68=_0x18309c['getFirstRange']()['end']['path']['slice'](),_0x1f244e=[];let _0x1237c7=_0x474d08,_0x44f575=_0x4bb88d;for(let _0x284a3a=0x0;_0x284a3a<_0x1ecd68['length'];_0x284a3a++){const _0x3331f6=_0x1237c7['maxOffset']-_0x1ecd68[_0x284a3a];_0x1f244e[_0x284a3a]=_0x44f575['maxOffset']-_0x3331f6,_0x1237c7=_0x1237c7['getChildAtOffset'](_0x1ecd68[_0x284a3a]),_0x44f575=_0x44f575['getChildAtOffset'](_0x1f244e[_0x284a3a]);}const _0x4e2af9=_0x356b1c['model']['createRange'](_0x356b1c['model']['createPositionFromPath'](_0x4bb88d,_0x1e0ea6),_0x356b1c['model']['createPositionFromPath'](_0x4bb88d,_0x1f244e)),_0x412ca3=_0x4bb88d['getChild'](0x0)['getAttribute'](lt),_0x38671b=Array['from'](_0x4c5069['getChildren']())['find'](_0x34d46a=>_0x34d46a['getAttribute'](lt)==_0x412ca3)['getPath'](),_0xae2709=_0x4e2af9['start']['path']['slice'](),_0x5b9092=_0x4e2af9['end']['path']['slice']();_0xae2709[0x0]=_0x38671b[0x0]+_0xae2709[0x0],_0x5b9092[0x0]=_0x38671b[0x0]+_0x5b9092[0x0];let _0x4b5f9e=_0x356b1c['model']['createRange'](_0x356b1c['model']['createPositionFromPath'](_0x356b1c['model']['document']['getRoot'](),_0xae2709),_0x356b1c['model']['createPositionFromPath'](_0x356b1c['model']['document']['getRoot'](),_0x5b9092));const _0x19ba95=_0x356b1c['model']['document']['history']['getOperations'](_0x1a5a29['version']);for(const _0x3bc76d of _0x19ba95)_0x4b5f9e=_0x24e098['_createFromRanges'](_0x4b5f9e['getTransformedByOperation'](_0x3bc76d));return{'range':_0x4b5f9e,'previousIndex':_0x43e18e,'nextIndex':_0x514d6b,'currentIndex':_0x39b8a0};}['_integrateEditor'](_0x4270a3){if(!_0x4270a3['plugins']['has']('Undo'))return;const _0x284baa=_0x4270a3['commands']['get']('undo'),_0x77e80d=_0x4270a3['commands']['get']('redo');this['listenTo'](_0x284baa,'revert',(_0x5277b7,_0xb86552,_0x2119db)=>{const _0x2640fe=this['_batchToChanges']['get'](_0xb86552);if(!_0x2640fe)return;const _0xa29c66=this['activeConversation']['getInteraction'](_0x2640fe['interactionId'])['getReply'](_0x2640fe['replyId']);_0x2640fe['indexes']['forEach'](_0x1c11b6=>_0xa29c66['setChangeGroupState'](_0x1c11b6,'pending')),this['_batchToChanges']['delete'](_0xb86552),this['_batchToChanges']['set'](_0x2119db,_0x2640fe);}),this['listenTo'](_0x77e80d,'revert',(_0x2ab538,_0x574622,_0x4726da)=>{const _0x596494=this['_batchToChanges']['get'](_0x574622);if(!_0x596494)return;const _0x30116e=this['activeConversation']['getInteraction'](_0x596494['interactionId'])['getReply'](_0x596494['replyId']);_0x596494['indexes']['forEach'](_0x31a5a2=>_0x30116e['setChangeGroupState'](_0x31a5a2,'accepted')),this['_batchToChanges']['delete'](_0x574622),this['_batchToChanges']['set'](_0x4726da,_0x596494);});}async['loadConversation'](_0x5238ca){this['context']['plugins']['get']($)['close'](),this['_aiChatUi']['setFeedItemRenderingStrategy']('static'),this['_aiChatUi']['toggleLoadingSkeleton'](!0x0),await this['_stopLastInteraction']();try{const _0x2c88c7=this['context']['plugins']['get'](rt);this['updateConversationTitle']('\x20'),_0x2c88c7['view']['activateTab']('chat'),await this['_startConversationSafely'](_0x5238ca);const {sessionId:_0x4515b0}=this['_aiEditing']['getDocumentData']();await this['activeConversation']['load'](_0x5238ca,_0x4515b0),this['activeConversation']['isCurrentDocumentInConversation']()&&this['activeConversation']['addCurrentDocumentToContext'](i(this['context']['locale'],'AI_CHAT_CONTEXT_CURRENT_DOCUMENT'));}catch(_0x1d95e5){console['error']('Failed\x20to\x20load\x20conversation',_0x1d95e5);}finally{this['_aiChatUi']['setFeedItemRenderingStrategy']('streaming'),this['_aiChatUi']['toggleLoadingSkeleton'](!0x1);}}['handleRemovedConversation'](_0x2f6a1a){this['activeConversation']['id']===_0x2f6a1a&&this['_startConversationSafely']();}async['addSelectionToChatContext'](){const _0x506ab9=this['_aiEditing']['getSelectionText']();this['activeConversation']?.['addSelectionToContext'](_0x506ab9),this['activeConversation']?.['addCurrentDocumentToContext'](i(this['context']['locale'],'AI_CHAT_CONTEXT_CURRENT_DOCUMENT'));}['removeSelectionFromChatContext'](){this['activeConversation']?.['removeSelectionFromContext']();}['focusPromptInput'](){this['_aiChatUi']['focusPromptInput']();}async['startConversation'](){await this['_startConversationSafely']();}async['sendMessage']({message:_0x3a0338,quickActionData:_0x4e0a9b}){await this['_handleUIUserMessage']({'userMessage':_0x3a0338,'quickActionData':_0x4e0a9b});}['getGroupId'](){const _0x2d8807=this['context']['config']['get']('collaboration.channelId');if(!_0x2d8807)throw new _0x38f49c('ai-chat-missing-channel-id',this);return _0x2d8807;}async['_startConversationSafely'](_0x4c538e){try{this['_aiChatUi']['enableControls'](),await this['_handleStartConversation'](_0x4c538e);}catch(_0x1e123c){ot('ai-chat-conversation-start-failed',_0x1e123c),this['activeConversation']=void 0x0,this['_aiChatUi']['disableControls']();}}async['_handleStartConversation'](_0x3318b1){const _0xc2b26f=this['context']['plugins']['get']($);let _0x542759;_0xc2b26f['isOpen']&&_0xc2b26f['close'](),_0x3318b1||!this['activeConversation']?_0x542759=this['context']['config']['get']('ai.chat.models.defaultModelId'):this['_aiChatUi']['isModelAvailable']&&(_0x542759=this['activeConversation']['selectedModel']['id']),await this['_stopLastInteraction']();const _0x5649d2=this['getGroupId'](),_0x354b84=_0x3318b1||_0xa215c8();this['activeConversation']=new ht({'connector':this['_aiConnector'],'chatModels':this['_aiChatModels'],'selectedModelId':_0x542759,'conversationId':_0x354b84,'group':_0x5649d2,'getEditor':()=>ei(this['context'])}),this['activeConversation']['on']('conversationInitialized',(_0x13bb18,_0x4bcdd1)=>{this['_aiChatUi']['createConversation'](_0x4bcdd1),this['_aiChatUi']['resetMessageInput'](),this['_aiChatUi']['clearPendingContextUI'](),this['_aiChatUi']['clearConversationContextUI'](),_0x3318b1||(this['_aiChatUi']['resetConversationTitle'](),this['activeConversation']?.['addCurrentDocumentToContext'](i(this['context']['locale'],'AI_CHAT_CONTEXT_CURRENT_DOCUMENT')));}),this['activeConversation']['on']('uploadProgressChanged',(_0x508a38,_0x5cb654)=>{this['_aiChatUi']['setIsUploadInProgress'](_0x5cb654['isUploadInProgress']);}),this['activeConversation']['on']('interactionCreated',(_0x32e234,_0x407f29)=>{this['_aiChatUi']['addFeedItemUserMessage'](_0x407f29);}),this['activeConversation']['on']('webSearchStarted',()=>{this['_aiChatUi']['setLoadingMessage']({'isWebSearchEnabled':!0x0,'isReasoningEnabled':!0x1});}),this['activeConversation']['on']('reasoningStarted',()=>{this['_aiChatUi']['setLoadingMessage']({'isWebSearchEnabled':!0x1,'isReasoningEnabled':!0x0});}),this['activeConversation']['on']('webSearchFinished',(_0xafe675,_0x402498)=>{this['_aiChatUi']['addFeedInteractionHeader'](_0x402498,{'isWebSearchEnabled':!0x0,'isReasoningEnabled':!0x1});}),this['activeConversation']['on']('reasoningFinished',(_0x2cddf4,_0x37a0e1)=>{this['_aiChatUi']['addFeedInteractionHeader'](_0x37a0e1,{'isWebSearchEnabled':!0x1,'isReasoningEnabled':!0x0});}),this['activeConversation']['on']('interactionStarted',()=>{this['_aiChatUi']['startInteraction']();}),this['activeConversation']['on']('interactionFinished',async()=>{await this['_aiChatUi']['finishInteraction']();}),this['activeConversation']['on']('interactionDestroyed',(_0x4a1b25,_0x49eba6)=>{this['_aiChatUi']['removeFeedInteraction'](_0x49eba6['id']);}),this['activeConversation']['on']('setConversationTitle',(_0x1d6153,_0x251501,_0x40cfdb)=>{this['updateConversationTitle'](_0x251501,_0x40cfdb);}),this['activeConversation']['on']('replyCreated',(_0x2b4170,_0x21c494)=>{'text-delta'===_0x21c494['type']?this['_aiChatUi']['addFeedItemAIReply'](_0x21c494):this['_aiChatUi']['addFeedItemAISuggestion'](_0x21c494);}),this['activeConversation']['on']('replyContentUpdated',async(_0x5f2fd0,_0x4a42f8,_0xe76913)=>{await this['_updateReplyContent']({'reply':_0x4a42f8,'changeGroups':_0xe76913});}),this['activeConversation']['on']('replyChangeGroupStateUpdated',(_0x21fcf2,{reply:_0x474f60,index:_0x229fde,state:_0x2fede3})=>{this['_aiChatUi']['updateFeedItemAIReplySuggestionPartState']({'id':_0x474f60['id'],'index':_0x229fde,'state':_0x2fede3});}),this['activeConversation']['on']('contextItemAdded',(_0x16c281,_0x341f35)=>{if(this['_aiChatUi']['addContextItem'](_0x341f35['contextItem'],_0x341f35['isLoading']),'selection'===_0x341f35['contextItem']['type']){const _0x1b6583=[...ei(this['context'])['model']['document']['selection']['getRanges']()];this['_aiEditing']['showFakeVisualSelection'](_0x1b6583,'ai-conversation-'+this['activeConversation']?.['id']);}}),this['activeConversation']['on']('contextItemRemoved',(_0x3bb2f9,_0x5eff2e)=>{this['_aiChatUi']['removeContextItem'](_0x5eff2e['uiId']),'current-document'==_0x5eff2e['uiId']&&this['removeSelectionFromChatContext'](),'selection'===_0x5eff2e['type']&&this['_aiEditing']['hideFakeVisualSelection']('ai-conversation-'+this['activeConversation']?.['id']);}),this['activeConversation']['on']('contextItemLoadingEnded',(_0x4042a9,_0x4b4e99)=>{this['_aiChatUi']['setContextItemLoading'](_0x4b4e99['contextItem']['uiId'],_0x4b4e99['isLoading']);}),this['activeConversation']['on']('contextSent',(_0x1f37ae,_0x5ddc30)=>{this['_aiChatUi']['setConversationContext'](_0x5ddc30['contextItems']);}),this['activeConversation']['on']('addContextOptionsChanged',(_0x3a5ae7,_0x3e7516)=>{this['_aiChatUi']['setAddContextOptions'](_0x3e7516['options']);}),this['activeConversation']['on']('sourceResourcesLoaded',(_0x129f2c,_0x46203d)=>{this['_aiChatUi']['populateSourceResourceBalloon'](_0x46203d['sourceId'],_0x46203d['source'],_0x46203d['resources'],_0x46203d['uid']);}),this['activeConversation']['on']('resourceStateChanged',(_0x3778ed,_0x51f6af)=>{this['_aiChatUi']['updateResourceState'](_0x51f6af['sourceId'],_0x51f6af['resourceId'],_0x51f6af['isInContext']);}),this['activeConversation']['on']('capabilitiesUpdated',(_0x140c83,_0x1d3504)=>{this['_aiChatUi']['updateCapabilities'](_0x1d3504);}),this['activeConversation']['on']('modelSelected',(_0x3611a0,_0x4f611e)=>{this['_aiChatUi']['setSelectedModel'](_0x4f611e['selectedModel'],_0x4f611e['isDisabled']);}),this['activeConversation']['on']('error',(_0x2c6dba,{error:_0x52350b,interactionId:_0x13e1af,fileName:_0x1d0190,url:_0x4a3824,sourceId:_0x61bcec,sourceLabel:_0x4d4e37})=>{const _0x400ef7=_0x13e1af?_0x13e1af+':'+_0xa215c8():_0xa215c8();_0x52350b['message']['startsWith']('ai-request-aborted')?this['_aiChatUi']['addFeedItemStaticMessage']({'staticMessage':i(this['context']['locale'],'AI_CHAT_ABORTED_MESSAGE'),'id':_0x400ef7}):_0x52350b['message']['startsWith']('ai-chat-conversation-init-failed')||_0x52350b['message']['startsWith']('ai-chat-conversation-start-failed')?(this['_aiChatUi']['addFeedItemError']({'errorMessage':i(this['context']['locale'],'AI_CHAT_UNABLE_TO_START_CONVERSATION'),'id':_0x400ef7}),this['_logError'](_0x52350b)):_0x52350b['message']['startsWith']('ai-chat-file-upload-failed')?this['_aiChatUi']['addFeedItemError']({'errorMessage':i(this['context']['locale'],'AI_CHAT_CONTEXT_UNABLE_TO_UPLOAD_FILE',_0x1d0190),'id':_0x400ef7}):_0x52350b['message']['startsWith']('ai-chat-url-upload-failed')?this['_aiChatUi']['addFeedItemError']({'errorMessage':i(this['context']['locale'],'AI_CHAT_CONTEXT_UNABLE_TO_UPLOAD_URL',_0x4a3824),'id':_0x400ef7}):_0x52350b['message']['startsWith']('ai-chat-context-invalid-data')?this['_aiChatUi']['addFeedItemError']({'errorMessage':i(this['context']['locale'],'AI_CHAT_CONTEXT_INVALID_DATA'),'id':_0x400ef7}):_0x52350b['message']['startsWith']('ai-chat-context-unsupported-type')?this['_aiChatUi']['addFeedItemError']({'errorMessage':i(this['context']['locale'],'AI_CHAT_CONTEXT_UNSUPPORTED_TYPE'),'id':_0x400ef7}):_0x52350b['message']['startsWith']('ai-chat-source-resources-load-failed')?(_0x61bcec&&this['_aiChatUi']['closeSourceResourceBalloon'](_0x61bcec),this['_aiChatUi']['addFeedItemError']({'errorMessage':i(this['context']['locale'],'AI_CHAT_CONTEXT_UNABLE_TO_LOAD_RESOURCES',_0x4d4e37||'source'),'id':_0x400ef7}),this['_logError'](_0x52350b)):_0x52350b['message']['startsWith']('ai-chat-resource-load-failed')?(this['_aiChatUi']['addFeedItemError']({'errorMessage':i(this['context']['locale'],'AI_CHAT_RESOURCE_LOAD_FAILED'),'id':_0x400ef7}),this['_logError'](_0x52350b)):(this['_aiChatUi']['addFeedItemError']({'errorMessage':i(this['context']['locale'],'AI_CHAT_GENERIC_ERROR'),'id':_0x400ef7}),this['_logError'](_0x52350b));}),await this['activeConversation']['init'](this['context']['config']['get']('ai.chat.context')),_0x3318b1||await this['activeConversation']['start']();}async['_handleUIUserMessage']({userMessage:_0x25ee56,quickActionData:_0x299cf7}){if(!this['activeConversation'])throw new _0x38f49c('ai-chat-controller-no-active-conversation');this['activeConversation']['isCurrentDocumentInContext']()&&await this['activeConversation']['updateCurrentDocumentInContext'](this['_aiEditing']['getDocumentData']()),this['activeConversation']['id']&&this['activeConversation']['isStarted']&&await this['activeConversation']['handleUserInteraction']({'userMessage':_0x25ee56,'quickActionData':_0x299cf7}),this['_removeAISelectionMarkers']();}['_removeAISelectionMarkers'](){const _0x4dafd7=ei(this['context'])['model'],_0x3ed53b=Array['from'](_0x4dafd7['markers']['getMarkersGroup'](ct));_0x4dafd7['change'](_0xc3e403=>{_0x3ed53b['forEach'](_0x7cb8c5=>_0xc3e403['removeMarker'](_0x7cb8c5));});}['_showConversationHistory'](){console['log']('Showing\x20conversation\x20history...');}['_setIsMaximized'](_0xfc5fd1){this['_aiChatUi']['setIsMaximized'](_0xfc5fd1);}['_logError'](_0x3d6eb8){ot(_0x3d6eb8['message']);}['_removeFromContext'](_0x53e6c9){this['activeConversation']?.['removeFromContext'](_0x53e6c9);}['_toggleWebSearch'](){this['activeConversation']?.['toggleWebSearch']();}['_toggleReasoning'](){this['activeConversation']?.['toggleReasoning']();}['getInteractionAndReplyById'](_0x3c1c7d){const [_0x1ca17a,_0x351e13]=_0x3c1c7d['split'](':'),_0x936a17=this['activeConversation']['getInteraction'](_0x1ca17a),_0x24815b=_0x936a17['getReply'](_0x351e13);return{'interaction':_0x936a17,'reply':_0x24815b};}['_scrollToSuggestionRange'](_0x53beaf,_0x3bdaa5=!0x1){const _0x2cef8a=ei(this['context']),_0x538f7d={'target':_0x2cef8a['editing']['view']['domConverter']['viewRangeToDom'](_0x2cef8a['editing']['mapper']['toViewRange'](_0x53beaf)),'viewportOffset':{'top':0x96,'left':0x0,'bottom':0x32,'right':0x0},'ancestorOffset':0x14,'alignToTop':_0x3bdaa5};_0x3bdaa5&&(_0x538f7d['alignToTop']=!0x0),nt(_0x538f7d);}['updateConversationTitle'](_0x5baff5,_0x49d918=!0x1){this['_aiChatUi']['setConversationTitle'](_0x5baff5||i(this['context']['locale'],'AI_CHAT_UNTITLED_CONVERSATION'),_0x49d918);}async['_updateReplyContent']({reply:_0xb6db90,changeGroups:_0x33104a,renderingStrategy:_0x591204}){const {id:_0x23fcb0,isDone:_0x5a69a1,type:_0x492f9e,parsedContent:_0x306507}=_0xb6db90;if('modification-delta'===_0x492f9e){const _0x30f5fb=W({'editor':ei(this['context']),'showDiff':this['_aiChatUi']['showDiff'],'changeGroups':_0x33104a,'documentContextContent':_0xb6db90['documentContextContent']});await this['_aiChatUi']['updateFeedItemAIReplySuggestionContent']({'id':_0x23fcb0,'parts':_0x30f5fb,'renderingStrategy':_0x591204,'isDone':_0x5a69a1});}else'text-delta'===_0x492f9e&&await this['_aiChatUi']['updateFeedItemAIReplyContent']({'id':_0x23fcb0,'parsedContent':_0x306507,'renderingStrategy':_0x591204,'isDone':_0x5a69a1});_0x5a69a1&&_0xb6db90['sources']['length']>0x0&&this['_aiChatUi']['updateFeedItemAIReplySources'](_0x23fcb0,_0xb6db90['sources']);}async['_stopLastInteraction'](){const _0x3b2b0a=this['activeConversation']?.['lastInteraction'];_0x3b2b0a&&(_0x3b2b0a['stop'](),this['_aiChatUi']['stopInteraction'](_0x3b2b0a));}async['_flushLastInteractionUI'](){const _0x126b11=this['activeConversation']?.['lastInteraction'];if(_0x126b11){for await(const _0x10150d of _0x126b11['replies'])await this['_updateReplyContent']({'reply':_0x10150d,'changeGroups':_0x10150d['changeGroups'],'renderingStrategy':'static'});}}['_updateRatings'](_0x2af6b5){const _0x2fc14b={'positiveCount':_0x2af6b5['changeGroups']['filter'](_0x5db77f=>'accepted'===_0x5db77f['state'])['length'],'totalCount':_0x2af6b5['changeGroups']['length']},_0x317203=this['activeConversation']['getInteraction'](_0x2af6b5['interactionId'])['messageId'];this['_aiConnector']['upsertAIChatRating'](this['activeConversation']['id'],_0x317203,_0x2fc14b);}}const Rt=[...Ae,'startConversation','resizeTabs','sendUserMessage','abortPromptStream','addDocumentToContext','addFileToContext','addUrlToContext','addResourceToContext','removeContextItem','loadSourceResources','toggleWebSearch','toggleReasoning','selectModel'];class we extends Cr{['containerView'];['actionsView'];constructor(_0x111a04,_0x2760a8){super(_0x2760a8),this['containerView']=new N(_0x111a04,{'showDiff':_0x2760a8['showDiff'],'areActionsDisabled':_0x2760a8['areActionsDisabled']}),this['containerView']['on']('toggleSuggestionDisplayMode',(_0x2c2aae,_0x36fd59)=>{this['fire']('toggleSuggestionDisplayMode',{'replyId':this['options']['id'],'showDiff':_0x36fd59['showDiff']});}),this['containerView']['on']('like',()=>{this['fire']('like',{'replyId':this['options']['id']});}),this['containerView']['on']('dislike',()=>{this['fire']('dislike',{'replyId':this['options']['id']});}),this['containerView']['on']('showChangeInText',(_0x573b0d,{index:_0x6af491})=>{this['fire']('showChangeInText',{'replyId':this['options']['id'],'partIndex':_0x6af491});}),this['containerView']['on']('insertSuggestion',(_0x261224,{index:_0x3ca8da})=>{this['fire']('insertSuggestion',{'replyId':this['options']['id'],'partIndex':_0x3ca8da});}),this['containerView']['on']('rejectSuggestion',(_0x24153f,{index:_0x2420bf})=>{this['fire']('rejectSuggestion',{'replyId':this['options']['id'],'partIndex':_0x2420bf});}),this['containerView']['on']('mouseOverSuggestion',(_0x82b104,{index:_0x1ff69c})=>{this['fire']('mouseOverSuggestion',{'replyId':this['options']['id'],'partIndex':_0x1ff69c});}),this['containerView']['on']('mouseLeaveSuggestion',(_0x26f5ec,{index:_0x5b362a})=>{this['fire']('mouseLeaveSuggestion',{'replyId':this['options']['id'],'partIndex':_0x5b362a});}),this['actionsView']=new nh(_0x111a04,this['options']['dropdownConfig']),this['actionsView']['bind']('isTrackChangesOn')['to'](this,'isTrackChangesOn'),this['actionsView']['on']('showChangeInText',()=>{this['fire']('showChangeInText',{'replyId':this['options']['id']});}),this['actionsView']['on']('insertSuggestion',()=>{this['fire']('insertSuggestion',{'replyId':this['options']['id']});}),this['actionsView']['on']('applySuggestion',()=>{this['fire']('applySuggestion',{'replyId':this['options']['id']});}),_0x2760a8['areActionsDisabled']?this['actionsView']['isEnabled']=!0x1:this['actionsView']['bind']('isEnabled')['to'](this['containerView']['bodyView'],'hasPendingParts'),this['children']['addMany']([this['containerView'],this['actionsView']]),this['extendTemplate']({'attributes':{'class':['ck-ai-chat__feed__ai-suggestion']}});}async['updateContent'](_0x18a0c2){await this['containerView']['updateContent'](_0x18a0c2),this['actionsView']['updateLabels'](this['containerView']['bodyView']['partsCount']);}['updatePartState'](_0x176811,_0x4251e2){this['containerView']['bodyView']['updatePartState'](_0x176811,_0x4251e2);}['updateSources'](_0x45a6fe){this['containerView']['updateSources'](_0x45a6fe);}['getPartView'](_0x4385e2){return this['containerView']['bodyView']['getPartView'](_0x4385e2);}['markAsDone'](){super['markAsDone'](),this['containerView']['markAsDone'](),this['actionsView']['isVisible']=this['containerView']['bodyView']['hasNonEmptyParts'];}}class ke extends Cr{['replyContainer'];constructor(_0x42c241,_0x5cf2f6){super(_0x5cf2f6),this['locale']=_0x42c241,this['extendTemplate']({'attributes':{'class':['ck-ai-chat__feed__ai-reply']}}),this['replyContainer']=new _0x4dc179(),this['replyContainer']['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-reset_all-excluded','ck-ai-chat__feed__ai-reply-container']}}),this['children']['add'](this['replyContainer']);}async['render'](){super['render'](),this['options']['initialContent']&&(await this['updateContent']({'parsedContent':Ye(this['options']['initialContent']),'renderingStrategy':'static'}),this['markAsDone']());}async['updateContent']({parsedContent:_0x17346e,renderingStrategy:_0x30f802,abortSignal:_0x41c854}){'streaming'===_0x30f802?await this['streamIntoElement'](_0x17346e,this['replyContainer']['element'],_0x41c854):this['replyContainer']['element']['innerHTML']=_0x5516a8(_0x17346e);}['updateSources'](_0x809c76){const _0x59b680=new jr(this['locale']);_0x59b680['children']['addMany'](_0x809c76['map'](_0x416137=>new Sr(this['locale'],_0x416137))),_0x59b680['isVisible']=!0x0,this['children']['add'](_0x59b680);}}const xn={'file':_0x45f76f,'document':_0x406e24,'web-resource':_0x2bae8e,'text':_0x45f76f,'selection':_0xe2de8e},$r='ck-ai-chat-context-chip',Qr='ck-ai-chat-context-chip_wide',Xr='ck-ai-chat-context-chip_document',Jr='ck-ai-chat-context-chip__label',Zr='ck-ai-chat-context-chip__type-icon',na='ck-ai-chat-context-controls__chip-tooltip',Cn='n';class po extends _0x177962{constructor(_0x365d7b,_0x5359f2,_0x49449e,_0x3cdba6,_0x31aa5b=!0x1){super(_0x365d7b),this['_isAnimationOnEnterEnabled']=_0x3cdba6,this['_initializeProperties'](_0x5359f2,_0x49449e,_0x31aa5b),this['_setupTemplate']();}['render'](){super['render'](),this['_isAnimationOnEnterEnabled']&&this['element']&&(this['element']['classList']['add']('ck-ai-chat-context-chip_new-chip'),this['_handleAnimationEndOnce'](this['element'],()=>{this['element']&&this['element']['classList']['remove']('ck-ai-chat-context-chip_new-chip');}));}['disableAnimationOnEnter'](){this['_isAnimationOnEnterEnabled']=!0x1,this['element']&&this['element']['classList']['remove']('ck-ai-chat-context-chip_new-chip');}['_initializeProperties'](_0x389feb,_0x1d518f,_0x4c8466){this['set']('label',_0x389feb['label']),this['set']('tooltip',!0x0),this['set']('itemType',_0x389feb['type']),this['set']('id',_0x389feb['uiId']),this['set']('readonly',_0x1d518f),this['set']('isLoading',_0x4c8466);}['_setupTemplate'](){const _0x4b2bb9=this['_createIconView'](),_0x573c33=this['_createRemoveButton'](),_0x5a94be=this['bindTemplate'];this['setTemplate']({'tag':'div','attributes':this['_createTemplateAttributes'](_0x5a94be),'children':this['_createTemplateChildren'](_0x4b2bb9,_0x573c33,_0x5a94be)});}['_createTemplateAttributes'](_0x14c2c4){return{'class':[$r,_0x14c2c4['if']('itemType',Xr,_0x3ff8cd=>'document'==_0x3ff8cd),_0x14c2c4['if']('itemType',Qr,_0x2612a7=>'selection'==_0x2612a7)],'data-cke-tooltip-text':_0x14c2c4['to']('label',In),'data-cke-tooltip-position':Cn,'data-cke-tooltip-class':na};}['_createTemplateChildren'](_0x4f037c,_0x262ffb,_0x547469){const _0x5813c7=this['_createLabelElement'](_0x547469),_0x5c142c=this['_createLoaderIcon']();return this['readonly']?[_0x4f037c,_0x5813c7]:[_0x4f037c,_0x5c142c,_0x5813c7,_0x262ffb];}['_createLabelElement'](_0x2d17da){return{'tag':'span','attributes':{'class':Jr},'children':[{'text':_0x2d17da['to']('label')}]};}['_createRemoveButton'](){const _0x328d05=new _0x177962(this['locale']);return _0x328d05['set']({'label':i(this['locale'],'AI_CHAT_CONTEXT_REMOVE_FROM_CONTEXT'),'icon':_0x225a15}),this['_setupRemoveButtonEvent'](_0x328d05),_0x328d05;}['_setupRemoveButtonEvent'](_0x1d1955){_0x1d1955['on']('execute',()=>{this['fire']('removeContextItemChip',this['id']);});}['_createIconView'](){const _0x47ed71=this['bindTemplate'],_0x117078=new _0x4c8e3c();return _0x117078['content']=xn[this['itemType']],_0x117078['extendTemplate']({'attributes':{'class':[Zr,_0x47ed71['if']('isLoading','ck-hidden',_0x4796d4=>_0x4796d4)]}}),_0x117078;}['_handleAnimationEndOnce'](_0x52d2d5,_0x1c6a5a){if(!_0x52d2d5)return;const _0x47c51f=()=>{_0x1c6a5a(),_0x52d2d5['removeEventListener']('animationend',_0x47c51f),_0x52d2d5['removeEventListener']('webkitAnimationEnd',_0x47c51f);};_0x52d2d5['addEventListener']('animationend',_0x47c51f),_0x52d2d5['addEventListener']('webkitAnimationEnd',_0x47c51f);}['_createLoaderIcon'](){const _0x10a8f0=new Te('small');return _0x10a8f0['bind']('isVisible')['to'](this,'isLoading',_0x500547=>_0x500547),_0x10a8f0;}}function In(_0x3838aa){if(!_0x3838aa)return _0x3838aa;if(_0x3838aa['length']<=0x78)return _0x3838aa;const _0x2df92a=_0x3838aa['slice'](0x0,0x78),_0x327f1e=_0x2df92a['lastIndexOf']('\x20');return(_0x327f1e>0x0?_0x2df92a['slice'](0x0,_0x327f1e):_0x2df92a)+'';}const hn={'maxVisibleRows':0x2,'rowDetectionTolerance':0x5,'showMoreLabelPrefix':'+\x20','viewportOffset':{'top':0x64,'bottom':0xa}},ln='300px';class bo{['_locale'];['_config'];['_visibleChips'];['_overflowChips'];['_showMoreButtonView']=null;['_showMoreBalloonPanelView']=null;['_containerElement']=null;['_bodyCollection'];['_parentView']=null;['_intersectionObserver']=null;['_pendingCalculation']=!0x1;constructor(_0x3b858b,_0x3a7d11,_0x59aac3,_0x1c5669,_0x489860){this['_locale']=_0x3b858b,this['_visibleChips']=_0x3a7d11,this['_config']={...hn,..._0x59aac3,'cssClasses':{'controlsButton':'','calculationContainer':'ck-calculation-container',..._0x59aac3['cssClasses']}},this['_overflowChips']=new _0x381bb7(),this['_bodyCollection']=_0x1c5669,this['_parentView']=_0x489860||null;}['setContainerElement'](_0x430a86){this['_intersectionObserver']&&(this['_intersectionObserver']['disconnect'](),this['_intersectionObserver']=null),this['_containerElement']=_0x430a86,this['_setupVisibilityObserver']();}get['showMoreButtonView'](){return this['_showMoreButtonView'];}get['overflowChips'](){return this['_overflowChips'];}['reorganizeChips'](){requestAnimationFrame(()=>{this['_checkAndHandleOverflow']();});}['showBalloonPanel'](){this['_showMoreButtonView']&&this['_showMoreBalloonPanelView']&&(this['_updateBalloonContent'](),this['_showMoreButtonView']['isOn']=!0x0,this['_showMoreBalloonPanelView']['show'](),this['_showMoreBalloonPanelView']['pin']({'target':this['_showMoreButtonView']['element'],'limiter':document['querySelector']('.ck-ai-chat')}));}['hideBalloonPanel'](){this['_showMoreButtonView']&&this['_showMoreBalloonPanelView']&&(this['_showMoreButtonView']['isOn']=!0x1,this['_showMoreBalloonPanelView']['hide']());}['clear'](){this['_overflowChips']['clear'](),this['hideBalloonPanel'](),this['_updateShowMoreButtonVisibility'](),this['_showMoreButtonView']&&(this['_showMoreButtonView']['label']=''),this['_showMoreBalloonPanelView']&&this['_showMoreBalloonPanelView']['content']['clear']();}['destroy'](){this['_intersectionObserver']&&(this['_intersectionObserver']['disconnect'](),this['_intersectionObserver']=null),this['_showMoreButtonView']&&(this['_showMoreButtonView']['destroy'](),this['_showMoreButtonView']=null),this['_showMoreBalloonPanelView']&&(this['_showMoreBalloonPanelView']['destroy'](),this['_showMoreBalloonPanelView']=null);}['_checkAndHandleOverflow'](){if(!this['_containerElement'])return;if(!this['_isContainerVisible']())return void(this['_pendingCalculation']=!0x0);this['_pendingCalculation']=!0x1;const _0x20ee49=[...this['_visibleChips'],...this['_overflowChips']],_0x364582=this['_createCalculationContainer'](),_0x214d29=this['_calculateOverflowInContainer'](_0x364582,_0x20ee49),_0x3468b4=_0x364582['_ancestorsToRestore'];_0x3468b4&&this['_restoreAncestorVisibility'](_0x3468b4),_0x364582['remove'](),this['_applyOverflowResults'](_0x20ee49,_0x214d29);}['_createShowMoreButton'](){this['_showMoreButtonView']=this['_createShowMoreButtonView'](),this['_showMoreBalloonPanelView']=this['_createShowMoreBalloonPanelView'](),this['_showMoreButtonView']['render'](),this['_containerElement']['appendChild'](this['_showMoreButtonView']['element']),this['_showMoreButtonView']['on']('execute',()=>{this['_handleShowMoreButtonClick']();}),_0x14a3d2({'emitter':this['_showMoreBalloonPanelView'],'contextElements':[this['_showMoreBalloonPanelView']['element'],this['_showMoreButtonView']['element']],'callback':()=>this['hideBalloonPanel'](),'activator':()=>this['_showMoreButtonView']['isOn']});}['_createShowMoreButtonView'](){const _0x1e7ae9=new _0x177962(this['_locale']);_0x1e7ae9['set']({'label':'','withText':!0x0,'isToggleable':!0x0});const _0x90e4bf=[this['_config']['cssClasses']['showMoreButton']];return this['_config']['cssClasses']['controlsButton']&&_0x90e4bf['push'](this['_config']['cssClasses']['controlsButton']),_0x1e7ae9['extendTemplate']({'attributes':{'class':_0x90e4bf}}),_0x1e7ae9;}['_createShowMoreBalloonPanelView'](){const _0x5deca2=new _0x4ce253(this['_locale']);return _0x5deca2['extendTemplate']({'attributes':{'class':this['_config']['cssClasses']['showMoreBalloon']}}),this['_bodyCollection']['add'](_0x5deca2),_0x5deca2;}['_updateBalloonContent'](){if(this['_showMoreBalloonPanelView']&&(this['_showMoreBalloonPanelView']['content']['clear'](),this['_overflowChips']['length']>0x0)){this['_overflowChips']['forEach'](_0x4eba05=>{_0x4eba05['disableAnimationOnEnter']();});const _0xc7ee00=new _0x4dc179(this['_locale']);_0xc7ee00['setTemplate']({'tag':'div','attributes':{'class':this['_config']['cssClasses']['overflowContainer']},'children':this['_overflowChips']}),this['_showMoreBalloonPanelView']['content']['add'](_0xc7ee00);}}['_handleShowMoreButtonClick'](){this['_showMoreButtonView']['isOn']?this['hideBalloonPanel']():this['showBalloonPanel']();}['_updateShowMoreButtonVisibility'](){const _0x40b1ae=this['_overflowChips']['length']>0x0;this['_showMoreButtonView']?.['element']&&(this['_showMoreButtonView']['element']['style']['display']=_0x40b1ae?'':'none');}['_repinBalloonPanel'](){this['_showMoreButtonView']?.['isOn']&&this['_showMoreBalloonPanelView']?.['isVisible']&&this['_showMoreButtonView']['element']&&this['_showMoreBalloonPanelView']['pin']({'target':this['_showMoreButtonView']['element'],'limiter':document['querySelector']('.ck-ai-chat')});}['_findTargetContainer'](_0xbfde7e){const _0x49da8e=this['_containerElement']?.['tagName']['toLowerCase']()||'div',_0x18d480=this['_containerElement']?.['classList'];if(_0x18d480){const _0x16f75a=_0x18d480[0x0]||'',_0x551860=_0xbfde7e['querySelector']('.'+_0x16f75a),_0x42e251=_0xbfde7e['querySelector'](_0x49da8e);return _0x551860||_0x42e251||_0xbfde7e;}return _0xbfde7e['querySelector'](_0x49da8e)||_0xbfde7e;}['_calculateContainerWidth'](){const _0x5b0b48=this['_parentView']?.['element']||this['_containerElement'];if(!_0x5b0b48)return ln;const _0x17b344=window['getComputedStyle'](_0x5b0b48)['width'];if('auto'===_0x17b344||'0px'===_0x17b344||!_0x17b344){const _0xc0c7ef=_0x5b0b48['parentElement'];if(_0xc0c7ef){const _0x5ca58c=window['getComputedStyle'](_0xc0c7ef);return'auto'!==_0x5ca58c['width']?_0x5ca58c['width']:ln;}return ln;}return _0x17b344;}['_applyCalculationStyles'](_0x28693c,_0x1c25da){this['_config']['cssClasses']['calculationContainer']&&_0x28693c['classList']['add'](this['_config']['cssClasses']['calculationContainer']),_0x28693c['style']['width']=_0x1c25da,_0x28693c['style']['position']='absolute',_0x28693c['style']['top']='-9999px',_0x28693c['style']['left']='-9999px',_0x28693c['style']['opacity']='0',_0x28693c['style']['pointerEvents']='none',_0x28693c['style']['zIndex']='-1',_0x28693c['style']['visibility']='visible\x20!important',_0x28693c['style']['display']='block\x20!important',_0x28693c['style']['boxSizing']='border-box';}['_restoreAncestorVisibility'](_0x136128){_0x136128['forEach'](({element:_0x3d0772,originalDisplay:_0x2d2499,originalVisibility:_0x43efbb})=>{_0x3d0772['style']['display']=_0x2d2499,_0x3d0772['style']['visibility']=_0x43efbb;});}['_makeAncestorsVisible'](_0x3fca83){const _0x239ee0=[];let _0x2b796b=_0x3fca83;for(;_0x2b796b&&_0x2b796b!==document['body'];){const _0x5cac44=window['getComputedStyle'](_0x2b796b);'none'!==_0x5cac44['display']&&'hidden'!==_0x5cac44['visibility']||(_0x239ee0['push']({'element':_0x2b796b,'originalDisplay':_0x2b796b['style']['display'],'originalVisibility':_0x2b796b['style']['visibility']}),_0x2b796b['style']['display']='block',_0x2b796b['style']['visibility']='visible'),_0x2b796b=_0x2b796b['parentElement'];}return _0x239ee0;}['_createContainerElements'](){let _0x35d22b,_0x3f85fd;return this['_parentView']?.['element']?(_0x35d22b=this['_parentView']['element']['cloneNode'](!0x0),_0x3f85fd=this['_findTargetContainer'](_0x35d22b)):(_0x35d22b=document['createElement']('div'),_0x3f85fd=_0x35d22b),{'calculationContainer':_0x35d22b,'targetContainer':_0x3f85fd};}['_createCalculationContainer'](){const {calculationContainer:_0x3b1b3d,targetContainer:_0x437031}=this['_createContainerElements'](),_0x7b566e=this['_calculateContainerWidth']();this['_applyCalculationStyles'](_0x3b1b3d,_0x7b566e);const _0x193c79=this['_parentView']?.['element']||this['_containerElement'],_0xb8f05e=_0x193c79?.['parentElement'];_0xb8f05e?_0xb8f05e['appendChild'](_0x3b1b3d):document['body']['appendChild'](_0x3b1b3d),_0x3b1b3d['_targetContainer']=_0x437031;const _0x344a0f=this['_makeAncestorsVisible'](_0xb8f05e||null);return _0x3b1b3d['offsetWidth'],_0x3b1b3d['_ancestorsToRestore']=_0x344a0f,_0x3b1b3d;}['_calculateOverflowInContainer'](_0x55c48f,_0x422f66){const _0x4a3994=_0x55c48f['_targetContainer']||_0x55c48f,_0x3cf06a=[],{rowCount:_0x392083}=this['_renderChipsAndCountRows'](_0x4a3994,_0x422f66);if(_0x392083<=this['_config']['maxVisibleRows'])return _0x3cf06a;const _0x3dde4d=_0x422f66['slice']();for(;_0x3dde4d['length']>0x0;){if(this['_testButtonFit'](_0x55c48f,_0x4a3994,_0x3dde4d)){const _0xd37681=_0x422f66['filter'](_0x4f4c8a=>!_0x3dde4d['includes'](_0x4f4c8a));_0x3cf06a['push'](..._0xd37681);break;}if(!_0x3dde4d['pop']())break;}return _0x3cf06a;}['_renderChipsAndCountRows'](_0xcf3f08,_0x5c578e){_0xcf3f08['innerHTML']='',_0x5c578e['forEach'](_0x3f7a7e=>{if(_0x3f7a7e['element']){const _0x4225b0=_0x3f7a7e['element']['cloneNode'](!0x0);_0xcf3f08['appendChild'](_0x4225b0);}}),_0xcf3f08['offsetWidth'];const _0xaff84d=_0xcf3f08['children'],_0x14b9fe=[];return Array['from'](_0xaff84d)['forEach'](_0x4a59a9=>{const _0x4aa0b4=_0x4a59a9['getBoundingClientRect']()['top'];_0x14b9fe['some'](_0x474272=>Math['abs'](_0x474272-_0x4aa0b4)<this['_config']['rowDetectionTolerance'])||_0x14b9fe['push'](_0x4aa0b4);}),{'rowCount':_0x14b9fe['length']};}['_createMockButton'](){const _0x6b2d07=document['createElement']('button');return _0x6b2d07['className']=this['_config']['cssClasses']['showMoreButton'],this['_config']['cssClasses']['controlsButton']&&_0x6b2d07['classList']['add'](this['_config']['cssClasses']['controlsButton']),_0x6b2d07['textContent']='+\x201',_0x6b2d07;}['_testButtonFit'](_0x32be4b,_0x3221f3,_0x169ffa){this['_renderChipsAndCountRows'](_0x3221f3,_0x169ffa);const _0x445303=this['_createMockButton']();_0x32be4b['appendChild'](_0x445303),_0x32be4b['offsetWidth'];const _0x1391c4=[..._0x3221f3['children'],_0x445303],_0x1f1d23=[];_0x1391c4['forEach'](_0x109bde=>{const _0x288868=_0x109bde['getBoundingClientRect']()['top'];_0x1f1d23['some'](_0x3f6c93=>Math['abs'](_0x3f6c93-_0x288868)<this['_config']['rowDetectionTolerance'])||_0x1f1d23['push'](_0x288868);});const _0x5ab7ea=_0x1f1d23['length'];return _0x445303['remove'](),_0x5ab7ea<=this['_config']['maxVisibleRows'];}['_distributeChips'](_0x3ea823,_0x2ceb2c){this['_visibleChips']['clear'](),this['_overflowChips']['clear'](),_0x3ea823['forEach'](_0x232ccd=>{_0x2ceb2c['includes'](_0x232ccd)?this['_overflowChips']['add'](_0x232ccd):this['_visibleChips']['add'](_0x232ccd);});}['_updateOverflowUI'](_0x5a5cda){if(_0x5a5cda>0x0&&!this['_showMoreButtonView']&&this['_createShowMoreButton'](),_0x5a5cda>0x0&&this['_showMoreButtonView']){const _0x3a3963=''+this['_config']['showMoreLabelPrefix']+(_0x5a5cda<0x63?_0x5a5cda:'99');this['_showMoreButtonView']['label']=_0x3a3963;}this['_updateBalloonContent'](),this['_updateShowMoreButtonVisibility'](),this['_repinBalloonPanel']();}['_applyOverflowResults'](_0x47593a,_0x18f6af){this['_distributeChips'](_0x47593a,_0x18f6af),this['_updateOverflowUI'](_0x18f6af['length']);}['_setupVisibilityObserver'](){this['_containerElement']&&'undefined'!=typeof IntersectionObserver&&(this['_intersectionObserver']=new IntersectionObserver(_0x20ecb8=>{_0x20ecb8[0x0]['isIntersecting']&&this['_pendingCalculation']&&requestAnimationFrame(()=>{this['_checkAndHandleOverflow']();});},{'threshold':0.01,'rootMargin':'50px'}),this['_intersectionObserver']['observe'](this['_containerElement']));}['_isContainerVisible'](){if(!this['_containerElement'])return!0x1;if(!this['_containerElement']['isConnected'])return!0x1;const _0x31eee6=this['_containerElement']['getBoundingClientRect']();if(0x0===_0x31eee6['width']||0x0===_0x31eee6['height'])return!0x1;const _0x1292bf=window['innerHeight']||document['documentElement']['clientHeight'],_0x782f88=window['innerWidth']||document['documentElement']['clientWidth'],_0x57288c=0xc8;return _0x31eee6['bottom']>=-0xc8&&_0x31eee6['top']<=_0x1292bf+_0x57288c&&_0x31eee6['right']>=-0xc8&&_0x31eee6['left']<=_0x782f88+_0x57288c;}}const ra='ck-ai-chat__feed__context-chips',oa='ck-ai-chat-context-chips-wrapper',ha='ck-ai-chat-context-chips-wrapper-balloon',ca='ck-ai-chat-controls-button',la='ck-ai-chat-controls_context_show-more-button',da='ck-ai-chat-context-controls__show-more-balloon-panel';class ah extends _0x4dc179{['_contextChips']=this['createCollection']();['_overflowManager'];['_bodyCollection'];constructor(_0x9c2e19,_0x151558,_0x5af193){super(_0x9c2e19),this['_bodyCollection']=_0x5af193,this['_createContextChips'](_0x151558);const _0x58198e={'cssClasses':{'showMoreButton':la,'showMoreBalloon':da,'overflowContainer':ha,'controlsButton':ca}};this['_overflowManager']=new bo(_0x9c2e19,this['_contextChips'],_0x58198e,this['_bodyCollection'],this),this['setTemplate']({'tag':'div','attributes':{'class':[ra,'ck','ck-reset_all']},'children':[{'tag':'div','attributes':{'class':oa},'children':this['_contextChips']}]});}['render'](){super['render']();const _0x43ff29=this['element']['querySelector']('.'+oa);_0x43ff29&&(this['_overflowManager']['setContainerElement'](_0x43ff29),this['_overflowManager']['reorganizeChips']());}['destroy'](){super['destroy'](),this['_overflowManager']['destroy']();}['_createContextChips'](_0x29040e){for(const _0x43205d of _0x29040e){const _0x174870=new po(this['locale'],_0x43205d,!0x0,!0x1);this['_contextChips']['add'](_0x174870);}}}class Se extends Cr{['_contextChipsView']=null;['_locale'];['_bodyCollection'];['_messageContentView'];constructor(_0x3302da,_0x162a50,_0x425360){super(_0x162a50),this['_locale']=_0x3302da,this['_bodyCollection']=_0x425360,this['_createContextChipsView'](),this['_createMessageContentView'](),this['extendTemplate']({'attributes':{'class':['ck-ai-chat__feed__user-message']}});}['_createContextChipsView'](){this['options']['contextItems']&&this['options']['contextItems']['length']>0x0&&(this['_contextChipsView']=new ah(this['_locale'],this['options']['contextItems']['filter'](_0x3d1d9c=>!_0x3d1d9c['hidden']),this['_bodyCollection']),this['_contextChipsView']['extendTemplate']({'attributes':{'class':'ck-ai-chat__feed__context-chips'}}),this['children']['add'](this['_contextChipsView']));}['_createMessageContentView'](){this['_messageContentView']=new _0x4dc179(this['_locale']),this['_messageContentView']['setTemplate']({'tag':'div','attributes':{'class':'ck-ai-chat__feed__message-content'}}),this['children']['add'](this['_messageContentView']);}['render'](){super['render'](),this['_messageContentView']['element']['innerHTML']=this['options']['initialContent'],this['markAsDone']();}}class St extends Cr{['capabilities'];constructor(_0x15b28c,_0x4dfa16){super(_0x4dfa16);const {isWebSearchEnabled:_0x4cadb2,isReasoningEnabled:_0xb9eb52}=_0x4dfa16['capabilities'],_0x5ce487=[];let _0xa286cf='';_0x4cadb2&&_0xb9eb52?(_0xa286cf=i(_0x15b28c,'AI_CHAT_FEED_REPLY_ITEM_USED_WEB_SEARCH_REASONING'),_0x5ce487['push'](ea(_0x4204ab)),_0x5ce487['push'](ea(_0x16556b))):_0x4cadb2?(_0xa286cf=i(_0x15b28c,'AI_CHAT_FEED_REPLY_ITEM_USED_WEB_SEARCH'),_0x5ce487['push'](ea(_0x4204ab))):_0xb9eb52&&(_0xa286cf=i(_0x15b28c,'AI_CHAT_FEED_REPLY_ITEM_USED_REASONING'),_0x5ce487['push'](ea(_0x16556b))),this['extendTemplate']({'attributes':{'class':['ck-ai-chat__feed__interaction-header',_0xa286cf?'':'ck-hidden']}});const _0x53d165=new _0x4dc179();_0x53d165['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-chat__feed__interaction-header__capabilities']},'children':[..._0x5ce487,{'tag':'span','attributes':{'class':['ck-ai-chat__feed__interaction-header__capabilities__text']},'children':[_0xa286cf]}]}),this['children']['add'](_0x53d165),this['capabilities']=_0x4dfa16['capabilities'];}}function ea(_0xa3a69d){const _0x5343f5=new _0x4c8e3c();return _0x5343f5['content']=_0xa3a69d,_0x5343f5;}const ws=['wheel','touchstart','pointerdown','keydown'],fs=['ArrowUp','ArrowDown','PageUp','PageDown','Home','End','\x20'];class _e{['element'];['animationFrameId'];['isRunning'];['abortController'];['isUserPaused'];constructor(_0x86bc42){this['element']=_0x86bc42,this['animationFrameId']=null,this['isRunning']=!0x1,this['abortController']=new AbortController(),this['isUserPaused']=!0x1;for(const _0x4b9d6e of ws){const _0x5ff635='keydown'!==_0x4b9d6e;this['element']['addEventListener'](_0x4b9d6e,this['_onUserEvent']['bind'](this),{'passive':_0x5ff635,'signal':this['abortController']['signal']});}}['start'](){this['isRunning']||(this['isRunning']=!0x0,this['isUserPaused']=!0x1,this['animationFrameId']=requestAnimationFrame(this['_rafUpdate']['bind'](this)));}['stop'](){requestAnimationFrame(()=>{this['_stop']();});}['destroy'](){this['_stop'](),this['abortController']['abort']();}['_stop'](){null!==this['animationFrameId']&&(cancelAnimationFrame(this['animationFrameId']),this['animationFrameId']=null),this['isRunning']&&(this['isRunning']=!0x1),this['isUserPaused']=!0x1;}['_onUserEvent'](_0x152a67){if(this['isRunning']){if('keydown'===_0x152a67['type']){const _0x2b3593=_0x152a67['key'];if(!fs['includes'](_0x2b3593))return;}_0x152a67 instanceof WheelEvent?_0x152a67['deltaY']<0x0?this['isUserPaused']=!0x0:this['isUserPaused']=!this['_isAtBottom']():this['isUserPaused']=!0x0;}}['_isAtBottom'](){const {scrollTop:_0x23f783,scrollHeight:_0x258f9b,clientHeight:_0x4036d0}=this['element'];return _0x258f9b-_0x23f783-_0x4036d0<=0x5;}['_rafUpdate'](){this['isRunning']&&(this['isUserPaused']||this['element']['scrollTo']({'top':this['element']['scrollHeight'],'behavior':'auto'}),this['animationFrameId']=requestAnimationFrame(this['_rafUpdate']['bind'](this)));}}class be extends _0x4dc179{constructor(_0x131020,_0x220141){super(_0x131020),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-skeleton']},'children':this['_createSkeletonItems'](_0x220141)});}['_createSkeletonItems'](_0x890888){const _0x1d1d64=['ck','ck-ai-skeleton__item'];return _0x890888['map'](_0x4ece57=>{let _0x52162e='';switch(_0x4ece57['attributes']['align']){case'right':_0x52162e='margin-left:\x20auto;\x20margin-right:\x200;\x20text-align:\x20right;';break;case'center':_0x52162e='margin-left:\x20auto;\x20margin-right:\x20auto;\x20text-align:\x20center;';break;case'left':_0x52162e='margin-left:\x200;\x20margin-right:\x20auto;\x20text-align:\x20left;';}return{'tag':_0x4ece57['tag'],'attributes':{'class':[..._0x1d1d64,_0x4ece57['attributes']['class']?_0x4ece57['attributes']['class']:''],'style':'width:\x20'+_0x4ece57['attributes']['width']+';\x20height:\x20'+_0x4ece57['attributes']['height']+';'+_0x52162e}};});}}const Le={'aiFeed':[{'tag':'div','attributes':{'width':'100%','height':'72px','align':'right'}},{'tag':'div','attributes':{'width':'250px','height':'40px','align':'right'}},{'tag':'div','attributes':{'width':'100%','height':'88px','align':'right'}},{'tag':'div','attributes':{'width':'150px','height':'40px','align':'right'}},{'tag':'div','attributes':{'width':'100%','height':'140px','align':'right'}},{'tag':'div','attributes':{'width':'250px','height':'40px','align':'right'}},{'tag':'div','attributes':{'width':'100%','height':'88px','align':'right'}}],'aiHistory':$i(0x5,'100%','44px','right'),'aiChatResources':$i(0x8,'100%','24px','right'),'aiReviewChecks':[{'tag':'div','attributes':{'width':'128px','height':'24px','align':'left'}},{'tag':'div','attributes':{'width':'100%','height':'24px','align':'left'}},{'tag':'div','attributes':{'width':'128px','height':'24px','align':'left'}}]};function $i(_0x5b1823,_0x52409d,_0x2f1705,_0x4a16db){return new Array(_0x5b1823)['fill'](null)['map'](()=>({'tag':'div','attributes':{'width':_0x52409d,'height':_0x2f1705,'align':_0x4a16db}}));}class ji extends _0x4dc179{['children'];['scrollManager'];['_bodyCollection'];constructor(_0x4ced63,_0x93d9d8){super(_0x4ced63),this['_bodyCollection']=_0x93d9d8,this['set']('isPending',!0x1),this['set']('loadingMessage',''),this['set']('isLoadingSkeletonVisible',!0x1),this['set']('isTrackChangesOn',!0x1),this['children']=this['createCollection'](),this['children']['delegate'](...Rt)['to'](this),this['_setupTemplate']();}['render'](){super['render'](),this['scrollManager']=new _e(this['element']);}['destroy'](){super['destroy'](),this['scrollManager']['destroy']();}['clear'](){this['children']['clear']();}['addItem'](_0x5b2609,_0x20a0fe){let _0xd94bbe;'ai-reply'===_0x5b2609?_0xd94bbe=new ke(this['locale'],_0x20a0fe):'ai-suggestion-reply'===_0x5b2609?(_0xd94bbe=new we(this['locale'],_0x20a0fe),_0xd94bbe['bind']('isTrackChangesOn')['to'](this,'isTrackChangesOn')):_0xd94bbe='user-message'===_0x5b2609?new Se(this['locale'],_0x20a0fe,this['_bodyCollection']):'interaction-header'===_0x5b2609?new St(this['locale'],_0x20a0fe):new ve(_0x20a0fe),this['children']['add'](_0xd94bbe);}async['updateReplyItem']({id:_0x2b6b73,parsedContent:_0x55812b,renderingStrategy:_0x15cec7,abortSignal:_0x4c5889}){const _0x31a8ac=this['getItemById'](_0x2b6b73);if(!(_0x31a8ac instanceof ke))throw new _0x38f49c('ai-chat-feed-view-item-not-a-reply-item',null,{'itemView':_0x31a8ac,'id':_0x2b6b73,'parsedContent':_0x55812b});await _0x31a8ac['updateContent']({'parsedContent':_0x55812b,'renderingStrategy':_0x15cec7,'abortSignal':_0x4c5889});}async['updateWebSources'](_0xcfb517,_0x39a1cf){const _0x134905=this['getItemById'](_0xcfb517);if(_0x134905 instanceof we)_0x134905['updateSources'](_0x39a1cf);else{if(!(_0x134905 instanceof ke))throw new _0x38f49c('ai-chat-feed-view-item-not-a-suggestion-or-reply-item',null,{'itemView':_0x134905,'id':_0xcfb517,'sources':_0x39a1cf});_0x134905['updateSources'](_0x39a1cf);}}async['updateSuggestionItem']({id:_0xe62a2e,parts:_0x56f85d,renderingStrategy:_0x1615eb,abortSignal:_0x258172}){const _0x853a79=this['getItemById'](_0xe62a2e);if(!(_0x853a79 instanceof we))throw new _0x38f49c('ai-chat-feed-view-item-not-a-suggestion-item',null,{'itemView':_0x853a79,'id':_0xe62a2e,'parts':_0x56f85d});await _0x853a79['updateContent']({'parts':_0x56f85d,'renderingStrategy':_0x1615eb,'abortSignal':_0x258172});}['updateSuggestionPartState']({id:_0x191ee5,index:_0x1bc0bc,state:_0x44239a}){const _0xcef656=this['getItemById'](_0x191ee5);if(!(_0xcef656 instanceof we))throw new _0x38f49c('ai-chat-feed-view-item-not-a-suggestion-item',this,{'id':_0x191ee5});_0xcef656['updatePartState'](_0x1bc0bc,_0x44239a);}['markItemAsDone'](_0x33a058){this['getItemById'](_0x33a058)['markAsDone']();}['getItemIds'](){return this['children']['map'](_0x219b1a=>_0x219b1a['options']['id']);}['removeItem'](_0x236e5c){this['children']['remove'](this['getItemById'](_0x236e5c));}['scrollToSuggestion'](_0x29798d,_0x1c7d09){const _0x583399=this['getItemById'](_0x29798d);if(!(_0x583399 instanceof we))return void _0x16f6f3('ck-ai-chat-feed-view-scroll-to-suggestion-invalid-item',{'replyId':_0x29798d,'partIndex':_0x1c7d09});const _0x560066=_0x583399['getPartView'](_0x1c7d09);_0x560066?nt({'target':_0x560066['element'],'ancestorOffset':0x14,'alignToTop':!0x0,'forceScroll':!0x0}):_0x16f6f3('ck-ai-chat-feed-view-scroll-to-suggestion-part-view-not-found',{'replyId':_0x29798d,'partIndex':_0x1c7d09});}['_setupTemplate'](){this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-chat__feed']},'children':this['_createTemplateChildren']()});}['_createTemplateChildren'](){const _0x36d93e=this['_createSkeletonLoader']();return[this['_createFeedItems'](),_0x36d93e,this['_createFeedLoader']()];}['_createSkeletonLoader'](){const _0x508550=new be(this['locale'],Le['aiFeed']);return _0x508550['extendTemplate']({'attributes':{'class':[this['bindTemplate']['if']('isLoadingSkeletonVisible','ck-hidden',_0x22c179=>!_0x22c179)]}}),_0x508550;}['_createFeedItems'](){const _0x1f9959=new _0x4dc179(this['locale']);return _0x1f9959['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-chat__feed__items',this['bindTemplate']['if']('isLoadingSkeletonVisible','ck-hidden')]},'children':this['children']}),_0x1f9959;}['_createFeedLoader'](){const _0x51c89e=new _0x4dc179(this['locale']);return _0x51c89e['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-chat__loader',this['bindTemplate']['if']('isPending','ck-hidden',_0x2ae951=>!_0x2ae951)]},'children':this['_createLoaderChildren']()}),_0x51c89e;}['_createLoaderChildren'](){const _0x236a23=new Te();return _0x236a23['isVisible']=!0x0,[_0x236a23,{'tag':'span','attributes':{'class':['ck','ck-ai-chat__loader-text']},'children':[{'text':this['bindTemplate']['to']('loadingMessage')}]}];}['getItemById'](_0x59ed06){const _0x4b3cc5=this['children']['find'](_0x3abd59=>_0x3abd59['options']['id']['includes'](_0x59ed06));if(!_0x4b3cc5)throw new _0x38f49c('ai-chat-feed-view-item-not-found',this,{'id':_0x59ed06});return _0x4b3cc5;}['setLoadingMessage'](_0xf23105){this['set']('loadingMessage',_0xf23105);}['toggleLoadingSkeleton'](_0x2831ce){this['set']('isLoadingSkeletonVisible',_0x2831ce);}['startAutoScroll'](){this['scrollManager']['start']();}['stopAutoScroll'](){this['scrollManager']['stop']();}}class Ir extends _0x3c987b{['filter'](){let _0x266301=0x0;for(const _0x15584a of this['items'])_0x266301+=_0x15584a['items']['length'];return{'resultsCount':_0x266301,'totalItemsCount':_0x266301};}}class ds extends _0xb99b9a{['submitButtonView'];static ['MIN_ROWS']=0x1;static ['MAX_ROWS']=0xc;['_addContextButtonView'];['_queryViewResizeObserver'];constructor(_0x128f07,_0x5d54c1){super(_0x128f07,{'queryView':{'label':'','creator':_0x175e45,'showIcon':!0x1,'showResetButton':!0x1},'filteredView':new Ir(_0x128f07),'queryMinChars':0x1/0x0,'resetOnBlur':!0x1}),this['set']('isEmpty',!0x0),this['set']('isUploadInProgress',!0x1),this['_addContextButtonView']=_0x5d54c1,this['_queryViewResizeObserver']=null,this['queryView']['fieldView']['minRows']=ds['MIN_ROWS'],this['queryView']['fieldView']['maxRows']=ds['MAX_ROWS'],this['queryView']['fieldWrapperChildren']['add'](this['_addContextButtonView']),this['_setUpAddContextButtonPositioning'](),this['extendTemplate']({'attributes':{'class':['ck','ck-ai-chat__prompt-input']}}),this['submitButtonView']=this['_createSubmitButton'](),this['submitButtonView']['bind']('isEnabled')['to'](this,'isEmpty',this,'isUploadInProgress',(_0x59fa73,_0x53fea1)=>!_0x59fa73&&!_0x53fea1),this['focusableChildren']['add'](this['submitButtonView']);}['render'](){super['render'](),this['queryView']['fieldWrapperChildren']['add'](this['submitButtonView']),this['keystrokes']['set']('enter',(_0x3281ca,_0x2ad861)=>{this['isUploadInProgress']||this['isEmpty']||_0x3281ca['target']==this['queryView']['fieldView']['element']&&(this['submit'](),_0x2ad861());}),this['queryView']['fieldView']['on']('update',()=>{this['isEmpty']=''===this['queryView']['fieldView']['element']['value']?.['trim']();});}['destroy'](){super['destroy'](),this['_queryViewResizeObserver']&&this['_queryViewResizeObserver']['destroy']();}['submit'](){const _0x1b0253=this['queryView']['fieldView']['element']['value']?.['trim']();if(!_0x1b0253)return this['queryView']['errorText']=i(this['locale'],'AI_CHAT_PROMPT_EMPTY_ERROR'),void(this['queryView']['fieldView']['hasError']=!0x0);this['queryView']['fieldView']['hasError']=!0x1;const _0x4b5bf7=_0x190095(_0x1b0253);this['fire']('sendUserMessage',_0x4b5bf7),this['queryView']['fieldView']['reset']();}['setPlaceholderText'](_0x3f3b27){this['queryView']['fieldView']['set']('placeholder',_0x3f3b27);}['_createSubmitButton'](){const _0x19b86d=new _0x177962(this['locale']);return _0x19b86d['set']({'icon':_0x1e29b0,'label':i(this['locale'],'AI_CHAT_LABEL_SUBMIT'),'isVisible':!0x0,'tooltip':!0x0,'class':'ck-ai-chat__prompt-submit-button','isEnabled':!0x1}),_0x19b86d['on']('execute',()=>{this['submit']();}),_0x19b86d;}['setIsUploadInProgress'](_0x18ef3c){this['isUploadInProgress']=_0x18ef3c;}['_setUpAddContextButtonPositioning'](){const _0x26951c=this['locale'],_0x15d0f0=()=>{_0xbe8f2c['window']['requestAnimationFrame'](()=>{if(_0x5c2483(this['element'])){const _0x43ff62=new _0x4f725a(this['queryView']['fieldView']['element']),_0x309aab=new _0x4f725a(this['_addContextButtonView']['element']),_0x2b9d46=_0x43ff62['width'],_0x1ee376='rtl'===_0x26951c['uiLanguageDirection']?'right':'left';_0x43ff62['excludeScrollbarsAndBorders']();const _0x14f33a=_0x2b9d46-_0x43ff62['width']+0x1;this['_addContextButtonView']['element']['style'][_0x1ee376]='calc('+(_0x2b9d46-_0x309aab['width']-_0x14f33a)+'px\x20-\x20var(--ck-spacing-tiny))';}});};this['queryView']['fieldView']['on']('update',_0x15d0f0),this['on']('render',()=>{_0x15d0f0(),this['_queryViewResizeObserver']=new _0x4f1bc9(this['queryView']['fieldView']['element'],()=>{_0x15d0f0();});});}}const ua='ck-ai-chat__prompt-capabilities',_a='ck-ai-chat-controls-button',Ia='ck-ai-chat-controls-button--commands',Aa='ck-ai-chat-controls__model-selection',ga='ck-ai-chat-controls__model-selection__item-name',pa='ck-ai-chat-controls__model-selection__item-description',ma='ck-ai-chat-controls__model-selection__item-capabilities',Ta='n';class ps extends _0x4dc179{['_webSearchButton'];['_reasoningButton'];['_commandsButton'];['_modelSelectionDropdown'];['_modelSelectionDropdownItems'];['_modelNameView'];constructor(_0x4be080){super(_0x4be080),this['set']('webSearchActive',!0x1),this['set']('reasoningActive',!0x1),this['set']('modelSelectorVisible',!0x0),this['set']('modelSelectorEnabled',!0x0),this['set']('activeModelId',null),this['set']('activeModelName',null),this['_modelSelectionDropdown']=this['_createModelSelectionDropdown'](),this['_modelNameView']=this['_createModelNameView'](),this['_webSearchButton']=this['_createWebSearchButton'](),this['_reasoningButton']=this['_createReasoningButton'](),this['_commandsButton']=this['_createCommandsButton'](),this['_modelSelectionDropdown']['buttonView']['bind']('isVisible')['to'](this,'modelSelectorVisible',_0x3a3c13=>_0x3a3c13),this['_modelSelectionDropdown']['buttonView']['bind']('tooltip')['to'](this,'modelSelectorEnabled',_0xe3153e=>_0xe3153e?this['_modelSelectionDropdown']['buttonView']['label']:i(this['locale'],'AI_CHAT_MODEL_SELECTOR_DISABLED_TOOLTIP')),this['_modelSelectionDropdown']['bind']('isEnabled')['to'](this,'modelSelectorEnabled',_0x385c73=>_0x385c73),this['_webSearchButton']['bind']('isOn')['to'](this,'webSearchActive',_0x311b4e=>_0x311b4e),this['_webSearchButton']['bind']('withText')['to'](this,'modelSelectorVisible',_0xc7641e=>!_0xc7641e),this['_webSearchButton']['bind']('tooltip')['to'](this,'webSearchActive',_0x4b4922=>i(this['locale'],_0x4b4922?'AI_CHAT_DISABLE_WEB_SEARCH':'AI_CHAT_ENABLE_WEB_SEARCH')),this['_reasoningButton']['bind']('isOn')['to'](this,'reasoningActive',_0x148ba1=>_0x148ba1),this['_reasoningButton']['bind']('withText')['to'](this,'modelSelectorVisible',_0x2993b8=>!_0x2993b8),this['_reasoningButton']['bind']('tooltip')['to'](this,'reasoningActive',_0x13ae93=>i(this['locale'],_0x13ae93?'AI_CHAT_DISABLE_REASONING':'AI_CHAT_ENABLE_REASONING')),this['setTemplate']({'tag':'div','attributes':{'class':[ua]},'children':[this['_modelSelectionDropdown'],this['_modelNameView'],this['_webSearchButton'],this['_reasoningButton'],this['_commandsButton']]}),this['_modelSelectionDropdownItems']=new _0x381bb7(),_0x29fca4(this['_modelSelectionDropdown'],this['_modelSelectionDropdownItems']);}['setModelList'](_0x5db4fa,_0x2d2924){if(this['set']('modelSelectorVisible',!(_0x2d2924&&_0x5db4fa['length']<=0x1)),this['_modelSelectionDropdownItems']['clear'](),_0x5db4fa?.['length'])for(const _0x4f3304 of _0x5db4fa){const _0x18d4aa=new _0x3c44c5({'label':_0x4f3304['name'],'withText':!0x0,'role':'menuitemradio','id':_0x4f3304['id'],'model':_0x4f3304});_0x18d4aa['bind']('isOn')['to'](this,'activeModelId',_0x5849b4=>_0x5849b4===_0x4f3304['id']),this['_modelSelectionDropdownItems']['add']({'type':'button','model':_0x18d4aa,'labelView':new Ea(this['locale'],_0x4f3304)});}}['setWebSearch'](_0x3ea3b2){this['set']('webSearchActive',_0x3ea3b2);}['setReasoning'](_0xeb819e){this['set']('reasoningActive',_0xeb819e);}['setModel'](_0x2ad2b9){if(!_0x2ad2b9)return;this['activeModelId']=_0x2ad2b9['id'],this['activeModelName']=_0x2ad2b9['name']||_0x2ad2b9['id'],this['_modelSelectionDropdown']['buttonView']['set']('label',_0x2ad2b9['name']),this['_modelSelectionDropdown']['buttonView']['set']('tooltip',_0x2ad2b9['name']);const _0x99a1a7=_0x2ad2b9['capabilities']['webSearch']?.['enabled']??!0x1;this['set']('webSearchActive',!0x1),this['_webSearchButton']['set']('isOn',!0x1),this['_webSearchButton']['set']('isEnabled',_0x99a1a7),this['_webSearchButton']['set']('isVisible',_0x99a1a7);const _0x3ce741=_0x2ad2b9['capabilities']['reasoning']?.['enabled']??!0x1;this['set']('reasoningActive',!0x1),this['_reasoningButton']['set']('isOn',!0x1),this['_reasoningButton']['set']('isEnabled',_0x3ce741),this['_reasoningButton']['set']('isVisible',_0x3ce741);}['enableModelSelector'](){this['set']('modelSelectorEnabled',!0x0),this['set']('modelSelectorVisible',!0x0);}['disableModelSelector'](_0x19b7e7){this['set']('modelSelectorEnabled',!0x1),_0x19b7e7&&this['set']('modelSelectorVisible',!0x1);}['_createWebSearchButton'](){const _0x1d8bfb=new _0x177962();return _0x1d8bfb['set']({'label':i(this['locale'],'AI_CHAT_SEARCH_WEB'),'icon':_0x4204ab,'class':_a,'isToggleable':!0x0,'tooltipPosition':Ta}),_0x1d8bfb['on']('execute',()=>{this['fire']('toggleWebSearch');}),_0x1d8bfb;}['_createReasoningButton'](){const _0x539923=new _0x177962();return _0x539923['set']({'label':i(this['locale'],'AI_CHAT_REASONING'),'icon':_0x16556b,'class':_a,'isToggleable':!0x0,'tooltipPosition':Ta}),_0x539923['on']('execute',()=>{this['fire']('toggleReasoning');}),_0x539923;}['_createCommandsButton'](){const _0x46fad2=new _0x177962();return _0x46fad2['set']({'label':i(this['locale'],'AI_CHAT_COMMANDS'),'icon':yt,'withText':!0x0,'class':_a,'isToggleable':!0x0,'tooltip':i(this['locale'],'AI_CHAT_COMMANDS'),'tooltipPosition':Ta}),_0x46fad2['extendTemplate']({'attributes':{'class':[Ia]}}),_0x46fad2['on']('execute',()=>{console['log']('Commands\x20are\x20not\x20implemented\x20yet.'),alert('Commands\x20are\x20not\x20implemented\x20yet.');}),_0x46fad2;}['_createModelSelectionDropdown'](){const _0xe893e0=_0x1353df(this['locale']);return _0xe893e0['set']({'panelPosition':'ne','class':[Aa]}),_0xe893e0['buttonView']['set']({'label':i(this['locale'],'AI_CHAT_MODEL_SELECTOR_ENABLED_TOOLTIP'),'withText':!0x0,'tooltip':!0x0,'tooltipPosition':Ta}),this['listenTo'](_0xe893e0,'execute',_0x44f046=>{this['fire']('selectModel',_0x44f046['source']['model']);}),_0xe893e0;}['_createModelNameView'](){const _0x3a3e3e=new qo(this['locale']);return _0x3a3e3e['bind']('text')['to'](this,'activeModelName',_0x10c3f0=>_0x10c3f0??''),_0x3a3e3e['bind']('isVisible')['to'](this,'modelSelectorVisible',this,'activeModelName',(_0x3602d6,_0x354400)=>!_0x3602d6&&!_0x354400?.['toLowerCase']()['startsWith']('agent')),_0x3a3e3e;}}let Ea=class extends _0x310285{constructor(_0x409798,_0x585431){super();const _0x46edf4=this['bindTemplate'],_0x760fb3=this['createCollection']();this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-button__label'],'style':_0x46edf4['to']('style'),'id':_0x46edf4['to']('id')},'children':[{'tag':'div','attributes':{'class':[ga]},'children':[{'text':_0x46edf4['to']('text')}]},{'tag':'div','attributes':{'class':[pa]},'children':[{'tag':'span','children':[{'text':_0x585431['description']}]}]},{'tag':'div','attributes':{'class':[ma]},'children':_0x760fb3}]}),_0x760fb3['addMany'](this['_getCapabilityParts'](_0x409798,_0x4204ab,'AI_CHAT_SEARCH_WEB',_0x585431['capabilities']['webSearch']?.['enabled']??!0x1)),_0x760fb3['addMany'](this['_getCapabilityParts'](_0x409798,_0x16556b,'AI_CHAT_REASONING',_0x585431['capabilities']['reasoning']?.['enabled']??!0x1));}['_getCapabilityParts'](_0x466da7,_0x2013ef,_0x2b3da7,_0x5882c3){const _0x36c308=new _0x4c8e3c();_0x36c308['content']=_0x2013ef;const _0x20629b=new _0x4dc179(_0x466da7);_0x20629b['setTemplate']({'tag':'span','children':[{'text':i(_0x466da7,_0x2b3da7)+':\x20'}]});const _0x105b46=new _0x4dc179(_0x466da7);return _0x105b46['setTemplate']({'tag':'span','children':[{'text':i(_0x466da7,_0x5882c3?'AI_CHAT_CAPABILITIES_YES':'AI_CHAT_CAPABILITIES_NO')}]}),[_0x36c308,_0x20629b,_0x105b46];}};class qo extends _0x4dc179{constructor(_0xa31e3c){super(_0xa31e3c),this['set']('text',void 0x0),this['set']('isVisible',!0x0);const _0xb304f4=this['bindTemplate'];this['setTemplate']({'tag':'span','attributes':{'class':['ck','ck-ai-chat-controls__model-name',_0xb304f4['if']('isVisible','ck-hidden',_0x3526fb=>!_0x3526fb)]},'children':[{'text':_0xb304f4['to']('text')}]});}}const Ca='ck-ai-chat-context-controls__url-form',wa='ck-ai-chat-context-controls__url-input-section';class Bo extends _0x4dc179{['focusTracker'];['keystrokes'];['_focusables'];['focusCycler'];['urlInputField'];['backButton'];['confirmButton'];constructor(_0x3cefde){super(_0x3cefde),this['focusTracker']=new _0x9668c0(),this['keystrokes']=new _0x514fee(),this['backButton']=this['_createBackButton'](),this['urlInputField']=this['_createUrlInputField'](),this['confirmButton']=this['_createConfirmButton'](),this['_focusables']=this['createCollection']([this['backButton'],this['urlInputField'],this['confirmButton']]),this['focusCycler']=new _0x3c97a0({'focusables':this['_focusables'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'actions':{'focusPrevious':'shift+tab','focusNext':'tab'}}),this['_setupTemplate'](),this['_setupEventHandlers'](),this['_setupKeystrokes']();}['render'](){super['render'](),this['_focusables']['forEach'](_0x238ded=>{this['focusTracker']['add'](_0x238ded['element']),this['keystrokes']['listenTo'](_0x238ded['element']);}),_0x3727d9({'view':this}),this['focus']();}['destroy'](){super['destroy'](),this['focusTracker']['destroy'](),this['keystrokes']['destroy']();}['focus'](){this['urlInputField']['focus']();}['getValue'](){return this['urlInputField']['fieldView']['element']?.['value']?.['trim']()||'';}['clear'](){this['urlInputField']['fieldView']['element']['value']='',this['urlInputField']['errorText']=null,this['confirmButton']['isEnabled']=!0x1;}['setError'](_0x52ec63){this['urlInputField']['errorText']=_0x52ec63,this['_updateConfirmButtonState'](),this['fire']('refreshBalloon');}['clearError'](){this['urlInputField']['errorText']=null,this['_updateConfirmButtonState']();}['_createBackButton'](){const _0x17b84b=new _0x177962(this['locale']);return _0x17b84b['set']({'icon':_0x7fbeea,'tooltip':i(this['locale'],'AI_CHAT_CONTEXT_URL_BACK_TO_CONTEXT'),'tooltipPosition':'n','class':'ck-button-icon\x20ck-button-back'}),_0x17b84b;}['_createUrlInputField'](){const _0x1b27a9=new _0x1fb092(this['locale'],th);return _0x1b27a9['set']({'label':i(this['locale'],'AI_CHAT_CONTEXT_URL_LABEL'),'class':'ck-labeled-field-view_empty'}),_0x1b27a9['fieldView']['set']({'placeholder':i(this['locale'],'AI_CHAT_CONTEXT_URL_PLACEHOLDER')}),_0x1b27a9;}['_createConfirmButton'](){const _0x398add=new _0x177962(this['locale']);return _0x398add['set']({'icon':_0x16e06b,'tooltip':i(this['locale'],'AI_CHAT_CONTEXT_URL_ADD_URL'),'tooltipPosition':'n','class':'ck-button-icon','type':'submit','isEnabled':!0x1}),_0x398add;}['_setupTemplate'](){const _0x281510=new _0x2f6d58(this['locale'],{'label':i(this['locale'],'AI_CHAT_CONTEXT_URL_ADD_URL'),'class':'ck-ai-header\x20ck-ai-header_small\x20ck-ai-header_context-url'});_0x281510['children']['add'](this['backButton'],0x0),this['setTemplate']({'tag':'form','attributes':{'class':Ca,'tabindex':'-1'},'children':[_0x281510,{'tag':'div','attributes':{'class':wa},'children':[this['urlInputField'],this['confirmButton']]}]});}['_setupEventHandlers'](){this['backButton']['on']('execute',()=>{this['clear'](),this['fire']('cancel');}),this['urlInputField']['fieldView']['on']('input',()=>{this['clearError'](),this['_updateConfirmButtonState'](),this['fire']('refreshBalloon');}),this['on']('submit',_0x128d48=>{_0x128d48['stop'](),this['_handleSubmit']();});}['_setupKeystrokes'](){this['keystrokes']['set']('esc',(_0x26c5db,_0x1339bc)=>{this['clear'](),this['fire']('cancel'),_0x1339bc();});}['_handleSubmit'](){const _0x5297de=this['getValue']()['trim']();_0x5297de?this['_isValidUrl'](_0x5297de)?(this['clearError'](),this['fire']('submitUrl',_0x5297de)):this['setError'](i(this['locale'],'AI_CHAT_CONTEXT_URL_INVALID_ERROR')):this['setError'](i(this['locale'],'AI_CHAT_CONTEXT_URL_EMPTY_ERROR'));}['_updateConfirmButtonState'](){const _0x242598=this['getValue']()['trim'](),_0x345b6d=!!this['urlInputField']['errorText'];this['confirmButton']['isEnabled']=_0x242598['length']>0x0&&!_0x345b6d;}['_isValidUrl'](_0x1e0766){try{return!!new URL(_0x1e0766);}catch{return!0x1;}}}const fa='ck-ai-chat-resources__item',Sa='ck-ai-chat-resources__item--in-context',Oa='ck-ai-chat-resources__item-title',Ra='ck-ai-chat-resources__item__icon';class tc extends _0x2f4a78{['resource'];['_titleView'];['_iconView'];constructor(_0xc91dae,_0x5e2c1e){super(_0xc91dae),this['resource']=_0x5e2c1e,this['set']('isInContext',!!_0x5e2c1e['isInContext']),this['_titleView']=this['_createTitleView'](),this['_iconView']=this['_createIconView'](),this['_setupTemplate']();}['render'](){super['render']();}['getResourceIcon'](_0x526259){if(_0x526259['isInContext'])return _0x16e06b;switch(_0x526259['type']){case xe['DOCUMENT']:return _0x406e24;case xe['URL']:return _0x2bae8e;case xe['FILE']:case xe['TEXT']:return _0x45f76f;default:return _0x3b950b;}}['highlightText'](_0x19d5c5){if(!_0x19d5c5||''===_0x19d5c5['trim']())return void this['_titleView']['highlightText'](null);const _0x33d41c=new RegExp(_0x417822(_0x19d5c5),'gi');this['_titleView']['highlightText'](_0x33d41c);}['updateResourceState'](_0x67c44b){this['resource']['isInContext']=_0x67c44b,this['isInContext']=_0x67c44b,this['_updateIcon']();}['_createTitleView'](){const _0x18671a=new _0x6f5af8();return _0x18671a['text']=this['resource']['label'],_0x18671a['extendTemplate']({'tag':'span','attributes':{'class':[Oa]}}),_0x18671a;}['_createIconView'](){const _0x5a6a1f=new _0x4c8e3c();return _0x5a6a1f['content']=this['getResourceIcon'](this['resource']),_0x5a6a1f;}['_setupTemplate'](){const _0x3dde80=this['bindTemplate'];this['setTemplate']({'tag':'div','attributes':{'class':[fa,_0x3dde80['if']('isVisible','ck-hidden',_0x11345b=>!_0x11345b),_0x3dde80['if']('isInContext',Sa)]},'children':[{'tag':'div','attributes':{'class':[Ra]},'children':[this['_iconView']]},this['_titleView']],'on':{'click':_0x3dde80['to']('execute')}});}['_updateIcon'](){this['_iconView']['content']=this['getResourceIcon'](this['resource']);}}const ba='ck-ai-chat-resources__list';class Fr extends _0x3c987b{['_source'];constructor(_0xf4185b,_0x203502){super(_0xf4185b),this['_source']=_0x203502,this['extendTemplate']({'attributes':{'class':[ba]}});}['setResources'](_0x9a4724,_0x50b036){this['items']['clear']();let _0x18bc0c=_0x9a4724;if(this['_source']['useDefaultFiltering']&&_0x50b036&&''!==_0x50b036['trim']()){const _0x529ca2=new RegExp(_0x50b036['replace'](/[.*+?^${}()|[\]\\]/g,'\x5c$&'),'gi');_0x18bc0c=_0x9a4724['filter'](_0x36b5b5=>_0x529ca2['test'](_0x36b5b5['label']));}for(const _0x6c7393 of _0x18bc0c){const _0xdd3eac=new tc(this['locale'],_0x6c7393);_0xdd3eac['on']('execute',()=>{this['_handleResourceSelection'](this['_source'],_0x6c7393);}),this['items']['add'](_0xdd3eac);}this['_source']['useDefaultFiltering']&&this['highlightText'](_0x50b036);}['highlightText'](_0x35ed62){this['_source']['useDefaultFiltering']&&this['items']['forEach'](_0x22adbb=>{_0x22adbb['highlightText'](_0x35ed62);});}['updateResourceState'](_0x6d289f,_0xa036cf){for(const _0x73b19a of this['items']){const _0x3c7482=_0x73b19a;_0x3c7482['resource']['id']===_0x6d289f&&_0x3c7482['updateResourceState'](_0xa036cf);}}['_handleResourceSelection'](_0x5579af,_0x359488){this['fire']('addResourceToContext',{'source':_0x5579af,'resource':_0x359488});}}class Ur extends _0x1fb092{['iconView'];['resetButtonView'];['_viewConfig'];constructor(_0x32527e){const t=_0x32527e['t'],_0x57d4f2={'showResetButton':!0x0,'showIcon':!0x0,'creator':th,'label':i(_0x32527e,'AI_CHAT_SEARCH_RESOURCES')};super(_0x32527e,_0x57d4f2['creator']),this['label']=_0x57d4f2['label'],this['_viewConfig']=_0x57d4f2,this['_viewConfig']['showIcon']&&this['_setupSearchIcon'](),this['_viewConfig']['showResetButton']&&this['_setupResetButton'](_0x32527e,t),this['_setupEventListeners']();}['reset'](){this['fieldView']['reset'](),this['_viewConfig']['showResetButton']&&this['resetButtonView']&&(this['resetButtonView']['isVisible']=!0x1),this['search']('');}['search'](_0x4e01c9){this['fire']('search',_0x4e01c9);}['getQuery'](){return this['fieldView']['element']?.['value']||'';}['_setupSearchIcon'](){this['iconView']=new _0x4c8e3c(),this['iconView']['content']=_0x6ad2a8,this['fieldWrapperChildren']['add'](this['iconView'],0x0),this['extendTemplate']({'attributes':{'class':'ck-search__query_with-icon'}});}['_setupResetButton'](_0x230e3b,t){this['resetButtonView']=new _0x177962(_0x230e3b),this['resetButtonView']['set']({'label':t('Clear'),'icon':_0x2ae09c,'class':'ck-search__reset','isVisible':!0x1,'tooltip':!0x0}),this['resetButtonView']['on']('execute',()=>{this['reset'](),this['focus'](),this['fire']('reset');}),this['resetButtonView']['bind']('isVisible')['to'](this['fieldView'],'isEmpty',_0x40360b=>!_0x40360b),this['fieldWrapperChildren']['add'](this['resetButtonView']),this['extendTemplate']({'attributes':{'class':'ck-search__query_with-reset'}});}['_setupEventListeners'](){this['listenTo'](this['fieldView'],'input',()=>{this['search'](this['fieldView']['element']['value']);}),this['bind']('isEnabled')['to'](this);}}class Xo extends _0x4dc179{['_searchView'];['_resourcesListView'];['_skeletonLoader'];['_source'];['children'];['_latestLoadResourcesUid']=null;constructor(_0x59ac50,_0x5b8c6b){super(_0x59ac50),this['_source']=_0x5b8c6b,this['set']('isLoading',!0x0),this['_searchView']=this['_createSearchView']();const _0x1b8c16=this['_createSearchSection']();this['_resourcesListView']=this['_createResourcesListView'](),this['_skeletonLoader']=this['_createSkeletonView'](),this['children']=new _0x3b5cfc([_0x1b8c16,this['_skeletonLoader'],this['_resourcesListView']]),this['setTemplate']({'tag':'div','attributes':{'class':'ck-ai-chat-resources'},'children':this['children']});}['_createSearchView'](){return new Ur(this['locale']);}['_createSearchSection'](){const _0x16c5f2=new _0x4dc179(this['locale']);return _0x16c5f2['setTemplate']({'tag':'div','attributes':{'class':'ck\x20ck-search'},'children':[this['_searchView']]}),this['_searchView']['on']('search',(_0x15fed7,_0x3f320d)=>{this['loadResources'](_0x3f320d),this['_source']['useDefaultFiltering']&&this['_resourcesListView']['highlightText'](_0x3f320d);}),_0x16c5f2;}['_createResourcesListView'](){const _0x1ad3d8=new Fr(this['locale'],this['_source']);return _0x1ad3d8['delegate']('addResourceToContext')['to'](this),_0x1ad3d8['extendTemplate']({'attributes':{'class':this['bindTemplate']['if']('isLoading','ck-hidden')}}),_0x1ad3d8;}['_createSkeletonView'](){const _0x23b66e=new be(this['locale'],Le['aiChatResources']);return _0x23b66e['extendTemplate']({'attributes':{'class':[this['bindTemplate']['if']('isLoading','ck-hidden',_0xba3ff4=>!_0xba3ff4)]}}),_0x23b66e;}['render'](){super['render'](),this['loadResources']('');}['loadResources'](_0x118bf4){const _0x575e73=_0xa215c8();this['_latestLoadResourcesUid']=_0x575e73,this['fire']('loadSourceResources',{'sourceId':this['_source']['id'],'query':_0x118bf4,'uid':_0x575e73}),this['isLoading']=!0x0;}['setResources'](_0x4e6508,_0x3e7d12){if(_0x3e7d12&&_0x3e7d12!==this['_latestLoadResourcesUid'])return;const _0x4c2ae2=this['_source']['useDefaultFiltering']?this['_searchView']['getQuery']():'';this['_resourcesListView']['setResources'](_0x4e6508,_0x4c2ae2),requestAnimationFrame(()=>{this['isLoading']=!0x1;});}['updateResourceState'](_0x4313f7,_0x20bb4b){this['_resourcesListView']['updateResourceState'](_0x4313f7,_0x20bb4b);}}const Na='ck-ai-chat-context-controls__source-balloon-panel',ya='ck-button-icon\x20ck-button-back',ka='ck-ai-header\x20ck-ai-header_small\x20ck-ai-header_source';class To{['_sourceResourceBalloons']=new Map();['_bodyCollection'];['_locale'];['_config'];constructor(_0xebd63f,_0x517ab0,_0x1777ad){this['_locale']=_0xebd63f,this['_bodyCollection']=_0x517ab0,this['_config']=_0x1777ad;}['showSourceResourcesBalloon'](_0x242beb){let _0xeda1dc=this['_sourceResourceBalloons']['get'](_0x242beb['id']);_0xeda1dc||(_0xeda1dc=this['_createSourceResourceBalloonPanel'](),this['_sourceResourceBalloons']['set'](_0x242beb['id'],_0xeda1dc),this['_setupSingleResourceBalloonClickOutsideHandler'](_0xeda1dc)),this['_addSourceResourceContent'](_0xeda1dc,_0x242beb),_0xeda1dc['show']();const _0x31e368=this['_config']['getTargetElement']();_0x31e368&&_0xeda1dc['pin']({'target':_0x31e368,'limiter':this['_config']['getLimiterElement']()});}['populateSourceResourceBalloon'](_0x41bccb,_0x246218,_0x4dd188){const _0x5884ec=this['_sourceResourceBalloons']['get'](_0x41bccb);if(!_0x5884ec)return;const _0x3a3e42=this['_getResourcesViewFromBalloon'](_0x5884ec);_0x3a3e42&&_0x3a3e42['setResources'](_0x246218,_0x4dd188);}['closeSourceResourceBalloon'](_0x42cf4a){const _0x3ab5fd=this['_sourceResourceBalloons']['get'](_0x42cf4a);_0x3ab5fd&&requestAnimationFrame(()=>{_0x3ab5fd['hide'](),this['_sourceResourceBalloons']['delete'](_0x42cf4a),this['_config']['onBalloonClosed']();});}['isAnyResourceBalloonVisible'](){for(const _0x40ae61 of this['_sourceResourceBalloons']['values']())if(_0x40ae61['isVisible'])return!0x0;return!0x1;}['updateResourceState'](_0x105848,_0x1f177a,_0x535078){const _0x4c8a7e=this['_sourceResourceBalloons']['get'](_0x105848);if(!_0x4c8a7e||!_0x4c8a7e['isVisible'])return;const _0x165473=this['_config']['getTargetElement']();if(!_0x165473)return;_0x4c8a7e['pin']({'target':_0x165473,'limiter':this['_config']['getLimiterElement']()});const _0x275c87=this['_getResourcesViewFromBalloon'](_0x4c8a7e);_0x275c87&&_0x275c87['updateResourceState'](_0x1f177a,_0x535078);}['destroy'](){for(const _0x59facf of this['_sourceResourceBalloons']['values']())_0x59facf['destroy']();this['_sourceResourceBalloons']['clear']();}['_createSourceResourceBalloonPanel'](){const _0x4a840d=new _0x4ce253(this['_locale']);return _0x4a840d['extendTemplate']({'attributes':{'class':Na}}),this['_bodyCollection']['add'](_0x4a840d),_0x4a840d;}['_addSourceResourceContent'](_0x518655,_0x10b92b){_0x518655['content']['clear']();const _0xd83f80=this['_createBalloonHeader'](_0x518655,_0x10b92b);_0x518655['content']['add'](_0xd83f80);const _0x19ff4e=this['_createBalloonResourcesView'](_0x10b92b);_0x518655['content']['add'](_0x19ff4e);}['_createBalloonHeader'](_0x53f90e,_0x1b44f9){const _0x46bdfe=this['_createBackButton'](_0x53f90e),_0x376fe3=new _0x2f6d58(this['_locale'],{'label':_0x1b44f9['label'],'class':ka});return _0x376fe3['children']['add'](_0x46bdfe,0x0),_0x376fe3;}['_createBackButton'](_0x32026b){const _0x24147b=new _0x177962(this['_locale']);return _0x24147b['set']({'icon':_0x7fbeea,'tooltip':i(this['_locale'],'AI_CHAT_CONTEXT_URL_BACK_TO_CONTEXT'),'tooltipPosition':'n','class':ya}),_0x24147b['on']('execute',()=>{_0x32026b['hide'](),this['_config']['onBackToContext']();}),_0x24147b;}['_createBalloonResourcesView'](_0x31247f){const _0x5391d3=new Xo(this['_locale'],_0x31247f);return _0x5391d3['on']('loadSourceResources',(_0x133f4e,_0x4c00c3)=>{this['_config']['onLoadSourceResources'](_0x4c00c3);}),_0x5391d3['on']('addResourceToContext',(_0x2275fe,_0xda02c0)=>{this['_config']['onResourceSelected'](_0xda02c0['source'],_0xda02c0['resource']),this['closeSourceResourceBalloon'](_0x31247f['id']);}),_0x5391d3;}['_getResourcesViewFromBalloon'](_0x4ed372){const _0x57efba=_0x4ed372['content']['get'](0x1);return _0x57efba instanceof Xo?_0x57efba:null;}['_setupSingleResourceBalloonClickOutsideHandler'](_0x286c0d){_0x14a3d2({'emitter':_0x286c0d,'contextElements':[_0x286c0d['element']],'callback':()=>{_0x286c0d['hide'](),this['_config']['onBalloonClosed']();},'activator':()=>_0x286c0d['isVisible']});}}const bs=['addDocumentToContext','addFileToContext','addUrlToContext','addResourceToContext','removeContextItem','loadSourceResources'],Ao='ck-ai-chat-context-controls',ko='ck-ai-chat-context-controls__pending-contexts',Eo='ck-ai-chat-context-controls__add-context-balloon-panel',vo='ck-ai-chat-context-controls__add-context-button',go='ck-ai-chat-context-controls__url-balloon-panel',Vo='ck-ai-chat-context-controls__balloon-button',fo='ck-ai-chat-context-controls__balloon-button-source',Io='ck-ai-chat-controls-button',Po='ck-ai-chat-context-chips-wrapper-balloon',Ro='ck-ai-chat-controls_context_show-more-button',Uo='ck-ai-chat-context-controls__show-more-balloon-panel',Lo='ck-ai-chat',No=[_0x4ce253['defaultPositions']['northArrowSouthWest'],_0x4ce253['defaultPositions']['northArrowSouth'],_0x4ce253['defaultPositions']['northArrowSouthEast'],_0x4ce253['defaultPositions']['southArrowNorthWest'],_0x4ce253['defaultPositions']['southArrowNorth'],_0x4ce253['defaultPositions']['southArrowNorthEast']];class ms extends _0x4dc179{['addContextButtonView'];['_currentContextsChips']=this['createCollection']();['_conversationContextsChips']=this['createCollection']();['_overflowManager'];['_addContextBalloonPanelView'];['_urlBalloonPanelView'];['_urlInputView'];['_resourcesBalloonView'];['_addContextBalloonConfig'];['bodyCollection'];constructor(_0x574575,_0x1dd752){super(_0x574575),this['bodyCollection']=_0x1dd752,this['_currentContextsChips']=this['createCollection'](),this['_conversationContextsChips']=this['createCollection'](),this['addContextButtonView']=this['_createAddContextButtonView'](_0x574575),this['_addContextBalloonPanelView']=this['_createAddContextBalloonPanelView'](_0x574575),this['_urlBalloonPanelView']=this['_createUrlBalloonPanelView'](_0x574575),this['_resourcesBalloonView']=this['_createResourcesBalloonView'](_0x574575,_0x1dd752);const _0x4eb568={'cssClasses':{'showMoreButton':Ro,'showMoreBalloon':Uo,'overflowContainer':Po,'controlsButton':Io}};this['_overflowManager']=new bo(_0x574575,this['_currentContextsChips'],_0x4eb568,this['bodyCollection'],this),this['_addContextBalloonConfig']={'buttonView':this['addContextButtonView'],'balloonView':this['_addContextBalloonPanelView'],'hideMethod':this['hideAddContextBalloonPanel']['bind'](this),'showMethod':this['showAddContextBalloonPanel']['bind'](this)},this['_setupTemplate'](),this['_bindEventHandlers']();}['render'](){super['render'](),this['_setupAllBalloonClickOutsideHandlers'](),this['_overflowManager']['setContainerElement'](this['element']),this['_overflowManager']['reorganizeChips']();}['destroy'](){super['destroy'](),this['_overflowManager']['destroy'](),this['_resourcesBalloonView']['destroy']();}['addContextItem'](_0x13c9dc,_0x2387f2){const _0x2dc5c9=this['_createContextButton'](_0x13c9dc,'current',!0x0,_0x2387f2);this['_addContextToCollection'](_0x2dc5c9,this['_currentContextsChips']),this['_overflowManager']['reorganizeChips']();}['removeContextItem'](_0x38399b){this['_removeContextFromCollection'](_0x38399b,this['_currentContextsChips']),this['_removeContextFromCollection'](_0x38399b,this['_overflowManager']['overflowChips']),this['_overflowManager']['reorganizeChips']();}['setContextItemLoading'](_0x42d135,_0x562a99){let _0x583a8c=this['_currentContextsChips']['find'](_0x5a4894=>_0x5a4894['id']===_0x42d135);_0x583a8c||(_0x583a8c=this['_overflowManager']['overflowChips']['find'](_0x1ec446=>_0x1ec446['id']===_0x42d135)),_0x583a8c&&(_0x583a8c['isLoading']=_0x562a99);}['setConversationContext'](_0x32a163){this['_conversationContextsChips']['clear']();for(const _0x34a582 of _0x32a163){const _0x4abf6d=this['_createContextButton'](_0x34a582,'conversation',!0x1,!0x1);this['_addContextToCollection'](_0x4abf6d,this['_conversationContextsChips']);}}['clearCurrentContextItems'](){this['_currentContextsChips']['clear'](),this['_overflowManager']['clear']();}['clearConversationContextItems'](){this['_conversationContextsChips']['clear']();}['updateResourceState'](_0x5ec2e7,_0x241512,_0x4d0b80){this['_resourcesBalloonView']['updateResourceState'](_0x5ec2e7,_0x241512,_0x4d0b80);}['hideAddContextBalloonPanel'](){this['_toggleAddContextBalloon'](!0x1);}['showAddContextBalloonPanel'](){this['_toggleAddContextBalloon'](!0x0);}['hideUrlBalloonPanel'](){this['_urlBalloonPanelView']['hide'](),this['addContextButtonView']['isOn']=!0x1,this['_urlInputView']&&this['_urlInputView']['clear']();}['showUrlBalloonPanel'](){this['_urlBalloonPanelView']['show'](),this['addContextButtonView']['isOn']=!0x0;}['_showSourceResourcesBalloon'](_0x288abe){this['_resourcesBalloonView']['showSourceResourcesBalloon'](_0x288abe),this['addContextButtonView']['isOn']=!0x0;}['populateSourceResourceBalloon'](_0x28293e,_0x5d1a5a,_0x5b09aa,_0x1593c9){this['_resourcesBalloonView']['populateSourceResourceBalloon'](_0x28293e,_0x5b09aa,_0x1593c9);}['closeSourceResourceBalloon'](_0x220acf){this['_resourcesBalloonView']['closeSourceResourceBalloon'](_0x220acf),this['addContextButtonView']['isOn']=!0x1;}['setAddContextOptions'](_0x1c8b52){this['_setBalloonPanelContent'](this['_addContextBalloonPanelView'],this['locale'],_0x1c8b52),this['_setAddContextButtonEnabled'](_0x1c8b52);}['_setAddContextButtonEnabled'](_0x4bb71a){const _0x135eac=!_0x4bb71a['document']['isHidden']&&_0x4bb71a['document']['enabled'],_0x21940c=_0x4bb71a['urls']['enabled'],_0x5cf8d7=_0x4bb71a['files']['enabled'];this['addContextButtonView']['isEnabled']=_0x135eac||_0x21940c||_0x5cf8d7;}['_setupTemplate'](){this['setTemplate']({'tag':'div','attributes':{'class':[Ao,'ck-reset_all-excluded']},'children':[{'tag':'div','attributes':{'class':ko},'children':this['_currentContextsChips']}]});}['_bindEventHandlers'](){this['addContextButtonView']['on']('execute',()=>{this['_handleAddContextButtonClick']();});}['_createAddContextButtonView'](_0x5ece60){const _0x5568d0=new _0x177962(_0x5ece60);return _0x5568d0['set']({'label':i(_0x5ece60,'AI_CHAT_CONTEXT_ADD_CONTEXT'),'class':Io+'\x20'+vo,'icon':_0x3c265a,'isToggleable':!0x0,'tooltip':!0x0,'tooltipPosition':'sw'}),_0x5568d0;}['_createAddContextBalloonPanelView'](_0x1287e5){return this['_createBaseBalloonPanel'](_0x1287e5,Eo);}['_createUrlBalloonPanelView'](_0x4f9e5b){const _0x54990a=this['_createBaseBalloonPanel'](_0x4f9e5b,go);return this['_addUrlContent'](_0x54990a,_0x4f9e5b),_0x54990a;}['_createResourcesBalloonView'](_0x109b9b,_0x1c0898){return new To(_0x109b9b,_0x1c0898,{'onBackToContext':()=>{this['showAddContextBalloonPanel'](),this['_addContextBalloonPanelView']['pin']({'target':this['addContextButtonView']['element'],'limiter':this['_getLimiterElement'](),'positions':No});},'onResourceSelected':(_0x170828,_0x251ceb)=>{this['fire']('addResourceToContext',{'source':_0x170828,'resource':_0x251ceb});},'onLoadSourceResources':_0x5cd63d=>{this['fire']('loadSourceResources',_0x5cd63d);},'onBalloonClosed':()=>{this['addContextButtonView']['isOn']=!0x1;},'getLimiterElement':()=>this['_getLimiterElement'](),'getTargetElement':()=>this['addContextButtonView']['element']});}['_getLimiterElement'](){return this['element']?.['closest']('.'+Lo)||document['body'];}['_createBaseBalloonPanel'](_0x45b7ad,_0x41a41d){const _0x559f9a=new _0x4ce253(_0x45b7ad);return _0x559f9a['extendTemplate']({'attributes':{'class':_0x41a41d}}),this['bodyCollection']['add'](_0x559f9a),_0x559f9a;}['_setBalloonPanelContent'](_0x2dc0d0,_0xae745e,_0x2d851d){if(_0x2dc0d0['content']['clear'](),!_0x2d851d['document']['isHidden']&&_0x2d851d['document']['enabled']){const _0x37fc3b=this['_createBalloonButton'](_0xae745e,{'label':i(_0xae745e,'AI_CHAT_CONTEXT_CURRENT_DOCUMENT'),'icon':_0x406e24});_0x37fc3b['on']('execute',()=>{this['fire']('addDocumentToContext'),this['hideAddContextBalloonPanel']();}),_0x2dc0d0['content']['add'](_0x37fc3b);}if(_0x2d851d['urls']['enabled']){const _0x5a3fdd=this['_createBalloonButton'](_0xae745e,{'label':i(_0xae745e,'AI_CHAT_CONTEXT_URL_LABEL'),'icon':_0x2bae8e});_0x5a3fdd['on']('execute',()=>{this['hideAddContextBalloonPanel'](),this['showUrlBalloonPanel'](),this['_urlBalloonPanelView']['pin']({'target':this['addContextButtonView']['element'],'limiter':this['_getLimiterElement'](),'positions':No}),this['_urlInputView']['focus']();}),_0x2dc0d0['content']['add'](_0x5a3fdd);}if(_0x2d851d['files']['enabled']){const _0x25eb89=new _0x57f591(_0xae745e);_0x25eb89['set']({'label':i(_0xae745e,'AI_CHAT_CONTEXT_FILE_LABEL'),'icon':_0x570392,'withText':!0x0,'tooltip':!0x0,'class':Vo,'allowMultipleFiles':!0x0}),_0x25eb89['on']('done',(_0x189c6a,_0x48c388)=>{this['fire']('addFileToContext',_0x48c388),this['hideAddContextBalloonPanel']();}),_0x25eb89['tooltip']=!0x0,_0x2dc0d0['content']['add'](_0x25eb89);}for(const _0xb72ac9 of _0x2d851d['sources']){const _0x5b7666=this['_createBalloonButton'](_0xae745e,{'label':_0xb72ac9['label'],'icon':_0xb72ac9['icon']||_0x3b950b,'type':'source'});_0x2dc0d0['content']['add'](_0x5b7666),_0x5b7666['on']('execute',()=>{this['hideAddContextBalloonPanel'](),this['_showSourceResourcesBalloon'](_0xb72ac9);});}}['_addUrlContent'](_0x19c9f9,_0x1d7eca){this['_urlInputView']=new Bo(_0x1d7eca),this['_urlInputView']['on']('submitUrl',(_0xa8e3d4,_0x71a6fb)=>{this['_handleUrlSubmit'](_0x71a6fb);}),this['_urlInputView']['on']('cancel',()=>{this['hideUrlBalloonPanel'](),this['showAddContextBalloonPanel'](),this['_addContextBalloonPanelView']['pin']({'target':this['addContextButtonView']['element'],'limiter':this['_getLimiterElement'](),'positions':No});}),this['_urlInputView']['on']('refreshBalloon',()=>{this['_urlBalloonPanelView']['isVisible']&&this['_urlBalloonPanelView']['pin']({'target':this['addContextButtonView']['element'],'limiter':this['_getLimiterElement'](),'positions':No});}),_0x19c9f9['content']['add'](this['_urlInputView']);}['_createBalloonButton'](_0x4cfad3,_0x56a316){const _0x1ea42b='source'===_0x56a316['type']?new va(_0x4cfad3):new _0x177962(_0x4cfad3);return _0x1ea42b['set']({'label':_0x56a316['label'],'icon':_0x56a316['icon'],'withText':!0x0,'tooltip':!0x0,'tooltipPosition':'sw','class':Vo}),_0x1ea42b;}['_setupAllBalloonClickOutsideHandlers'](){this['_setupAddContextBalloonClickOutsideHandler'](),this['_setupUrlBalloonClickOutsideHandler']();}['_setupUrlBalloonClickOutsideHandler'](){_0x14a3d2({'emitter':this['_urlBalloonPanelView'],'contextElements':[this['_urlBalloonPanelView']['element']],'callback':()=>{this['hideUrlBalloonPanel']();},'activator':()=>this['_urlBalloonPanelView']['isVisible']});}['_toggleAddContextBalloon'](_0x1b8887){const _0x5062cc=this['_addContextBalloonConfig'];_0x5062cc['buttonView']['isOn']=_0x1b8887,_0x1b8887?_0x5062cc['balloonView']['show']():_0x5062cc['balloonView']['hide']();}['_setupAddContextBalloonClickOutsideHandler'](){const {balloonView:_0x418fb9,buttonView:_0x1a6016,hideMethod:_0x444d94}=this['_addContextBalloonConfig'];_0x14a3d2({'emitter':_0x418fb9,'contextElements':[_0x418fb9['element'],_0x1a6016['element']],'callback':()=>{_0x444d94();},'activator':()=>_0x1a6016['isOn']&&!this['_urlBalloonPanelView']['isVisible']&&!this['_resourcesBalloonView']['isAnyResourceBalloonVisible']()});}['_createContextButton'](_0x1cf6d5,_0x17af62,_0x55b256=!0x1,_0x10bcc1=!0x1){const _0xff34ad='conversation'===_0x17af62||!0x0===_0x1cf6d5['isReadOnly'],_0x1a6891=new po(this['locale'],_0x1cf6d5,_0xff34ad,_0x55b256,_0x10bcc1);return _0xff34ad||_0x1a6891['on']('removeContextItemChip',()=>{this['fire']('removeContextItem',_0x1a6891['id']);}),_0x1a6891;}['_addContextToCollection'](_0x33905f,_0x47ed56){_0x47ed56['add'](_0x33905f,0x0);}['_removeContextFromCollection'](_0x462df3,_0x1315c3){const _0x57d184=_0x1315c3['find'](_0xaedf4d=>_0xaedf4d['id']===_0x462df3);_0x57d184&&_0x1315c3['remove'](_0x57d184);}['_handleAddContextButtonClick'](){this['addContextButtonView']['isOn']?this['hideAddContextBalloonPanel']():(this['showAddContextBalloonPanel'](),this['_addContextBalloonPanelView']['pin']({'target':this['addContextButtonView']['element'],'limiter':this['_getLimiterElement'](),'positions':No}));}['_handleUrlSubmit'](_0x2f9365){this['_urlInputView']['clear'](),this['hideUrlBalloonPanel'](),this['fire']('addUrlToContext',_0x2f9365);}}class va extends _0x177962{['arrowView'];constructor(_0x354e72){super(_0x354e72),this['set']({'withText':!0x0,'role':'menuitem'}),this['arrowView']=this['_createArrowView'](),this['extendTemplate']({'attributes':{'class':[fo]}});}['render'](){super['render'](),this['children']['add'](this['arrowView']);}['_createArrowView'](){const _0x435e6d=new _0x4c8e3c();return _0x435e6d['content']=_0x341e07,_0x435e6d['extendTemplate']({'attributes':{'class':fo+'__arrow'}}),_0x435e6d;}}class gs extends _0x4dc179{['_cancelButtonView'];['_loaderView'];constructor(_0x5a2916){super(_0x5a2916),this['_cancelButtonView']=this['_createCancelButtonView'](),this['_loaderView']=this['_createLoaderView'](),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-chat-controls-loader-wrapper','ck-reset_all']},'children':[this['_loaderView'],this['_cancelButtonView']]});}['_createCancelButtonView'](){const _0x547d09=new _0x177962(this['locale']);return _0x547d09['set']({'label':i(this['locale'],'AI_CHAT_STOP_GENERATING'),'withText':!0x0,'class':'ai-chat-controls-loader__cancel-button','icon':_0x5eda7f}),_0x547d09['on']('execute',()=>{this['fire']('abortPromptStream');}),_0x547d09;}['_createLoaderView'](){const _0x5082a2=new _0x4dc179(this['locale']);return _0x5082a2['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-chat-controls-loader']},'children':[{'tag':'div','attributes':{'class':['ck-ai-chat-controls-loader-icon']},'children':[{'tag':'div','attributes':{'class':['ck-ai-chat-controls-loader-icon-dot']}},{'tag':'div','attributes':{'class':['ck-ai-chat-controls-loader-icon-dot']}},{'tag':'div','attributes':{'class':['ck-ai-chat-controls-loader-icon-dot']}}]},{'text':i(this['locale'],'AI_CHAT_IS_WRITING')}]}),_0x5082a2;}}class ki extends _0x4dc179{['_displayedModels']=[];['_contextPanelView'];['_promptInputView'];['_promptCapabilitiesView'];['_loaderView'];['_modelUnavailableMessageView'];['_shouldRestorePromptInputFocus'];constructor(_0x60aaa6,_0x308d7a){super(_0x60aaa6),this['_contextPanelView']=this['_createContextPanelView'](_0x60aaa6,_0x308d7a),this['_promptInputView']=this['_createPromptInputView'](_0x60aaa6),this['_promptCapabilitiesView']=this['_createPromptCapabilitiesView'](_0x60aaa6),this['_loaderView']=this['_createLoaderView'](_0x60aaa6),this['_modelUnavailableMessageView']=this['_createModelUnavailableMessageView'](_0x60aaa6),this['_shouldRestorePromptInputFocus']=!0x1,this['_promptInputView']['delegate']('sendUserMessage')['to'](this),this['_loaderView']['delegate']('abortPromptStream')['to'](this),this['_promptCapabilitiesView']['delegate']('toggleWebSearch')['to'](this),this['_promptCapabilitiesView']['delegate']('toggleReasoning')['to'](this),this['_promptCapabilitiesView']['delegate']('selectModel')['to'](this),this['_contextPanelView']['delegate'](...bs)['to'](this),this['set']('isModelAvailable',!0x0),this['set']('isDisabled',!0x1);const _0x2dc6bc=this['bindTemplate'];this['setTemplate']({'tag':'form','attributes':{'class':['ck','ck-ai-chat-controls',_0x2dc6bc['if']('isDisabled','ck-ai-chat-controls-disabled')]},'children':[{'tag':'div','attributes':{'class':[_0x2dc6bc['if']('isLoading','ck-hidden',_0x423452=>_0x423452||!this['isModelAvailable']),_0x2dc6bc['if']('isModelAvailable','ck-hidden',_0x4bbe79=>!_0x4bbe79||this['isLoading'])]},'children':[this['_contextPanelView'],this['_promptInputView'],this['_promptCapabilitiesView']]},{'tag':'div','attributes':{'class':[_0x2dc6bc['if']('isLoading','ck-hidden',_0x1a8eab=>!_0x1a8eab)]},'children':[this['_loaderView']]},{'tag':'div','attributes':{'class':[_0x2dc6bc['if']('isModelAvailable','ck-hidden',_0x20ef36=>_0x20ef36)]},'children':[this['_modelUnavailableMessageView']]}]}),_0x14a3d2({'emitter':this['_promptInputView'],'activator':()=>this['isLoading'],'contextElements':()=>[this['element']],'callback':()=>{this['_shouldRestorePromptInputFocus']=!0x1;}}),this['on']('change:isLoading',this['_handlePromptInputFocus'],{'priority':'low'});}['_createContextPanelView'](_0x4b54e3,_0x5ec1e0){return new ms(_0x4b54e3,_0x5ec1e0);}['_createPromptInputView'](_0x40f3d3){return new ds(_0x40f3d3,this['_contextPanelView']['addContextButtonView']);}['_createPromptCapabilitiesView'](_0x10395c){return new ps(_0x10395c);}['_createLoaderView'](_0x9c8add){return new gs(_0x9c8add);}['_createModelUnavailableMessageView'](_0x3f2c7c){const _0x31e714=new _s(_0x3f2c7c);return _0x31e714['delegate']('startConversation')['to'](this),_0x31e714;}['_handlePromptInputFocus'](_0x5c057b,_0x482569,_0x16ec2b){_0x16ec2b?this['_shouldRestorePromptInputFocus']=!0x0:this['_shouldRestorePromptInputFocus']&&this['_promptInputView']['focus']();}['addContextItem'](_0x35aeb7,_0x25131b){this['_contextPanelView']['addContextItem'](_0x35aeb7,_0x25131b);}['removeContextItem'](_0x17abf9){this['_contextPanelView']['removeContextItem'](_0x17abf9);}['setContextItemLoading'](_0x29ab39,_0x1a31ef){this['_contextPanelView']['setContextItemLoading'](_0x29ab39,_0x1a31ef);}['setIsUploadInProgress'](_0x53698c){this['_promptInputView']['setIsUploadInProgress'](_0x53698c);}['setConversationContext'](_0x3d9ba8){this['_contextPanelView']['setConversationContext'](_0x3d9ba8);}['clearPendingContextUI'](){this['_contextPanelView']['clearCurrentContextItems']();}['clearConversationContextUI'](){this['_contextPanelView']['clearConversationContextItems']();}['updateResourceState'](_0x1fdbb9,_0x191d50,_0x44e725){this['_contextPanelView']['updateResourceState'](_0x1fdbb9,_0x191d50,_0x44e725);}['setWebSearch'](_0x95f6de){this['_promptCapabilitiesView']['setWebSearch'](_0x95f6de);}['setReasoning'](_0x752b7e){this['_promptCapabilitiesView']['setReasoning'](_0x752b7e);}['resetMessageInput'](){this['_promptInputView']['reset']();}['setAddContextOptions'](_0x191e0f){this['_contextPanelView']['setAddContextOptions'](_0x191e0f);}['setInputPlaceholder'](_0x242765){this['_promptInputView']['setPlaceholderText'](_0x242765);}['setModelList'](_0x5ab670,_0x466278){this['_displayedModels']=_0x5ab670,this['_promptCapabilitiesView']['setModelList'](_0x5ab670,_0x466278);}['setModel'](_0xfa0c){(_0xfa0c?this['_displayedModels']['find'](_0x2b5809=>_0x2b5809['id']===_0xfa0c['id']):null)?(this['isModelAvailable']=!0x0,this['_promptCapabilitiesView']['setModel'](_0xfa0c)):_0xfa0c?.['id']['startsWith']('agent')?(this['isModelAvailable']=!0x0,this['_promptCapabilitiesView']['setModel'](this['_displayedModels'][0x0])):this['isModelAvailable']=!0x1;}['enableModelSelector'](){this['_promptCapabilitiesView']['enableModelSelector']();}['disableModelSelector'](_0x2bbb3e){this['_promptCapabilitiesView']['disableModelSelector'](_0x2bbb3e);}['populateSourceResourceBalloon'](_0x15afbf,_0xa8c52c,_0x4e7044,_0x2acf95){this['_contextPanelView']['populateSourceResourceBalloon'](_0x15afbf,_0xa8c52c,_0x4e7044,_0x2acf95);}['closeSourceResourceBalloon'](_0x1dbd10){this['_contextPanelView']['closeSourceResourceBalloon'](_0x1dbd10);}['focusPromptInput'](){this['_promptInputView']['focus']();}}class _s extends _0x4dc179{constructor(_0x2959e9){super(_0x2959e9);const _0x26c914=new _0x177962(_0x2959e9);_0x26c914['set']({'label':i(this['locale'],'AI_CHAT_MODEL_UNAVAILABLE_MESSAGE_BUTTON'),'withText':!0x0,'class':['ck-ai-chat-controls__start-new-chat-button'],'tooltip':''}),_0x26c914['delegate']('execute')['to'](this,'startConversation'),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-chat-controls-model-unavailable-message']},'children':[{'tag':'p','children':[{'text':i(this['locale'],'AI_CHAT_MODEL_UNAVAILABLE_MESSAGE_TEXT')+'\x20'},_0x26c914]}]});}}class Bi extends _0x2f6d58{['conversationStartButton'];['resizeButton'];constructor(_0x2dbcac,_0x45d766){super(_0x2dbcac,{'label':i(_0x2dbcac,'AI_CHAT_HEADING'),'class':'ck-ai-header\x20ck-ai-header_chat','icon':Et}),this['set']('isMaximized',!0x1),this['conversationStartButton']=this['_createStartConversationButton'](_0x2dbcac),this['children']['add'](this['conversationStartButton']),_0x45d766&&(this['resizeButton']=ks(_0x2dbcac,this),this['children']['add'](this['resizeButton']));}['_createStartConversationButton'](_0x12c072){const _0x52d28a=new _0x177962(_0x12c072);return _0x52d28a['set']({'label':i(this['locale'],'AI_CHAT_LABEL_NEW_CHAT'),'withText':!0x0,'icon':_0xa4afbd,'class':'ck-ai-chat__start-conversation'}),_0x52d28a['on']('execute',()=>{this['fire']('startConversation');}),_0x52d28a;}}class Ri extends _0x4dc179{constructor(_0x33ccb0){super(_0x33ccb0),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-disclaimer']},'children':[{'tag':'p','attributes':{'class':['ck','ck-ai-disclaimer__content']},'children':[{'text':i(_0x33ccb0,'AI_DISCLAIMER_TEXT')}]}]});}}class At extends _0x4dc179{['chatHeader'];['chatFeed'];['chatControls'];['chatDisclaimer'];['_bodyCollection'];constructor(_0x4a9ea2,_0x204734){super(_0x4a9ea2),this['_bodyCollection']=new Ft(_0x4a9ea2),this['_bodyCollection']['attachToDom'](),this['chatHeader']=new Bi(_0x4a9ea2,_0x204734),this['chatHeader']['delegate'](...Rt)['to'](this),this['chatFeed']=new ji(_0x4a9ea2,this['_bodyCollection']),this['chatFeed']['delegate'](...Rt)['to'](this),this['chatControls']=new ki(_0x4a9ea2,this['_bodyCollection']),this['chatControls']['delegate'](...Rt)['to'](this),this['chatDisclaimer']=new Ri(_0x4a9ea2),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-reset_all','ck-ai-chat','ck-rounded-corners'],'dir':_0x4a9ea2['uiLanguageDirection']},'children':[this['chatHeader'],this['chatFeed'],this['chatControls'],this['chatDisclaimer']]});}['populateSourceResourceBalloon'](_0x18d5c6,_0x35ebcc,_0x2610d3,_0x5afdcc){this['chatControls']['populateSourceResourceBalloon'](_0x18d5c6,_0x35ebcc,_0x2610d3,_0x5afdcc);}['closeSourceResourceBalloon'](_0x57e164){this['chatControls']['closeSourceResourceBalloon'](_0x57e164);}['destroy'](){this['_bodyCollection']['detachFromDom'](),super['destroy']();}}class it extends _0x98dbd{static get['requires'](){return[rt];}['_view'];static get['pluginName'](){return'AIChatUI';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}['feedItemRenderingStrategy']='streaming';['showDiff']=!0x0;['_promiseQueue'];['_interactionPromiseResolver'];['_titleAnimationInterval']=void 0x0;['_isTrackChangesCommandValueBound']=!0x1;constructor(_0x104d1c){super(_0x104d1c);const _0x12b634=this['context']['plugins']['get']('AITabs');this['set']('isBusy',!0x1),this['_promiseQueue']=new H(),this['_view']=new At(this['context']['locale'],_0x12b634['showResizeButton']),this['_view']['delegate'](...Rt)['to'](this),this['_view']['on']('toggleSuggestionDisplayMode',(_0x5491b1,{showDiff:_0x2133de})=>{this['showDiff']=_0x2133de;}),_0x12b634['view']['addTab']({'id':'chat','buttonLabel':i(this['context']['locale'],'AI_CHAT_HEADING'),'buttonIcon':Et,'order':0x0,'content':this['_view']}),this['_view']['chatControls']['bind']('isLoading')['to'](this,'isBusy',_0x1d7959=>_0x1d7959),this['_view']['chatFeed']['bind']('isPending')['to'](this,'isBusy',_0x140ab9=>_0x140ab9),this['_view']['chatControls']['setInputPlaceholder'](this['_getInputPlaceholder']()),this['bind']('isModelAvailable')['to'](this['_view']['chatControls'],'isModelAvailable');}['destroy'](){super['destroy'](),this['_titleAnimationInterval']&&clearInterval(this['_titleAnimationInterval']);}['createConversation'](_0x17622c){this['_view']['chatFeed']['clear'](),this['_view']['chatControls']['enableModelSelector'](),this['_view']['chatControls']['setModelList'](_0x17622c['availableModels'],!this['context']['config']['get']('ai.chat.models.modelSelectorAlwaysVisible')),this['addFeedItemStaticMessage']({'id':'conversation-start','staticMessage':i(this['context']['locale'],'AI_CHAT_WELCOME_MESSAGE')});}['addFeedItemStaticMessage']({id:_0x4b626c,staticMessage:_0x2e0df6}){this['_view']['chatFeed']['addItem']('ai-reply',{'id':_0x4b626c,'initialContent':'<p>'+_0x2e0df6+'</p>'});}['addFeedItemUserMessage'](_0x3e3e76){const _0x4442a8=_0x3e3e76['quickActionData']?.['displayedPrompt']||_0x3e3e76['userMessage'];this['_view']['chatFeed']['addItem']('user-message',{'contextItems':Array['from'](_0x3e3e76['contextItems']['values']()),'initialContent':'<p>'+_0x4442a8+'</p>','id':_0x3e3e76['id']});}['addFeedItemError']({errorMessage:_0x5214d7,id:_0x58fce1}){this['_view']['chatFeed']['addItem']('error-message',{'initialContent':'<p>'+_0x5214d7+'</p>','id':_0x58fce1});}['addFeedItemAIReply'](_0x2b8ca0){return this['_promiseQueue']['enqueue'](async()=>{this['_view']['chatFeed']['addItem']('ai-reply',{'id':_0x2b8ca0['interactionId']+':'+_0x2b8ca0['id']}),this['setLoadingMessage'](null);});}async['addFeedItemAISuggestion'](_0xeaa09e){const _0x8cdd1d=ei(this['context']);if(_0x8cdd1d){const _0x5cafd0=_0x8cdd1d['commands']['get']('trackChanges');_0x5cafd0&&!this['_isTrackChangesCommandValueBound']&&(this['_isTrackChangesCommandValueBound']=!0x0,this['_view']['chatFeed']['bind']('isTrackChangesOn')['to'](_0x5cafd0,'value'));}return this['_promiseQueue']['enqueue'](async()=>{this['_view']['chatFeed']['addItem']('ai-suggestion-reply',{'id':_0xeaa09e['interactionId']+':'+_0xeaa09e['id'],'areActionsDisabled':_0xeaa09e['areActionsDisabled'],'showDiff':this['showDiff'],'dropdownConfig':this['context']['config']['get']('ai.availableReplyActions')}),this['setLoadingMessage'](null);});}['addFeedInteractionHeader'](_0x8b0b07,_0x1d25f8){const _0xcd1d4a=this['_view']['chatFeed']['children']['last'];if(_0xcd1d4a instanceof St)return this['_view']['chatFeed']['children']['remove'](_0xcd1d4a),void this['_view']['chatFeed']['addItem']('interaction-header',{'id':_0x8b0b07['id'],'capabilities':{'isWebSearchEnabled':_0xcd1d4a['capabilities']['isWebSearchEnabled']||_0x1d25f8['isWebSearchEnabled'],'isReasoningEnabled':_0xcd1d4a['capabilities']['isReasoningEnabled']||_0x1d25f8['isReasoningEnabled']}});this['_view']['chatFeed']['addItem']('interaction-header',{'id':_0x8b0b07['id'],'capabilities':_0x1d25f8});}['updateFeedInteractionHeader'](_0x86925e){const _0x105b51=this['_view']['chatFeed']['children']['find'](_0xefff2d=>_0xefff2d['options']['id']==_0x86925e['id']&&_0xefff2d instanceof St);_0x105b51&&_0x105b51['set']('isVisible',_0x86925e['isVisible']);}async['updateFeedItemAIReplyContent'](_0x389e0e){const _0x6e7e12=_0x389e0e['renderingStrategy']||this['feedItemRenderingStrategy'];return this['_promiseQueue']['enqueue'](async _0x403364=>{await this['_view']['chatFeed']['updateReplyItem']({..._0x389e0e,'abortSignal':_0x403364,'renderingStrategy':_0x6e7e12}),_0x389e0e['isDone']&&this['markFeedItemAsDone'](_0x389e0e['id']);});}['updateFeedItemAIReplySources'](_0x44a36a,_0x4ec59c){this['_view']['chatFeed']['updateWebSources'](_0x44a36a,_0x4ec59c);}async['updateFeedItemAIReplySuggestionContent'](_0x2e7bff){const _0x5453b4=_0x2e7bff['renderingStrategy']||this['feedItemRenderingStrategy'];return this['_promiseQueue']['enqueue'](async _0x3c9705=>{await this['_view']['chatFeed']['updateSuggestionItem']({..._0x2e7bff,'abortSignal':_0x3c9705,'renderingStrategy':_0x5453b4}),_0x2e7bff['isDone']&&this['markFeedItemAsDone'](_0x2e7bff['id']);});}['updateFeedItemAIReplySuggestionPartState'](_0x826273){this['_view']['chatFeed']['updateSuggestionPartState'](_0x826273);}['markFeedItemAsDone'](_0x22bf8a){this['_view']['chatFeed']['markItemAsDone'](_0x22bf8a);}['removeFeedInteraction'](_0x18e507){this['_view']['chatFeed']['getItemIds']()['filter'](_0x22ec2d=>_0x22ec2d['startsWith'](_0x18e507))['forEach'](_0x4d5c08=>this['_view']['chatFeed']['removeItem'](_0x4d5c08));}['startInteraction'](){this['setLoadingMessage']({'isWebSearchEnabled':!0x1,'isReasoningEnabled':!0x1}),this['_view']['chatControls']['disableModelSelector'](!this['context']['config']['get']('ai.chat.models.modelSelectorAlwaysVisible')),this['isBusy']=!0x0,this['_view']['chatFeed']['startAutoScroll']();}['stopInteraction'](_0xa261b2){this['_promiseQueue']['abort'](),this['_view']['chatFeed']['getItemIds']()['filter'](_0x847bc9=>_0x847bc9['startsWith'](_0xa261b2['id']))['forEach'](_0x134b6c=>this['markFeedItemAsDone'](_0x134b6c)),this['isBusy']=!0x1,this['_view']['chatFeed']['stopAutoScroll']();}async['finishInteraction'](){return this['_promiseQueue']['queueEmptyPromise']['then'](()=>{this['isBusy']=!0x1,this['_view']['chatFeed']['stopAutoScroll']();});}['addContextItem'](_0x3aa3ba,_0x157efd){this['_view']['chatControls']['addContextItem'](_0x3aa3ba,_0x157efd);}['removeContextItem'](_0xc2e2cd){this['_view']['chatControls']['removeContextItem'](_0xc2e2cd);}['setContextItemLoading'](_0x14053f,_0x504fc2){this['_view']['chatControls']['setContextItemLoading'](_0x14053f,_0x504fc2);}['setIsUploadInProgress'](_0x318737){this['_view']['chatControls']['setIsUploadInProgress'](_0x318737);}['setConversationContext'](_0x4dc10d){this['_view']['chatControls']['setConversationContext'](_0x4dc10d);}['clearPendingContextUI'](){this['_view']['chatControls']['clearPendingContextUI']();}['clearConversationContextUI'](){this['_view']['chatControls']['clearConversationContextUI']();}['updateResourceState'](_0xb7d621,_0xf15cff,_0x38c46e){this['_view']['chatControls']['updateResourceState'](_0xb7d621,_0xf15cff,_0x38c46e);}['resetMessageInput'](){this['_view']['chatControls']['resetMessageInput'](),this['_view']['chatControls']['setInputPlaceholder'](this['_getInputPlaceholder']());}['setAddContextOptions'](_0x56dc69){this['_view']['chatControls']['setAddContextOptions'](_0x56dc69);}['updateCapabilities'](_0x34c664){this['_view']['chatControls']['setWebSearch'](_0x34c664['isWebSearchEnabled']),this['_view']['chatControls']['setReasoning'](_0x34c664['isReasoningEnabled']),this['_view']['chatControls']['setInputPlaceholder'](this['_getInputPlaceholder'](_0x34c664));}['setSelectedModel'](_0x14dd4f,_0x17c6ae){this['_view']['chatControls']['setModel'](_0x14dd4f),_0x17c6ae&&this['_view']['chatControls']['disableModelSelector'](!0x1);}['setFeedItemRenderingStrategy'](_0x432d2c){this['feedItemRenderingStrategy']=_0x432d2c;}['toggleLoadingSkeleton'](_0xf9608){this['_view']['chatFeed']['toggleLoadingSkeleton'](_0xf9608);}['resetConversationTitle'](){this['setConversationTitle'](i(this['context']['locale'],'AI_CHAT_HEADING'));}['setConversationTitle'](_0x56c326,_0x4bdc87=!0x1){if(_0x4bdc87&&!It()&&_0x56c326['length'])return this['_view']['chatHeader']['label']='',void this['_animateConversationTitle'](_0x56c326);this['_view']['chatHeader']['label']=_0x56c326;}['setLoadingMessage'](_0x4a4c5b){const _0x34a17c=this['_getLoadingMessage'](_0x4a4c5b);this['_view']['chatFeed']['setLoadingMessage'](_0x34a17c);}['_animateConversationTitle'](_0x45e894){let _0x379d49=0x0;clearInterval(this['_titleAnimationInterval']),this['_titleAnimationInterval']=setInterval(()=>{this['_view']['chatHeader']['label']=this['_view']['chatHeader']['label']+_0x45e894[_0x379d49],_0x379d49++,_0x379d49===_0x45e894['length']&&clearInterval(this['_titleAnimationInterval']);},0x1e);}['setIsMaximized'](_0xe02d4c){this['_view']['chatHeader']['isMaximized']=_0xe02d4c;}['_getLoadingMessage'](_0x46cf6e){return _0x46cf6e?_0x46cf6e['isWebSearchEnabled']&&_0x46cf6e['isReasoningEnabled']?i(this['context']['locale'],'AI_CHAT_FEED_LOADING_MESSAGE_WEBSEARCH_REASONING'):_0x46cf6e['isWebSearchEnabled']?i(this['context']['locale'],'AI_CHAT_FEED_LOADING_MESSAGE_WEBSEARCH'):_0x46cf6e['isReasoningEnabled']?i(this['context']['locale'],'AI_CHAT_FEED_LOADING_MESSAGE_REASONING'):i(this['context']['locale'],'AI_CHAT_FEED_LOADING_MESSAGE_REGULAR'):'';}['_getInputPlaceholder'](_0x50614f){return _0x50614f?_0x50614f['isWebSearchEnabled']&&_0x50614f['isReasoningEnabled']?i(this['context']['locale'],'AI_CHAT_PROMPT_INPUT_PLACEHOLDER_WEBSEARCH_REASONING'):_0x50614f['isWebSearchEnabled']?i(this['context']['locale'],'AI_CHAT_PROMPT_INPUT_PLACEHOLDER_WEBSEARCH'):_0x50614f['isReasoningEnabled']?i(this['context']['locale'],'AI_CHAT_PROMPT_INPUT_PLACEHOLDER_REASONING'):i(this['context']['locale'],'AI_CHAT_PROMPT_INPUT_PLACEHOLDER_REGULAR'):i(this['context']['locale'],'AI_CHAT_PROMPT_INPUT_PLACEHOLDER_REGULAR');}['populateSourceResourceBalloon'](_0x3abd1c,_0x548462,_0x1a7c94,_0x1b4f1b){this['_view']['populateSourceResourceBalloon'](_0x3abd1c,_0x548462,_0x1a7c94,_0x1b4f1b);}['closeSourceResourceBalloon'](_0x4181a5){this['_view']['closeSourceResourceBalloon'](_0x4181a5);}['focusPromptInput'](){this['_view']['chatControls']['focusPromptInput']();}['scrollFeedToSuggestion'](_0x46ad0b,_0x30c4b7){this['_view']['chatFeed']['scrollToSuggestion'](_0x46ad0b,_0x30c4b7);}['disableControls'](){this['_view']['chatControls']['isDisabled']=!0x0;}['enableControls'](){this['_view']['chatControls']['isDisabled']=!0x1;}}class Fi extends _0x3c987b{['sections'];constructor(_0x46e3d9,_0x564c20){super(_0x46e3d9),this['sections']=_0x564c20,this['items']['addMany'](this['sections']),this['extendTemplate']({'attributes':{'class':['ck-ai-chat-history__sections']}});}['filter'](_0xda3dc4){let _0x30b2d5=0x0,_0x160a9b=0x0;for(const _0xb005ea of this['sections']){const {resultsCount:_0x2c945b,totalItemsCount:_0x375c4f}=_0xb005ea['filter'](_0xda3dc4);_0x30b2d5+=_0x2c945b,_0x160a9b+=_0x375c4f;}return{'resultsCount':_0x30b2d5,'totalItemsCount':_0x160a9b};}}class Gi extends _0x2f4a78{['title'];['itemsViews'];['_itemsListView'];constructor(_0x3d27ef,{title:_0x208ee4,items:_0x27b570}){super(_0x3d27ef);const _0x54a6b9=this['bindTemplate'];this['set']('isVisible',!0x0),this['title']=_0x208ee4,this['itemsViews']=_0x27b570;const _0x1bc7bd=new _0x4dc179(_0x3d27ef);_0x1bc7bd['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-chat-history__section-title']},'children':[this['title']]}),this['_itemsListView']=new _0x3c987b(_0x3d27ef),this['_itemsListView']['items']['addMany'](this['itemsViews']),this['setTemplate']({'tag':'li','attributes':{'class':['ck-ai-chat-history__section',_0x54a6b9['if']('isVisible','ck-hidden',_0x2e8f2f=>!_0x2e8f2f)]},'children':[_0x1bc7bd,this['_itemsListView']]});}['filter'](_0x301b2a){const _0x48dc91=this['itemsViews']['length'];let _0x54421a=0x0;for(const _0x4aa829 of this['itemsViews']){if(_0x301b2a){const _0x559d6e=_0x4aa829['isMatching'](_0x301b2a);_0x4aa829['isVisible']=!!_0x559d6e,_0x4aa829['highlightText'](_0x301b2a);}else _0x4aa829['isVisible']=!0x0,_0x4aa829['highlightText'](null);_0x4aa829['isVisible']&&_0x54421a++;}return this['isVisible']=_0x54421a>0x0,{'resultsCount':_0x54421a,'totalItemsCount':_0x48dc91};}['getItem'](_0x50887a){return this['itemsViews']['find'](_0x49eaff=>_0x49eaff['id']===_0x50887a);}['removeItem'](_0x163a74){const _0x8b65a5=this['itemsViews']['indexOf'](_0x163a74);-0x1!==_0x8b65a5&&(this['itemsViews']['splice'](_0x8b65a5,0x1),this['_itemsListView']['items']['remove'](_0x163a74));}}class Pi extends _0x5d5923(_0x2f4a78){['id'];static ['LOADING_LABELS']={'remove':'AI_CHAT_HISTORY_LOADING_REMOVING','rename':'AI_CHAT_HISTORY_LOADING_RENAMING','pin':'AI_CHAT_HISTORY_LOADING_PINNING','unpin':'AI_CHAT_HISTORY_LOADING_UNPINNING'};['actions'];['mainContent'];['_titleView'];constructor(_0x3eb388,_0x5aaa10){super(_0x3eb388);const _0x19c3c0=this['bindTemplate'];this['set']('isEdit',!0x1),this['set']('isVisible',!0x0),this['set']('pinned',!!_0x5aaa10['pinned']),this['set']('loadingState',null),this['id']=_0x5aaa10['id'];const {title:_0x35ca87,createdAt:_0x41235c,active:_0x55e2dc=!0x1}=_0x5aaa10;this['_titleView']=new _0x6f5af8(),this['_titleView']['text']=_0x35ca87,this['_titleView']['extendTemplate']({'attributes':{'class':['ck-ai-chat-history__item-title']}});const _0x3a521f=this['_createCheckView'](),_0x1d46a2=this['_createPinButtonView'](_0x3eb388),_0x2ab562=this['_createMenuDropdownView'](),_0x1e13d5=this['_createEditInputView'](_0x3eb388,_0x35ca87),_0x132fc6=this['_createAcceptEditButtonView'](_0x3eb388,_0x1e13d5),_0x3519f5=this['_createCancelEditButtonView'](_0x3eb388,_0x1e13d5);this['actions']=this['createCollection'](),this['mainContent']=this['createCollection'](),this['mainContent']['add'](this['_titleView']),this['actions']['add'](_0x1d46a2),this['actions']['add'](_0x2ab562),this['on']('change:isEdit',(_0x244e77,_0x57d6ec,_0x3dc13c)=>{this['actions']['clear'](),this['mainContent']['clear'](),_0x3dc13c?(this['actions']['add'](_0x132fc6),this['actions']['add'](_0x3519f5),this['mainContent']['add'](_0x1e13d5),_0x1e13d5['element']['focus']()):(this['actions']['add'](_0x1d46a2),this['actions']['add'](_0x2ab562),this['mainContent']['add'](this['_titleView']));}),this['setTemplate']({'tag':'li','attributes':{'class':['ck-ai-chat-history__item',_0x55e2dc?'ck-ai-chat-history__item--active':'',_0x19c3c0['if']('isVisible','ck-hidden',_0x28ae20=>!_0x28ae20),_0x19c3c0['if']('isEdit','ck-ai-chat-history__item--edit')],'role':'listitem'},'children':[{'tag':'span','attributes':{'class':['ck-ai-chat-history__item-check-container']},'children':[{'tag':'div','attributes':{'class':['ck-ai-chat-history__item-check',_0x19c3c0['if']('loadingState','ck-hidden',_0x167c7e=>!!_0x167c7e)]},'children':_0x55e2dc?[_0x3a521f]:[]},{'tag':'div','attributes':{'class':['ck-ai-loader',_0x19c3c0['if']('loadingState','ck-hidden',_0x5219d6=>!_0x5219d6)]},'children':[this['_createSpinnerView']()]}]},{'tag':'div','attributes':{'class':['ck-ai-chat-history__item-row']},'children':[{'tag':'div','attributes':{'class':['ck-ai-chat-history__item-content']},'on':{'click':this['bindTemplate']['to']('click')},'children':[{'tag':'div','attributes':{'class':['ck-ai-chat-history__item-main-content']},'children':[{'tag':'div','attributes':{'class':['ck-ai-chat-history__item-title',_0x19c3c0['if']('loadingState','ck-hidden',_0x12a4e2=>!!_0x12a4e2)]},'children':this['mainContent']},{'tag':'div','attributes':{'class':['ck-ai-loader__text',_0x19c3c0['if']('loadingState','ck-hidden',_0x26ea13=>!_0x26ea13)]},'children':[{'text':_0x19c3c0['to']('loadingState',_0x5b219f=>_0x5b219f?i(this['locale'],Pi['LOADING_LABELS'][_0x5b219f]):'')}]}]},{'tag':'span','attributes':{'class':['ck-ai-chat-history__item-date']},'children':[_0x41235c]}]},{'tag':'div','attributes':{'class':['ck-ai-chat-history__item-actions']},'children':this['actions']}]}]}),this['on']('click',()=>{this['isEdit']||this['fire']('selectConversation',{'id':this['id']});});}['updateTitle'](_0x558746){this['_titleView']['text']=_0x190095(_0x558746);}['updateLoadingState'](_0x107789,_0x54e163){this['set']('loadingState',_0x54e163?_0x107789:null);}['_createCheckView'](){const _0x721e3e=new _0x4c8e3c();return _0x721e3e['set']({'content':_0x2de17e}),_0x721e3e;}['_createPinButtonView'](_0x249747){const _0x2cd1ee=new _0x177962(_0x249747);return _0x2cd1ee['set']({'label':i(_0x249747,'AI_CHAT_HISTORY_PIN_BUTTON'),'icon':_0xf039b4,'withText':!0x1,'tooltip':!0x0}),_0x2cd1ee['bind']('isOn')['to'](this,'pinned'),_0x2cd1ee['on']('execute',()=>{const _0x10f856=!this['pinned'];this['fire']('setConversationPinned',{'id':this['id'],'pinned':_0x10f856});}),_0x2cd1ee;}['_createMenuDropdownView'](){const _0x563d8d=_0x1353df(this['locale'],_0x149c0b),_0x5f0345=_0x563d8d['panelView']['children'];_0x563d8d['buttonView']['set']({'label':i(this['locale'],'AI_CHAT_HISTORY_SHOW_MORE_ITEMS'),'icon':_0x416014}),_0x563d8d['panelPosition']='sw';const _0x3926d0=new _0x177962(this['locale']);_0x3926d0['label']=i(this['locale'],'AI_CHAT_HISTORY_EDIT_NAME'),_0x3926d0['withText']=!0x0,_0x3926d0['on']('execute',()=>{this['isEdit']=!0x0;});const _0x20d49a=new _0x177962(this['locale']);_0x20d49a['label']=i(this['locale'],'AI_CHAT_HISTORY_REMOVE'),_0x20d49a['withText']=!0x0,_0x20d49a['on']('execute',()=>{this['showConfirm'](i(this['locale'],'AI_CHAT_HISTORY_REMOVE_CONFIRM'),this['element'])['then'](()=>{this['fire']('removeConversation',{'id':this['id']});});});const _0x598714=new _0x3c987b(this['locale']),_0x423116=new _0x2f4a78(this['locale']);_0x423116['children']['add'](_0x3926d0);const _0x2581fe=new _0x2f4a78(this['locale']);return _0x2581fe['children']['add'](_0x20d49a),_0x598714['items']['addMany']([_0x423116,_0x2581fe]),_0x5f0345['add'](_0x598714),_0x563d8d;}['_createEditInputView'](_0xcd4db5,_0x5a4275){const _0x38402e=new _0x9c8d7d(_0xcd4db5),_0x3c3928=_0x38402e['bindTemplate'];return _0x38402e['value']=_0x5a4275,_0x38402e['extendTemplate']({'on':{'keydown':_0x3c3928['to'](_0x23a829=>{'Enter'==_0x23a829['key']&&this['_commitEditInputValue'](_0x38402e);})}}),_0x38402e;}['_createAcceptEditButtonView'](_0x582e93,_0x55919c){const _0x51cea1=new _0x177962(_0x582e93);return _0x51cea1['set']({'icon':_0x2de17e,'withText':!0x1,'tooltip':i(_0x582e93,'AI_CHAT_HISTORY_ACCEPT')}),_0x51cea1['extendTemplate']({'attributes':{'class':['ck-confirm-view-submit']}}),_0x51cea1['on']('execute',()=>{this['_commitEditInputValue'](_0x55919c);}),_0x51cea1;}['_commitEditInputValue'](_0x1be7de){const _0xb74917=_0x1be7de['element']['value']||'';this['_titleView']['text']=_0xb74917,this['isEdit']=!0x1,this['fire']('editConversationTitle',{'id':this['id'],'title':_0xb74917});}['_createCancelEditButtonView'](_0x3f88e6,_0x3489d3){const _0xb75379=new _0x177962(_0x3f88e6);return _0xb75379['set']({'icon':_0x2ae09c,'withText':!0x1,'tooltip':i(_0x3f88e6,'AI_CHAT_HISTORY_CANCEL')}),_0xb75379['extendTemplate']({'attributes':{'class':['ck-confirm-view-cancel']}}),_0xb75379['on']('execute',()=>{this['isEdit']=!0x1,_0x3489d3['value']=this['_titleView']['text']||'',this['fire']('edit:cancel');}),_0xb75379;}['_createSpinnerView'](){const _0x3ab954=new Te('tiny');return _0x3ab954['isVisible']=!0x0,_0x3ab954;}['isMatching'](_0x3b5f6c){return this['_titleView']&&'string'==typeof this['_titleView']['text']&&this['_titleView']['text']['match'](_0x3b5f6c)?{'title':!0x0}:null;}['highlightText'](_0x56ad31){this['_titleView']['highlightText'](_0x56ad31);}}class vt extends _0x4dc179{['searchView'];['errorView'];['skeletonView'];['emptyView'];['sectionsView'];['resizeButton'];constructor(_0x4ccec0,_0x268c99){super(_0x4ccec0),this['set']('hasItems',!0x1),this['set']('isLoading',!0x0),this['set']('errorMessage',''),this['set']('isMaximized',!0x1),this['set']('isSearchViewVisible',!0x1),this['set']('isEmptyViewVisible',!0x1);const _0x1190f8=new _0x2f6d58(_0x4ccec0,{'label':i(_0x4ccec0,'AI_CHAT_HISTORY_HEADING'),'icon':Ht,'class':'ck-ai-header\x20ck-ai-header_history'});_0x268c99&&(this['resizeButton']=ks(_0x4ccec0,this),_0x1190f8['children']['add'](this['resizeButton'])),this['sectionsView']=new Fi(_0x4ccec0,[]),this['sectionsView']['delegate'](...Ui)['to'](this),this['errorView']=this['_createErrorView'](),this['skeletonView']=this['_createSkeletonView'](),this['emptyView']=this['_createEmptyStateView'](),this['searchView']=this['_createSearchView'](),this['on']('change:isLoading',()=>this['_updateViewVisibility']()),this['on']('change:hasItems',()=>this['_updateViewVisibility']()),this['on']('change:errorMessage',()=>this['_updateViewVisibility']()),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-reset_all','ck-ai-chat-history','ck-rounded-corners'],'dir':'ltr'},'children':[_0x1190f8,{'tag':'div','attributes':{'class':['ck-ai-chat-history__content']},'children':[this['skeletonView'],this['errorView'],this['emptyView'],this['searchView']]}]});}['_updateViewVisibility'](){this['isSearchViewVisible']=!this['isLoading']&&this['hasItems']&&!this['errorMessage'],this['isEmptyViewVisible']=!this['isLoading']&&!this['hasItems']&&!this['errorMessage'];}['_createSearchView'](){const _0x3c3e2b=new _0x8fc48f(this['locale'],{'filteredView':this['sectionsView'],'queryView':{'label':i(this['locale'],'AI_CHAT_HISTORY_SEARCH_LABEL')},'infoView':{'text':{'notFound':{'primary':_0x1f19f1=>i(this['locale'],'AI_CHAT_HISTORY_SEARCH_NOT_FOUND_PRIMARY',_0x1f19f1),'secondary':i(this['locale'],'AI_CHAT_HISTORY_SEARCH_NOT_FOUND_SECONDARY')}}}});return _0x3c3e2b['on']('render',()=>{this['searchView']['children']['add'](this['errorView'],0x1);}),_0x3c3e2b['extendTemplate']({'attributes':{'class':[this['bindTemplate']['if']('isSearchViewVisible','ck-hidden',_0x1f821a=>!_0x1f821a)]}}),_0x3c3e2b;}['_createSkeletonView'](){const _0x101848=new be(this['locale'],Le['aiHistory']);return _0x101848['extendTemplate']({'attributes':{'class':[this['bindTemplate']['if']('isLoading','ck-hidden',_0x37138a=>!_0x37138a)]}}),_0x101848;}['_createErrorView'](){const _0x18bf6b=new _0x4dc179(this['locale']),_0x197ff3=new _0x177962(this['locale']);return _0x197ff3['set']({'withText':!0x1,'icon':_0x2ae09c,'class':'ck-ai-chat-error__dismiss-button'}),_0x197ff3['bind']('isVisible')['to'](this,'hasItems',_0x57c69a=>!!_0x57c69a),_0x197ff3['on']('execute',()=>{this['errorMessage']='';}),_0x18bf6b['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-chat-error',this['bindTemplate']['if']('errorMessage','ck-hidden',_0x17deb6=>!_0x17deb6)]},'children':[{'tag':'p','children':[{'text':this['bindTemplate']['to']('errorMessage')}]},_0x197ff3]}),_0x18bf6b;}['_createEmptyStateView'](){const _0x269925=new _0x177962(this['locale']);_0x269925['set']({'label':i(this['locale'],'AI_CHAT_LABEL_NEW_CHAT'),'withText':!0x0,'icon':_0xa4afbd,'class':'ck-ai-chat__start-conversation'}),_0x269925['on']('execute',()=>{this['fire']('openChat');});const _0x28a266=new _0x4dc179(this['locale']);return _0x28a266['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-chat-history__empty',this['bindTemplate']['if']('isEmptyViewVisible','ck-hidden',_0x4becf6=>!_0x4becf6)]},'children':[{'tag':'p','attributes':{'class':['ck-ai-chat-history__empty-message']},'children':[i(this['locale'],'AI_CHAT_HISTORY_EMPTY_MESSAGE')]},_0x269925]}),_0x28a266;}['_createListItemViews'](_0x2b7215,_0x2c38a8){const _0x5d393b=[];for(const _0x3eddf5 of _0x2b7215){const _0x284693=new Pi(_0x2c38a8,_0x3eddf5);_0x284693['delegate'](...Ui)['to'](this),_0x5d393b['push'](_0x284693);}return _0x5d393b;}['updateHistoryItemsWithCategories'](_0x503aec){const _0x129a97=this['locale']||'en',_0x2fbdc2=[];for(const _0x2502f6 of _0x503aec){const _0xe802ce=this['_createListItemViews'](_0x2502f6['items'],_0x129a97);_0x2fbdc2['push'](new Gi(_0x129a97,{'title':_0x2502f6['title'],'items':_0xe802ce}));}this['sectionsView']['sections']=_0x2fbdc2,this['sectionsView']['items']['clear'](),this['sectionsView']['items']['addMany'](_0x2fbdc2),this['hasItems']=_0x503aec['some'](_0x4c8d71=>_0x4c8d71['items']['length']>0x0),this['_refreshSearch']();}['removeHistoryItem'](_0x5448ab){for(const _0xbc06f1 of this['sectionsView']['sections']){const _0x43e40a=_0xbc06f1['getItem'](_0x5448ab);if(_0x43e40a){if(_0xbc06f1['removeItem'](_0x43e40a),0x0===_0xbc06f1['itemsViews']['length']){const _0x50def2=this['sectionsView']['sections']['indexOf'](_0xbc06f1);-0x1!==_0x50def2&&(this['sectionsView']['sections']['splice'](_0x50def2,0x1),this['sectionsView']['items']['remove'](_0xbc06f1));}this['hasItems']=this['sectionsView']['sections']['length']>0x0,this['_refreshSearch']();break;}}}['updateItemTitle'](_0x3b19d7,_0x5743ea){for(const _0x2d05be of this['sectionsView']['sections']){const _0x2e66cd=_0x2d05be['getItem'](_0x3b19d7);if(_0x2e66cd){_0x2e66cd['updateTitle'](_0x5743ea);break;}}}['updateItemLoadingState'](_0x123d30,_0xd9ba88,_0x2382f5){for(const _0x4c8afe of this['sectionsView']['sections']){const _0x1e1a55=_0x4c8afe['getItem'](_0x123d30);if(_0x1e1a55){_0x1e1a55['updateLoadingState'](_0xd9ba88,_0x2382f5);break;}}}['_refreshSearch'](){if(this['hasItems']){const _0x45764f=this['searchView']['queryView']['fieldView']?.['element']?.['value']||'';this['searchView']['search'](_0x45764f);}}}const Ui=['showConversationHistory','removeConversation','editConversationTitle','setConversationPinned','selectConversation','openChat','resizeTabs'];class xt extends _0x98dbd{static get['requires'](){return[rt];}['_historyView'];static get['pluginName'](){return'AIChatHistoryUI';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x503d4a){super(_0x503d4a);const _0x4e019c=this['context']['plugins']['get']('AITabs');this['_historyView']=new vt(this['context']['locale'],_0x4e019c['showResizeButton']),this['_historyView']['delegate'](...Ui)['to'](this),_0x4e019c['view']['addTab']({'id':'history','buttonLabel':i(this['context']['locale'],'AI_CHAT_HISTORY_HEADING'),'buttonIcon':Ht,'order':0x0,'content':this['_historyView']});}['removeHistoryItem'](_0xe09301){this['_historyView']['removeHistoryItem'](_0xe09301);}['updateItems'](_0x2351ce){this['_historyView']['updateHistoryItemsWithCategories'](_0x2351ce);}['updateItemTitle'](_0x2114b9,_0x541632){this['_historyView']['updateItemTitle'](_0x2114b9,_0x541632);}['updateItemLoadingState'](_0x38b7bf,_0x286be3,_0x2025c3){this['_historyView']['updateItemLoadingState'](_0x38b7bf,_0x286be3,_0x2025c3);}['setLoadingSkeleton'](_0x57d18f){this['_historyView']['isLoading']=_0x57d18f;}['showError'](_0x1e165){this['_historyView']['errorMessage']=_0x1e165;}['hideError'](){this['_historyView']['errorMessage']='';}['setIsMaximized'](_0x5b91fe){this['_historyView']['isMaximized']=_0x5b91fe;}}class De extends ts(){['id'];['createdAt'];constructor({id:_0x30c642,title:_0x32bb7a,createdAt:_0x1f0fa9,updatedAt:_0x2e4ab8,pinned:_0x5a2e1d}){super(),this['id']=_0x30c642,this['createdAt']=new Date(_0x1f0fa9),this['set']('title',_0x32bb7a),this['set']('updatedAt',_0x2e4ab8?new Date(_0x2e4ab8):null),this['set']('pinned',_0x5a2e1d||!0x1);}['updateTitle'](_0x387550){this['set']('title',_0x190095(_0x387550)),this['updatedAt']=new Date();}['updatePinned'](_0x243f0b){this['set']('pinned',_0x243f0b),this['updatedAt']=new Date();}}class Tt extends _0x44d7d3(){['items']=[];['connector'];['group'];constructor({connector:_0x1f40d2,group:_0x54e5c9}){super(),this['connector']=_0x1f40d2,this['group']=_0x54e5c9;}async['init'](){try{const _0x2b57b5=this['connector']['fetchConversations'](this['group']),_0xd3e2ad=await _0x2b57b5['getConversations']();this['loadItems'](_0xd3e2ad);}catch(_0x3b82f7){this['fire']('error',{'error':_0x3b82f7,'operation':'init'});}}['addItem'](_0x3fd3a1){this['items']['push'](_0x3fd3a1);}async['removeItem'](_0x53bcd3){const _0x192b7d=this['items']['findIndex'](_0x25620a=>_0x25620a['id']===_0x53bcd3);if(-0x1===_0x192b7d)return!0x1;try{return await this['connector']['deleteConversation'](_0x53bcd3)['execute'](),this['items']['splice'](_0x192b7d,0x1),this['fire']('itemRemoved',{'itemId':_0x53bcd3}),!0x0;}catch(_0x5ff280){return this['fire']('error',{'error':_0x5ff280,'operation':'removeItem','itemId':_0x53bcd3}),!0x1;}}['getItem'](_0x163594){return this['items']['find'](_0x4e66c9=>_0x4e66c9['id']===_0x163594);}async['updateItemTitle'](_0x28cdf2,_0x16c51c){const _0x49b984=this['getItem'](_0x28cdf2);if(!_0x49b984)return!0x1;try{return await this['connector']['updateConversation'](_0x28cdf2,{'title':_0x16c51c})['getResult'](),_0x49b984['updateTitle'](_0x16c51c),this['fire']('itemUpdated',{'itemId':_0x28cdf2,'updates':{'title':_0x16c51c}}),!0x0;}catch(_0x99698d){return this['fire']('error',{'error':_0x99698d,'operation':'updateItemTitle','itemId':_0x28cdf2}),!0x1;}}async['updateItemPinned'](_0x15ff64,_0x4a3100){const _0x3db3d5=this['getItem'](_0x15ff64);if(!_0x3db3d5)return!0x1;try{return await this['connector']['updateConversation'](_0x15ff64,{'pinned':_0x4a3100})['getResult'](),_0x3db3d5['updatePinned'](_0x4a3100),this['fire']('itemUpdated',{'itemId':_0x15ff64,'updates':{'pinned':_0x4a3100}}),!0x0;}catch(_0x41d62c){return this['fire']('error',{'error':_0x41d62c,'operation':'updateItemPinned','itemId':_0x15ff64}),!0x1;}}['loadItems'](_0x533f9c){try{this['items']=[],_0x533f9c['map'](_0x25d5b6=>{this['addItem'](new De(_0x25d5b6));}),this['fire']('itemsLoaded',{'items':[...this['items']]});}catch(_0x569a9f){this['fire']('error',{'error':_0x569a9f,'operation':'loadItems'});}}['getItems'](_0x12b81c={}){const _0x3138f8=void 0x0!==_0x12b81c['pinned']&&_0x12b81c['pinned'],_0x140558=_0x12b81c['from']?new Date(_0x12b81c['from']['getFullYear'](),_0x12b81c['from']['getMonth'](),_0x12b81c['from']['getDate']()):null,_0x184e60=_0x12b81c['to']?new Date(_0x12b81c['to']['getFullYear'](),_0x12b81c['to']['getMonth'](),_0x12b81c['to']['getDate']()):null;return this['items']['filter'](_0x6098ad=>{if(_0x6098ad['pinned']!==_0x3138f8)return!0x1;if(_0x184e60){const _0x58df71=new Date(_0x6098ad['createdAt']['getFullYear'](),_0x6098ad['createdAt']['getMonth'](),_0x6098ad['createdAt']['getDate']());return _0x140558?_0x140558['getTime']()===_0x184e60['getTime']()?_0x58df71['getTime']()===_0x140558['getTime']():_0x58df71<_0x184e60&&_0x58df71>=_0x140558:_0x58df71<_0x184e60;}return!0x0;});}}class jt extends _0x98dbd{['_aiConnector'];['_aiChatHistoryUi'];['_aiChatController'];static get['requires'](){return[S,et,xt,rt];}static get['pluginName'](){return'AIChatHistoryController';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}['init'](){this['_aiConnector']=this['context']['plugins']['get'](S),this['_aiChatHistoryUi']=this['context']['plugins']['get'](xt),this['_aiChatController']=this['context']['plugins']['get'](et);const _0x3aff55=this['context']['plugins']['get'](rt),_0x263ac9=this['_aiChatController']['getGroupId']();this['history']=new Tt({'connector':this['_aiConnector'],'group':_0x263ac9}),this['listenTo'](this['_aiChatHistoryUi'],'removeConversation',(_0x11e257,_0x38b9eb)=>{this['_setItemLoading'](_0x38b9eb['id'],'remove'),this['_handleRemove'](_0x38b9eb['id']);}),this['listenTo'](this['_aiChatHistoryUi'],'editConversationTitle',(_0x1d22c9,_0x3efd12)=>{this['_setItemLoading'](_0x3efd12['id'],'rename'),this['_handleEditTitle'](_0x3efd12['id'],_0x3efd12['title']);}),this['listenTo'](this['history'],'itemUpdated',(_0x293425,_0x4e8b02)=>{void 0x0!==_0x4e8b02['updates']['title']&&this['_aiChatHistoryUi']['updateItemTitle'](_0x4e8b02['itemId'],_0x4e8b02['updates']['title']),void 0x0!==_0x4e8b02['updates']['pinned']&&this['_updateHistoryItemsUI'](),this['_clearItemLoading'](_0x4e8b02['itemId']);}),this['listenTo'](this['history'],'itemRemoved',(_0x43500f,_0x4a9412)=>{this['_aiChatController']['handleRemovedConversation'](_0x4a9412['itemId']),this['_aiChatHistoryUi']['removeHistoryItem'](_0x4a9412['itemId']),this['_clearItemLoading'](_0x4a9412['itemId']);}),this['listenTo'](this['history'],'itemsLoaded',()=>{this['_updateHistoryItemsUI']();}),this['listenTo'](this['history'],'error',(_0x4f0baf,_0x44500b)=>{this['_handleHistoryErrorUI'](_0x44500b['error'],_0x44500b['operation'],_0x44500b['itemId']);}),this['listenTo'](this['_aiChatHistoryUi'],'selectConversation',(_0x12879b,_0x277259)=>{this['_handleSelectConversation'](_0x277259['id']);}),this['listenTo'](this['_aiChatHistoryUi'],'setConversationPinned',(_0x4d940b,_0xa8dfef)=>{const _0x2fff84=_0xa8dfef['pinned']?'pin':'unpin';this['_setItemLoading'](_0xa8dfef['id'],_0x2fff84),this['_handleTogglePin'](_0xa8dfef['id'],_0xa8dfef['pinned']);}),this['listenTo'](this['_aiChatHistoryUi'],'openChat',()=>{_0x3aff55['view']['activateTab']('chat');}),this['listenTo'](this['_aiChatController'],'change:activeConversation',()=>{this['_updateHistoryItemsUI']();}),_0x3aff55['view']['on']('activateTab:history',()=>{this['_showConversationHistory']();}),this['listenTo'](_0x3aff55,'resizedTabs',(_0x4077e4,_0x4982af)=>{this['_setIsMaximized'](_0x4982af);}),this['listenTo'](this['_aiChatHistoryUi'],'resizeTabs',()=>{_0x3aff55['resize']();});}async['_handleEditTitle'](_0x1aa19e,_0x29eb64){await this['history']['updateItemTitle'](_0x1aa19e,_0x29eb64);}async['_handleTogglePin'](_0x15563b,_0xf570ee){await this['history']['updateItemPinned'](_0x15563b,_0xf570ee);}async['_handleRemove'](_0x2a16cb){await this['history']['removeItem'](_0x2a16cb);}async['_handleSelectConversation'](_0x10b965){await this['_aiChatController']['loadConversation'](_0x10b965);}async['_showConversationHistory'](){this['_aiChatHistoryUi']['showError'](''),this['_aiChatHistoryUi']['setLoadingSkeleton'](!0x0),await this['history']['init'](),this['_aiChatHistoryUi']['setLoadingSkeleton'](!0x1);}['_updateHistoryItemsUI'](){const _0x1208fa=this['_aiChatController']['activeConversation']?.['id'],_0x444da3=this['_getCategorizedItems']()['map'](_0x5292a6=>({'title':_0x5292a6['title'],'items':_0x5292a6['items']['map'](_0x1aac74=>({'id':_0x1aac74['id'],'title':_0x1aac74['title']||i(this['context']['locale'],'AI_CHAT_UNTITLED_CONVERSATION'),'createdAt':new Date(_0x1aac74['createdAt'])['toLocaleDateString'](),'active':_0x1aac74['id']===_0x1208fa,'pinned':_0x1aac74['pinned']}))}));this['_aiChatHistoryUi']['updateItems'](_0x444da3);}['_setItemLoading'](_0x1de52a,_0x1ec04d){this['_aiChatHistoryUi']['updateItemLoadingState'](_0x1de52a,_0x1ec04d,!0x0);}['_clearItemLoading'](_0x1b009e){this['_aiChatHistoryUi']['updateItemLoadingState'](_0x1b009e,null,!0x1);}['_handleHistoryErrorUI'](_0x202aaa,_0x446ec4,_0xb37416){const _0x37bae5=this['_generateErrorMessage'](_0x446ec4,_0xb37416);this['_aiChatHistoryUi']['showError'](_0x37bae5),_0xb37416&&this['_clearItemLoading'](_0xb37416),this['_aiChatHistoryUi']['setLoadingSkeleton'](!0x1);}['_generateErrorMessage'](_0x31b7b7,_0x5d4de0){const _0x1c22a6=_0x5d4de0?this['history']['getItem'](_0x5d4de0):null,_0x3a7af5=_0x1c22a6?.['title']||i(this['context']['locale'],'AI_CHAT_UNTITLED_CONVERSATION');switch(_0x31b7b7){case'updateItemTitle':return i(this['context']['locale'],'AI_CHAT_HISTORY_ERROR_UPDATE_TITLE',_0x3a7af5);case'updateItemPinned':{const _0x392f8=i(this['context']['locale'],_0x1c22a6?.['pinned']?'AI_CHAT_HISTORY_UNPIN_ACTION':'AI_CHAT_HISTORY_PIN_ACTION');return i(this['context']['locale'],'AI_CHAT_HISTORY_ERROR_UPDATE_PINNED',[_0x392f8,_0x3a7af5]);}case'removeItem':return i(this['context']['locale'],'AI_CHAT_HISTORY_ERROR_REMOVE_ITEM',_0x3a7af5);case'init':case'loadItems':return i(this['context']['locale'],'AI_CHAT_HISTORY_ERROR_LOAD_ITEMS');default:return i(this['context']['locale'],'AI_CHAT_HISTORY_ERROR_GENERIC');}}['_getCategorizedItems'](){const _0x4e367a=new Date(),_0x4250a0=new Date(_0x4e367a['getFullYear'](),_0x4e367a['getMonth'](),_0x4e367a['getDate']()),_0x3ce8a3=new Date(_0x4250a0);_0x3ce8a3['setDate'](_0x3ce8a3['getDate']()-0x1);const _0xa64c06=new Date(_0x4250a0);_0xa64c06['setDate'](_0xa64c06['getDate']()-0xe);const _0x18d50b=this['history']['getItems']({'pinned':!0x0}),_0x5a4e57=this['history']['getItems']({'from':_0x4250a0,'to':_0x4250a0}),_0x28c2f1=this['history']['getItems']({'from':_0x3ce8a3,'to':_0x3ce8a3}),_0xf9649a=this['history']['getItems']({'from':_0xa64c06,'to':_0x3ce8a3}),_0x3d48af=this['history']['getItems']({'to':_0xa64c06}),_0x2d450a=[];return _0x18d50b['length']>0x0&&_0x2d450a['push']({'title':i(this['context']['locale'],'AI_CHAT_HISTORY_CATEGORY_PINNED'),'items':_0x18d50b}),_0x5a4e57['length']>0x0&&_0x2d450a['push']({'title':i(this['context']['locale'],'AI_CHAT_HISTORY_CATEGORY_TODAY'),'items':_0x5a4e57}),_0x28c2f1['length']>0x0&&_0x2d450a['push']({'title':i(this['context']['locale'],'AI_CHAT_HISTORY_CATEGORY_YESTERDAY'),'items':_0x28c2f1}),_0xf9649a['length']>0x0&&_0x2d450a['push']({'title':i(this['context']['locale'],'AI_CHAT_HISTORY_CATEGORY_LAST_14_DAYS'),'items':_0xf9649a}),_0x3d48af['length']>0x0&&_0x2d450a['push']({'title':i(this['context']['locale'],'AI_CHAT_HISTORY_CATEGORY_LATER'),'items':_0x3d48af}),_0x2d450a;}['_setIsMaximized'](_0xaa21d3){this['_aiChatHistoryUi']['setIsMaximized'](_0xaa21d3);}}class at extends _0x98dbd{static get['requires'](){return[jt,xt];}static get['pluginName'](){return'AIChatHistory';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}}class xa extends _0x98dbd{static get['requires'](){return[et,B,it,at];}static get['pluginName'](){return'AIChat';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x7ce20f){super(_0x7ce20f),this['context']['config']['define']('ai.chat.context',{'document':{'enabled':!0x0},'urls':{'enabled':!0x0},'files':{'enabled':!0x0},'sources':[]}),this['context']['config']['define']('ai.chat.models',{'defaultModelId':void 0x0,'modelSelectorAlwaysVisible':!0x0,'displayedModels':void 0x0});}async['addSelectionToChatContext'](){await this['context']['plugins']['get'](et)['addSelectionToChatContext']();}async['startConversation'](){await this['context']['plugins']['get'](et)['startConversation']();}async['sendMessage']({message:_0x3de0bd,quickActionData:_0x9e5db8}){await this['context']['plugins']['get'](et)['sendMessage']({'message':_0x3de0bd,'quickActionData':_0x9e5db8});}['removeSelectionFromChatContext'](){this['context']['plugins']['get'](et)['removeSelectionFromChatContext']();}['focusPromptInput'](){this['context']['plugins']['get'](et)['focusPromptInput']();}}class io extends Nt{constructor(_0x2a678e){super(_0x2a678e);const _0x255139=_0x2a678e['plugins']['get']('AITabs')['view'];this['bind']('value')['to'](_0x255139,'isVisible'),this['isEnabled']=!0x0;}['execute'](){const _0x5e2894=this['editor']['plugins']['get']('AITabs')['view'];_0x5e2894['isVisible']=!_0x5e2894['isVisible'];}}class Pt extends _0x3af82b{static get['requires'](){return[rt];}static get['pluginName'](){return'AIToggleButtonUI';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}['init'](){const _0x366ae2=this['editor'];_0x366ae2['commands']['add']('toggleAi',new io(_0x366ae2)),_0x366ae2['ui']['componentFactory']['add']('toggleAi',()=>{const _0x310398=this['_createAIUIButton'](_0x177962);return _0x310398['set']({'tooltip':!0x0,'class':'ck-ai-toggle-button'}),_0x310398;}),_0x366ae2['ui']['componentFactory']['add']('menuBar:toggleAi',()=>{const _0x118fe7=this['_createAIUIButton'](_0x3b859b);return _0x118fe7['set']({'role':'menuitemcheckbox'}),_0x118fe7;});}['_createAIUIButton'](_0x4a0c7a){const _0x16bb53=this['editor'],_0x463424=_0x16bb53['commands']['get']('toggleAi'),_0x2990c1=new _0x4a0c7a(_0x16bb53['locale']);return _0x2990c1['set']({'label':i(_0x16bb53['locale'],'AI_TOGGLE_BUTTON_LABEL'),'icon':Ut,'isToggleable':!0x0}),_0x2990c1['bind']('isEnabled')['to'](_0x463424),_0x2990c1['bind']('isOn')['to'](_0x463424,'value',_0xa297f3=>!!_0xa297f3),this['listenTo'](_0x2990c1,'execute',()=>{_0x463424['execute']();}),_0x2990c1;}}class La extends _0x3af82b{static get['requires'](){return[Pt];}static get['pluginName'](){return'AIEditorIntegration';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}}function zt(_0x2a5719,_0x1bbfd4,_0x40401f=!0x1,_0x91df64=!0x0,_0x3316c3=!0x0){return()=>{const _0x209c30=_0x2a5719['locale'],_0x386845=new _0x177962(_0x209c30),_0x7cfd18=_0x386845['bindTemplate'];_0x3316c3&&_0x386845['extendTemplate']({'on':{'mouseenter':_0x7cfd18['to'](()=>{_0x386845['focus']();})}});const _0xd173b=_0x1bbfd4['icon']??_0x1bbfd4['parent']?.['icon'];return _0x386845['set']({'label':_0x1bbfd4['displayedPrompt'],'withText':_0x40401f,'role':'menuitem','icon':_0x91df64?_0xd173b??_0x159ea5:void 0x0,'tooltip':!_0x40401f,'class':'ck-ai-quick-actions-button'}),_0x386845['on']('execute',()=>{_0x2a5719['editing']['view']['focus'](),_0x2a5719['commands']['execute']('aiQuickAction',_0x1bbfd4);}),_0x386845;};}const Ls='menu',Ns='menuitem';class ro extends _0x4dc179{['_bodyCollection'];['optionsListView'];['focusTracker'];['keystrokes'];['_focusables'];['focusCycler'];['_openNestedPanels']=new Set();constructor(_0x25b693,_0x138ca9,_0x2f7265,_0x317c6d){const _0x2292b4=_0x25b693['locale'];super(_0x2292b4),this['_bodyCollection']=_0x317c6d;const _0xed4c97=this['_createListItems'](_0x25b693,_0x138ca9,_0x2f7265);this['optionsListView']=new _0x3c987b(_0x2292b4),this['optionsListView']['role']=Ls,this['optionsListView']['items']['addMany'](_0xed4c97),this['focusTracker']=new _0x9668c0(),this['keystrokes']=new _0x514fee(),this['_focusables']=_0xed4c97,this['focusCycler']=new _0x3c97a0({'focusables':this['_focusables'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes']}),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-reset_all','ck-ai-quick-actions','ck-rounded-corners'],'dir':_0x2292b4['uiLanguageDirection']},'children':[this['optionsListView']]});}['_createListItems'](_0x4fd839,_0xaaeeed,_0x4a4e69){const _0x3bd1cd=new _0x3b5cfc();return _0xaaeeed['forEach'](_0x559174=>{'actions'in _0x559174?_0x3bd1cd['add'](this['_createActionGroupButton'](_0x4fd839,_0x559174,_0x4a4e69)):_0x3bd1cd['add'](this['_createActionButton'](_0x4fd839,_0x559174));}),_0x3bd1cd;}['_createActionButton'](_0x4f1239,_0x2dad9f){const _0x178c69=new _0x2f4a78(this['locale']),_0x4312e7=zt(_0x4f1239,_0x2dad9f,!0x0,void 0x0!==_0x2dad9f['icon'])();return _0x178c69['children']['add'](_0x4312e7),_0x178c69;}['_createActionGroupButton'](_0x22701f,_0x269315,_0x38c580){const _0x40d920=new _0x2f4a78(this['locale']),_0x4ca89f=new _0x403066(this['locale']),_0xde1407=_0x4ca89f['bindTemplate'],_0x1eaac8='rtl'===_0x38c580['locale']['uiLanguageDirection']?'ArrowRight':'ArrowLeft',_0x15ae82=this['_createGroupActionsList'](_0x22701f,_0x269315['actions'],_0x38c580);_0x4ca89f['set']({'label':_0x269315['label'],'withText':!0x0,'role':Ns,'icon':_0x269315['icon']??_0x159ea5}),_0x4ca89f['extendTemplate']({'on':{'mouseenter':_0xde1407['to'](()=>{_0x4ca89f['focus']();})}});const _0x9a446=new _0x4ce253(this['locale']);return _0x9a446['extendTemplate']({'attributes':{'class':['ck','ck-reset_all','ck-ai-quick-actions-group-panel','ck-dropdown-menu__nested-menu__panel']},'on':{'keydown':_0xde1407['to'](_0x4cf380=>{_0x4cf380['key']==_0x1eaac8&&(_0x4ca89f['focus'](),this['_hideNestedPanel'](_0x9a446));})}}),_0x4ca89f['bind']('isOn')['to'](_0x9a446,'isVisible'),this['_bodyCollection']['add'](_0x9a446),_0x9a446['content']['add'](_0x15ae82),this['_setupGroupMenuBehavior'](_0x4ca89f,_0x9a446),_0x40d920['children']['add'](_0x4ca89f),_0x40d920;}['_createGroupActionsList'](_0x159cc1,_0xbadfd4,_0x1e6504){const _0x5f5d00=new _0x3c987b(this['locale']);return _0x5f5d00['extendTemplate']({'attributes':{'class':['ck','ck-reset_all','ck-ai-quick-actions-group-list','ck-dropdown-menu-list']}}),_0xbadfd4['forEach'](_0xcb5732=>{const _0x137a83=new _0x2f4a78(this['locale']),_0x2ca962=zt(_0x159cc1,_0xcb5732,!0x0,!0x1)();_0x137a83['children']['add'](_0x2ca962),_0x1e6504['focusTracker']['add'](_0x2ca962),_0x5f5d00['items']['add'](_0x137a83);}),_0x5f5d00;}['_setupGroupMenuBehavior'](_0x16b4b4,_0x54f039){const _0x5a329f=_0x16b4b4['bindTemplate'],_0x48c28a='rtl'===_0x16b4b4['locale']['uiLanguageDirection']?'ArrowLeft':'ArrowRight';_0x16b4b4['extendTemplate']({'attributes':{'class':['ck-ai-quick-actions-group-button']},'on':{'mouseenter':_0x5a329f['to'](()=>{this['_showNestedPanel'](_0x54f039,_0x16b4b4);}),'mouseleave':_0x5a329f['to'](_0x23dd6e=>{const _0x1ae069=_0x23dd6e['relatedTarget'];this['_isMovingToNestedMenu'](_0x1ae069,_0x54f039)||this['_hideNestedPanel'](_0x54f039);}),'keydown':_0x5a329f['to'](_0x2a5c7d=>{_0x2a5c7d['key']==_0x48c28a&&(this['_showNestedPanel'](_0x54f039,_0x16b4b4),_0x54f039['content']['get'](0x0)['focus']());})}}),_0x54f039['on']('render',()=>{_0x54f039['element']?.['addEventListener']('mouseleave',_0x143832=>{const _0x4136d3=_0x143832['relatedTarget'];_0x16b4b4['element']?.['contains'](_0x4136d3)||this['_isMovingToNestedMenu'](_0x4136d3,_0x54f039)||this['_hideNestedPanel'](_0x54f039);});});}['_showNestedPanel'](_0x4e286e,_0x4aeabb){this['_openNestedPanels']['forEach'](_0x1979c7=>{_0x1979c7!==_0x4e286e&&_0x1979c7['isVisible']&&_0x1979c7['hide']();}),_0x4e286e['show'](),_0x4e286e['pin']({'positions':[_0x65820d['eastSouth']],'target':_0x4aeabb['element'],'fitInViewport':!0x0}),this['_openNestedPanels']['add'](_0x4e286e);}['_hideNestedPanel'](_0x169cb9){_0x169cb9['hide'](),this['_openNestedPanels']['delete'](_0x169cb9);}['_hideAllNestedPanels'](){this['_openNestedPanels']['forEach'](_0x4fa639=>_0x4fa639['hide']()),this['_openNestedPanels']['clear']();}['_isMovingToNestedMenu'](_0x435648,_0x6cfc56){if(!_0x435648)return!0x1;if(_0x6cfc56['element']?.['contains'](_0x435648))return!0x0;const _0x56ced0=_0x435648;return _0x56ced0['closest']&&(null!==_0x56ced0['closest']('.ck-ai-quick-actions-group-panel')||null!==_0x56ced0['closest']('.ck-ai-quick-actions-group-list')||null!==_0x56ced0['closest']('.ck-ai-quick-actions-group-button'));}['destroy'](){this['_hideAllNestedPanels'](),this['_bodyCollection']['detachFromDom'](),super['destroy']();}['focus'](){this['optionsListView']['focus']();}}function qt(_0x2cfa3e,_0x3b4744,_0x149501,_0x34c1e5){return()=>{const _0xbc74aa=_0x2cfa3e['locale'],_0x44d0d0=_0x1353df(_0xbc74aa);_0x44d0d0['buttonView']['set']({'icon':_0x149501['icon']??_0x159ea5,'label':_0x149501['label'],'tooltip':!0x0}),_0x44d0d0['set']({'class':'ck-ai-quick-actions-dropdown'});const _0x271a5d=new ro(_0x2cfa3e,_0x3b4744,_0x44d0d0,_0x34c1e5);return _0x44d0d0['panelView']['children']['add'](_0x271a5d),_0x44d0d0;};}const Bt='<task>For\x20given\x20selected\x20part\x20of\x20HTML\x20document\x20you\x20must\x20explain\x20the\x20meaning\x20of\x20it\x27s\x20content\x20clearly\x20and\x20in\x20plain\x20language.</task><rules>1.\x20Identify\x20what\x20type\x20of\x20text\x20it\x20is:-\x20If\x20it\x20looks\x20like\x20a\x20definition\x20explain\x20the\x20concept\x20in\x20simple\x20terms.-\x20If\x20it\x20looks\x20like\x20a\x20description\x20clarify\x20what\x20it\x20is\x20describing\x20and\x20why\x20it\x20matters.-\x20If\x20it\x20contains\x20technical\x20terms\x20or\x20jargon\x20break\x20them\x20down\x20into\x20everyday\x20language.-\x20If\x20it\x20looks\x20instructional\x20restate\x20as\x20clear\x20steps\x20someone\x20can\x20follow.-\x20If\x20it\x20provides\x20examples\x20explain\x20what\x20the\x20example\x20shows\x20and\x20why\x20it\x27s\x20relevant.-\x20If\x20it\x20presents\x20an\x20argument\x20or\x20claim\x20restate\x20the\x20claim\x20neutrally\x20and\x20explain\x20its\x20purpose.-\x20If\x20it\x20is\x20narrative/story-like\x20explain\x20what\x20event\x20or\x20situation\x20is\x20being\x20described.-\x20If\x20it\x20is\x20data-driven\x20(stats,\x20figures,\x20facts)\x20explain\x20what\x20the\x20data\x20indicates.-\x20If\x20it\x20is\x20a\x20quotation\x20explain\x20the\x20meaning\x20of\x20the\x20quote\x20in\x20context.-\x20If\x20it\x20compares/contrasts\x20things\x20explain\x20the\x20key\x20differences\x20or\x20similarities\x20simply.-\x20If\x20it\x20does\x20not\x20fit\x20any\x20of\x20the\x20categories\x20above\x20give\x20a\x20clear,\x20plain-language\x20explanation\x20of\x20its\x20meaning,\x20focusing\x20on\x20usefulness.2.\x20Provide\x20context\x20if\x20the\x20meaning\x20could\x20be\x20unclear\x20without\x20it.\x20(e.g.,\x20explain\x20where\x20such\x20a\x20term\x20might\x20be\x20used,\x20or\x20why\x20it\x20is\x20important).3.\x20Keep\x20the\x20explanation\x20short\x20but\x20complete\x20(25\x20sentences).Avoid\x20overly\x20technical\x20detail\x20unless\x20it\x20is\x20necessary\x20for\x20understanding.4.\x20Do\x20not\x20simply\x20repeat\x20the\x20original\x20text\x20\x20restate\x20and\x20expand\x20it\x20in\x20plain\x20words.5.\x20If\x20possible,\x20add\x20a\x20short\x20example\x20or\x20analogy\x20to\x20make\x20it\x20easier\x20to\x20understand.6.\x20Use\x20the\x20context\x20of\x20the\x20whole\x20document,\x20but\x20focus\x20on\x20the\x20selected\x20part\x20when\x20creating\x20your\x20explanation.7.\x20Your\x20explanation\x20should\x20be\x20written\x20in\x20%0\x20language.</rules><constraints>1.\x20You\x20MUST\x20NOT\x20perform\x20any\x20edits\x20or\x20modifications\x20on\x20provided\x20document.2.\x20You\x20MUST\x20NOT\x20include\x20document\x20modifications\x20in\x20your\x20response.3.\x20Your\x20message\x20should\x20only\x20include\x20explanation.\x20Do\x20not\x20add\x20any\x20additional\x20text,\x20flattery,\x20questions\x20or\x20followup\x20suggestions.</constraints>',Jt='<task>For\x20the\x20given\x20selected\x20part\x20of\x20an\x20HTML\x20document\x20you\x20must\x20summarize\x20its\x20content\x20in\x20a\x20few\x20sentences,\x20keeping\x20only\x20the\x20essential\x20meaning.</task><rules>1.\x20Your\x20summary\x20should\x20be\x20short\x20and\x20clear:-\x20Aim\x20for\x2024\x20sentences\x20unless\x20the\x20text\x20is\x20extremely\x20short.-\x20Focus\x20on\x20capturing\x20the\x20main\x20idea(s)\x20without\x20unnecessary\x20detail.2.\x20Identify\x20what\x20type\x20of\x20text\x20it\x20is\x20and\x20adapt\x20the\x20summary\x20style:-\x20If\x20it\x20is\x20descriptive\x20condense\x20the\x20description\x20into\x20its\x20core\x20idea.-\x20If\x20it\x20is\x20argumentative\x20or\x20opinion-based\x20summarize\x20the\x20main\x20claim\x20and\x20reasoning\x20neutrally.-\x20If\x20it\x20is\x20narrative/story-like\x20capture\x20the\x20main\x20event\x20or\x20outcome\x20without\x20side\x20details.-\x20If\x20it\x20is\x20data-driven\x20(stats,\x20figures,\x20facts)\x20summarize\x20what\x20the\x20data\x20shows\x20in\x20plain\x20language.-\x20If\x20it\x20is\x20instructional\x20restate\x20the\x20overall\x20purpose\x20of\x20the\x20steps\x20without\x20listing\x20every\x20step.-\x20If\x20it\x20does\x20not\x20fit\x20any\x20of\x20the\x20categories\x20above\x20provide\x20a\x20general\x20concise\x20summary.3.\x20Provide\x20context\x20if\x20necessary\x20for\x20clarity:-\x20Mention\x20the\x20subject\x20or\x20topic\x20explicitly\x20so\x20the\x20summary\x20can\x20stand\x20alone.4.\x20Do\x20not\x20simply\x20copy\x20sentences\x20from\x20the\x20original\x20text\x20\x20rephrase\x20in\x20plain\x20language.5.\x20Avoid\x20adding\x20new\x20information\x20or\x20interpretation\x20not\x20present\x20in\x20the\x20text.6.\x20Summarize\x20in\x20a\x20way\x20that\x20would\x20make\x20sense\x20to\x20someone\x20who\x20has\x20not\x20read\x20the\x20original\x20text.7.\x20Use\x20the\x20context\x20of\x20the\x20whole\x20document,\x20but\x20focus\x20on\x20the\x20selected\x20part\x20when\x20creating\x20your\x20summary.8.\x20Your\x20summary\x20should\x20be\x20written\x20in\x20%0\x20language.</rules><constraints>1.\x20You\x20MUST\x20NOT\x20perform\x20any\x20edits\x20or\x20modifications\x20on\x20the\x20provided\x20document.2.\x20You\x20MUST\x20NOT\x20include\x20document\x20modifications\x20in\x20your\x20response.3.\x20Your\x20message\x20should\x20only\x20include\x20the\x20summary.\x20Do\x20not\x20add\x20any\x20additional\x20text,\x20flattery,\x20questions\x20or\x20followup\x20suggestions.</constraints>',Vt='<task>For\x20the\x20given\x20selected\x20part\x20of\x20an\x20HTML\x20document\x20you\x20must\x20extract\x20and\x20present\x20the\x20key\x20points\x20from\x20its\x20content.</task><rules>1.\x20Present\x20the\x20output\x20as\x20a\x20clear,\x20structured\x20list\x20(bullets\x20or\x20numbered).-\x20Each\x20point\x20should\x20be\x20concise\x20(one\x20sentence\x20or\x20less).-\x20Do\x20not\x20merge\x20distinct\x20ideas\x20into\x20one\x20bullet.2.\x20Identify\x20what\x20type\x20of\x20text\x20it\x20is\x20and\x20adapt\x20the\x20extraction\x20style:-\x20If\x20it\x20is\x20descriptive\x20capture\x20the\x20main\x20attributes\x20or\x20features.-\x20If\x20it\x20is\x20argumentative\x20extract\x20the\x20main\x20claim\x20and\x20supporting\x20reasons\x20separately.-\x20If\x20it\x20is\x20narrative/story-like\x20extract\x20the\x20main\x20events\x20in\x20chronological\x20order.-\x20If\x20it\x20is\x20data-driven\x20(stats,\x20figures,\x20facts)\x20highlight\x20the\x20most\x20important\x20facts\x20or\x20numbers.-\x20If\x20it\x20is\x20instructional\x20list\x20the\x20steps\x20or\x20main\x20actions\x20in\x20simplified\x20form.-\x20If\x20it\x20provides\x20comparisons\x20extract\x20the\x20contrasted\x20items\x20and\x20their\x20differences/similarities.-\x20If\x20it\x20does\x20not\x20fit\x20any\x20category\x20above\x20extract\x20the\x20main\x20ideas\x20in\x20plain,\x20short\x20statements.3.\x20Keep\x20the\x20list\x20between\x2037\x20items\x20where\x20possible.-\x20If\x20the\x20text\x20is\x20very\x20short,\x20fewer\x20items\x20are\x20fine.-\x20If\x20it\x20is\x20very\x20long,\x20focus\x20on\x20the\x20most\x20important\x20ideas\x20only.4.\x20Do\x20not\x20copy\x20long\x20text\x20fragments\x20\x20restate\x20in\x20simple\x20words.5.\x20Do\x20not\x20add\x20interpretation,\x20evaluation,\x20or\x20commentary\x20beyond\x20the\x20text.6.\x20Ensure\x20the\x20list\x20can\x20stand\x20alone\x20without\x20requiring\x20the\x20reader\x20to\x20see\x20the\x20original\x20document.7.\x20Use\x20the\x20context\x20of\x20the\x20whole\x20document,\x20but\x20focus\x20on\x20the\x20selected\x20part\x20when\x20creating\x20your\x20key\x20points.8.\x20Your\x20key\x20points\x20should\x20be\x20written\x20in\x20%0\x20language.</rules><constraints>1.\x20You\x20MUST\x20NOT\x20perform\x20any\x20edits\x20or\x20modifications\x20on\x20the\x20provided\x20document.2.\x20You\x20MUST\x20NOT\x20include\x20document\x20modifications\x20in\x20your\x20response.3.\x20Your\x20message\x20should\x20only\x20include\x20the\x20extracted\x20key\x20points.\x20Do\x20not\x20add\x20any\x20additional\x20text,\x20flattery,\x20questions\x20or\x20followup\x20suggestions.</constraints>';var Ot=function(_0x5c6210){return _0x5c6210['CHAT']='CHAT',_0x5c6210['ACTION']='ACTION',_0x5c6210['REVIEW']='REVIEW',_0x5c6210;}({}),Pa=function(_0x53ad74){return _0x53ad74['CHAT']='AIChat',_0x53ad74['ACTION']='AIActions',_0x53ad74['REVIEW']='AIReviewMode',_0x53ad74;}({});class ri extends _0x3af82b{static get['requires'](){return[Wt];}static get['pluginName'](){return'AIQuickActionsUI';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}['init'](){this['_prepareQuickActionsDefinition'](this['_getDefaultAndCustomActions']()),this['_initializeQuickActionsComponentsAndCommands']();}static['getDefaultQuickActions'](_0x4f10b0){return function(_0x15f125){const _0x1a88e3=new Intl['DisplayNames'](['en'],{'type':'language'})['of'](_0x15f125['uiLanguage']),_0x52156c=_0x1a88e3||'English',_0x5b279e=[{'id':'ask-ai','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_ASK_AI'),'type':'CHAT','icon':Ut},{'id':'chat-commands','label':i(_0x15f125,'AI_QUICK_ACTIONS_CHAT_COMMANDS'),'icon':Kt,'actions':[{'id':'explain','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_EXPLAIN'),'prompt':Bt['replace']('%0',_0x52156c),'type':'CHAT'},{'id':'summarize','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_SUMMARIZE'),'prompt':Jt['replace']('%0',_0x52156c),'type':'CHAT'},{'id':'highlight-key-points','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_HIGHLIGHT_KEY_POINTS'),'prompt':Vt['replace']('%0',_0x52156c),'type':'CHAT'}]},{'id':'improve-writing','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_IMPROVE_WRITING'),'type':'ACTION','icon':Dt},{'id':'continue','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_CONTINUE_WRITING'),'type':'ACTION','icon':Mt},{'id':'fix-grammar','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_FIX_GRAMMAR_SPELLING'),'type':'ACTION','icon':Lt},{'id':'adjust-length','label':i(_0x15f125,'AI_QUICK_ACTIONS_ADJUST_LENGTH'),'icon':Qt,'actions':[{'id':'make-shorter','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_MAKE_SHORTER'),'type':'ACTION'},{'id':'make-longer','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_MAKE_LONGER'),'type':'ACTION'}]},{'id':'change-tone','label':i(_0x15f125,'AI_QUICK_ACTIONS_CHANGE_TONE'),'icon':bt,'actions':[{'id':'make-tone-casual','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_MORE_CASUAL'),'type':'ACTION'},{'id':'make-tone-direct','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_MORE_DIRECT'),'type':'ACTION'},{'id':'make-tone-friendly','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_MORE_FRIENDLY'),'type':'ACTION'},{'id':'make-tone-confident','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_MORE_CONFIDENT'),'type':'ACTION'},{'id':'make-tone-professional','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_MORE_PROFESSIONAL'),'type':'ACTION'}]},{'id':'translate','label':i(_0x15f125,'AI_QUICK_ACTIONS_TRANSLATE'),'icon':Gt,'actions':[{'id':'translate-to-english','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_TRANSLATE_ENGLISH'),'type':'ACTION','actionName':'translate','args':{'language':'english'}},{'id':'translate-to-chinese','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_TRANSLATE_CHINESE'),'type':'ACTION','actionName':'translate','args':{'language':'chinese'}},{'id':'translate-to-spanish','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_TRANSLATE_SPANISH'),'type':'ACTION','actionName':'translate','args':{'language':'spanish'}},{'id':'translate-to-german','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_TRANSLATE_GERMAN'),'type':'ACTION','actionName':'translate','args':{'language':'german'}},{'id':'translate-to-french','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_TRANSLATE_FRENCH'),'type':'ACTION','actionName':'translate','args':{'language':'french'}},{'id':'translate-to-japanese','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_TRANSLATE_JAPANESE'),'type':'ACTION','actionName':'translate','args':{'language':'japanese'}},{'id':'translate-to-portuguese','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_TRANSLATE_PORTUGUESE'),'type':'ACTION','actionName':'translate','args':{'language':'portuguese'}},{'id':'translate-to-korean','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_TRANSLATE_KOREAN'),'type':'ACTION','actionName':'translate','args':{'language':'korean'}},{'id':'translate-to-italian','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_TRANSLATE_ITALIAN'),'type':'ACTION','actionName':'translate','args':{'language':'italian'}},{'id':'translate-to-russian','displayedPrompt':i(_0x15f125,'AI_QUICK_ACTIONS_TRANSLATE_RUSSIAN'),'type':'ACTION','actionName':'translate','args':{'language':'russian'}}]},{'id':'other','label':i(_0x15f125,'AI_QUICK_ACTIONS_OTHER'),'icon':Yt,'actions':[]}];return _0x5b279e;}(_0x4f10b0);}['_getDefaultAndCustomActions'](){const _0x229786=ri['getDefaultQuickActions'](this['editor']['locale']),_0x5ce5fa=(this['editor']['config']['get']('ai.quickActions.extraCommands')||[])['map'](_0x17a6d1=>({..._0x17a6d1,'icon':void 0x0}));return _0x229786['find'](_0x2ebef9=>'other'===_0x2ebef9['id'])['actions']['push'](..._0x5ce5fa),_0x229786;}['_initializeQuickActionsComponentsAndCommands'](){const _0x50cc0e=new Ft(this['editor']['locale']);_0x50cc0e['attachToDom'](),this['_initializeQuickActionsDropdown'](_0x50cc0e),this['_initializeQuickActionsMenuBar'](),this['_initializeQuickActionsComponents'](_0x50cc0e);}['_initializeQuickActionsDropdown'](_0x46b4c4){this['editor']['ui']['componentFactory']['add']('aiQuickActions',qt(this['editor'],this['_quickActionsDefinition'],{'icon':_0x159ea5,'label':i(this['editor']['locale'],'AI_QUICK_ACTIONS_HEADING')},_0x46b4c4));}['_prepareQuickActionsDefinition'](_0x55d97e){this['_quickActionsDefinition']=_0x55d97e['map'](_0x48dcfa=>{if('actions'in _0x48dcfa){const _0x3526ab=_0x48dcfa;return{..._0x3526ab,'actions':_0x3526ab['actions']['map'](_0x2fd1c9=>{const {actions:_0x131799,..._0x589262}=_0x3526ab;return{..._0x2fd1c9,'parent':_0x589262};})['filter'](_0x15ec5e=>this['_shouldIncludeAction'](_0x15ec5e))};}return _0x48dcfa;})['filter'](_0x4f04a7=>'actions'in _0x4f04a7?_0x4f04a7['actions']['length']>0x0:this['_shouldIncludeAction'](_0x4f04a7));}['_shouldIncludeAction'](_0x10198c){const _0x1c2dd7=this['editor']['config']['get']('ai.quickActions.removeCommands')||[];return this['editor']['plugins']['has'](Pa[_0x10198c['type']])&&!_0x1c2dd7['includes'](_0x10198c['id']);}['_initializeQuickActionsComponents'](_0x27f76c){this['_quickActionsDefinition']['forEach'](_0x5a11d8=>{if('actions'in _0x5a11d8){const _0x4c981a=qt(this['editor'],_0x5a11d8['actions'],_0x5a11d8,_0x27f76c);this['editor']['ui']['componentFactory']['add'](_0x5a11d8['id'],_0x4c981a),_0x5a11d8['actions']['forEach'](_0x59f559=>{const _0x515c8a=zt(this['editor'],_0x59f559);this['editor']['ui']['componentFactory']['add'](_0x59f559['id'],_0x515c8a);});}else{const _0x582466=zt(this['editor'],_0x5a11d8,!0x1,!0x0,!0x1);this['editor']['ui']['componentFactory']['add'](_0x5a11d8['id'],_0x582466);}});}['_initializeQuickActionsMenuBar'](){this['editor']['ui']['componentFactory']['add']('menuBar:aiQuickActions',_0x189b2c=>{const _0x24c763=new _0x2f50df(_0x189b2c),_0x5d76c8=i(_0x189b2c,'AI_QUICK_ACTIONS_HEADING');_0x24c763['buttonView']['set']({'label':_0x5d76c8,'icon':_0x159ea5});const _0x44ce5a=new _0x1595b4(_0x189b2c);_0x44ce5a['set']({'ariaLabel':_0x5d76c8,'role':'menu'}),this['_quickActionsDefinition']['forEach'](_0x27e954=>{if('actions'in _0x27e954){const _0x24d1ab=_0x27e954,_0x917db=new _0x4d7dd0(_0x189b2c,_0x24c763),_0x19e724=new _0x2f50df(_0x189b2c),_0x243b27=new _0x1595b4(_0x189b2c);_0x19e724['buttonView']['set']({'label':_0x24d1ab['label'],'icon':_0x24d1ab['icon']}),_0x24d1ab['actions']['forEach'](_0x1f0702=>{const _0x2617d6=new _0x4d7dd0(_0x189b2c,_0x19e724),_0x5a2f31=new _0x3b859b(_0x189b2c);_0x5a2f31['set']({'label':_0x1f0702['displayedPrompt'],'icon':_0x1f0702['icon'],'role':'menuitem'}),_0x5a2f31['on']('execute',()=>{this['_executeQuickAction'](_0x1f0702);}),_0x5a2f31['delegate']('execute')['to'](_0x19e724),_0x2617d6['children']['add'](_0x5a2f31),_0x243b27['items']['add'](_0x2617d6);}),_0x19e724['panelView']['children']['add'](_0x243b27),_0x917db['children']['add'](_0x19e724),_0x44ce5a['items']['add'](_0x917db);}else{const _0x519c8f=_0x27e954,_0x413df8=new _0x4d7dd0(_0x189b2c,_0x24c763),_0x1aae88=new _0x3b859b(_0x189b2c);_0x1aae88['set']({'label':_0x519c8f['displayedPrompt'],'icon':_0x519c8f['icon'],'role':'menuitem'}),_0x1aae88['on']('execute',()=>{this['_executeQuickAction'](_0x519c8f);}),_0x1aae88['delegate']('execute')['to'](_0x24c763),_0x413df8['children']['add'](_0x1aae88),_0x44ce5a['items']['add'](_0x413df8);}});const _0x40f783=Object['values'](Pa)['some'](_0x22be9e=>this['editor']['plugins']['has'](_0x22be9e));return _0x24c763['set']({'isEnabled':_0x40f783}),_0x24c763['panelView']['children']['add'](_0x44ce5a),_0x24c763;});}['_executeQuickAction'](_0x312fc9){const _0x53fb64=this['editor'];_0x53fb64['editing']['view']['focus'](),_0x53fb64['commands']['execute']('aiQuickAction',_0x312fc9);const _0x32f4d0=_0x53fb64['ui']['view']['menuBarView'];_0x32f4d0&&_0x32f4d0['close']&&_0x32f4d0['close']();}}class ui extends Nt{['execute'](_0x42d326){switch(this['_expandSelectionIfCollapsed'](),_0x42d326['type']){case Ot['CHAT']:if(!this['editor']['plugins']['has']('AIChat')){const _0x1ef335=i(this['editor']['locale'],'AI_QUICK_ACTIONS_PLUGIN_NOT_FOUND','AIChat');throw new _0x38f49c('ai-quick-actions-plugin-not-found',this['editor'],{'errorMessage':_0x1ef335});}this['_handleAIChatAction'](_0x42d326);break;case Ot['ACTION']:if(!this['editor']['plugins']['has']('AIActions')){const _0x14cd46=i(this['editor']['locale'],'AI_QUICK_ACTIONS_PLUGIN_NOT_FOUND','AIActions');throw new _0x38f49c('ai-quick-actions-plugin-not-found',this['editor'],{'errorMessage':_0x14cd46});}this['_handleAIActionsAction'](_0x42d326);break;case Ot['REVIEW']:if(!this['editor']['plugins']['has']('AIReviewMode')){const _0x19b3c5=i(this['editor']['locale'],'AI_QUICK_ACTIONS_PLUGIN_NOT_FOUND','AIReviewMode');throw new _0x38f49c('ai-quick-actions-plugin-not-found',this['editor'],{'errorMessage':_0x19b3c5});}this['_handleAIReviewAction'](_0x42d326);}}async['_handleAIChatAction'](_0x30cd5b){const _0x20ad5b=this['editor']['plugins']['get']('AIChat'),_0x5073bf=this['editor']['plugins']['get']('AIChatController');if(this['editor']['plugins']['get']('AITabs')['view']['activateTab']('chat'),'ask-ai'===_0x30cd5b['id'])_0x5073bf['removeSelectionFromChatContext'](),await _0x20ad5b['addSelectionToChatContext'](),_0x20ad5b['focusPromptInput']();else await _0x20ad5b['startConversation'](),_0x5073bf['removeSelectionFromChatContext'](),await _0x20ad5b['addSelectionToChatContext'](),_0x20ad5b['focusPromptInput'](),await _0x20ad5b['sendMessage']({'message':_0x30cd5b['prompt']||_0x30cd5b['displayedPrompt'],'quickActionData':{'id':_0x30cd5b['id'],'displayedPrompt':_0x30cd5b['displayedPrompt']}});}['_expandSelectionIfCollapsed'](){const _0x172354=this['editor'],_0xf3d6c7=_0x172354['model']['document']['selection'];if(!_0xf3d6c7['isCollapsed'])return;const _0x39694c=_0x15ebca(_0xf3d6c7['getSelectedBlocks']())||_0x172354['model']['schema']['getLimitElement'](_0xf3d6c7);_0x172354['model']['change'](_0x4dbb2c=>{_0x4dbb2c['setSelection'](_0x39694c,'in');});}['_handleAIActionsActionLabel'](_0x52aa9b){return _0x52aa9b['parent']?.['label']&&'other'!==_0x52aa9b['parent']?.['id']?_0x52aa9b['parent']['label']+':\x20'+_0x52aa9b['displayedPrompt']:_0x52aa9b['displayedPrompt'];}async['_handleAIActionsAction'](_0x39469c){const _0x2a5155=this['editor']['plugins']['get']('AIActions'),_0x421473=_0x39469c['prompt']?{'userMessage':_0x39469c['prompt'],'model':_0x39469c['model']}:{'actionName':_0x39469c['actionName']||_0x39469c['id'],'args':_0x39469c['args']},_0x34ea25=this['_handleAIActionsActionLabel'](_0x39469c);await _0x2a5155['executeAction'](_0x421473,_0x34ea25,_0x39469c['icon']);}async['_handleAIReviewAction'](_0x454ce0){console['log']('handleAIReviewAction',_0x454ce0);}}class ci extends _0x3af82b{static get['pluginName'](){return'AIQuickActionsEditing';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}['init'](){const _0x980d77=this['editor'],_0x424608=new ui(this['editor']);if(_0x980d77['commands']['add']('aiQuickAction',_0x424608),_0x980d77['plugins']['has']('AIChat')){const _0x2eac4a=this['editor']['plugins']['get']('AIChat');_0x980d77['model']['document']['selection']['on']('change:range',(_0x514589,_0x4051d5)=>{_0x4051d5['directChange']&&_0x2eac4a['removeSelectionFromChatContext']();});}}}class ye extends fe{['updateChangeGroups'](){if(this['parsedMergedContent']=this['parsedContent']['cloneNode'](!0x0),0x0==this['parsedMergedContent']['childNodes']['length'])return void(this['changeGroups']=[]);const _0x3a3fbe=this['documentContextContent']['children']['map'](_0x597bab=>({'node':_0x597bab,'id':mt(_0x597bab,'data-id')})),_0x22d019=this['parsedMergedContent']['children']['map'](_0x3bf4e4=>({'node':_0x3bf4e4,'id':mt(_0x3bf4e4,'data-id')||_0xa215c8()})),_0x49f3ca=_0x961e77(_0x3a3fbe,_0x22d019,{'comparator':(_0x44fcec,_0x21e90d)=>_0x44fcec['id']==_0x21e90d['id'],'oneChangePerToken':!0x0});if(!this['isDone']){for(;_0x49f3ca['length']&&_0x49f3ca[_0x49f3ca['length']-0x1]['removed'];)_0x49f3ca['pop']();}const _0x85718=_0x49f3ca['map'](_0x1b0552=>{const _0x1faf1e=_0x1b0552['added']?'new':_0x1b0552['removed']?'removed':'modified';return{'node':_0x1b0552['value'][0x0]['node'],'type':_0x1faf1e,'id':_0x1b0552['value'][0x0]['id']};});this['changeGroups']=[{'changes':_0x85718,'state':'pending','index':0x0}];}['_getDifferentChangeGroups'](_0x248a13,_0x35a270){return _0x35a270;}}class R extends pe{['content'];['version'];['actionName'];['args'];['userMessage'];['model'];['hasError']=!0x1;constructor(_0x32ecdf){super(_0x32ecdf),this['content']=_0x32ecdf['content'],this['version']=_0x32ecdf['version'],this['actionName']=_0x32ecdf['actionName'],this['args']=_0x32ecdf['args'],this['userMessage']=_0x32ecdf['userMessage'],this['model']=_0x32ecdf['model'];}async['sendRequest'](){return this['actionName']?this['connector']['executeAction']({'content':this['content'],'actionName':this['actionName'],'args':this['args']}):this['connector']['executeCustomAction']({'content':this['content'],'message':this['userMessage'],'model':this['model'],'outputFormat':'html'});}['getDocumentContext'](){return{'type':xe['TEXT'],'content':this['content'],'version':this['version'],'label':'Current\x20document','uiId':'current-document'};}['createReply'](_0x1699ca){const _0x413b09=new ye({'editor':this['editor'],'documentContextContent':this['content'],..._0x1699ca});return this['replies']['push'](_0x413b09),_0x413b09['delegate'](...ge)['to'](this),this['fire']('replyCreated',_0x413b09),_0x413b09;}}class ni extends _0x3af82b{static get['requires'](){return[S,_0x2a84b1,B,$,_0x3e9353];}static get['pluginName'](){return'AIActions';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}['_aiConnector'];['_interactions']=[];['_currentInteractionIndex']=0x0;['_interactionParams'];['_balloonShowDiff']=!0x1;['_customViews']=new _0x3b5cfc();['_navigationPreviousButton'];['_navigationCounter'];['_isNavigationCounterInView']=!0x1;['_navigationNextButton'];['_isNavigationPreviousButtonInView']=!0x1;['_isNavigationNextButtonInView']=!0x1;['_promiseQueue'];get['_interaction'](){return this['_interactions'][this['_interactions']['length']-0x1];}constructor(_0x20c87d){super(_0x20c87d),this['_aiConnector']=this['editor']['plugins']['get']('AIConnector'),this['set']('isBusy',!0x1),this['_promiseQueue']=new H(),this['_setupCustomViews']();}['stopInteraction'](){this['_stopInteraction']();}async['executeAction'](_0xdccafe,_0x11e949,_0x45db88){if(this['editor']['plugins']['has']('TableSelection')){if(this['editor']['plugins']['get']('TableSelection')['getSelectedTableCells']()){const {modelFragment:_0x570998,anchorData:_0x37369a}=this['_getExecuteDataInTable']();return this['_executeAction'](_0xdccafe,_0x570998,_0x37369a,_0x11e949,_0x45db88);}}const {modelFragment:_0x34d498,anchorData:_0x2ff5fe}=this['_getExecuteDataRegular']();return this['_executeAction'](_0xdccafe,_0x34d498,_0x2ff5fe,_0x11e949,_0x45db88);}['_getExecuteDataRegular'](){const _0x3bf248=this['editor']['model']['document']['selection'];if(_0x3bf248['isCollapsed']){const _0x43f0bb=_0x15ebca(_0x3bf248['getSelectedBlocks']())||this['editor']['model']['schema']['getLimitElement'](_0x3bf248);this['editor']['model']['change'](_0x1af3f2=>{_0x1af3f2['setSelection'](_0x43f0bb,'in');});}const _0x49510c=_0x3bf248['getFirstRange'](),_0x1582b8=this['_wrapWithCommonAncestors'](this['editor']['model']['getSelectedContent'](_0x3bf248),_0x49510c['start'],_0x49510c['end']),_0x18ccf3=_0x3bf248['getFirstRange']()['start'],_0x5a341d=new Map();let _0x559741=_0x1582b8;for(let _0x553959=0x0;_0x553959<_0x18ccf3['path']['length'];_0x553959++)_0x5a341d['set'](_0x559741,_0x18ccf3['path'][_0x553959]),_0x559741=_0x559741['getChild'](0x0);return{'modelFragment':_0x1582b8,'anchorData':_0x5a341d};}['_getExecuteDataInTable'](){const _0x2c43fc=this['editor']['model']['document']['selection'],_0x485a11=this['editor']['plugins']['get']('TableSelection')['getSelectionAsFragment'](),_0x3ec641=_0x2c43fc['getFirstRange']()['start']['parent']['parent'],_0x52ef6f=this['_wrapWithCommonAncestors'](_0x485a11,this['editor']['model']['createPositionBefore'](_0x3ec641),this['editor']['model']['createPositionAfter'](_0x3ec641)),_0xfbad51=_0x2c43fc['getFirstRange']()['start'],_0x2bc381=new Map();let _0x3052b5=_0x52ef6f;for(let _0x5dff23=0x0;_0x5dff23<_0xfbad51['path']['length'];_0x5dff23++)if(_0x2bc381['set'](_0x3052b5,_0xfbad51['path'][_0x5dff23]),_0x5dff23<_0xfbad51['path']['length']-0x1)_0x3052b5=_0x3052b5['getChild'](0x0);else{let _0x35857b=_0x3052b5['nextSibling'];for(;_0x35857b;)_0x2bc381['set'](_0x35857b,_0xfbad51['path'][_0x5dff23]),_0x35857b=_0x35857b['nextSibling'];}return{'modelFragment':_0x52ef6f,'anchorData':_0x2bc381};}['_executeAction'](_0x39990f,_0xc3bd19,_0x24e91e,_0x2ce9bd,_0x18f017){const _0x202adb=this['editor']['plugins']['get'](B),_0x54b401=this['editor']['plugins']['get']($),_0x17b12f=this['editor']['model']['document']['selection'],_0x349118=_0x202adb['modelToViewWithIds'](_0xc3bd19),_0x30da29=this['editor']['data']['processor']['toData'](_0x349118),_0xc20aa0=this['editor']['model']['document']['version'],_0x523f01=[..._0x17b12f['getRanges']()],_0x42ab09=new N(this['editor']['locale'],{'showDiff':!0x1,'areActionsDisabled':!0x1,'hideHeader':!0x0,'showLoader':!0x0,'miniToolbarConfig':{'showChanges':'icon','customView':this['_customViews']},'showUnchangedParts':!0x0});return _0x54b401['open']({'index':0x3e8*Math['random']()%0x3e8,'title':_0x2ce9bd,'icon':_0x18f017||_0x159ea5,'mainView':_0x42ab09,'showRotator':!0x1,'showApplyButton':!0x0,'showSuggestButton':!0x0,'ranges':_0x523f01}),this['_setLoadingState'](_0x42ab09,_0x54b401),this['listenTo'](_0x54b401,'applySuggestion',()=>{this['_applyChanges'](_0xc3bd19,_0x24e91e,!0x1);}),this['listenTo'](_0x54b401,'insertSuggestion',()=>{this['_applyChanges'](_0xc3bd19,_0x24e91e,!0x0);}),this['listenTo'](_0x54b401,'dialogClosed',()=>{if(this['_interaction']&&this['_interaction']['replies']['length']>0x0){const _0x46ca05=this['_interaction']['replies'][this['_interaction']['replies']['length']-0x1],_0x4139d2=_0x46ca05['changeGroups'][0x0];_0x4139d2&&'pending'===_0x4139d2['state']&&_0x46ca05['setChangeGroupState'](0x0,'rejected');}this['_stopInteraction'](),this['_clearInteractionHistory'](),this['stopListening'](_0x54b401);}),this['_createInteraction'](_0x30da29,_0xc20aa0,_0x42ab09,_0x54b401,_0x39990f);}['_wrapWithCommonAncestors'](_0x5f5199,_0x3b3020,_0x56a7d6){const _0x534ec9=this['editor']['model']['createRange'](_0x3b3020,_0x56a7d6)['getCommonAncestor'](),_0x5e200d=_0x534ec9['is']('documentFragment')?[]:_0x534ec9['getAncestors']({'includeSelf':!0x0})['slice'](0x1);if(_0x5e200d['length']){const _0x438cd5=_0x5e200d['map'](_0x20ff08=>_0x20ff08['_clone'](!0x1));for(let _0x580cf6=0x1;_0x580cf6<_0x438cd5['length'];_0x580cf6++)_0x438cd5[_0x580cf6-0x1]['_appendChild'](_0x438cd5[_0x580cf6]);return _0x438cd5[_0x438cd5['length']-0x1]['_appendChild'](_0x5f5199),new _0x384315(_0x438cd5[0x0]);}return _0x5f5199;}async['_createInteraction'](_0x58e6c3,_0x2fd727,_0x4bb94b,_0x43f711,_0x51da5e){const _0x59c42d=this['editor'];this['_interactionParams']={'action':_0x51da5e,'content':_0x58e6c3,'version':_0x2fd727,'mainView':_0x4bb94b,'aiBalloon':_0x43f711};const _0x255e4a=new R({'connector':this['_aiConnector'],'editor':_0x59c42d,'content':_0x58e6c3,'version':_0x2fd727,..._0x51da5e});this['_interactions']['push'](_0x255e4a),_0x4bb94b['hideError']();const _0x3cfe74=(_0x4c350c,_0xe1da24,_0xb5e50f=!0x1,_0x44a817='streaming')=>this['_promiseQueue']['enqueue'](async _0x22e2d0=>{try{const _0x252270=W({'editor':_0x59c42d,'changeGroups':_0x4c350c['changeGroups'],'documentContextContent':_0x4c350c['documentContextContent'],'showDiff':_0xb5e50f,'trimUnchanged':!0x1});await _0xe1da24['updateContent']({'parts':_0x252270,'renderingStrategy':_0x44a817,'abortSignal':_0x22e2d0});}catch(_0xe69a64){if(this['_isAbortError'](_0xe69a64))return;throw _0xe69a64;}});this['_interaction']['on']('replyCreated',(_0x35e366,_0x279096)=>{_0x4bb94b['hideLoader'](),_0x3cfe74(_0x279096,_0x4bb94b)['catch'](_0x313e99=>{this['_isAbortError'](_0x313e99)||(console['error']('Error\x20updating\x20content\x20in\x20replyCreated:',_0x313e99),this['_setErrorState'](_0x255e4a,_0x4bb94b));});}),this['_interaction']['on']('replyContentUpdated',(_0x2f243d,_0x27f540)=>{_0x3cfe74(_0x27f540,_0x4bb94b)['catch'](_0xf6e8e=>{this['_isAbortError'](_0xf6e8e)||(console['error']('Error\x20updating\x20content\x20in\x20replyContentUpdated:',_0xf6e8e),this['_setErrorState'](_0x255e4a,_0x4bb94b));});}),this['_interaction']['on']('interactionFinished',async()=>{try{await this['_clearLoadingState'](_0x4bb94b,_0x43f711),this['_updateNavigationUI']();}catch(_0x5c229e){this['_isAbortError'](_0x5c229e)||(console['error']('Error\x20clearing\x20loading\x20state\x20in\x20interactionFinished:',_0x5c229e),this['_setErrorState'](_0x255e4a,_0x4bb94b));}}),this['listenTo'](_0x4bb94b,'toggleSuggestionDisplayMode',(_0x493492,{showDiff:_0x59691d})=>{this['_balloonShowDiff']=_0x59691d;const _0x1dedb2=this['_interaction']['replies'][this['_interaction']['replies']['length']-0x1];_0x1dedb2&&_0x3cfe74(_0x1dedb2,_0x4bb94b,_0x59691d,'static')['catch'](_0x4df0bb=>{this['_isAbortError'](_0x4df0bb)||(console['error']('Error\x20updating\x20content\x20in\x20toggleSuggestionDisplayMode:',_0x4df0bb),this['_setErrorState'](_0x255e4a,_0x4bb94b));});}),this['_interaction']['on']('replyChangeGroupStateUpdated',(_0x20b1b9,{reply:_0x2d9560})=>{const _0x2bd6db={'positiveCount':_0x2d9560['changeGroups']['filter'](_0x166300=>'accepted'===_0x166300['state'])['length'],'totalCount':_0x2d9560['changeGroups']['length']},_0xed05a2=this['_interaction']['actionCallId'],_0xeaab51=this['_interaction']['actionName'];_0xeaab51?this['_aiConnector']['upsertAIActionRating'](_0xeaab51,_0xed05a2,_0x2bd6db):this['_aiConnector']['upsertCustomAIActionRating'](_0xed05a2,_0x2bd6db);}),this['_setLoadingState'](_0x4bb94b,_0x43f711);try{const _0x4dfb39=await this['_interaction']['start']();return this['_updateNavigationUI'](),_0x4dfb39;}catch(_0x2c97be){if(this['_isAbortError'](_0x2c97be))return;_0x4bb94b['hideLoader'](),this['_setErrorState'](_0x255e4a,_0x4bb94b);}}['_applyChanges'](_0x53aa97,_0x4f7ce4,_0x3fe6ba){const _0x36af4b=this['editor'],_0x20321f=this['editor']['plugins']['get'](_0x3e9353),_0x479e16=this['_interaction'],_0x22d0fd=this['_interaction']['replies'][this['_interaction']['replies']['length']-0x1],_0x3f94ac=_0x22d0fd['changeGroups'];_0x22d0fd['setChangeGroupState'](0x0,'accepted');let _0x33a988=X({'editor':_0x36af4b,'reply':_0x22d0fd,'interaction':_0x479e16,'groups':_0x3f94ac,'transform':!0x1,'documentCompare':_0x20321f,'documentCompareOptions':{'anchor':_0x36af4b['model']['createPositionAt'](_0x53aa97,0x0),'markDeletions':_0x3fe6ba}});_0x33a988=this['_filterOperationsOutsideRange'](_0x33a988,_0x4f7ce4);for(const _0x420e2b of _0x33a988)this['_anchorOperation'](_0x4f7ce4,_0x420e2b,_0x36af4b['model']['document']['getRoot']());const _0x47a70c=_0x479e16['getDocumentContext']()['version'],_0x5bbc66=_0x36af4b['model']['document']['history']['getOperations'](_0x47a70c),_0x586fca={'document':_0x36af4b['model']['document'],'useRelations':!0x1,'padWithNoOps':!0x1},_0x11543c=tt(_0x33a988,_0x5bbc66,_0x586fca)['operationsA'];_0x36af4b['model']['change'](_0x406cf6=>{if(_0x406cf6['setSelection'](_0x36af4b['model']['document']['selection']['focus']),_0x3fe6ba)_0x36af4b['plugins']['get']('TrackChangesEditing')['_applyOperationsAsSuggestions'](_0x11543c);else{for(const _0x243a97 of _0x11543c)_0x243a97['baseVersion']=_0x36af4b['model']['document']['version'],_0x406cf6['batch']['addOperation'](_0x243a97),_0x36af4b['model']['applyOperation'](_0x243a97);}}),this['editor']['plugins']['get']('AIBalloon')['close']();}['_filterOperationsOutsideRange'](_0x452a7e,_0x48d465){return _0x452a7e['filter'](_0x33f7cf=>{if('rename'==_0x33f7cf['type']){const _0x318fa5=_0x33f7cf['position']['nodeAfter'];return!_0x48d465['has'](_0x318fa5);}if(_0x33f7cf['type']['indexOf']('Attribute')>-0x1){const _0xdd1d08=_0x33f7cf['range']['start']['nodeAfter'];return!_0x48d465['has'](_0xdd1d08);}return!0x0;});}['_anchorOperation'](_0xa49dc2,_0x59fd12,_0x5cba02){const _0x3f2c29=_0x59fd12['clone']();for(const _0x36113e in _0x59fd12){const _0x3071cc=_0x59fd12[_0x36113e];_0x3071cc instanceof _0x24e098?_0x59fd12[_0x36113e]=new _0x24e098(_0x455d41(_0x3071cc['start']),_0x455d41(_0x3071cc['end'])):_0x3071cc instanceof _0x2e7abe&&(_0x59fd12[_0x36113e]=_0x455d41(_0x3071cc));}if(['insert','move','remove','reinsert','split','merge']['includes'](_0x3f2c29['type'])){if(_0x3f2c29['isDocumentOperation']=!0x1,_0x3f2c29['baseVersion']=null,'remove'==_0x3f2c29['type']){const _0x2118f9=_0x3f2c29['sourcePosition'],_0x31237b=_0x3f2c29['howMany'];new _0x317ebf(_0x2118f9,_0x31237b)['_execute']();}else _0x3f2c29['_execute']();}function _0x455d41(_0x59b7b5){if('$graveyard'==_0x59b7b5['root']['rootName'])return _0x59b7b5;const _0x4daf63=[];let _0x31b61=_0x59b7b5['root'];for(let _0x8f32ed=0x0;_0x8f32ed<_0x59b7b5['path']['length'];_0x8f32ed++){const _0x5e9a57=_0xa49dc2['get'](_0x31b61)||0x0;_0x4daf63[_0x8f32ed]=_0x59b7b5['path'][_0x8f32ed]+_0x5e9a57,_0x31b61=_0x31b61['getChildAtOffset'](_0x59b7b5['path'][_0x8f32ed]);}return new _0x2e7abe(_0x5cba02,_0x4daf63,_0x59b7b5['stickiness']);}}['_refreshInteraction'](){if(!this['_interactionParams'])return;this['_interactions']['length']>0x0&&this['_stopInteraction'](),this['_currentInteractionIndex']=0x0,this['_balloonShowDiff']=!0x1;const {action:_0x448f17,content:_0x3ba6d9,version:_0x5e3c40,mainView:_0x3a1494,aiBalloon:_0x3bc6c5}=this['_interactionParams'];_0x3a1494['areChangesVisible']=!0x1,_0x3a1494['hideError'](),this['_clearErrorState'](_0x3a1494,_0x3bc6c5);const _0x248e07=_0x3a1494;_0x248e07['miniToolbarView']&&_0x248e07['miniToolbarView']['showChangesButton']&&_0x248e07['miniToolbarView']['showChangesButton']['set']({'isOn':!0x1,'icon':_0x5c0242}),this['_clearSuggestionContent'](_0x3a1494),_0x3a1494['showLoader'](),this['_updateNavigationUI'](),this['_createInteraction'](_0x3ba6d9,_0x5e3c40,_0x3a1494,_0x3bc6c5,_0x448f17)['catch'](_0x4568c0=>{this['_isAbortError'](_0x4568c0)||console['error']('Error\x20refreshing\x20interaction:',_0x4568c0);});}['_clearSuggestionContent'](_0x229f94){const _0x203020=_0x229f94['bodyView']['_children'];for(;_0x203020['length']>0x0;)_0x203020['remove'](_0x203020['first']);_0x229f94['bodyView']['hasPendingParts']=!0x1;}['_isAbortError'](_0x49abc1){return!!_0x49abc1['message']&&_0x49abc1['message']['startsWith']('ai-request-aborted');}['_clearInteractionHistory'](){this['_interactions']=[],this['_interactionParams']=void 0x0,this['_currentInteractionIndex']=0x0,this['_updateNavigationUI']();}['_stopInteraction'](){this['_interaction']&&this['_interaction']['stop'](),this['_promiseQueue']['abort'](),this['isBusy']=!0x1;}['_setupCustomViews'](){const _0x515a46=new _0x177962(this['editor']['locale']),_0x41dfaf=new _0x177962(this['editor']['locale']),_0x1ea078=new _0x4dc179(this['editor']['locale']),_0xcd3773=new _0x177962(this['editor']['locale']);_0x515a46['set']({'icon':_0x44428b,'label':i(this['editor']['locale'],'AI_ACTIONS_TRY_AGAIN'),'tooltip':!0x0,'class':'ck-ai-custom-action-button'}),_0x41dfaf['set']({'icon':_0x7fbeea,'tooltip':i(this['editor']['locale'],'AI_ACTIONS_PREVIOUS_INTERACTION'),'class':'ck-ai-navigation-button\x20ck-ai-previous-button'}),_0x1ea078['setTemplate']({'tag':'span','attributes':{'class':['ck-ai-interaction-counter']},'children':['1/1']}),_0xcd3773['set']({'icon':_0x4e5de6,'tooltip':i(this['editor']['locale'],'AI_ACTIONS_NEXT_INTERACTION'),'class':'ck-ai-navigation-button\x20ck-ai-next-button'}),_0x515a46['bind']('isEnabled')['to'](this,'isBusy',_0x2a8ef7=>!_0x2a8ef7),_0x515a46['on']('execute',()=>{this['_refreshInteraction']();}),_0x41dfaf['bind']('isEnabled')['to'](this,'isBusy',_0x45a89b=>!_0x45a89b),_0x41dfaf['on']('execute',()=>{this['_navigateToPrevious']();}),_0xcd3773['bind']('isEnabled')['to'](this,'isBusy',_0x519107=>!_0x519107),_0xcd3773['on']('execute',()=>{this['_navigateToNext']();}),this['_navigationPreviousButton']=_0x41dfaf,this['_navigationCounter']=_0x1ea078,this['_navigationNextButton']=_0xcd3773,this['_customViews']['add'](_0x515a46);}['_navigateToPrevious'](){const _0x17b58d=this['_interactions']['length'];this['_currentInteractionIndex']<_0x17b58d-0x1&&this['_displayInteractionAtIndex'](this['_currentInteractionIndex']+0x1);}['_navigateToNext'](){this['_currentInteractionIndex']>0x0&&this['_displayInteractionAtIndex'](this['_currentInteractionIndex']-0x1);}async['_displayInteractionAtIndex'](_0x2a338d){if(!this['_interactionParams'])return;this['_currentInteractionIndex']=_0x2a338d;const {mainView:_0x2b147f}=this['_interactionParams'],_0x58bf0d=this['_interactions'][this['_interactions']['length']-0x1-this['_currentInteractionIndex']];if(!_0x58bf0d)return;if(_0x58bf0d['hasError'])return this['_setErrorState'](_0x58bf0d,_0x2b147f),void this['_updateNavigationUI']();if(!_0x58bf0d['replies']['length'])return;_0x2b147f['hideError'](),this['_interactionParams']&&this['_clearErrorState'](_0x2b147f,this['_interactionParams']['aiBalloon']);const _0x37559d=_0x58bf0d['replies'][_0x58bf0d['replies']['length']-0x1];if(_0x37559d){const _0x4be541=this['editor'];this['_clearSuggestionContent'](_0x2b147f);try{const _0x534f6c=W({'editor':_0x4be541,'changeGroups':_0x37559d['changeGroups'],'documentContextContent':_0x37559d['documentContextContent'],'showDiff':this['_balloonShowDiff'],'trimUnchanged':!0x1});this['_clearSuggestionContent'](_0x2b147f),await new Promise(_0x3d6706=>setTimeout(_0x3d6706,0x32)),await _0x2b147f['updateContent']({'parts':_0x534f6c,'renderingStrategy':'static','abortSignal':new AbortController()['signal']});}catch(_0x2afd3b){this['_isAbortError'](_0x2afd3b)||console['error']('Error\x20updating\x20content\x20during\x20navigation:',_0x2afd3b);}}this['_updateNavigationUI']();}['_updateNavigationUI'](){if(!this['_navigationPreviousButton']||!this['_navigationCounter']||!this['_navigationNextButton'])return;const _0x286b83=this['_interactions']['length'],_0x500f80=_0x286b83>0x1,_0x2fbeaf=this['_interactionParams']?.['mainView'];if(_0x500f80){this['_isNavigationPreviousButtonInView']||this['_isNavigationCounterInView']||this['_isNavigationNextButtonInView']||(this['_customViews']['add'](this['_navigationPreviousButton']),_0x2fbeaf?.['addNavigationItem'](this['_navigationPreviousButton']),this['_isNavigationPreviousButtonInView']=!0x0,this['_customViews']['add'](this['_navigationCounter']),_0x2fbeaf?.['addNavigationItem'](this['_navigationCounter']),this['_isNavigationCounterInView']=!0x0,this['_customViews']['add'](this['_navigationNextButton']),_0x2fbeaf?.['addNavigationItem'](this['_navigationNextButton']),this['_isNavigationNextButtonInView']=!0x0);const _0x5261d7=_0x286b83-this['_currentInteractionIndex'];this['_navigationCounter']['element']&&(this['_navigationCounter']['element']['textContent']=_0x5261d7+'/'+_0x286b83),this['_navigationPreviousButton']['isEnabled']=this['_currentInteractionIndex']<_0x286b83-0x1,this['_navigationNextButton']['isEnabled']=this['_currentInteractionIndex']>0x0;}else(this['_isNavigationPreviousButtonInView']||this['_isNavigationCounterInView']||this['_isNavigationNextButtonInView'])&&(this['_customViews']['remove'](this['_navigationPreviousButton']),_0x2fbeaf?.['removeNavigationItem'](this['_navigationPreviousButton']),this['_isNavigationPreviousButtonInView']=!0x1,this['_customViews']['remove'](this['_navigationCounter']),_0x2fbeaf?.['removeNavigationItem'](this['_navigationCounter']),this['_isNavigationCounterInView']=!0x1,this['_customViews']['remove'](this['_navigationNextButton']),_0x2fbeaf?.['removeNavigationItem'](this['_navigationNextButton']),this['_isNavigationNextButtonInView']=!0x1);}['_setLoadingState'](_0x2e8ab7,_0x111c53){_0x2e8ab7['setLoading'](),_0x111c53['balloonView']['setLoading'](),this['isBusy']=!0x0;}async['_setErrorState'](_0x1dbda7,_0x2a6998){const _0x47ab18=i(this['editor']['locale'],'AI_ACTIONS_GENERIC_ERROR');_0x2a6998['showError'](_0x47ab18),_0x1dbda7['hasError']=!0x0,await this['_promiseQueue']['queueEmptyPromise'],_0x2a6998['setErrorState'](),this['_interactionParams']?.['aiBalloon']['balloonView']['toolbar']&&(this['_interactionParams']['aiBalloon']['balloonView']['toolbar']['isLoading']=!0x0);}['_clearErrorState'](_0xa130f3,_0x5bc43b){_0xa130f3['clearErrorState'](),_0x5bc43b['balloonView']['toolbar']&&(_0x5bc43b['balloonView']['toolbar']['isLoading']=!0x1);}async['_clearLoadingState'](_0x526476,_0x429544){await this['_promiseQueue']['queueEmptyPromise'],this['isBusy']=!0x1,_0x526476['clearLoading'](),_0x429544['balloonView']['clearLoading']();}}class Da extends _0x3af82b{static get['requires'](){return[ri,ci,ni];}static get['pluginName'](){return'AIQuickActions';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x5d92f2){super(_0x5d92f2),_0x5d92f2['config']['define']('ai.quickActions',{'extraCommands':[],'removeCommands':[]});}}class js{['id'];['title'];['description'];['isParameterized'];['useArgs'];['options'];constructor({id:_0x50585a,title:_0x432f40,description:_0x3ed5a1,isParameterized:_0x1a2256,useArgs:_0x14c42a,options:_0x26b700}){this['id']=_0x50585a,this['title']=_0x432f40,this['description']=_0x3ed5a1,this['isParameterized']=_0x1a2256,this['useArgs']=_0x14c42a,this['options']=_0x26b700;}}class kr extends js{['_models']=[];get['models'](){return this['_models'];}set['models'](_0x9fe75d){this['_models']=_0x9fe75d;}}class di extends ts(){['_checks'];constructor(_0x553204){super(),this['_checks']=this['_mapCheckDefinitions'](_0x553204);}get['checks'](){return this['_checks'];}['getCheckById'](_0x349a4d){return this['checks']['find'](_0x3eb780=>_0x3eb780['id']===_0x349a4d);}['_mapCheckDefinitions'](_0x51d17e){return _0x51d17e['map'](_0x5c231c=>'custom'===_0x5c231c['id']?new kr(_0x5c231c):new js(_0x5c231c));}}class Rs extends _0x44d7d3(){['id'];['contentNew'];['contentInitial'];['documentVersion'];constructor({id:_0x22aa60,contentNew:_0x5c9bdb,contentInitial:_0x3c8197,documentVersion:_0x8bb50d}){super(),this['id']=_0x22aa60,this['contentNew']=_0x5c9bdb,this['contentInitial']=_0x3c8197,this['documentVersion']=_0x8bb50d;}}class Is extends ts(){['id'];['parent'];['_data'];['_editorOperations']=[];constructor(_0x4a87de,_0x393566,_0x2dec4d){super(),this['id']=_0x4a87de,this['parent']=_0x2dec4d,this['_data']=_0x393566,this['set']('isActivated',!0x1),this['set']('isRated',!0x1),this['set']('status','active');}get['contentDiffed'](){return this['_data']['context']();}get['operations'](){return this['_data']['operations'];}get['operationsIsolated'](){return this['_data']['operationsIsolated'];}}class Ts extends ts(){['id']=_0xa215c8();['callId'];['_results']=new Map();['_changes']=[];['_documentData'];['_sourceCheck'];['_aiConnector'];['_reviewParams'];['_reviewArgs'];['_activeRequest']=null;['_currentError'];constructor(_0x3406ad,_0x45af67,_0xd90897,_0x1d3694,_0x44e9fb){super(),this['_documentData']=_0x3406ad,this['_sourceCheck']=_0x45af67,this['_aiConnector']=_0xd90897,this['_reviewParams']=_0x1d3694,this['_reviewArgs']=_0x44e9fb,this['on']('change:status',(_0x141848,_0x3864ee,_0x5b0e01)=>{this['fire']('reviewCheckRunUpdated',{'status':_0x5b0e01,'run':this,'error':this['_currentError']});}),this['set']('status','initialized');}get['documentData'](){return this['_documentData'];}get['processedResultsCount'](){return this['_results']['size'];}get['title'](){return this['_sourceCheck']['title'];}get['subTitle'](){return'';}get['reviewName'](){return this['_sourceCheck']['id'];}get['hasModifications'](){return!this['_changes']['every'](_0x269ede=>'active'===_0x269ede['status']);}async['start'](){this['status']='loading',this['_currentError']=void 0x0;try{this['_activeRequest']=this['_createApiRequest']();const _0x48307f=await this['_activeRequest']['getStream']();this['status']='data';for await(const _0x186b92 of _0x48307f)'unmodified'!==_0x186b92['data']['operation']&&('error'!==_0x186b92['data']['operation']?'review-metadata'!==_0x186b92['event']?this['_addReviewCheckResult'](_0x186b92['data']['dataId'],_0x186b92['data']['textDelta']):this['callId']=_0x186b92['data']['callId']:this['status']='error-chunk');'error-chunk'!==this['status']&&(0x0===this['_results']['size']?this['status']='unmodified':this['status']='ready');}catch(_0x10cd33){this['_currentError']=_0x10cd33,_0x10cd33 instanceof Error&&_0x10cd33['message']['includes']('ai-request-aborted')?this['status']='aborted':this['status']='error-general';}finally{this['_activeRequest']=null;}}async['restart'](){this['_results']['clear'](),this['_changes']['length']=0x0,this['_currentError']=void 0x0,await this['start']();}['addResultChanges'](_0x2f6162,_0x5ad88b){const _0x4f0a85=this['_results']['get'](_0x2f6162);if(!_0x4f0a85)return;const _0x4cff47=[];_0x5ad88b['forEach']((_0x295478,_0x3e496c)=>{const _0x1644af=new Is(_0x4f0a85['id']+'-'+_0x3e496c,_0x295478,_0x4f0a85);_0x1644af['on']('change:status',()=>{'accepted'===_0x1644af['status']?this['fire']('reviewCheckResultAccepted',{'change':_0x1644af}):'rejected'===_0x1644af['status']&&this['fire']('reviewCheckResultRejected',{'change':_0x1644af});}),_0x1644af['on']('change:isActivated',()=>{_0x1644af['isActivated']?this['fire']('reviewCheckResultActivated',{'change':_0x1644af}):this['fire']('reviewCheckResultDeactivated',{'change':_0x1644af});}),this['_changes']['push'](_0x1644af),_0x4cff47['push'](_0x1644af);}),this['fire']('reviewCheckResultReady',{'changes':_0x4cff47,'result':_0x4f0a85,'source':this});}['abort'](){this['_activeRequest']&&(this['_activeRequest']['abortController']['abort'](),this['_activeRequest']=null,this['status']='aborted');}['isChangeActive'](_0x2cb5a8){const _0x5d243d=this['_changes']['find'](_0x77b760=>_0x77b760['id']===_0x2cb5a8);return!(!_0x5d243d||'active'!==_0x5d243d['status']);}['getActiveChanges'](){return this['_changes']['filter'](_0xe558af=>'active'===_0xe558af['status']);}['markAllChangesAsAccepted'](){for(const _0x1446d1 of this['_changes'])'active'===_0x1446d1['status']&&(_0x1446d1['status']='accepted');this['_checkIfFinished']();}['markChangeAsAccepted'](_0x5d0cd8){const _0x5a8f99=this['_changes']['find'](_0x5bab6a=>_0x5bab6a['id']===_0x5d0cd8);_0x5a8f99&&'active'===_0x5a8f99['status']&&(_0x5a8f99['status']='accepted'),this['_checkIfFinished']();}['markChangeAsRejected'](_0x16e4ee){const _0x322c0f=this['_changes']['find'](_0xe7d218=>_0xe7d218['id']===_0x16e4ee);_0x322c0f&&'active'===_0x322c0f['status']&&(_0x322c0f['status']='rejected'),this['_checkIfFinished']();}['activateChange'](_0x397f8b){this['_changes']['filter'](_0x179684=>_0x179684['isActivated']&&_0x179684['id']!==_0x397f8b)['forEach'](_0x28e19b=>{_0x28e19b['isActivated']=!0x1;});const _0xbd2027=this['_changes']['find'](_0x18daa8=>_0x18daa8['id']===_0x397f8b);_0xbd2027&&(_0xbd2027['isActivated']=!0x0);}['deactivateChange'](){this['_changes']['filter'](_0x1d0d2e=>_0x1d0d2e['isActivated'])['forEach'](_0x587943=>{_0x587943['isActivated']=!0x1;});}['forceReadyState'](){this['status']='ready';}async['sendRating'](_0x28c24a){if('initialized'===this['status']||'loading'===this['status']||'data'===this['status'])return;if(!this['callId']||0x0===this['_changes']['length'])return;let _0x473b35;if(_0x28c24a){const _0x1aa971=this['_changes']['find'](_0x5146e7=>_0x5146e7['id']===_0x28c24a);if(_0x1aa971&&_0x1aa971['isRated'])return;_0x1aa971&&(_0x473b35=_0x1aa971['parent']['id'],_0x1aa971['isRated']=!0x0);}const _0x272ab8={'positiveCount':this['_changes']['filter'](_0x44ca0c=>'accepted'===_0x44ca0c['status'])['length'],'totalCount':this['_changes']['length']};this['_sendRatingRequest'](_0x272ab8,this['callId'],_0x473b35);}['_addReviewCheckResult'](_0x33d9df,_0x47070a){const _0x435c09=this['_documentData']['elements']['get'](_0x33d9df);if(!_0x435c09)return;const _0x57e8fc=_0x435c09['getContent']();if(_0x57e8fc===_0x47070a)return;const _0xb584ee=new Rs({'id':_0x33d9df,'contentInitial':_0x57e8fc,'contentNew':_0x47070a,'documentVersion':this['_documentData']['version']});this['_results']['set'](_0xb584ee['id'],_0xb584ee),this['fire']('reviewCheckResultAdded',{'result':_0xb584ee,'source':this});}['_checkIfFinished'](){if('ready'!==this['status'])return;0x0===this['_changes']['filter'](_0x4976c3=>'active'===_0x4976c3['status'])['length']&&(this['status']='finished');}}class li extends Ts{get['subTitle'](){if(!this['_reviewParams']||0x0===this['_reviewParams']['length'])return'';const _0x572526=[];if(this['_reviewParams']['length']>0x0&&this['_sourceCheck']['options'])for(let _0x38dae7=0x0;_0x38dae7<this['_reviewParams']['length'];_0x38dae7++){if(!this['_reviewParams'][_0x38dae7]||!this['_sourceCheck']['options'][_0x38dae7])continue;const _0x340fb6=this['_sourceCheck']['options'][_0x38dae7],_0x3bc11f=_0x340fb6['data']?.['find'](_0x1469ad=>_0x1469ad['id']===this['_reviewParams'][_0x38dae7]);_0x3bc11f&&_0x572526['push'](_0x3bc11f['label']);}return _0x572526['join'](',\x20');}get['reviewName'](){return this['_composeReviewName']();}['_createApiRequest'](){return this['_aiConnector']['callSystemReview']({'reviewName':this['_composeReviewName'](),'content':this['_documentData']['content'],'args':this['_reviewArgs']});}['_sendRatingRequest'](_0x5cc5e7,_0x11767a,_0x9590b9){return this['_aiConnector']['upsertAIReviewRating'](this['reviewName'],_0x11767a,_0x5cc5e7,_0x9590b9);}['_composeReviewName'](){return!this['_reviewParams']||0x0===this['_reviewParams']['length']||this['_sourceCheck']['useArgs']?this['_sourceCheck']['id']:[this['_sourceCheck']['id'],...this['_reviewParams']]['join']('-');}}class wi extends Ts{['_prompt'];['_model'];constructor(_0x21c102,_0x3671e7,_0x3b56f5,_0x20fd96,_0x153ed8){super(_0x3b56f5,_0x20fd96,_0x153ed8),this['_prompt']=_0x21c102,this['_model']=_0x3671e7;}get['subTitle'](){return this['_prompt'];}['_createApiRequest'](){return this['_aiConnector']['callCustomReview']({'content':this['_documentData']['content'],'prompt':this['_prompt'],'model':this['_model']});}['_sendRatingRequest'](_0x9e9c09,_0x2d8c37,_0x58fecf){return this['_aiConnector']['upsertCustomAIReviewRating'](_0x2d8c37,_0x9e9c09,_0x58fecf);}}class vi extends _0x44d7d3(){['_modelList']=[];['_connector'];constructor({connector:_0x3a89f4}){super(),this['_connector']=_0x3a89f4;}async['getAll'](){if(!this['_modelList']['length'])try{const _0x5aa421=this['_connector']['getModels'](),_0x582885=await _0x5aa421['list']();this['_modelList']=_0x582885['items'];}catch{}return this['_modelList'];}}const fi=[{'id':'custom','title':'Custom\x20command','description':'Type\x20a\x20custom\x20command\x20to\x20review\x20the\x20content\x20exactly\x20as\x20you\x20need.','isParameterized':!0x0},{'id':'correctness','title':'Correctness','description':'Ensure\x20the\x20text\x20is\x20factually\x20accurate\x20and\x20free\x20of\x20errors.','isParameterized':!0x1},{'id':'clarity','title':'Clarity','description':'Improve\x20the\x20clarity\x20and\x20readability\x20of\x20the\x20text.','isParameterized':!0x1},{'id':'readability','title':'Readability','description':'Enhance\x20the\x20overall\x20readability\x20of\x20the\x20text.','isParameterized':!0x1},{'id':'make','title':'Adjust\x20length','description':'Refine\x20text\x20length\x20to\x20match\x20your\x20needs.','isParameterized':!0x0,'options':[{'formType':'dropdown','label':'Adjust\x20length','default':'longer','data':[{'label':'Longer','id':'longer'},{'label':'Shorter','id':'shorter'}]}]},{'id':'make-tone','title':'Adjust\x20tone\x20and\x20style','description':'Choose\x20tone\x20and\x20style\x20to\x20change\x20content\x20as\x20you\x20need.','isParameterized':!0x0,'options':[{'formType':'dropdown','label':'Adjust\x20tone\x20and\x20style','default':'casual','data':[{'label':'Casual','id':'casual'},{'label':'Direct','id':'direct'},{'label':'Friendly','id':'friendly'},{'label':'Confident','id':'confident'},{'label':'Professional','id':'professional'}]}]},{'id':'translate','title':'Translate','description':'Translate\x20the\x20text\x20into\x20another\x20language.','isParameterized':!0x0,'useArgs':!0x0,'options':[{'formType':'dropdown','label':'Select\x20language','argsKey':'language','data':[{'label':'English','id':'english'},{'label':'Spanish','id':'spanish'},{'label':'French','id':'french'},{'label':'German','id':'german'},{'label':'Chinese\x20(Simplified)','id':'chinese'},{'label':'Japanese','id':'japanese'},{'label':'Russian','id':'russian'},{'label':'Portuguese','id':'portuguese'},{'label':'Korean','id':'korean'},{'label':'Italian','id':'italian'}]}]}];class ee extends _0x98dbd{['_aiConnector'];['_aiReviewModeUi'];['_aiReviewModeEditing'];['_aiReviewCheckList'];['_currentReviewCheckRun'];['_isDiffOn']=!0x1;['_changeActivationSource']=null;static get['requires'](){return[S];}static get['pluginName'](){return'AIReviewModeController';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}async['init'](){this['_aiConnector']=this['context']['plugins']['get']('AIConnector'),this['_aiReviewModeUi']=this['context']['plugins']['get']('AIReviewModeUI'),this['_aiReviewModeEditing']=this['context']['plugins']['get']('AIReviewModeEditing');const _0x48ccad=this['context']['config']['get']('ai.reviewMode.translations');if(_0x48ccad){for(const _0x334d4e of fi)'translate'===_0x334d4e['id']&&(_0x334d4e['options'][0x0]['data']=_0x48ccad);}const _0x2cf4d8=this['_translateReviewChecks'](fi);this['_aiReviewCheckList']=new di(_0x2cf4d8);const _0x535142=this['_aiReviewCheckList']['checks']['find'](_0x43ad2e=>'custom'===_0x43ad2e['id']);if(_0x535142){const _0x1585f0=await new vi({'connector':this['_aiConnector']})['getAll']();_0x535142['models']=_0x1585f0['map'](_0x36df30=>({..._0x36df30,'description':this['_getTranslationWithDefault']('AI_MODEL_DESCRIPTION_'+_0x36df30['id']['toUpperCase'](),_0x36df30['description'])}));}this['listenTo'](this['_aiReviewModeUi'],'getReviewCheckList',()=>{this['_aiReviewModeUi']['setAvailableChecks'](this['_aiReviewCheckList']['checks']);}),this['listenTo'](this['_aiReviewModeUi'],'runReviewCheck',async(_0x3dc950,_0x203520)=>{const _0x1fcdba=this['_aiReviewCheckList']['getCheckById'](_0x203520['id']);if(_0x1fcdba){this['_onDiffChange'](this['_isDiffOn']),_0x203520['isCustom']?this['_currentReviewCheckRun']=new wi(_0x203520['args']['prompt'],_0x203520['args']['model'],this['_aiReviewModeEditing']['getDocumentData'](),_0x1fcdba,this['_aiConnector']):this['_currentReviewCheckRun']=new li(this['_aiReviewModeEditing']['getDocumentData'](),_0x1fcdba,this['_aiConnector'],_0x203520['params'],_0x203520['args']),this['_aiReviewModeUi']['setCheckResultTitle'](this['_currentReviewCheckRun']['title'],this['_currentReviewCheckRun']['subTitle']),this['_currentReviewCheckRun']['on']('reviewCheckRunUpdated',(_0x5a049e,_0x2ac427)=>{'data'===_0x2ac427['status']||'loading'===_0x2ac427['status']?(this['_aiReviewModeEditing']['switchToReadOnly'](),this['_aiReviewModeUi']['showCheckRunResults'](_0x2ac427)):'finished'===_0x2ac427['status']?this['_aiReviewModeUi']['showReviewCompletedView']():'ready'===_0x2ac427['status']?this['_aiReviewModeUi']['showActionsWhenResultIsReady']():'unmodified'===_0x2ac427['status']?this['_aiReviewModeUi']['showNoChangesView']():'error-general'===_0x2ac427['status']?this['_aiReviewModeUi']['showGeneralErrorView']():'error-chunk'===_0x2ac427['status']?this['_aiReviewModeUi']['showChunkErrorView']():'aborted'===_0x2ac427['status']&&(this['_currentReviewCheckRun']&&this['_currentReviewCheckRun']['processedResultsCount']>0x0?setTimeout(()=>{this['_currentReviewCheckRun']?.['forceReadyState']();},0x0):this['_onReviewModeRunLeave'](!0x0)),'ready'!==_0x2ac427['status']&&'error-chunk'!==_0x2ac427['status']&&'error-general'!==_0x2ac427['status']||this['_currentReviewCheckRun']?.['sendRating']();}),this['_currentReviewCheckRun']['on']('reviewCheckResultAdded',(_0x45952d,_0x47d96f)=>{if(!this['_currentReviewCheckRun'])throw new _0x38f49c('ai-review-mode-no-current-check-run',this);const _0x4520e9=this['_aiReviewModeEditing']['diffContent'](_0x47d96f['result']['contentInitial'],_0x47d96f['result']['contentNew']);_0x47d96f['source']['addResultChanges'](_0x47d96f['result']['id'],_0x4520e9);}),this['_currentReviewCheckRun']['on']('reviewCheckResultReady',(_0x514fdd,_0x32a0ab)=>{for(const _0x3cad96 of _0x32a0ab['changes'])this['_aiReviewModeUi']['showCheckRunResult'](_0x3cad96);this['_aiReviewModeEditing']['markChangePositionInEditorContent'](_0x32a0ab['changes'],_0x32a0ab['source']['documentData']);}),this['_currentReviewCheckRun']['on']('reviewCheckResultAccepted',(_0x21e4a2,_0x2ac10a)=>{this['_aiReviewModeUi']['updateChangeState'](_0x2ac10a['change']['id'],'accepted');}),this['_currentReviewCheckRun']['on']('reviewCheckResultRejected',(_0x205a6c,_0x20fec4)=>{this['_aiReviewModeUi']['updateChangeState'](_0x20fec4['change']['id'],'rejected');}),this['_currentReviewCheckRun']['on']('reviewCheckResultActivated',(_0xf1e439,_0xb60d21)=>{this['_aiReviewModeUi']['setActiveStateInResults'](_0xb60d21['change']['id']);const _0x59ff69=this['_aiReviewModeEditing']['getMarkerElementForChange'](_0xb60d21['change']['id']);if(_0x59ff69){if('content'===this['_changeActivationSource']){const _0x3b4ee2=this['_aiReviewModeUi']['getChangeElement'](_0xb60d21['change']['id']);_0x3b4ee2&&_0x5d0f2c(_0x3b4ee2['closest']('.ck-ai-review-mode__check-run-result')||_0x3b4ee2);}else{if('panel'===this['_changeActivationSource']){const _0x40f465={'target':_0x59ff69['domElement'],'viewportOffset':{'top':0x55,'left':0x0,'bottom':0x0,'right':0x0},'ancestorOffset':0x14,'alignToTop':!0x0};nt(_0x40f465);}}this['_aiReviewModeUi']['showChangeBalloon'](_0xb60d21['change'],_0x59ff69['domElement']);}}),this['_currentReviewCheckRun']['on']('reviewCheckResultDeactivated',()=>{this['_aiReviewModeUi']['resetActiveStateInResults']();});try{await this['_currentReviewCheckRun']['start']();}catch(_0x142494){_0x142494 instanceof Error&&_0x142494['message']['includes']('ai-request-aborted')||(_0x142494 instanceof _0x38f49c?this['_logError'](_0x142494):this['_logError'](new _0x38f49c('ai-review-mode-check-run-failed',this,{'error':_0x142494})));}}else this['_logError'](new _0x38f49c('ai-review-mode-source-check-not-found',this,{'checkId':_0x203520['id']}));}),this['listenTo'](this['_aiReviewModeUi'],'leaveReviewMode',()=>{this['_onReviewModeRunLeave']();}),this['listenTo'](this['_aiReviewModeUi'],'leaveReviewModeResultList',()=>{this['_onReviewModeRunLeave'](!0x0);}),this['listenTo'](this['_aiReviewModeUi'],'abortReviewStream',()=>{this['_currentReviewCheckRun']&&this['_currentReviewCheckRun']['abort']();}),this['listenTo'](this['_aiReviewModeUi'],'finishReview',()=>{this['_onReviewModeRunLeave'](!0x0);}),this['listenTo'](this['_aiReviewModeUi'],'acceptAllChanges',()=>{if(!this['_currentReviewCheckRun'])return;const _0x2ac925=this['_currentReviewCheckRun']['getActiveChanges']();_0x2ac925['length']&&(this['_aiReviewModeEditing']['applyChange'](_0x2ac925['map'](_0x1b76c1=>_0x1b76c1['id'])),this['_currentReviewCheckRun']['markAllChangesAsAccepted'](),this['_currentReviewCheckRun']['sendRating']());}),this['listenTo'](this['_aiReviewModeUi'],'acceptChange',(_0x12d4ad,_0x1b53f2)=>{this['_currentReviewCheckRun']&&this['_currentReviewCheckRun']['isChangeActive'](_0x1b53f2['id'])&&(this['_aiReviewModeEditing']['applyChange']([_0x1b53f2['id']]),this['_currentReviewCheckRun']['markChangeAsAccepted'](_0x1b53f2['id']),this['_aiReviewModeUi']['hideChangeBalloon'](),this['_currentReviewCheckRun']['sendRating'](_0x1b53f2['id']));}),this['listenTo'](this['_aiReviewModeUi'],'dismissChange',(_0x1b5e38,_0xc6ebff)=>{this['_currentReviewCheckRun']&&this['_currentReviewCheckRun']['isChangeActive'](_0xc6ebff['id'])&&(this['_aiReviewModeEditing']['rejectChange'](_0xc6ebff['id']),this['_currentReviewCheckRun']['markChangeAsRejected'](_0xc6ebff['id']),this['_aiReviewModeUi']['hideChangeBalloon'](),this['_currentReviewCheckRun']['sendRating'](_0xc6ebff['id']));}),this['listenTo'](this['_aiReviewModeUi'],'toggleDiff',(_0x3adb87,_0x3139a1)=>{this['_isDiffOn']=_0x3139a1['on'],this['_onDiffChange'](this['_isDiffOn']);}),this['listenTo'](this['_aiReviewModeUi'],'retryReview',async()=>{this['_currentReviewCheckRun']&&await this['_currentReviewCheckRun']['restart']();}),this['listenTo'](this['_aiReviewModeUi'],'activateChange',(_0x4aba05,_0x1d0d85)=>{this['_currentReviewCheckRun']&&(this['_changeActivationSource']='panel',this['_currentReviewCheckRun']['activateChange'](_0x1d0d85['id']));}),this['listenTo'](this['_aiReviewModeUi'],'deactivateChange',()=>{this['_currentReviewCheckRun']&&this['_currentReviewCheckRun']['deactivateChange']();}),this['listenTo'](this['_aiReviewModeEditing']['emitter'],'changeMarkerClick',(_0x218261,_0x1497b2)=>{this['_currentReviewCheckRun']&&(this['_changeActivationSource']='content',this['_currentReviewCheckRun']['activateChange'](_0x1497b2['changeId']));});}['_onReviewModeRunLeave'](_0x20d481=!0x1){this['_currentReviewCheckRun']&&(this['_currentReviewCheckRun']['hasModifications']||this['_currentReviewCheckRun']['sendRating'](),this['_currentReviewCheckRun']['abort'](),this['_currentReviewCheckRun']['stopListening'](),this['_currentReviewCheckRun']=void 0x0),_0x20d481&&this['_aiReviewModeUi']['showReviewCheckList'](),this['_aiReviewModeEditing']['clearAllMarkers'](),this['_aiReviewModeEditing']['switchToEdit'](),this['_changeActivationSource']=null;const _0x30427f=this['_aiReviewModeEditing']['getEditor']();_0x30427f&&_0x30427f['editing']['view']['change'](_0x37dbeb=>{const _0x3a53ee=_0x30427f['editing']['view']['document']['getRoot']();_0x37dbeb['removeClass']('ck-ai-review-mode-diff',_0x3a53ee),_0x37dbeb['removeClass']('ck-ai-review-mode-highlights',_0x3a53ee);});}['_onDiffChange'](_0x1bc5a9){const _0xdbac3b=this['_aiReviewModeEditing']['getEditor']();_0x1bc5a9?this['_aiReviewModeUi']['hideDiffInBalloon']():this['_aiReviewModeUi']['showDiffInBalloon'](),_0xdbac3b&&_0xdbac3b['editing']['view']['change'](_0x11c6a1=>{const _0x408c5a=_0xdbac3b['editing']['view']['document']['getRoot']();_0x11c6a1['removeClass']('ck-ai-review-mode-diff',_0x408c5a),_0x11c6a1['removeClass']('ck-ai-review-mode-highlights',_0x408c5a),_0x11c6a1['addClass'](_0x1bc5a9?'ck-ai-review-mode-diff':'ck-ai-review-mode-highlights',_0x408c5a);});}['_translateReviewChecks'](_0x224857){return _0x224857['map'](_0x5ec208=>{const _0x1d43c6='AI_REVIEW_CHECK_'+_0x5ec208['id']['toUpperCase']()['replaceAll']('-','_'),_0x45d49d={..._0x5ec208,'title':this['_getTranslationWithDefault'](_0x1d43c6+'_TITLE',_0x5ec208['title']),'description':this['_getTranslationWithDefault'](_0x1d43c6+'_DESCRIPTION',_0x5ec208['description'])};return _0x5ec208['options']&&(_0x45d49d['options']=_0x5ec208['options']['map'](_0x2220c9=>({..._0x2220c9,'label':this['_getTranslationWithDefault'](_0x1d43c6+'_OPTIONS_LABEL',_0x2220c9['label']||''),'data':_0x2220c9['data']?_0x2220c9['data']['map'](_0xdacc4e=>({..._0xdacc4e,'label':this['_getTranslationWithDefault'](_0x1d43c6+'_OPTIONS_DATA_'+_0xdacc4e['id']['toUpperCase'](),_0xdacc4e['label'])})):void 0x0}))),_0x45d49d;});}['_getTranslationWithDefault'](_0x2a0bbe,_0x1fd0a6){const _0x28ff31=i(this['context']['locale'],_0x2a0bbe);return _0x28ff31===_0x2a0bbe?_0x1fd0a6:_0x28ff31;}['_logError'](_0x13eb90){ot(_0x13eb90['message']),this['_aiReviewModeUi']['showGeneralErrorView']();}}class Mr extends _0x4dc179{['_dropdownView'];['_defaultValue'];['_defaultLabel'];constructor(_0x10feb8,_0x1dad10){super(_0x10feb8),this['_defaultValue']=_0x1dad10['default']||(_0x1dad10['data']['length']>0x0?_0x1dad10['data'][0x0]['id']:''),this['_defaultLabel']=_0x1dad10['data']['find'](_0x300d21=>_0x300d21['id']===this['_defaultValue'])?.['label']||'',this['set']('formValue',''),this['_dropdownView']=_0x1353df(this['locale']);const _0x4e8a5b=this['_prepareListOptions'](_0x1dad10['data']);_0x29fca4(this['_dropdownView'],_0x4e8a5b,{'role':'menu','ariaLabel':_0x1dad10['label']}),this['_dropdownView']['buttonView']['set']({'label':this['_defaultLabel'],'withText':!0x0}),this['_dropdownView']['extendTemplate']({'on':{'click':this['bindTemplate']['to'](_0x3c2206=>{_0x3c2206['stopPropagation']();})}}),this['listenTo'](this['_dropdownView'],'execute',_0x5d7795=>{this['formValue']=_0x5d7795['source']['model']['id'],this['_dropdownView']['buttonView']['label']=_0x5d7795['source']['model']['label'];}),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-reset_all','ck-ai-review-mode__check-list-item-parameterized-form-element','ck-ai-review-mode__check-list-item-parameterized-form-element_dropdown']},'children':[this['_dropdownView']]});}['resetToDefault'](){this['formValue']=this['_defaultValue'],this['_dropdownView']['buttonView']['label']=this['_defaultLabel'];}['_prepareListOptions'](_0x39d664=[]){const _0x34b40e=new _0x381bb7();this['resetToDefault']();for(const _0x530c01 of _0x39d664){const _0x32ab16=new _0x3c44c5({'label':_0x530c01['label'],'withText':!0x0,'role':'menuitemradio','id':_0x530c01['id'],'model':_0x530c01});_0x32ab16['bind']('isOn')['to'](this,'formValue',_0x4ae834=>_0x4ae834===_0x32ab16['id']);const _0x31f9bb={'type':'button','model':_0x32ab16};_0x34b40e['add'](_0x31f9bb);}return _0x34b40e;}}class Qs extends _0x2f4a78{['_formItem']=null;constructor(_0x55a20b,_0x126d20,_0xac0fc2){super(_0x55a20b),this['argsKey']=_0x126d20?.['argsKey'];if('dropdown'===_0x126d20['formType'])this['_formItem']=new Mr(this['locale'],_0x126d20);this['set']('value',''),this['bind']('value')['to'](this['_formItem'],'formValue');const _0x10d913=new _0x23aba0(this['locale'],{'children':[this['_formItem']],'class':[_0xac0fc2?'ck-form__row_with-submit':'']});_0xac0fc2&&_0x10d913['children']['add'](_0xac0fc2),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-review-mode__form-item','ck-reset_all']},'children':[_0x10d913]});}['resetToDefault'](){this['_formItem']['resetToDefault']();}}class zs extends _0x1688b0{['keystrokes'];static ['MIN_ROWS']=0x1;static ['MAX_ROWS']=0xc;constructor(_0x57f7d9){super(_0x57f7d9),this['set']('isEmpty',!0x0),this['keystrokes']=new _0x514fee(),this['minRows']=zs['MIN_ROWS'],this['maxRows']=zs['MAX_ROWS'],this['extendTemplate']({'attributes':{'id':'ai-review-mode-prompt-input','class':['ck','ck-review-mode__prompt-input']}});}['render'](){super['render'](),this['on']('update',()=>{this['isEmpty']=''===this['element']['value']?.['trim']();}),this['keystrokes']['listenTo'](this['element']);}}class Xs extends _0x4dc179{['focusTracker']=new _0x9668c0();['keystrokes']=new _0x514fee();['focusCycler'];['_focusables']=new _0x3b5cfc();['submitButtonView'];['cancelButtonView'];['promptInputView'];['actionsFooterView'];['_modelSelectionDropdown'];['_modelSelectionDropdownItems'];['_check'];['_defaultValue'];['_defaultLabel'];constructor(_0x1d896c,_0x5c0e74){super(_0x1d896c),this['_check']=_0x5c0e74,this['set']('prompt',''),this['set']('modelId',''),this['_defaultValue']=_0x5c0e74['models']&&_0x5c0e74['models']['length']>0x0?_0x5c0e74['models'][0x0]['id']:'',this['_defaultLabel']=_0x5c0e74['models']&&_0x5c0e74['models']['length']>0x0?_0x5c0e74['models'][0x0]['name']:'',this['submitButtonView']=this['_createSubmitButtonView'](),this['cancelButtonView']=this['_createCancelButtonView'](),(this['promptInputView']=new _0x1fb092(this['locale'],()=>new zs(_0x1d896c)),this['promptInputView']['fieldView']['bind']('value')['to'](this,'prompt'),this['promptInputView']['fieldView']['on']('input',()=>{this['prompt']=this['promptInputView']['fieldView']['element']['value'];}),this['_modelSelectionDropdown']=this['_createModelSelectionDropdown'](),this['_modelSelectionDropdownItems']=new _0x381bb7(),this['_setModelList'](),_0x29fca4(this['_modelSelectionDropdown'],this['_modelSelectionDropdownItems']),this['actionsFooterView']=this['_createActionsFooterView'](),this['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__check-list-item-custom-actions']},'children':[new _0x23aba0(this['locale'],{'children':[this['promptInputView']]}),new _0x23aba0(this['locale'],{'children':[this['actionsFooterView']]})]}),this['promptInputView']['fieldView']['keystrokes']['set']('Enter',(_0x34f65a,_0xead173)=>{this['_isValid']()?(this['fire']('runReviewCheck',{'id':'custom','args':{'prompt':this['prompt'],'model':this['modelId']},'isCustom':!0x0}),_0xead173()):_0xead173();}),this['focusCycler']=new _0x3c97a0({'focusables':this['_focusables'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'actions':{'focusPrevious':'shift\x20+\x20tab','focusNext':'tab'}}));}['render'](){super['render'](),([this['promptInputView'],this['_modelSelectionDropdown'],this['cancelButtonView'],this['submitButtonView']]['forEach'](_0x193f42=>{this['_focusables']['add'](_0x193f42),this['focusTracker']['add'](_0x193f42['element']);}),this['keystrokes']['listenTo'](this['element']));}get['modelDefaultValue'](){return this['_defaultValue'];}get['modelDefaultLabel'](){return this['_defaultLabel'];}['resetToDefault'](){this['prompt']='',this['modelId']=this['modelDefaultValue'],this['_modelSelectionDropdown']['buttonView']['label']=this['modelDefaultLabel'],this['resetFormValidationStatus']();}['resetFormValidationStatus'](){this['promptInputView']['errorText']='';}['_isValid'](){this['resetFormValidationStatus']();for(const _0x40af35 of this['_getFormValidators']()){const _0x5721c6=_0x40af35();if(_0x5721c6)return this['promptInputView']['errorText']=_0x5721c6,!0x1;}return!0x0;}['_getFormValidators'](){return[()=>{if(0x0===this['promptInputView']['fieldView']['value']?.['trim']()['length'])return i(this['locale'],'AI_REVIEW_MODE_PROMPT_EMPTY_ERROR');}];}['_createSubmitButtonView'](){const _0x4155ff=new _0x177962(this['locale']),t=this['locale']['t'];return _0x4155ff['set']({'label':t('Submit'),'withText':!0x0,'class':'ck-ai-button-primary'}),_0x4155ff['on']('execute',()=>{this['_isValid']()&&this['fire']('runReviewCheck',{'id':'custom','args':{'prompt':this['prompt'],'model':this['modelId']},'isCustom':!0x0});}),_0x4155ff;}['_createCancelButtonView'](){const _0x3a0faa=new _0x177962(this['locale']),t=this['locale']['t'];return _0x3a0faa['set']({'label':t('Cancel'),'withText':!0x0,'class':'ck-ai-button-tertiary-filled'}),_0x3a0faa['extendTemplate']({'on':{'click':this['bindTemplate']['to'](_0xf851fc=>{_0xf851fc['stopPropagation']();})}}),_0x3a0faa['on']('execute',()=>{this['resetToDefault'](),this['fire']('closeCustomCheck');}),_0x3a0faa;}['_setModelList'](){this['_modelSelectionDropdownItems']['clear']();const _0x83a926=this['_check']['models'];if(this['resetToDefault'](),_0x83a926?.['length'])for(const _0x16bf8a of _0x83a926){const _0x3741e6=new _0x3c44c5({'label':_0x16bf8a['name'],'withText':!0x0,'role':'menuitemradio','id':_0x16bf8a['id'],'model':_0x16bf8a});_0x3741e6['bind']('isOn')['to'](this,'modelId',_0x3386c2=>_0x3386c2===_0x16bf8a['id']),this['_modelSelectionDropdownItems']['add']({'type':'button','model':_0x3741e6,'labelView':new Hs(this['locale'],_0x16bf8a)});}}['_createModelSelectionDropdown'](){const _0x70703a=_0x1353df(this['locale']);return _0x70703a['set']({'panelPosition':'se','class':'ck-ai-review-mode__check-list-item-model-dropdown'}),_0x70703a['buttonView']['set']({'label':this['_defaultLabel'],'withText':!0x0,'tooltip':!0x0}),this['listenTo'](_0x70703a,'execute',_0x2e11f8=>{this['modelId']=_0x2e11f8['source']['model']['id'],_0x70703a['buttonView']['label']=_0x2e11f8['source']['label'];}),_0x70703a;}['_createActionsFooterView'](){const _0x4d12b1=new _0x4dc179(this['locale']);return _0x4d12b1['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__check-list-item-custom-actions-footer']},'children':[this['_modelSelectionDropdown'],{'tag':'div','attributes':{'class':['ck-ai-review-mode__check-list-item-parameterized-custom-actions-buttons']},'children':[this['cancelButtonView'],this['submitButtonView']]}]}),_0x4d12b1;}}class Hs extends _0x310285{constructor(_0x370cad,_0x3c3b69){super();const _0xefeca=this['bindTemplate'];this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-button__label'],'style':_0xefeca['to']('style'),'id':_0xefeca['to']('id')},'children':[{'tag':'div','attributes':{'class':['ck-ai-review-mode__check-list-item-model-dropdown-name']},'children':[{'tag':'span','children':[{'text':_0xefeca['to']('text')}]}]},{'tag':'div','attributes':{'class':['ck-ai-review-mode__check-list-item-model-dropdown-description']},'children':[{'tag':'span','children':[_0x3c3b69['description']||'']}]}]});}}class Gs extends _0x2f4a78{['_formItemsCollection']=new _0x3b5cfc();['_customCheckView']=null;constructor(_0x2637bb,_0x2fe157,_0xfdd23e){super(_0x2637bb),this['set']('isParametrizedViewOpen',!0x1),this['set']('isListItemRendered',!0x1),this['set']('isItemParametrized',_0x2fe157['isParameterized']);const _0x3dba0a=this['_createIconView']();this['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__check-list-item',this['bindTemplate']['if']('isParametrizedViewOpen','ck-ai-review-mode__check-list-item_selected',_0x3d7d91=>_0x3d7d91),this['bindTemplate']['if']('isListItemRendered','ck-ai-review-mode__check-list-item_rendered',_0x340ad2=>_0x340ad2)],'style':{'--ck-ai-check-list-item-index':_0xfdd23e}},'on':{'click':this['bindTemplate']['to']('click')},'children':[{'tag':'div','attributes':{'class':['ck-ai-review-mode__check-list-item-content']},'children':[{'tag':'div','attributes':{'class':['ck-ai-review-mode__check-list-item-main-content']},'children':[{'tag':'div','attributes':{'class':['ck-ai-review-mode__check-list-item-title']},'children':[{'tag':'span','attributes':{'class':['ck-ai-review-mode__check-list-item-title-text']},'children':[{'text':_0x2fe157['title']}]},_0x3dba0a]},{'tag':'div','attributes':{'class':['ck-ai-review-mode__check-list-item-description']},'children':[{'text':_0x2fe157['description']}]}]}]},..._0x2fe157['isParameterized']?[this['_createParameterizedView'](_0x2fe157)]:[],...'custom'===_0x2fe157['id']?[this['_createCustomView'](_0x2fe157)]:[]]}),this['on']('click',()=>{_0x2fe157['isParameterized']?this['isParametrizedViewOpen']=!0x0:this['fire']('runReviewCheck',{'id':_0x2fe157['id']});}),requestAnimationFrame(()=>{this['isListItemRendered']=!0x0;});}['render'](){super['render'](),this['isItemParametrized']&&_0x14a3d2({'emitter':this,'activator':()=>!0x0===this['isParametrizedViewOpen'],'contextElements':[this['element']],'callback':()=>{this['isParametrizedViewOpen']=!0x1;}});}['resetToDefault'](){this['isParametrizedViewOpen']=!0x1,this['_formItemsCollection']['forEach'](_0x4321cd=>{_0x4321cd['resetToDefault']();}),this['_customCheckView']&&this['_customCheckView']['resetToDefault']();}['_createIconView'](){const _0x32eb2a=new _0x4c8e3c();return _0x32eb2a['content']=_0x1aeb6a,_0x32eb2a['extendTemplate']({'attributes':{'class':['ck-ai-review-mode__check-list-item-title-icon']}}),_0x32eb2a;}['_createParameterizedView'](_0x312093){const _0x319b9e=new _0x4dc179(),_0x12a744=this['_createFormView'](_0x312093);return _0x319b9e['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__check-list-item-parameterized',this['bindTemplate']['if']('isParametrizedViewOpen','ck-hidden',_0x5f1858=>!_0x5f1858)]},'children':[_0x12a744]}),_0x319b9e;}['_createFormView'](_0x639513){const _0x3ec709=new _0x4dc179(),_0x391ae8=Array['isArray'](_0x639513['options'])?_0x639513['options']:[],_0x4ea5d5=new _0x177962(this['locale']),t=this['locale']['t'];_0x4ea5d5['set']({'label':t('Submit'),'withText':!0x0,'class':'ck-ai-button-primary'}),_0x4ea5d5['extendTemplate']({'on':{'click':this['bindTemplate']['to'](_0x5384a8=>{_0x5384a8['stopPropagation']();})}}),_0x4ea5d5['on']('execute',()=>{const _0x131b43=[],_0x568abd={};this['_formItemsCollection']['forEach'](_0x4ca0bb=>{_0x131b43['push'](_0x4ca0bb['value']),_0x639513['useArgs']&&_0x639513['options']&&(_0x568abd[_0x4ca0bb['argsKey']]=_0x4ca0bb['value']);}),this['fire']('runReviewCheck',{'id':_0x639513['id'],'params':_0x131b43['length']?_0x131b43:void 0x0,'args':Object['keys'](_0x568abd)['length']?_0x568abd:void 0x0});});const _0x569a44=_0x391ae8['length'];return _0x391ae8['forEach']((_0x3e2389,_0x26c794)=>{const _0x5eb55d=_0x26c794===_0x569a44-0x1;this['_formItemsCollection']['add'](new Qs(this['locale'],_0x3e2389,_0x5eb55d?_0x4ea5d5:null));}),_0x3ec709['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__check-list-item-parameterized-form']},'children':this['_formItemsCollection']}),_0x3ec709;}['_createCustomView'](_0x403338){return this['_customCheckView']=new Xs(this['locale'],_0x403338),this['_customCheckView']['extendTemplate']({'attributes':{'class':['ck-ai-review-mode__check-list-item-parameterized','ck-ai-review-mode__check-list-item-parameterized_custom',this['bindTemplate']['if']('isParametrizedViewOpen','ck-hidden',_0x415ab7=>!_0x415ab7)]}}),this['_customCheckView']['delegate']('runReviewCheck')['to'](this),this['listenTo'](this['_customCheckView'],'closeCustomCheck',()=>{this['isParametrizedViewOpen']=!0x1;}),this['on']('change:isParametrizedViewOpen',(_0x31e5f7,_0x1bdcae,_0x5cae39)=>{_0x5cae39||this['_customCheckView']['resetFormValidationStatus']();}),this['_customCheckView'];}}class Ys extends _0x2f4a78{['_checkViews'];constructor(_0x4271a4){super(_0x4271a4),this['_checkViews']=new _0x3b5cfc();const _0x49fb20=this['bindTemplate'];this['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__check-list',_0x49fb20['if']('isVisible','ck-hidden',_0x1505ed=>!_0x1505ed)]},'children':this['_checkViews']});}['setChecks'](_0x6d1535){this['_checkViews']['clear']();for(const [_0x381037,_0x52876e]of _0x6d1535['entries']()){const _0x5151e7=new Gs(this['locale'],_0x52876e,_0x381037);_0x5151e7['delegate']('runReviewCheck')['to'](this),this['_checkViews']['add'](_0x5151e7);}}['hasChecks'](){return this['_checkViews']['length']>0x0;}['resetAllParameterizedChecks'](){for(const _0x436fdb of this['_checkViews'])_0x436fdb instanceof Gs&&_0x436fdb['resetToDefault']();}}class Bs extends _0x4dc179{['resultResponseView'];['acceptButtonView'];['dismissButtonView'];['infoButtonView'];constructor(_0x557ac6,_0x1734f8){super(_0x557ac6),this['id']=_0x1734f8,this['set']('changeId',_0x1734f8),this['resultResponseView']=this['_createResultResponseView'](),this['acceptButtonView']=this['_createAcceptButtonView'](),this['dismissButtonView']=this['_createDismissButtonView'](),this['infoButtonView']=this['_createInfoButtonView'](),this['set']('isInfoToggleOn',!0x1),this['set']('isActive',!0x1),this['set']('showDiff',!0x0),this['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run-result',this['bindTemplate']['if']('isActive','ck-ai-review-mode__check-run-result_active')]},'on':{'click':this['bindTemplate']['to']('click')},'children':[this['resultResponseView'],{'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run-result-footer']},'children':[{'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run-result-action-buttons']},'children':[this['acceptButtonView'],this['dismissButtonView']]},this['infoButtonView']]}]}),this['on']('click',()=>{this['fire']('activateChange',{'id':_0x1734f8,'source':this});});}['setItemAsActive'](){this['isActive']=!0x0;}['setItemAsInactive'](){this['isActive']=!0x1;}['_createResultResponseView'](){const _0x562fec=new _0x4dc179(this['locale']);return _0x562fec['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-content','ck-content-direct-excluded','ck-ai-review-mode__check-run-result-response',this['bindTemplate']['if']('showDiff','ck-hidden',_0x2be02b=>!_0x2be02b)]}}),_0x562fec;}['_createAcceptButtonView'](){const _0x1ec24b=new _0x177962(this['locale']);return _0x1ec24b['set']({'label':i(this['locale'],'AI_REVIEW_MODE_ACCEPT_CHANGE'),'withText':!0x0,'class':'ck-ai-button-secondary\x20ck-ai-review-mode__check-run-result-accept-button'}),_0x1ec24b['extendTemplate']({'on':{'click':this['bindTemplate']['to'](_0x27b07f=>{this['fire']('acceptChange',{'id':this['changeId']}),_0x27b07f['stopPropagation']();})}}),_0x1ec24b;}['_createDismissButtonView'](){const _0x197d29=new _0x177962(this['locale']);return _0x197d29['set']({'label':i(this['locale'],'AI_REVIEW_MODE_DISMISS_CHANGE'),'withText':!0x0,'class':'ck-ai-button-tertiary-filled\x20ck-ai-review-mode__check-run-result-dismiss-button'}),_0x197d29['extendTemplate']({'on':{'click':this['bindTemplate']['to'](_0x497d83=>{this['fire']('dismissChange',{'id':this['changeId']}),_0x497d83['stopPropagation']();})}}),_0x197d29;}['_createInfoButtonView'](){const _0x4ce837=new _0x177962(this['locale']);return _0x4ce837['set']({'label':i(this['locale'],'AI_REVIEW_MODE_LEARN_MORE'),'icon':_0x7b7d53,'tooltip':!0x0,'isToggleable':!0x0,'role':'menuitemcheckbox','class':'ck-ai-button-tertiary-filled\x20ck-ai-review-mode__check-run-result-info-button\x20ck-hidden'}),_0x4ce837['bind']('isOn')['to'](this,'isInfoToggleOn',_0x33ce4c=>_0x33ce4c),_0x4ce837['on']('execute',()=>{this['isInfoToggleOn']=!this['isInfoToggleOn'];}),_0x4ce837;}}class $s extends _0x2f4a78{['_resultViews'];['resultsHeader'];['reviewDisclaimer'];['_cancelButtonView'];['_acceptAllButtonView'];['_exitReviewButtonView'];['_toggleDiffButtonView'];['_errorMessageView'];constructor(_0x233595){super(_0x233595),this['_resultViews']=new _0x3b5cfc(),this['_cancelButtonView']=this['_createCancelButtonView'](),this['_acceptAllButtonView']=this['_createAcceptAllButtonView'](),this['_exitReviewButtonView']=this['_createExitReviewButtonView'](),this['_toggleDiffButtonView']=this['_createToggleDiffButtonView'](),this['resultsHeader']=this['_createResultHeaderView'](),this['_errorMessageView']=this['_createErrorView'](),this['reviewDisclaimer']=new Ri(_0x233595),this['set']('isLoading',!0x1),this['set']('isToggleDiffOn',!0x1),this['set']('isResultReady',!0x1),this['set']('headerTitle',''),this['set']('headerSubtitle',''),this['set']('isError',!0x1),this['set']('showErrorMessage',!0x1),this['set']('errorType','general');const _0x355192=this['_createCombinedSkeletonLoader'](),_0x17c94c=this['bindTemplate'];this['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run',_0x17c94c['if']('isVisible','ck-hidden',_0x4b827d=>!_0x4b827d)]},'children':[this['resultsHeader'],{'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run-results-wrapper']},'children':[this['_errorMessageView'],{'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run-results-container',this['bindTemplate']['if']('isLoading','ck-hidden',_0x29f2ff=>_0x29f2ff)]},'children':this['_resultViews']},_0x355192]},this['reviewDisclaimer']]});}['clearResults'](){this['_resultViews']['clear']();}['getResults'](){return this['_resultViews'];}['addResult'](_0x2fc20d){const _0x63a26a=new Bs(this['locale'],_0x2fc20d['id']);_0x63a26a['delegate']('acceptChange','dismissChange','activateChange')['to'](this),this['_resultViews']['add'](_0x63a26a),_0x63a26a['resultResponseView']['element']['innerHTML']=_0x2fc20d['contentDiffed'];}['hideResult'](_0x7d8708){const _0xc24a47=this['_resultViews']['find'](_0x284b77=>_0x284b77['id']===_0x7d8708);_0xc24a47&&(_0xc24a47['element']?.['classList']['add']('ck-ai-review-mode__check-run-result_removing'),_0xc24a47['element']?.['addEventListener']('animationend',()=>{this['_resultViews']['remove'](_0xc24a47),_0xc24a47['destroy']();},{'once':!0x0}));}['setTitle'](_0x125bbf,_0xe519cd){this['headerTitle']=_0x125bbf,this['headerSubtitle']=_0xe519cd||'';}['showChunkErrorMessage'](){this['errorType']='chunk',this['showErrorMessage']=!0x0;}['showGeneralErrorMessage'](){this['isError']=!0x0,this['errorType']='general',this['showErrorMessage']=!0x0;}['resetErrorState'](){this['isError']=!0x1,this['errorType']='general',this['showErrorMessage']=!0x1;}['_createSkeletonLoader'](){return new be(this['locale'],Le['aiReviewChecks']);}['_createCombinedSkeletonLoader'](){const _0x57fdba=new _0x4dc179(this['locale']),_0x291200=[];for(let _0x12b1c6=0x0;_0x12b1c6<0x10;_0x12b1c6++){const _0x55c886=this['_createSkeletonLoader']();_0x55c886['extendTemplate']({'attributes':{'class':['ck-ai-review-mode__check-run-skeleton-item']}}),_0x291200['push'](_0x55c886);}return _0x57fdba['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run-skeleton-container',this['bindTemplate']['if']('isLoading','ck-hidden',_0x5b5ed2=>!_0x5b5ed2)]},'children':_0x291200}),_0x57fdba;}['_createErrorView'](){const _0x1084cc=new _0x4dc179(this['locale']),_0x758a06=new _0x177962(this['locale']),t=this['locale']['t'];return _0x1084cc['delegate']('retryReview')['to'](this),_0x758a06['set']({'label':t('Try\x20again'),'withText':!0x0,'class':'ck-ai-button-secondary\x20ck-ai-review-mode__check-run-error-retry-button'}),_0x758a06['on']('execute',()=>{this['fire']('retryReview');}),_0x1084cc['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run-error-container',this['bindTemplate']['if']('showErrorMessage','ck-hidden',_0x3b2423=>!_0x3b2423),this['bindTemplate']['if']('errorType','ck-ai-review-mode__check-run-error-container_border-bottom',_0x5ad155=>'chunk'===_0x5ad155)]},'children':[{'tag':'div','attributes':{'class':['ck','ck-ai-chat-error','ck-ai-chat-error_full-width','ck-ai-review-mode__check-run-error-message',this['bindTemplate']['if']('errorType','ck-ai-chat-error_warning',_0x12d8d9=>'chunk'===_0x12d8d9)]},'children':[{'tag':'p','attributes':{'class':['ck-ai-chat-error__content',this['bindTemplate']['if']('errorType','ck-hidden',_0x1fb00c=>'general'!==_0x1fb00c)]},'children':[{'text':i(this['locale'],'AI_REVIEW_MODE_GENERAL_ERROR_MESSAGE')}]},{'tag':'p','attributes':{'class':['ck-ai-chat-error__content',this['bindTemplate']['if']('errorType','ck-hidden',_0x3c757b=>'chunk'!==_0x3c757b)]},'children':[{'text':i(this['locale'],'AI_REVIEW_MODE_CHUNK_ERROR_MESSAGE')}]}]},_0x758a06]}),_0x1084cc;}['_createCancelButtonView'](){const _0x545f00=new _0x177962(this['locale']);return _0x545f00['set']({'label':i(this['locale'],'AI_REVIEW_MODE_STOP_GENERATING'),'withText':!0x0,'class':['ai-chat-controls-loader__cancel-button'],'icon':_0x5eda7f}),_0x545f00['extendTemplate']({'attributes':{'class':[this['bindTemplate']['if']('isResultReady','ck-hidden',_0x56aa10=>_0x56aa10)]}}),_0x545f00['on']('execute',()=>{this['fire']('abortReviewStream');}),_0x545f00;}['_createToggleDiffButtonView'](){const _0x2aa1d2=new _0x177962(this['locale']);_0x2aa1d2['set']({'tooltip':!0x0,'isToggleable':!0x0,'role':'menuitemcheckbox'}),_0x2aa1d2['bind']('isEnabled')['to'](this,'isError',_0x586cd8=>!_0x586cd8),_0x2aa1d2['extendTemplate']({'attributes':{'class':['ck-ai-button-secondary','ck-ai-review-mode__check-run-toggle-diff-button',this['bindTemplate']['if']('isResultReady','ck-hidden',_0x54f11e=>!_0x54f11e)]}});const _0x52e6dc=i(this['locale'],'AI_REVIEW_MODE_HIDE_CHANGES'),_0x1e2b14=i(this['locale'],'AI_REVIEW_MODE_SHOW_CHANGES');return _0x2aa1d2['bind']('isOn')['to'](this,'isToggleDiffOn',_0x28df18=>_0x28df18),_0x2aa1d2['bind']('icon')['to'](this,'isToggleDiffOn',_0x1e1a7f=>_0x1e1a7f?_0x56577a:_0x443f0f),_0x2aa1d2['bind']('label')['to'](this,'isToggleDiffOn',_0x22e28d=>_0x22e28d?_0x52e6dc:_0x1e2b14),_0x2aa1d2['on']('execute',()=>{this['isToggleDiffOn']=!this['isToggleDiffOn'],this['fire']('toggleDiff',{'on':this['isToggleDiffOn']});}),_0x2aa1d2;}['_createAcceptAllButtonView'](){const _0x3be3b7=new _0x177962(this['locale']);return _0x3be3b7['set']({'label':i(this['locale'],'AI_REVIEW_MODE_ACCEPT_ALL'),'withText':!0x0}),_0x3be3b7['bind']('isEnabled')['to'](this,'isError',_0x34f2d1=>!_0x34f2d1),_0x3be3b7['extendTemplate']({'attributes':{'class':['ck-ai-button-primary','ck-ai-review-mode__check-run-accept-all-button',this['bindTemplate']['if']('isResultReady','ck-hidden',_0x1a4b1b=>!_0x1a4b1b)]}}),_0x3be3b7['on']('execute',()=>{this['fire']('acceptAllChanges');}),_0x3be3b7;}['_createExitReviewButtonView'](){const _0x195594=new _0x177962(this['locale']);return _0x195594['set']({'label':i(this['locale'],'AI_REVIEW_MODE_EXIT_REVIEW'),'withText':!0x0}),_0x195594['extendTemplate']({'attributes':{'class':['ck-ai-button-tertiary-filled','ck-ai-review-mode__check-run-exit-button',this['bindTemplate']['if']('isResultReady','ck-hidden',_0x4d2274=>!_0x4d2274)]}}),_0x195594['on']('execute',()=>{this['fire']('leaveReviewModeResultList');}),_0x195594;}['_createResultHeaderView'](){const _0x41d245=new _0x4dc179(this['locale']),_0x634256=this['_createTitleView']();return _0x41d245['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run-results-header']},'children':[_0x634256,{'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run-results-header-buttons']},'children':[this['_cancelButtonView'],this['_acceptAllButtonView'],this['_exitReviewButtonView'],this['_toggleDiffButtonView']]}]}),_0x41d245;}['_createTitleView'](){const _0x387d62=new _0x4dc179(this['locale']),_0x55eee5=new Te();return _0x55eee5['bind']('isVisible')['to'](this,'isResultReady',_0x2c9eb2=>!_0x2c9eb2),_0x387d62['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run-results-header-title-wrapper']},'children':[_0x55eee5,{'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run-results-header-title-content']},'children':[{'tag':'span','attributes':{'class':['ck-ai-review-mode__check-run-results-header-title']},'children':[{'text':this['bindTemplate']['to']('headerTitle')}]},{'tag':'span','attributes':{'class':['ck-ai-review-mode__check-run-results-header-subtitle']},'children':[{'text':this['bindTemplate']['to']('headerSubtitle')}]}]}]}),_0x387d62;}}class ih extends _0x2f4a78{['resultsHeader'];['_finishReviewButtonView'];constructor(_0xee8304){super(_0xee8304),this['_finishReviewButtonView']=this['_createFinishReviewButtonView'](),this['resultsHeader']=this['_createResultHeaderView'](),this['set']('viewType','completed');const _0x58e8c7=this['bindTemplate'];this['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__review-completed',_0x58e8c7['if']('isVisible','ck-hidden',_0x190a5e=>!_0x190a5e)]},'children':[this['resultsHeader'],{'tag':'div','attributes':{'class':['ck-ai-review-mode__review-completed-content']},'children':[{'tag':'span','attributes':{'class':['ck-ai-review-mode__review-completed-content-icon']},'children':[{'text':_0x58e8c7['to']('viewType',_0xd19afc=>'completed'===_0xd19afc?'':'')}]},{'tag':'p','attributes':{'class':['ck-ai-review-mode__review-completed-content-text']},'children':[{'text':_0x58e8c7['to']('viewType',_0x12bb88=>i(_0xee8304,'completed'===_0x12bb88?'AI_REVIEW_MODE_COMPLETED_TEXT':'AI_REVIEW_MODE_EMPTY_RESULTS_TEXT'))}]}]}]});}['_createFinishReviewButtonView'](){const _0x4c9610=new _0x177962(this['locale']);return _0x4c9610['set']({'label':i(this['locale'],'AI_REVIEW_MODE_FINISH_REVIEW_BUTTON_LABEL'),'withText':!0x0,'class':'ck-ai-button-primary'}),_0x4c9610['on']('execute',()=>{this['fire']('finishReview');}),_0x4c9610;}['_createResultHeaderView'](){const _0x2ad923=new _0x4dc179(this['locale']);return _0x2ad923['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__review-completed-header']},'children':[{'tag':'span','attributes':{'class':['ck-ai-review-mode__review-completed-header-title']},'children':[{'text':i(this['locale'],'AI_REVIEW_MODE_FINISH_REVIEW_HEADER_TITLE')}]},{'tag':'div','attributes':{'class':['ck-ai-review-mode__review-completed-header-buttons']},'children':[this['_finishReviewButtonView']]}]}),_0x2ad923;}}class ae extends _0x4dc179{['reviewModeHeader'];['reviewCheckListView'];['reviewCheckResultsView'];['reviewCompletedView'];constructor(_0x379e03){super(_0x379e03),this['reviewModeHeader']=new _0x2f6d58(_0x379e03,{'label':i(_0x379e03,'AI_REVIEW_MODE'),'icon':_0x59a57b,'class':'ck-ai-header\x20ck-ai-header_review-mode'}),this['reviewCheckListView']=new Ys(_0x379e03),this['reviewCheckListView']['delegate'](...Zs)['to'](this),this['reviewCheckResultsView']=new $s(_0x379e03),this['reviewCheckResultsView']['delegate'](...Zs)['to'](this),this['reviewCompletedView']=new ih(_0x379e03),this['reviewCompletedView']['delegate']('finishReview')['to'](this),this['reviewCheckListView']['set']('isVisible',!0x1),this['reviewCheckResultsView']['set']('isVisible',!0x1),this['reviewCheckResultsView']['set']('isLoading',!0x1),this['reviewCheckResultsView']['set']('isResultReady',!0x1),this['reviewCompletedView']['set']('isVisible',!0x1),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-reset_all','ck-ai-review-mode','ck-rounded-corners'],'dir':'ltr'},'children':[this['reviewModeHeader'],this['reviewCheckListView'],this['reviewCheckResultsView'],this['reviewCompletedView']]});}['showReviewCheckListView'](){this['reviewCheckListView']['resetAllParameterizedChecks'](),this['reviewCheckListView']['set']('isVisible',!0x0),this['reviewCheckResultsView']['set']('isVisible',!0x1),this['reviewCompletedView']['set']('isVisible',!0x1);}['showReviewCheckResultsView'](){this['hideActionsWhenResultIsReady'](),this['reviewCheckResultsView']['resetErrorState'](),this['reviewCheckListView']['set']('isVisible',!0x1),this['reviewCheckResultsView']['set']('isVisible',!0x0),this['reviewCheckResultsView']['clearResults'](),this['reviewCheckResultsView']['set']('isLoading',!0x0);}['addCheckRunResult'](_0x1cfa91){this['reviewCheckResultsView']['addResult'](_0x1cfa91),this['reviewCheckResultsView']['set']('isLoading',!0x1);}['showReviewCompletedView'](){this['reviewCheckListView']['set']('isVisible',!0x1),this['reviewCheckResultsView']['set']('isVisible',!0x1),this['reviewCompletedView']['set']('viewType','completed'),this['reviewCompletedView']['set']('isVisible',!0x0);}['showActionsWhenResultIsReady'](){this['reviewCheckResultsView']['isResultReady']=!0x0;}['showNoChangesView'](){this['reviewCheckListView']['set']('isVisible',!0x1),this['reviewCheckResultsView']['set']('isVisible',!0x1),this['reviewCompletedView']['set']('viewType','unmodified'),this['reviewCompletedView']['set']('isVisible',!0x0);}['hideActionsWhenResultIsReady'](){this['reviewCheckResultsView']['isResultReady']=!0x1;}['showGeneralErrorView'](){this['reviewCheckResultsView']['set']('isLoading',!0x1),this['showActionsWhenResultIsReady'](),this['reviewCheckResultsView']['showGeneralErrorMessage']();}['showChunkErrorView'](){this['reviewCheckResultsView']['set']('isLoading',!0x1),this['showActionsWhenResultIsReady'](),this['reviewCheckResultsView']['showChunkErrorMessage']();}}class ce extends _0x4ce253{['resultItemView'];constructor(_0x193604,_0x2b63e9){super(_0x193604),this['set']({'isVisible':!0x1,'position':'arrow_se','class':null,'top':0x0,'left':0x0}),this['extendTemplate']({'tag':'div','attributes':{'class':['ck-reset'],'tabindex':'-1'}}),this['content']['add'](this['_createContentView']()),_0x2b63e9['add'](this);}['render'](){super['render'](),this['_setupClickOutsideHandler']();}['updateContent'](_0x47fb74){this['resultItemView']['changeId']=_0x47fb74['id'],this['resultItemView']['resultResponseView']['element']['innerHTML']=_0x47fb74['contentDiffed'];}['showBalloon'](_0x22d8ce,_0x2662de){this['updateContent'](_0x22d8ce),this['show'](),this['pin']({'target':()=>this['_getBestRectPosition'](_0x2662de)});}['hideBalloon'](){this['hide'](),this['unpin']();}['hideDiffInBalloon'](){this['resultItemView']['showDiff']=!0x1;}['showDiffInBalloon'](){this['resultItemView']['showDiff']=!0x0;}['deactivateChange'](){this['fire']('deactivateChange');}['_setupClickOutsideHandler'](){_0x14a3d2({'emitter':this,'activator':()=>this['isVisible'],'contextElements':[this['element']],'callback':()=>{this['hideBalloon'](),this['deactivateChange']();}});}['_createContentView'](){const _0x2666a8=new _0x4dc179();return this['resultItemView']=new Bs(this['locale'],''),this['resultItemView']['resultResponseView']['extendTemplate']({'attributes':{'class':['ck-content']}}),this['resultItemView']['delegate']('acceptChange','dismissChange')['to'](this),_0x2666a8['setTemplate']({'tag':'div','attributes':{'class':['ck-reset','ck-ai-review-mode-balloon-panel-suggestion']},'children':[{'tag':'p','attributes':{'class':['ck-ai-review-mode__suggestion-text']},'children':[this['resultItemView']]}]}),_0x2666a8;}['_getBestRectPosition'](_0x3d13f6){const _0xa19cd6=Array['from'](_0x3d13f6['getClientRects']());return _0xa19cd6['find'](_0x234cc6=>_0x234cc6['width']>0x0)||_0xa19cd6[0x0];}}const Zs=['getReviewCheckList','runReviewCheck','abortReviewStream','toggleDiff','acceptAllChanges','leaveReviewModeResultList','activateChange','acceptChange','dismissChange','learnMore','finishReview','retryReview'];class ie extends _0x98dbd{['_reviewModeView'];['_reviewModeBalloonSuggestionItemView'];['_bodyCollection'];static get['requires'](){return[rt];}static get['pluginName'](){return'AIReviewModeUI';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x577075){super(_0x577075),this['_bodyCollection']=new Ft(this['context']['locale']),this['_bodyCollection']['attachToDom'](),this['_reviewModeView']=new ae(this['context']['locale']),this['_reviewModeView']['delegate'](...Zs)['to'](this),this['_reviewModeBalloonSuggestionItemView']=new ce(this['context']['locale'],this['_bodyCollection']),this['_reviewModeBalloonSuggestionItemView']['delegate']('acceptChange','dismissChange','deactivateChange')['to'](this);}['init'](){const _0x3c98ac=this['context']['plugins']['get']('AITabs');_0x3c98ac['view']['on']('activateTab',(_0x4b4a36,_0x26efea)=>{'reviewMode'===_0x26efea?this['fire']('getReviewCheckList'):this['fire']('leaveReviewMode');}),_0x3c98ac['view']['addTab']({'id':'reviewMode','buttonLabel':i(this['context']['locale'],'AI_REVIEW_MODE'),'buttonIcon':_0x59a57b,'order':0x0,'content':this['_reviewModeView']});}['destroy'](){this['_bodyCollection']['detachFromDom'](),super['destroy']();}['setAvailableChecks'](_0x3a512c){this['_reviewModeView']['reviewCheckListView']['hasChecks']()||this['_reviewModeView']['reviewCheckListView']['setChecks'](_0x3a512c),this['_reviewModeView']['showReviewCheckListView']();}['showReviewCheckList'](){this['fire']('getReviewCheckList');}['showCheckRunResults'](_0x562cca){_0x562cca&&('error-general'!==_0x562cca['status']?'error-chunk'!==_0x562cca['status']?this['_reviewModeView']['showReviewCheckResultsView']():this['showChunkErrorView']():this['showGeneralErrorView']());}['showCheckRunResult'](_0x59b97c){this['_reviewModeView']['addCheckRunResult'](_0x59b97c);}['showGeneralErrorView'](){this['_reviewModeView']['showGeneralErrorView']();}['showChunkErrorView'](){this['_reviewModeView']['showChunkErrorView']();}['setCheckResultTitle'](_0x53d187,_0x5a7ffd){this['_reviewModeView']['reviewCheckResultsView']['setTitle'](_0x53d187,_0x5a7ffd);}['setActiveStateInResults'](_0x27e82d){this['_reviewModeView']['reviewCheckResultsView']['getResults']()['forEach'](_0x23092b=>{_0x23092b['id']===_0x27e82d&&_0x23092b['setItemAsActive']();});}['resetActiveStateInResults'](){this['_reviewModeView']['reviewCheckResultsView']['getResults']()['forEach'](_0x38af9c=>_0x38af9c['setItemAsInactive']());}['updateChangeState'](_0x222f86,_0x39bc22){'accepted'!==_0x39bc22&&'rejected'!==_0x39bc22||this['_reviewModeView']['reviewCheckResultsView']['hideResult'](_0x222f86);}['showReviewCompletedView'](){this['_reviewModeView']['showReviewCompletedView']();}['showActionsWhenResultIsReady'](){this['_reviewModeView']['showActionsWhenResultIsReady']();}['showNoChangesView'](){this['_reviewModeView']['showNoChangesView']();}['hideActionsWhenResultIsReady'](){this['_reviewModeView']['hideActionsWhenResultIsReady']();}['showChangeBalloon'](_0x4d5bc4,_0x4413dd){this['_reviewModeBalloonSuggestionItemView']['showBalloon'](_0x4d5bc4,_0x4413dd);}['hideChangeBalloon'](){this['_reviewModeBalloonSuggestionItemView']['hideBalloon']();}['hideDiffInBalloon'](){this['_reviewModeBalloonSuggestionItemView']['hideDiffInBalloon']();}['showDiffInBalloon'](){this['_reviewModeBalloonSuggestionItemView']['showDiffInBalloon']();}['getChangeElement'](_0x569e22){const _0x31f6ee=this['_reviewModeView']['reviewCheckResultsView']['getResults']()['find'](_0x23cab7=>_0x23cab7['id']===_0x569e22);return _0x31f6ee?_0x31f6ee['element']:null;}['deactivateChange'](){this['_reviewModeBalloonSuggestionItemView']['deactivateChange']();}}const se='reviewmode-';class re extends _0x98dbd{static get['pluginName'](){return'AIReviewModeEditing';}static get['requires'](){return[_0x2037b9,B];}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}['_markers']=new Map();['_domEmitter'];['_eventEmitter'];constructor(_0x3ba29c){super(_0x3ba29c),this['_domEmitter']=new(te())(),this['_eventEmitter']=new(_0x44d7d3())();}get['emitter'](){return this['_eventEmitter'];}['afterInit'](){const _0x11749f=ei(this['context']);_0x11749f['conversion']['for']('editingDowncast')['markerToElement']({'model':se+'insert','view':(_0xdd53de,{writer:_0x1db629})=>{const _0x5a35ea=this['_markers']['get'](_0xdd53de['markerName']),_0x3031b7={'class':'ck-ai_review-mode-marker_add','data-marker-id':_0xdd53de['markerName']};return _0x1db629['createUIElement']('span',_0x3031b7,function(_0x546f07){const _0x261e95=this['toDomElement'](_0x546f07);return _0x261e95['innerHTML']=_0x5a35ea?.['text']||'',_0x261e95;});}}),_0x11749f['conversion']['for']('editingDowncast')['markerToHighlight']({'model':se+'remove-only','view':_0x287f50=>({'classes':'ck-ai_review-mode-marker_strikethrough','attributes':{'data-marker-id':_0x287f50['markerName']}})}),_0x11749f['conversion']['for']('editingDowncast')['markerToHighlight']({'model':se+'remove-context','view':_0x234546=>({'classes':'ck-ai_review-mode-marker_underline','attributes':{'data-marker-id':_0x234546['markerName']}})}),_0x11749f['conversion']['for']('editingDowncast')['markerToHighlight']({'model':se+'remove-text','view':_0x595e26=>({'classes':'ck-ai_review-mode-marker_hide','attributes':{'data-marker-id':_0x595e26['markerName']}})}),_0x11749f['conversion']['for']('dataDowncast')['markerToElement']({'model':se+'suggestion-context','view':(_0x398c7a,{writer:_0x27fbc3})=>_0x27fbc3['createRawElement']('span',{'class':'ck-ai_review-mode-marker_context-'+(_0x398c7a['isOpening']?'start':'end')})}),_0x11749f['conversion']['for']('downcast')['attributeToAttribute']({'model':_0xeaebf0,'view':_0x5afbf6}),this['_domEmitter']['listenTo'](document,'click',(_0x54affe,_0x8632d0)=>{const _0x3cffe5=_0x8632d0['target'],_0x2447c8=this['_findMarkerElement'](_0x3cffe5);if(!_0x2447c8)return;const _0x168713=_0x2447c8['getAttribute']('data-marker-id'),_0x307a90=_0x168713['split'](':')['pop']()?.['split']('_')[0x0];this['_eventEmitter']['fire']('changeMarkerClick',{'markerId':_0x168713,'changeId':_0x307a90});});}['getDocumentData'](){const _0x52cd9e=this['context']['plugins']['get']('AIEditing'),_0xae4b4f=ei(this['context']),_0x583635=_0xae4b4f['model'],_0x38354d=new _0x384315();for(const _0x439ccd of _0x583635['document']['getRoot']()['getChildren']()){const _0x19bda9=_0x439ccd['_clone'](!0x0);_0x38354d['_appendChild'](_0x19bda9);}for(const _0x503c1b of _0x583635['markers'])_0x38354d['markers']['set'](_0x503c1b['name'],this['_changeRangeOwnerDocument'](_0x503c1b['getRange']()['clone'](),_0x38354d));const _0x58f8ce=new Zt({'ignoreElementEnd':!0x0,'startPosition':_0x583635['createPositionAt'](_0x38354d,0x0)}),_0x43c48f=new Set(),_0x1c2d87=new Map();for(const {item:_0x383f7a}of _0x58f8ce){if(!_0x383f7a['is']('$textProxy'))continue;const _0x4b9c02=_0x383f7a['parent'];if((!_0x4b9c02||!_0x4b9c02['is']('element','caption'))&&(_0x4b9c02&&_0x4b9c02['is']('element'))){let _0x989c8d=_0x4b9c02['getAttribute'](_0xeaebf0);_0x989c8d||(_0x989c8d=_0x52cd9e['_nextDataId'](_0x43c48f),_0x4b9c02['_setAttribute'](_0xeaebf0,_0x989c8d)),_0x43c48f['add'](_0x989c8d);let _0x3cc335=_0x4b9c02;for(;_0x3cc335['parent']&&!_0x3cc335['parent']['is']('documentFragment');)_0x3cc335=_0x3cc335['parent'],_0x3cc335['hasAttribute'](_0xeaebf0)&&_0x3cc335['_removeAttribute'](_0xeaebf0);_0x1c2d87['set'](_0x989c8d,{'path':_0x4b9c02['getPath'](),'getContent':this['_createGetContentUsingDataIdFn'](_0x3cc335['_clone'](!0x0),_0x989c8d,_0xae4b4f['data'])}),_0x58f8ce['jumpTo'](_0x583635['createPositionAfter'](_0x4b9c02));}}return{'content':_0xae4b4f['data']['processor']['toData'](_0xae4b4f['data']['toView'](_0x38354d)),'version':_0xae4b4f['model']['document']['version'],'elements':_0x1c2d87};}['diffContent'](_0x5a5138,_0x27bd39){const _0x42f334=ei(this['context']),_0x2c3fe8=_0x42f334['data']['parse'](_0x5a5138,'$documentFragment'),_0x49296a=_0x42f334['model']['createPositionAt'](_0x2c3fe8,0x0),_0x28fc43=this['context']['plugins']['get']('DocumentCompare')['getDiff'](_0x5a5138,_0x27bd39,{'anchor':_0x49296a,'markDeletions':!0x0})['getOperations']()['filter'](_0x5cd087=>'insert'===_0x5cd087['type']||'marker'===_0x5cd087['type']&&_0x5cd087['name']['startsWith']('$markedRemove')),_0xc87f1e=this['_groupAdjacentOperations'](_0x28fc43),_0x36bf24=[];let _0x11c290=0x0;return _0x42f334['model']['change'](_0x124888=>{for(let _0x3d9190=0x0;_0x3d9190<_0xc87f1e['length'];_0x3d9190++){const _0x1d5549=_0xc87f1e[_0x3d9190],_0x395a64=_0x124888['createDocumentFragment']();for(const _0x10c3c7 of _0x2c3fe8['getChildren']())_0x124888['append'](_0x10c3c7['_clone'](!0x0),_0x395a64);for(const _0x244f08 of _0x1d5549['operationsIsolated'])if('insert'===_0x244f08['type']){const _0x1d90da=_0x244f08;_0x1d90da['baseVersion']=null,_0x1d90da['isDocumentOperation']=!0x1,this['_changeOperationOwnerDocument'](_0x1d90da,_0x395a64),_0x124888['batch']['addOperation'](_0x244f08),_0x42f334['model']['applyOperation'](_0x244f08);const _0x7710a3='suggestion:insertion:id:authorId:'+_0x11c290++,_0x1e2877=_0x42f334['model']['createRange'](_0x1d90da['position'],_0x1d90da['position']['getShiftedBy'](_0x1d90da['howMany']));_0x395a64['markers']['set'](_0x7710a3,_0x1e2877);}else{if('marker'===_0x244f08['type']&&_0x244f08['name']['startsWith']('$markedRemove')){const _0x4cd10f=_0x244f08,_0x39605d='suggestion:deletion:id:authorId:'+_0x11c290++;this['_changeOperationOwnerDocument'](_0x4cd10f,_0x395a64),_0x395a64['markers']['set'](_0x39605d,_0x4cd10f['newRange']);}}const _0x154bd9=this['_getChangeContext'](this['_changePositionOwnerDocument'](this['_getOperationStart'](_0x1d5549['operationsIsolated'][0x0]),_0x395a64),this['_changePositionOwnerDocument'](this['_getOperationEnd'](_0x1d5549['operationsIsolated'][_0x1d5549['operationsIsolated']['length']-0x1]),_0x395a64));_0x395a64['markers']['set'](se+'suggestion-context',new _0x24e098(_0x154bd9['start'],_0x154bd9['end'])),_0x36bf24['push']({..._0x1d5549,'context':this['_createGetContextFn'](_0x395a64,_0x42f334['data'],{'ellipsisBefore':_0x154bd9['hasContentBefore'],'ellipsisAfter':_0x154bd9['hasContentAfter']}),'content':this['_createGetContentFn'](_0x395a64,_0x42f334['data'])});}}),_0x36bf24;}['markChangePositionInEditorContent'](_0x3cebe8,_0x421f09){const _0x64ef9f=_0x3cebe8[0x0]['parent']['id'],_0x1566b7=_0x421f09['elements']['get'](_0x64ef9f);if(!_0x1566b7)return void console['warn']('No\x20element\x20found\x20for\x20ID:\x20'+_0x64ef9f);const _0x3d3638=_0x1566b7['path'],_0x48b220=ei(this['context']),_0x22424a=_0x48b220['model']['document']['history']['getOperations'](_0x421f09['version']),_0x3a4dc8=[];for(const _0xa4e4a3 of _0x3cebe8){const _0x3a0bbd=_0xa4e4a3['operationsIsolated']['map'](_0x39e9c1=>this['_translateOperationToEditorContent'](_0x39e9c1,_0x3d3638,_0x48b220['model']['document']['getRoots']()[0x0]));if(!_0x3a0bbd||!_0x3a0bbd['length'])continue;const _0x1da535=_0x3a0bbd['every'](_0xfd5d3c=>'marker'===_0xfd5d3c['type']&&_0xfd5d3c['name']['startsWith']('$markedRemove')),_0x16176b={'document':_0x48b220['model']['document'],'useRelations':!0x1,'padWithNoOps':!0x1},_0x179acd=tt(_0x3a0bbd,_0x22424a,_0x16176b)['operationsA'];for(const _0x59ffbe of _0x179acd)if('insert'===_0x59ffbe['type']){const _0x37f34b=_0x59ffbe,_0x3ec10b=_0x37f34b['nodes'];let _0x778b54='';for(const _0x516fdb of _0x3ec10b)_0x516fdb&&_0x516fdb['is']('model:$text')&&(_0x778b54+=_0x516fdb['data']);_0x3a4dc8['push']({'start':_0x37f34b['position'],'end':_0x37f34b['position'],'type':'insert','groupId':_0xa4e4a3['id'],'text':_0x778b54});}else{if('marker'===_0x59ffbe['type']&&_0x59ffbe['name']['startsWith']('$markedRemove')){const _0x3bb280=_0x59ffbe;let _0x23f7ea='remove-text';if(_0x1da535){const _0x1492bb=this['_findAdjacentContextDistance'](_0x3bb280['newRange']['start'],'backward',_0x48b220['model']['schema']),_0x3b75ea=this['_findAdjacentContextDistance'](_0x3bb280['newRange']['end'],'forward',_0x48b220['model']['schema']);if(_0x1492bb||_0x3b75ea){const _0x184961=_0x3bb280['newRange']['start']['getShiftedBy'](-_0x1492bb),_0x26e069=_0x3bb280['newRange']['end']['getShiftedBy'](_0x3b75ea);_0x3a4dc8['push']({'start':_0x184961,'end':_0x26e069,'groupId':_0xa4e4a3['id'],'type':'remove-context'});}else _0x23f7ea='remove-only';}_0x3a4dc8['push']({'start':_0x3bb280['newRange']['start'],'end':_0x3bb280['newRange']['end'],'groupId':_0xa4e4a3['id'],'type':_0x23f7ea});}}}this['_insertMarkers'](_0x3a4dc8);}['clearAllMarkers'](){ei(this['context'])['model']['change'](_0x3d15b4=>{for(const _0x119939 of this['_markers']['keys']())_0x3d15b4['removeMarker'](_0x119939);}),this['_markers']['clear']();}['switchToReadOnly'](){ei(this['context'])['enableReadOnlyMode']('ai-review-mode');}['switchToEdit'](){ei(this['context'])['disableReadOnlyMode']('ai-review-mode');}['applyChange'](_0x487f99){const _0x112b0e=ei(this['context']),_0x9f1013=_0x112b0e['model'],_0x238adc=_0x487f99['map'](_0x2a34b4=>this['_getMarkersDataForGroup'](_0x2a34b4))['flat']();_0x9f1013['change'](_0x439d33=>{for(const _0x295f7e of _0x238adc){const _0x34f27b=_0x112b0e['model']['markers']['get'](_0x295f7e['id']);_0x34f27b&&('insert'===_0x295f7e['type']?_0x9f1013['insertContent'](_0x439d33['createText'](_0x295f7e['text']||''),_0x34f27b['getRange']()['start']):'remove-text'!==_0x295f7e['type']&&'remove-only'!==_0x295f7e['type']||_0x9f1013['deleteContent'](_0x9f1013['createSelection'](_0x34f27b['getRange']())),_0x439d33['removeMarker'](_0x295f7e['id']),this['_markers']['delete'](_0x295f7e['id']));}});}['rejectChange'](_0x410298){const _0xdc5131=ei(this['context']),_0x15a4b9=this['_getMarkersDataForGroup'](_0x410298);_0xdc5131['model']['change'](_0x5498fc=>{for(const _0x2cf0b9 of _0x15a4b9)_0x5498fc['removeMarker'](_0x2cf0b9['id']),this['_markers']['delete'](_0x2cf0b9['id']);});}['getEditor'](){return ei(this['context']);}['getMarkerElementForChange'](_0x4f7b77){const _0x192e57=Array['from'](this['_markers']['values']())['filter'](_0x3bc644=>_0x3bc644['groupId']===_0x4f7b77);if(!_0x192e57['length'])return null;const _0x26dfe7=0x1===_0x192e57['length']?_0x192e57[0x0]:this['_sortMarkers'](_0x192e57)[0x0],_0xb72cf8=ei(this['context']),_0x191ea2=_0xb72cf8['model']['markers']['get'](_0x26dfe7['id']);if(!_0x191ea2)return null;const _0x26afe6=_0x191ea2['getRange'](),_0x2e68e8=_0xb72cf8['editing']['view']['getDomRoot']();if(!_0x2e68e8||!_0x26afe6)return null;const _0x562321=_0x2e68e8['querySelector']('[data-marker-id=\x22'+_0x26dfe7['id']+'\x22]');return _0x562321?{'modelRange':_0x26afe6,'domElement':_0x562321}:null;}['_translateOperationToEditorContent'](_0xa8af88,_0x321d56,_0x258807){if('insert'===_0xa8af88['type']){const _0x311e5d=_0xa8af88;return new $t(this['_changePosition'](_0x311e5d['position'],_0x321d56['concat'](_0x311e5d['position']['offset']),_0x258807),_0x311e5d['nodes'],_0x311e5d['baseVersion']);}if('marker'===_0xa8af88['type']&&_0xa8af88['name']['startsWith']('$markedRemove')){const _0x513ffc=_0xa8af88;return new Xt(_0x513ffc['name'],_0x513ffc['oldRange'],this['_changeRange'](_0x513ffc['newRange'],_0x321d56['concat'](_0x513ffc['newRange']['start']['offset']),_0x321d56['concat'](_0x513ffc['newRange']['end']['offset']),_0x258807),_0x513ffc['_markers'],_0x513ffc['affectsData'],_0x513ffc['baseVersion']);}return _0xa8af88;}['_groupAdjacentOperations'](_0x24d2c9){if(!_0x24d2c9['length'])return[];const _0x5d7c0e=[];let _0x316a99=0x0,_0x38824e=0x0,_0x284107=[];for(let _0x54d72d=0x0;_0x54d72d<=_0x24d2c9['length'];_0x54d72d++){const _0xfc2849=_0x24d2c9[_0x54d72d],_0x2cfc82=_0x24d2c9[_0x54d72d-0x1];!_0xfc2849||_0x2cfc82&&!this['_getOperationEnd'](_0x2cfc82)['isTouching'](this['_getOperationStart'](_0xfc2849))?(_0x5d7c0e['push']({'operations':_0x284107,'operationsIsolated':_0x284107['map'](_0xb1c68f=>this['_shiftOperation'](_0xb1c68f['clone'](),-_0x38824e)),'groupOffset':_0x316a99}),_0x284107=_0xfc2849?[_0xfc2849]:[],_0x38824e+=_0x316a99,_0x316a99=0x0):_0x284107['push'](_0xfc2849),_0xfc2849&&'insert'===_0xfc2849['type']&&(_0x316a99+=_0xfc2849['howMany']);}return _0x5d7c0e;}['_findAdjacentContextDistance'](_0x3bd88f,_0x26efdb,_0x4cbfa7,_0x1a48ff=0x1){const _0x1f29c8=new Zt({'startPosition':_0x3bd88f,'direction':_0x26efdb});let _0x4bda0b=0x0;for(let _0x16b9b7=0x0;_0x16b9b7<_0x1a48ff;_0x16b9b7++){let _0x502e44=0x0,_0xacb8f4=!0x1,_0x1ad340='forward'===_0x26efdb?/^\W*\w+/:/\w+\W*$/;for(const {item:_0x3b9b01}of _0x1f29c8)if(_0x3b9b01['is']('$textProxy')){const _0x384930=_0x1ad340['exec'](_0x3b9b01['data']);if(_0x384930&&_0x384930['length']){if(_0x502e44+='forward'===_0x26efdb?_0x384930['index']+_0x384930[0x0]['length']:_0x3b9b01['data']['length']-_0x384930['index'],_0x384930[0x0]['length']!==_0x3b9b01['data']['length'])break;_0xacb8f4=!0x0,_0x1ad340='forward'===_0x26efdb?/^\w+/:/\w+$/;}else{if(_0xacb8f4)break;_0x502e44+=_0x3b9b01['offsetSize'];}}else{if(_0x3b9b01['is']('element')){_0x4cbfa7['isInline'](_0x3b9b01)&&!_0xacb8f4&&(_0x502e44+=0x1);break;}}_0x4bda0b+=_0x502e44,_0x1f29c8['jumpTo'](_0x3bd88f['getShiftedBy']('forward'===_0x26efdb?_0x4bda0b:-_0x4bda0b));}return _0x4bda0b;}['_getChangeContext'](_0x1f37ca,_0x32414b){const _0x1bef3a=ei(this['context'])['model']['schema'],_0x4b0410=this['_findAdjacentContextDistance'](_0x1f37ca,'backward',_0x1bef3a,0x6),_0x31bf17=this['_findAdjacentContextDistance'](_0x32414b,'forward',_0x1bef3a,0x6),_0x186db4=_0x1f37ca['getShiftedBy'](-_0x4b0410),_0x4e5191=_0x32414b['getShiftedBy'](_0x31bf17);return{'start':_0x186db4,'end':_0x4e5191,'hasContentBefore':!_0x186db4['isAtStart'],'hasContentAfter':!_0x4e5191['isAtEnd']};}['_insertMarkers'](_0x36e4c9){const _0xebdb4e=this['context']['plugins']['get']('AIEditing'),_0x3af269=new Set();ei(this['context'])['model']['change'](_0x2f4586=>{for(const _0x1fc33d of _0x36e4c9){const _0x33f3c1=''+se+_0x1fc33d['type']+':'+_0x1fc33d['groupId']+'_'+_0xebdb4e['_nextDataId'](_0x3af269);this['_markers']['set'](_0x33f3c1,{'id':_0x33f3c1,'groupId':_0x1fc33d['groupId'],'type':_0x1fc33d['type'],'text':_0x1fc33d['text']}),_0x2f4586['addMarker'](_0x33f3c1,{'usingOperation':!0x1,'affectsData':!0x1,'range':_0x2f4586['createRange'](_0x1fc33d['start'],_0x1fc33d['end'])});}});}['_createGetContextFn'](_0x12e6f6,_0x131f09,_0x3f3861){let _0x332930='';return()=>{if(!_0x332930){const _0x16dcf3=_0x131f09['toView'](_0x12e6f6,{'showSuggestionHighlights':!0x0}),_0x1334e4=_0x16dcf3['getChild'](0x0);if(!_0x1334e4)return'';let _0xf8ad22=!0x1;const _0x519741=[];for(const _0x4877cf of _0x1334e4['getChildren']())_0x4877cf['is']('element','span')&&_0x4877cf['hasClass']('ck-ai_review-mode-marker_context-end')&&(_0xf8ad22=!0x1),_0xf8ad22&&_0x519741['push'](_0x4877cf),_0x4877cf['is']('element','span')&&_0x4877cf['hasClass']('ck-ai_review-mode-marker_context-start')&&(_0xf8ad22=!0x0);_0x1334e4['_removeChildren'](0x0,_0x1334e4['childCount']),_0x3f3861?.['ellipsisBefore']&&_0x1334e4['_appendChild'](''),_0x1334e4['_appendChild'](_0x519741),_0x3f3861?.['ellipsisAfter']&&_0x1334e4['_appendChild']('');const _0x3d389f=_0x131f09['htmlProcessor']['domConverter']['viewToDom'](_0x16dcf3),_0x35ac37=_0x131f09['htmlProcessor']['htmlWriter']['getHtml'](_0x3d389f);_0x332930=_0x35ac37;}return _0x332930;};}['_createGetContentFn'](_0x7ebbb4,_0x13cc73){let _0x2a37c3='';return()=>(_0x2a37c3||(_0x2a37c3=_0x13cc73['stringify'](_0x7ebbb4,{'showSuggestionHighlights':!0x0})),_0x2a37c3);}['_createGetContentUsingDataIdFn'](_0x4ac457,_0x2c2650,_0x3450ca){let _0x2686a4='';return()=>{if(!_0x2686a4){const _0x35c94f=_0x3450ca['toView'](new _0x384315(_0x4ac457)),_0x368955=_0x3450ca['htmlProcessor']['domConverter']['viewToDom'](_0x35c94f)['querySelector']('[data-id=\x22'+_0x2c2650+'\x22]');_0x2686a4=_0x368955?.['outerHTML']||'';}return _0x2686a4;};}['_findMarkerElement'](_0x33d008,_0x5ccc4d=0x5){let _0x2e672e=_0x33d008,_0x4aec77=null;for(let _0x2d302=0x0;_0x2d302<_0x5ccc4d&&_0x2e672e;_0x2d302++){if(!_0x2e672e['className']){_0x2e672e=_0x2e672e['parentElement'];continue;}if(!(''+_0x2e672e['className'])['includes']('ck-ai_review-mode-marker_')){_0x2e672e=_0x2e672e['parentElement'];continue;}if(!_0x2e672e['getAttribute']('data-marker-id'))break;_0x4aec77=_0x2e672e;break;}return _0x4aec77;}['_getMarkersDataForGroup'](_0x240d41){return Array['from'](this['_markers']['values']())['filter'](_0x402007=>_0x402007['groupId']===_0x240d41);}['_getOperationStart'](_0x179b6a){return'insert'===_0x179b6a['type']?_0x179b6a['position']:_0x179b6a['newRange']['start'];}['_getOperationEnd'](_0x523c0b,_0x1d6138=!0x1){return'insert'===_0x523c0b['type']?_0x1d6138?_0x523c0b['position']:_0x523c0b['position']['getShiftedBy'](_0x523c0b['howMany']):_0x523c0b['newRange']['end'];}['_shiftOperation'](_0x14eb6e,_0x52366b){return'insert'===_0x14eb6e['type']?_0x14eb6e['position']=_0x14eb6e['position']['getShiftedBy'](_0x52366b):'marker'===_0x14eb6e['type']&&_0x14eb6e['newRange']&&(_0x14eb6e['newRange']=new _0x24e098(_0x14eb6e['newRange']['start']['getShiftedBy'](_0x52366b),_0x14eb6e['newRange']['end']['getShiftedBy'](_0x52366b))),_0x14eb6e;}['_changeOperationOwnerDocument'](_0x55a3f6,_0x23e196){'insert'===_0x55a3f6['type']?_0x55a3f6['position']=this['_changePositionOwnerDocument'](_0x55a3f6['position'],_0x23e196):'marker'===_0x55a3f6['type']&&_0x55a3f6['newRange']&&(_0x55a3f6['newRange']=this['_changeRangeOwnerDocument'](_0x55a3f6['newRange'],_0x23e196));}['_changePositionOwnerDocument'](_0x3ff022,_0x2a8910){return new _0x2e7abe(_0x2a8910,_0x3ff022['path']);}['_changeRangeOwnerDocument'](_0x568860,_0xa9b83f){return new _0x24e098(this['_changePositionOwnerDocument'](_0x568860['start'],_0xa9b83f),this['_changePositionOwnerDocument'](_0x568860['end'],_0xa9b83f));}['_changePosition'](_0xb047d8,_0x3edcfc,_0x1daee8){return new _0x2e7abe(_0x1daee8,[..._0x3edcfc]);}['_changeRange'](_0x599e74,_0x22b21e,_0x31f4b1,_0x4be0d7){return new _0x24e098(this['_changePosition'](_0x599e74['start'],_0x22b21e,_0x4be0d7),this['_changePosition'](_0x599e74['end'],_0x31f4b1,_0x4be0d7));}['_sortMarkers'](_0x5dd1af){const _0x26a095=_0x39d4a5=>{switch(_0x39d4a5){case'insert':return 0x1;case'remove-context':return 0x2;case'remove-only':return 0x3;case'remove-text':return 0x4;}};return _0x5dd1af['sort']((_0xa98556,_0x2663f2)=>_0x26a095(_0xa98556['type'])-_0x26a095(_0x2663f2['type']));}}class Ha extends _0x98dbd{static get['requires'](){return[ee,ie,re];}static get['pluginName'](){return'AIReviewMode';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}}export{ni as AIActions,x as AIAdapter,Xn as AIAssistant,n as AIAssistantUI,$ as AIBalloon,xa as AIChat,et as AIChatController,at as AIChatHistory,jt as AIChatHistoryController,xt as AIChatHistoryUI,it as AIChatUI,S as AIConnector,B as AIEditing,La as AIEditorIntegration,Ot as AIQuickActionType,Da as AIQuickActions,ri as AIQuickActionsUI,tr as AIRequestError,js as AIReviewCheck,Rs as AIReviewCheckResult,Ts as AIReviewCheckRun,Ha as AIReviewMode,ee as AIReviewModeController,re as AIReviewModeEditing,ie as AIReviewModeUI,rt as AITabs,de as AITextAdapter,Pt as AIToggleButtonUI,Zn as AWSTextAdapter,Jn as OpenAITextAdapter,E as ShowAIAssistantCommand,io as ToggleAICommand,ks as createResizeButton,zn as getDefaultAICommands};