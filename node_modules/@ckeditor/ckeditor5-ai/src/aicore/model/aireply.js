/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x5e8312=_0xb32d;(function(_0x568367,_0x523757){const _0x57cc26=_0xb32d,_0x2332a6=_0x568367();while(!![]){try{const _0x4503f2=-parseInt(_0x57cc26(0x1bc))/0x1*(parseInt(_0x57cc26(0x1db))/0x2)+parseInt(_0x57cc26(0x1de))/0x3*(parseInt(_0x57cc26(0x19d))/0x4)+-parseInt(_0x57cc26(0x1a5))/0x5+-parseInt(_0x57cc26(0x1b3))/0x6+-parseInt(_0x57cc26(0x1a2))/0x7+parseInt(_0x57cc26(0x1da))/0x8+parseInt(_0x57cc26(0x1c8))/0x9;if(_0x4503f2===_0x523757)break;else _0x2332a6['push'](_0x2332a6['shift']());}catch(_0x5a26b9){_0x2332a6['push'](_0x2332a6['shift']());}}}(_0x57a5,0xbcb02));import{ObservableMixin as _0xe18198,uid as _0x141224}from'ckeditor5/src/utils.js';function _0xb32d(_0x4f544a,_0x58e8d4){const _0x57a573=_0x57a5();return _0xb32d=function(_0xb32de1,_0x26728a){_0xb32de1=_0xb32de1-0x198;let _0x33b37f=_0x57a573[_0xb32de1];return _0x33b37f;},_0xb32d(_0x4f544a,_0x58e8d4);}import{Element as _0x3bc5af,findAll as _0x3eae01,getAttribute as _0x230838,getParents as _0x2ca6bd,Document as _0x259dfa,parse as _0x36d8c9,Text as _0x15ef74}from'../utils/htmlparser.js';import{AIResponseParser as _0x58c20c}from'../pipeline/airesponseparser.js';import{AIResponseApplier as _0x34cfdb}from'../pipeline/airesponseapplier.js';import{getTranslation as _0x4aba17}from'../utils/common-translations.js';export const AI_REPLY_TYPES=[_0x5e8312(0x198),_0x5e8312(0x1c1),_0x5e8312(0x1a4),_0x5e8312(0x1e1)];export const AI_REPLY_TYPES_IGNORED=[_0x5e8312(0x19f)];export const AI_REPLY_TITLE_TYPE=_0x5e8312(0x19f);export class AIReply extends _0xe18198(){['id'];[_0x5e8312(0x1cc)];[_0x5e8312(0x1c0)];[_0x5e8312(0x1d8)]=[];[_0x5e8312(0x1c4)]=new _0x259dfa([]);[_0x5e8312(0x1a7)]=new _0x259dfa([]);[_0x5e8312(0x19b)]=[];[_0x5e8312(0x1ab)]=!0x1;[_0x5e8312(0x1c7)];[_0x5e8312(0x1ae)];[_0x5e8312(0x1cb)];[_0x5e8312(0x1b5)];constructor({type:_0x27a0ca,content:_0x551f9e='',isDone:_0x1ee3a1=!0x1,interactionId:_0x26006e,areActionsDisabled:_0x38fd10,documentContextContent:_0x19557e,editor:_0x50d8c2}){const _0xeef2bb=_0x5e8312;super(),this['id']=_0x141224(),this[_0xeef2bb(0x1cc)]=_0x26006e,this[_0xeef2bb(0x1c0)]=_0x27a0ca,this[_0xeef2bb(0x1ab)]=!!_0x38fd10,this[_0xeef2bb(0x1b5)]=_0x50d8c2,this[_0xeef2bb(0x1ae)]=new _0x58c20c(),this[_0xeef2bb(0x1cb)]=new _0x34cfdb(),this[_0xeef2bb(0x1c7)]=_0x36d8c9(_0x19557e||''),this[_0xeef2bb(0x1c9)](_0xeef2bb(0x1b9),_0x1ee3a1),this['on'](_0xeef2bb(0x1d7),()=>{const _0x19eebc=_0xeef2bb;this[_0x19eebc(0x199)]();}),this[_0xeef2bb(0x1c9)](_0xeef2bb(0x1a6),_0x551f9e);}[_0x5e8312(0x1d6)](_0x4344fd){const _0x137371=_0x5e8312;this[_0x137371(0x1c9)](_0x137371(0x1a6),this[_0x137371(0x1a6)]+_0x4344fd);}[_0x5e8312(0x1a0)](){const _0x387352=_0x5e8312;this[_0x387352(0x1b9)]||(this[_0x387352(0x1c9)](_0x387352(0x1b9),!0x0),this[_0x387352(0x199)]());}[_0x5e8312(0x1d4)](){const _0x46df0d=_0x5e8312;this[_0x46df0d(0x1a8)]();}[_0x5e8312(0x1ad)](_0x5a8651,_0x2552e3){const _0x2df9bb=_0x5e8312;this[_0x2df9bb(0x19b)][_0x5a8651][_0x2df9bb(0x1b7)]=_0x2552e3,this[_0x2df9bb(0x1b6)](_0x2df9bb(0x1dd),{'reply':this,'index':_0x5a8651,'state':_0x2552e3});}[_0x5e8312(0x199)](){const _0x329d26=_0x5e8312;if(_0x329d26(0x198)===this[_0x329d26(0x1c0)]){this[_0x329d26(0x1c4)]=this[_0x329d26(0x1ae)][_0x329d26(0x1cf)](this[_0x329d26(0x1a6)]);const _0x322428=this[_0x329d26(0x19b)];this[_0x329d26(0x1bd)]();const _0x511d74=this[_0x329d26(0x1ac)](_0x322428,this[_0x329d26(0x19b)]);(_0x511d74[_0x329d26(0x1df)]||this[_0x329d26(0x1b9)])&&this[_0x329d26(0x1b6)](_0x329d26(0x1dc),this,_0x511d74);}else this[_0x329d26(0x1c4)]=this[_0x329d26(0x1ae)][_0x329d26(0x1ba)](this[_0x329d26(0x1a6)]),this[_0x329d26(0x1b6)](_0x329d26(0x1dc),this);}[_0x5e8312(0x1ac)](_0x48a48a,_0x4147d8){const _0x45df0f=_0x5e8312,_0xe2f9a1=[];for(const _0x46a7a3 of _0x4147d8){const _0x4a5c55=_0x48a48a[_0x46a7a3[_0x45df0f(0x1c6)]];_0x4a5c55?_0x4a5c55[_0x45df0f(0x1cd)][_0x45df0f(0x1df)]!==_0x46a7a3[_0x45df0f(0x1cd)][_0x45df0f(0x1df)]?_0xe2f9a1[_0x45df0f(0x1b8)](_0x46a7a3):_0x4a5c55[_0x45df0f(0x1cd)][_0x45df0f(0x1d3)]((_0x4c6f7f,_0x190263)=>{const _0x3c8bd4=_0x45df0f,_0x540db6=_0x46a7a3[_0x3c8bd4(0x1cd)][_0x190263];_0x4c6f7f['id']!==_0x540db6['id']&&_0xe2f9a1[_0x3c8bd4(0x1b8)](_0x46a7a3);}):_0xe2f9a1[_0x45df0f(0x1b8)](_0x46a7a3);}return _0xe2f9a1;}[_0x5e8312(0x1bd)](){const _0x5836cd=_0x5e8312,_0x6d197e=new _0x3bc5af('p',{},[new _0x3bc5af(_0x5836cd(0x1c3),{'style':_0x5836cd(0x19c)},[new _0x15ef74(_0x4aba17(this[_0x5836cd(0x1b5)][_0x5836cd(0x1ca)],_0x5836cd(0x1be)))])]),_0x5cc022=this[_0x5836cd(0x1cb)][_0x5836cd(0x1bf)](this[_0x5836cd(0x1c4)],this[_0x5836cd(0x1c7)][_0x5836cd(0x1d5)](!0x0),{'markUnstableElements':!this[_0x5836cd(0x1b9)],'replaceRemovedWith':_0x6d197e,'cutAfterLastChange':!this[_0x5836cd(0x1b9)]});if(!_0x5cc022[_0x5836cd(0x1ce)][_0x5836cd(0x1df)]&&!this[_0x5836cd(0x1b9)])return;this[_0x5836cd(0x1a7)]=_0x5cc022[_0x5836cd(0x1c4)];let _0x237157=[];if(_0x3eae01(_0x1e68c0=>{const _0x20b06f=_0x5836cd,_0x5ddbdc=_0x230838(_0x1e68c0,_0x20b06f(0x1a1));if(!_0x5ddbdc||!_0x2c5381(_0x5ddbdc))return!0x1;const _0x14d4c6=[_0x1e68c0,..._0x2ca6bd(_0x1e68c0)]['at'](-0x2);if(_0x1e68c0!=_0x14d4c6){const _0x238533=_0x230838(_0x14d4c6,_0x20b06f(0x1a1));_0x2c5381(_0x238533)||(_0x237157[_0x20b06f(0x1b8)]({'node':_0x14d4c6,'id':_0x238533,'type':_0x20b06f(0x19a)}),_0x5cc022[_0x20b06f(0x1ce)][_0x20b06f(0x1b8)](_0x238533));}else _0x5cc022[_0x20b06f(0x1ce)][_0x20b06f(0x19e)](_0x5ddbdc)?_0x237157[_0x20b06f(0x1b8)]({'node':_0x1e68c0,'type':_0x20b06f(0x19a),'id':_0x5ddbdc}):_0x5cc022[_0x20b06f(0x1a9)][_0x20b06f(0x19e)](_0x5ddbdc)?_0x237157[_0x20b06f(0x1b8)]({'node':_0x1e68c0,'type':_0x20b06f(0x1b4),'id':_0x5ddbdc,'anchorId':_0x230838(_0x1e68c0[_0x20b06f(0x1d2)],_0x20b06f(0x1a1))}):_0x237157[_0x20b06f(0x1b8)]({'node':_0x1e68c0,'type':_0x20b06f(0x1c5),'id':_0x5ddbdc});return!0x0;},this[_0x5836cd(0x1a7)]),_0x237157=_0x237157[_0x5836cd(0x1d9)](({node:_0x1339a6})=>[..._0x2ca6bd(_0x1339a6),_0x1339a6][_0x5836cd(0x1b0)](_0x498f10=>!_0x230838(_0x498f10,_0x5836cd(0x1b1)))),0x0==_0x237157[_0x5836cd(0x1df)])return;const _0x46010e=[[_0x237157[0x0]]];for(let _0x3d602f=0x1;_0x3d602f<_0x237157[_0x5836cd(0x1df)];_0x3d602f++){const _0x3c6646=_0x46010e[_0x46010e[_0x5836cd(0x1df)]-0x1],_0x195caa=_0x3c6646[_0x3c6646[_0x5836cd(0x1df)]-0x1];_0x237157[_0x3d602f][_0x5836cd(0x1c2)][_0x5836cd(0x1d2)]==_0x195caa[_0x5836cd(0x1c2)]&&_0x5836cd(0x19a)!=_0x237157[_0x3d602f][_0x5836cd(0x1c0)]&&_0x5836cd(0x19a)!=_0x195caa[_0x5836cd(0x1c0)]?_0x3c6646[_0x5836cd(0x1b8)](_0x237157[_0x3d602f]):_0x46010e[_0x5836cd(0x1b8)]([_0x237157[_0x3d602f]]);}for(const _0x945e16 of _0x46010e){const _0x201bcf=_0x945e16[0x0],_0x970878=_0x945e16[_0x945e16[_0x5836cd(0x1df)]-0x1],_0x4e14ea=_0x273d3c(_0x201bcf[_0x5836cd(0x1c2)][_0x5836cd(0x1d2)]);_0x4e14ea&&_0x945e16[_0x5836cd(0x1af)](_0x4e14ea);const _0x4a4ae9=_0x273d3c(_0x970878[_0x5836cd(0x1c2)][_0x5836cd(0x1d1)]);_0x4a4ae9&&_0x945e16[_0x5836cd(0x1b8)](_0x4a4ae9);}function _0x2c5381(_0x22f9e2){const _0x581f19=_0x5836cd;return _0x5cc022[_0x581f19(0x1ce)][_0x581f19(0x19e)](_0x22f9e2)||_0x5cc022[_0x581f19(0x1a9)][_0x581f19(0x19e)](_0x22f9e2)||_0x5cc022[_0x581f19(0x1bb)][_0x581f19(0x19e)](_0x22f9e2);}function _0x273d3c(_0x1aaba9){const _0xe15e7a=_0x5836cd;if(_0x1aaba9&&_0x230838(_0x1aaba9,_0xe15e7a(0x1a1))&&!_0x230838(_0x1aaba9,_0xe15e7a(0x1b1))){const _0x435247=_0x230838(_0x1aaba9,_0xe15e7a(0x1a1));if(!_0x2c5381(_0x435247))return{'node':_0x1aaba9,'type':_0xe15e7a(0x1a3),'id':_0x435247};}return null;}this[_0x5836cd(0x19b)]=_0x46010e[_0x5836cd(0x1d0)]((_0x9f821d,_0x5b2ce0)=>({'changes':_0x9f821d,'state':_0x5836cd(0x1aa),'index':_0x5b2ce0}));}}export function isValidReplyType(_0xdf695e){const _0x2c8f0e=_0x5e8312;return Object[_0x2c8f0e(0x1e0)](AI_REPLY_TYPES)[_0x2c8f0e(0x19e)](_0xdf695e);}function _0x57a5(){const _0x1a93b2=['isDone','convertMarkdownToHTML','removedNodeIds','271zxNvUH','updateChangeGroups','AI_SUGGESTION_CONTENT_PART_REMOVED','merge','type','text-delta','node','span','parsedContent','removed','index','documentContextContent','22208634owNdwy','set','locale','aiResponseApplier','interactionId','changes','modifiedNodeIds','parseAndNormalizeHTML','map','nextSibling','previousSibling','forEach','destroy','cloneNode','appendContent','change:content','sources','filter','10743064iIECIz','4966PKfaIN','replyContentUpdated','replyChangeGroupStateUpdated','45VwkMKR','length','values','reasoning','modification-delta','onContentChange','modified','changeGroups','color:\x20#808080;\x20font-style:\x20italic','31468xpEcuU','includes','conversation-title','done','data-id','4541719LLRcdv','context','web-search','2271535oCHPDm','content','parsedMergedContent','stopListening','newNodeIds','pending','areActionsDisabled','_getDifferentChangeGroups','setChangeGroupState','aiResponseParser','unshift','every','data-unstable','source','8277786tretct','new','editor','fire','state','push'];_0x57a5=function(){return _0x1a93b2;};return _0x57a5();}export function isIgnoredReplyType(_0x2f11aa){const _0x2f9ebc=_0x5e8312;return AI_REPLY_TYPES_IGNORED[_0x2f9ebc(0x19e)](_0x2f11aa);}export function isReplyTitleType(_0x55fc5c){return _0x55fc5c===AI_REPLY_TITLE_TYPE;}export function isSourceType(_0x51b46c){const _0x11300f=_0x5e8312;return _0x11300f(0x1b2)===_0x51b46c;}