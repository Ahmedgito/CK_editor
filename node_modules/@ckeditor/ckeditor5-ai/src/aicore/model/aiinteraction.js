/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0xb798fa=_0x4bbb;function _0xe262(){const _0x1e4713=['ai-chat-interaction-error','replyCreated','_isWebSearching','callId','splice','stopListening','setConversationTitle','replies','createReply','find','webSearchFinished','interactionCreated','getStream','getDocumentContext','replyChangeGroupStateUpdated','7025298bdAcSZ','appendContent','reasoning','stop','reasoningFinished','conversationTitle','connector','getReply','isDestroyed','3873975HEvPeb','1243681TxUQpG','length','332108zcfKAx','interactionStarted','push','event','delegate','editor','sources','message-metadata','webSearchStarted','textDelta','replyContentUpdated','2987844XVBJTZ','currentRequest','start','content','isStopped','interactionStopped','ai-interaction-invalid-event-type','24152744PtnqrP','abort','_isReasoning','6exarXq','actionCallId','destroy','error','1512910CxTBNg','sendRequest','_finalizeInteraction','currentReply','interactionDestroyed','modification-delta','forEach','source','abortController','fire','interactionFinished','action-metadata','web-search','done','data','messageId','reasoningStarted'];_0xe262=function(){return _0x1e4713;};return _0xe262();}(function(_0x4d17ec,_0x562db7){const _0x14f027=_0x4bbb,_0x3d01b0=_0x4d17ec();while(!![]){try{const _0x17e523=parseInt(_0x14f027(0xc7))/0x1+-parseInt(_0x14f027(0xc9))/0x2+-parseInt(_0x14f027(0xc6))/0x3+-parseInt(_0x14f027(0xd4))/0x4+parseInt(_0x14f027(0xe2))/0x5*(-parseInt(_0x14f027(0xde))/0x6)+-parseInt(_0x14f027(0xbd))/0x7+parseInt(_0x14f027(0xdb))/0x8;if(_0x17e523===_0x562db7)break;else _0x3d01b0['push'](_0x3d01b0['shift']());}catch(_0x167dba){_0x3d01b0['push'](_0x3d01b0['shift']());}}}(_0xe262,0xb7a6e));import{CKEditorError as _0x138bd2,EmitterMixin as _0x567a7b,logWarning as _0x10789e,uid as _0x2451c8}from'ckeditor5/src/utils.js';import{AIReply as _0x386ec0,isIgnoredReplyType as _0x5b92f8,isValidReplyType as _0x538c6e,isReplyTitleType as _0x3ee21b,isSourceType as _0x405c0f}from'./aireply.js';export const AI_MODEL_EVENT_NAMES=[_0xb798fa(0xb9),_0xb798fa(0xca),_0xb798fa(0xd9),_0xb798fa(0xec),_0xb798fa(0xe6),_0xb798fa(0xf4),_0xb798fa(0xd3),_0xb798fa(0xbc),_0xb798fa(0xb4),_0xb798fa(0xd1),_0xb798fa(0xb8),_0xb798fa(0xf2),_0xb798fa(0xc1),_0xb798fa(0xe1)];function _0x4bbb(_0x1188c5,_0x5de7c4){const _0xe26244=_0xe262();return _0x4bbb=function(_0x4bbb16,_0xd3faf0){_0x4bbb16=_0x4bbb16-0xb4;let _0x3dc6fd=_0xe26244[_0x4bbb16];return _0x3dc6fd;},_0x4bbb(_0x1188c5,_0x5de7c4);}export class AIInteraction extends _0x567a7b(){['id'];[_0xb798fa(0xb5)]=[];[_0xb798fa(0xe5)];[_0xb798fa(0xf1)];[_0xb798fa(0xdf)];[_0xb798fa(0xd5)];[_0xb798fa(0xc3)];[_0xb798fa(0xd8)]=!0x1;[_0xb798fa(0xc5)]=!0x1;[_0xb798fa(0xce)];[_0xb798fa(0xdd)]=!0x1;[_0xb798fa(0xf5)]=!0x1;constructor({connector:_0x1303c4,editor:_0x3d26d0}){const _0x187c47=_0xb798fa;super(),this['id']=_0x2451c8(),this[_0x187c47(0xc3)]=_0x1303c4,this[_0x187c47(0xd8)]=!0x0,this[_0x187c47(0xce)]=_0x3d26d0;}async[_0xb798fa(0xd6)](){const _0x4fbce0=_0xb798fa;let _0x3a6f46;const _0x9d5f8e=[];this[_0x4fbce0(0xd8)]=!0x1;try{this[_0x4fbce0(0xd5)]=await this[_0x4fbce0(0xe3)](),this[_0x4fbce0(0xeb)](_0x4fbce0(0xca),this);const _0x290ab3=await this[_0x4fbce0(0xd5)][_0x4fbce0(0xba)]();for await(const _0x152917 of _0x290ab3){if(this[_0x4fbce0(0xd8)])return;if(_0x4fbce0(0xe1)===_0x152917[_0x4fbce0(0xcc)])return void this[_0x4fbce0(0xeb)](_0x4fbce0(0xe1),{'error':new _0x138bd2(_0x4fbce0(0xf3),this)});if(_0x4fbce0(0xd0)!==_0x152917[_0x4fbce0(0xcc)]){if(_0x4fbce0(0xed)!==_0x152917[_0x4fbce0(0xcc)]){if(_0x3ee21b(_0x152917[_0x4fbce0(0xcc)])&&this[_0x4fbce0(0xb4)](_0x152917[_0x4fbce0(0xf0)][_0x4fbce0(0xc2)],!0x0),_0x405c0f(_0x152917[_0x4fbce0(0xcc)]))_0x9d5f8e[_0x4fbce0(0xcb)](_0x152917[_0x4fbce0(0xf0)][_0x4fbce0(0xe9)]);else{if(_0x538c6e(_0x152917[_0x4fbce0(0xcc)])){if(_0x152917[_0x4fbce0(0xcc)]!==_0x3a6f46){if(_0x3a6f46=_0x152917[_0x4fbce0(0xcc)],_0x4fbce0(0xee)===_0x152917[_0x4fbce0(0xcc)]){this[_0x4fbce0(0xf5)]||(this[_0x4fbce0(0xf5)]=!0x0,this[_0x4fbce0(0xeb)](_0x4fbce0(0xd1),this));continue;}if(_0x4fbce0(0xbf)===_0x152917[_0x4fbce0(0xcc)]){this[_0x4fbce0(0xdd)]||(this[_0x4fbce0(0xdd)]=!0x0,this[_0x4fbce0(0xeb)](_0x4fbce0(0xf2),this));continue;}this[_0x4fbce0(0xdd)]&&(this[_0x4fbce0(0xdd)]=!0x1,this[_0x4fbce0(0xeb)](_0x4fbce0(0xc1),this)),this[_0x4fbce0(0xf5)]&&(this[_0x4fbce0(0xf5)]=!0x1,this[_0x4fbce0(0xeb)](_0x4fbce0(0xb8),this)),this[_0x4fbce0(0xe5)]&&this[_0x4fbce0(0xe5)][_0x4fbce0(0xef)](),this[_0x4fbce0(0xe5)]=this[_0x4fbce0(0xb6)]({'type':_0x152917[_0x4fbce0(0xcc)],'interactionId':this['id']}),_0x9d5f8e[_0x4fbce0(0xc8)]>0x0&&_0x4fbce0(0xe7)===_0x152917[_0x4fbce0(0xcc)]&&(this[_0x4fbce0(0xe5)][_0x4fbce0(0xcf)]=_0x9d5f8e[_0x4fbce0(0xf7)](0x0));}_0x152917[_0x4fbce0(0xf0)][_0x4fbce0(0xd2)]&&this[_0x4fbce0(0xe5)][_0x4fbce0(0xbe)](_0x152917[_0x4fbce0(0xf0)][_0x4fbce0(0xd2)]);}else _0x5b92f8(_0x152917[_0x4fbce0(0xcc)])||_0x10789e(_0x4fbce0(0xda),{'chunk':_0x152917});}}else this[_0x4fbce0(0xdf)]=_0x152917[_0x4fbce0(0xf0)][_0x4fbce0(0xf6)];}else this[_0x4fbce0(0xf1)]=_0x152917[_0x4fbce0(0xf0)]['id'];}}finally{this[_0x4fbce0(0xd8)]||(_0x9d5f8e[_0x4fbce0(0xc8)]>0x0&&(this[_0x4fbce0(0xe5)][_0x4fbce0(0xcf)]=_0x9d5f8e[_0x4fbce0(0xf7)](0x0)),this[_0x4fbce0(0xe4)](),this[_0x4fbce0(0xeb)](_0x4fbce0(0xec),this));}}[_0xb798fa(0xc0)](){const _0x2223d7=_0xb798fa;this[_0x2223d7(0xd8)]||(this[_0x2223d7(0xe4)](),this[_0x2223d7(0xeb)](_0x2223d7(0xd9),this));}[_0xb798fa(0xc4)](_0x3c41ea){const _0x200702=_0xb798fa;return this[_0x200702(0xb5)][_0x200702(0xb7)](_0x51f5ff=>_0x51f5ff['id']===_0x3c41ea);}[_0xb798fa(0xe0)](){const _0x1acc88=_0xb798fa;this[_0x1acc88(0xc5)]||(this[_0x1acc88(0xc0)](),this[_0x1acc88(0xb5)][_0x1acc88(0xe8)](_0xc40faa=>_0xc40faa[_0x1acc88(0xe0)]()),this[_0x1acc88(0xb5)]=[],this[_0x1acc88(0xc5)]=!0x0,this[_0x1acc88(0xeb)](_0x1acc88(0xe6),this),this[_0x1acc88(0xf8)]());}[_0xb798fa(0xb6)](_0x540f65){const _0x2c634d=_0xb798fa,_0x1f9589=new _0x386ec0({'editor':this[_0x2c634d(0xce)],'documentContextContent':this[_0x2c634d(0xbb)]()?.[_0x2c634d(0xd7)],..._0x540f65});return this[_0x2c634d(0xb5)][_0x2c634d(0xcb)](_0x1f9589),_0x1f9589[_0x2c634d(0xcd)](...AI_MODEL_EVENT_NAMES)['to'](this),this[_0x2c634d(0xeb)](_0x2c634d(0xf4),_0x1f9589),_0x1f9589;}[_0xb798fa(0xb4)](_0x2f6373,_0x48a194=!0x1){const _0x10b538=_0xb798fa;this[_0x10b538(0xeb)](_0x10b538(0xb4),_0x2f6373,_0x48a194);}[_0xb798fa(0xe4)](){const _0x45a374=_0xb798fa;this[_0x45a374(0xd8)]=!0x0,this[_0x45a374(0xd5)]&&this[_0x45a374(0xd5)][_0x45a374(0xea)][_0x45a374(0xdc)](),this[_0x45a374(0xe5)]&&this[_0x45a374(0xe5)][_0x45a374(0xef)](),this[_0x45a374(0xd5)]=this[_0x45a374(0xe5)]=void 0x0;}}