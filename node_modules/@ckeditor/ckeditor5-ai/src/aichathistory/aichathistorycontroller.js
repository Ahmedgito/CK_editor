/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x227c46=_0x2c46;(function(_0x1c6d79,_0x37a2ae){const _0x283965=_0x2c46,_0x33866f=_0x1c6d79();while(!![]){try{const _0x4f8144=-parseInt(_0x283965(0x18e))/0x1+-parseInt(_0x283965(0x1c4))/0x2+-parseInt(_0x283965(0x19c))/0x3*(-parseInt(_0x283965(0x1bf))/0x4)+-parseInt(_0x283965(0x194))/0x5+parseInt(_0x283965(0x1a8))/0x6*(parseInt(_0x283965(0x1a1))/0x7)+-parseInt(_0x283965(0x18f))/0x8*(-parseInt(_0x283965(0x1d2))/0x9)+parseInt(_0x283965(0x1b5))/0xa;if(_0x4f8144===_0x37a2ae)break;else _0x33866f['push'](_0x33866f['shift']());}catch(_0x13a416){_0x33866f['push'](_0x33866f['shift']());}}}(_0x11db,0x2f4da));import{ContextPlugin as _0x45b9aa}from'ckeditor5/src/core.js';import{AIConnector as _0x41da9e}from'../aicore/aiconnector.js';import{AIChatController as _0x21161e}from'../aichat/aichatcontroller.js';import{AITabs as _0x452297}from'../aitabs/aitabs.js';import{AIChatHistoryUI as _0x59bc05}from'./aichathistoryui.js';function _0x11db(){const _0x1af9f2=['map','pluginName','chat','rename','updateItems','AI_CHAT_UNTITLED_CONVERSATION','get','activateTab','2680uAoevM','getItem','AI_CHAT_HISTORY_CATEGORY_PINNED','getFullYear','AI_CHAT_HISTORY_UNPIN_ACTION','332504MIkDBd','loadConversation','getDate','AIChatHistoryController','change:activeConversation','AI_CHAT_HISTORY_ERROR_LOAD_ITEMS','requires','context','_handleRemove','itemRemoved','listenTo','getMonth','_setIsMaximized','locale','883044tjESAZ','_getCategorizedItems','_updateHistoryItemsUI','resize','history','itemsLoaded','AI_CHAT_HISTORY_CATEGORY_TODAY','init','updates','AI_CHAT_HISTORY_ERROR_UPDATE_TITLE','unpin','updateItemTitle','plugins','_generateErrorMessage','createdAt','_showConversationHistory','error','_aiConnector','_clearItemLoading','remove','resizeTabs','toLocaleDateString','getGroupId','itemUpdated','updateItemLoadingState','_handleEditTitle','AI_CHAT_HISTORY_CATEGORY_YESTERDAY','updateItemPinned','_handleSelectConversation','AI_CHAT_HISTORY_PIN_ACTION','AI_CHAT_HISTORY_ERROR_GENERIC','operation','isPremiumPlugin','removeItem','364306QWmmPp','24feQymt','removeConversation','view','AI_CHAT_HISTORY_ERROR_UPDATE_PINNED','_aiChatHistoryUi','240285dinhBp','pin','activateTab:history','handleRemovedConversation','openChat','selectConversation','length','isOfficialPlugin','855DHtyNo','setDate','AI_CHAT_HISTORY_CATEGORY_LATER','AI_CHAT_HISTORY_ERROR_REMOVE_ITEM','activeConversation','2436quyJuD','_setItemLoading','setIsMaximized','_handleTogglePin','editConversationTitle','_aiChatController','push','6eGRvkJ','AI_CHAT_HISTORY_CATEGORY_LAST_14_DAYS','items','setConversationPinned','removeHistoryItem','setLoadingSkeleton','pinned','itemId','_handleHistoryErrorUI','title','showError','resizedTabs','loadItems','2867230nVMAUu','getItems'];_0x11db=function(){return _0x1af9f2;};return _0x11db();}import{AIChatHistoryConversations as _0x2e8f22}from'./model/aichathistoryconversations.js';import{getTranslation as _0x235cd}from'../aicore/utils/common-translations.js';function _0x2c46(_0x4c7dbf,_0x36d5a9){const _0x11dbcb=_0x11db();return _0x2c46=function(_0x2c462a,_0x3875a8){_0x2c462a=_0x2c462a-0x18d;let _0x6af885=_0x11dbcb[_0x2c462a];return _0x6af885;},_0x2c46(_0x4c7dbf,_0x36d5a9);}export class AIChatHistoryController extends _0x45b9aa{[_0x227c46(0x1e3)];[_0x227c46(0x193)];[_0x227c46(0x1a6)];static get[_0x227c46(0x1ca)](){return[_0x41da9e,_0x21161e,_0x59bc05,_0x452297];}static get[_0x227c46(0x1b8)](){const _0x1e4fa6=_0x227c46;return _0x1e4fa6(0x1c7);}static get[_0x227c46(0x19b)](){return!0x0;}static get[_0x227c46(0x1f2)](){return!0x0;}[_0x227c46(0x1d9)](){const _0x588d9b=_0x227c46;this[_0x588d9b(0x1e3)]=this[_0x588d9b(0x1cb)][_0x588d9b(0x1de)][_0x588d9b(0x1bd)](_0x41da9e),this[_0x588d9b(0x193)]=this[_0x588d9b(0x1cb)][_0x588d9b(0x1de)][_0x588d9b(0x1bd)](_0x59bc05),this[_0x588d9b(0x1a6)]=this[_0x588d9b(0x1cb)][_0x588d9b(0x1de)][_0x588d9b(0x1bd)](_0x21161e);const _0x54e8c9=this[_0x588d9b(0x1cb)][_0x588d9b(0x1de)][_0x588d9b(0x1bd)](_0x452297),_0x30a29f=this[_0x588d9b(0x1a6)][_0x588d9b(0x1e8)]();this[_0x588d9b(0x1d6)]=new _0x2e8f22({'connector':this[_0x588d9b(0x1e3)],'group':_0x30a29f}),this[_0x588d9b(0x1ce)](this[_0x588d9b(0x193)],_0x588d9b(0x190),(_0x1b7b83,_0x104a37)=>{const _0x2d78b5=_0x588d9b;this[_0x2d78b5(0x1a2)](_0x104a37['id'],_0x2d78b5(0x1e5)),this[_0x2d78b5(0x1cc)](_0x104a37['id']);}),this[_0x588d9b(0x1ce)](this[_0x588d9b(0x193)],_0x588d9b(0x1a5),(_0x4d1444,_0x2e2de9)=>{const _0x28b357=_0x588d9b;this[_0x28b357(0x1a2)](_0x2e2de9['id'],_0x28b357(0x1ba)),this[_0x28b357(0x1eb)](_0x2e2de9['id'],_0x2e2de9[_0x28b357(0x1b1)]);}),this[_0x588d9b(0x1ce)](this[_0x588d9b(0x1d6)],_0x588d9b(0x1e9),(_0x54e6fc,_0x4efadf)=>{const _0x4e8568=_0x588d9b;void 0x0!==_0x4efadf[_0x4e8568(0x1da)][_0x4e8568(0x1b1)]&&this[_0x4e8568(0x193)][_0x4e8568(0x1dd)](_0x4efadf[_0x4e8568(0x1af)],_0x4efadf[_0x4e8568(0x1da)][_0x4e8568(0x1b1)]),void 0x0!==_0x4efadf[_0x4e8568(0x1da)][_0x4e8568(0x1ae)]&&this[_0x4e8568(0x1d4)](),this[_0x4e8568(0x1e4)](_0x4efadf[_0x4e8568(0x1af)]);}),this[_0x588d9b(0x1ce)](this[_0x588d9b(0x1d6)],_0x588d9b(0x1cd),(_0x5e095a,_0x40bad0)=>{const _0x3a3781=_0x588d9b;this[_0x3a3781(0x1a6)][_0x3a3781(0x197)](_0x40bad0[_0x3a3781(0x1af)]),this[_0x3a3781(0x193)][_0x3a3781(0x1ac)](_0x40bad0[_0x3a3781(0x1af)]),this[_0x3a3781(0x1e4)](_0x40bad0[_0x3a3781(0x1af)]);}),this[_0x588d9b(0x1ce)](this[_0x588d9b(0x1d6)],_0x588d9b(0x1d7),()=>{const _0x561d57=_0x588d9b;this[_0x561d57(0x1d4)]();}),this[_0x588d9b(0x1ce)](this[_0x588d9b(0x1d6)],_0x588d9b(0x1e2),(_0xbf7747,_0x1df584)=>{const _0x960dc8=_0x588d9b;this[_0x960dc8(0x1b0)](_0x1df584[_0x960dc8(0x1e2)],_0x1df584[_0x960dc8(0x1f1)],_0x1df584[_0x960dc8(0x1af)]);}),this[_0x588d9b(0x1ce)](this[_0x588d9b(0x193)],_0x588d9b(0x199),(_0x3d0d47,_0x2f2aa9)=>{const _0x162fb9=_0x588d9b;this[_0x162fb9(0x1ee)](_0x2f2aa9['id']);}),this[_0x588d9b(0x1ce)](this[_0x588d9b(0x193)],_0x588d9b(0x1ab),(_0x3d2ca3,_0x2b2931)=>{const _0x32bf03=_0x588d9b,_0x3afcf2=_0x2b2931[_0x32bf03(0x1ae)]?_0x32bf03(0x195):_0x32bf03(0x1dc);this[_0x32bf03(0x1a2)](_0x2b2931['id'],_0x3afcf2),this[_0x32bf03(0x1a4)](_0x2b2931['id'],_0x2b2931[_0x32bf03(0x1ae)]);}),this[_0x588d9b(0x1ce)](this[_0x588d9b(0x193)],_0x588d9b(0x198),()=>{const _0x30de67=_0x588d9b;_0x54e8c9[_0x30de67(0x191)][_0x30de67(0x1be)](_0x30de67(0x1b9));}),this[_0x588d9b(0x1ce)](this[_0x588d9b(0x1a6)],_0x588d9b(0x1c8),()=>{const _0x20dc7c=_0x588d9b;this[_0x20dc7c(0x1d4)]();}),_0x54e8c9[_0x588d9b(0x191)]['on'](_0x588d9b(0x196),()=>{const _0x49fe0d=_0x588d9b;this[_0x49fe0d(0x1e1)]();}),this[_0x588d9b(0x1ce)](_0x54e8c9,_0x588d9b(0x1b3),(_0x1d20c2,_0x187104)=>{const _0x975a36=_0x588d9b;this[_0x975a36(0x1d0)](_0x187104);}),this[_0x588d9b(0x1ce)](this[_0x588d9b(0x193)],_0x588d9b(0x1e6),()=>{const _0x5bad1a=_0x588d9b;_0x54e8c9[_0x5bad1a(0x1d5)]();});}async[_0x227c46(0x1eb)](_0x505104,_0x40109a){const _0x132ad2=_0x227c46;await this[_0x132ad2(0x1d6)][_0x132ad2(0x1dd)](_0x505104,_0x40109a);}async[_0x227c46(0x1a4)](_0x29784e,_0x28de2b){const _0x10f7d1=_0x227c46;await this[_0x10f7d1(0x1d6)][_0x10f7d1(0x1ed)](_0x29784e,_0x28de2b);}async[_0x227c46(0x1cc)](_0x2c98aa){const _0x31d2a0=_0x227c46;await this[_0x31d2a0(0x1d6)][_0x31d2a0(0x18d)](_0x2c98aa);}async[_0x227c46(0x1ee)](_0x3bd65e){const _0x344ad0=_0x227c46;await this[_0x344ad0(0x1a6)][_0x344ad0(0x1c5)](_0x3bd65e);}async[_0x227c46(0x1e1)](){const _0x23b54e=_0x227c46;this[_0x23b54e(0x193)][_0x23b54e(0x1b2)](''),this[_0x23b54e(0x193)][_0x23b54e(0x1ad)](!0x0),await this[_0x23b54e(0x1d6)][_0x23b54e(0x1d9)](),this[_0x23b54e(0x193)][_0x23b54e(0x1ad)](!0x1);}[_0x227c46(0x1d4)](){const _0x2a6d92=_0x227c46,_0x4cee5b=this[_0x2a6d92(0x1a6)][_0x2a6d92(0x1a0)]?.['id'],_0x221d89=this[_0x2a6d92(0x1d3)]()[_0x2a6d92(0x1b7)](_0x15c3db=>({'title':_0x15c3db[_0x2a6d92(0x1b1)],'items':_0x15c3db[_0x2a6d92(0x1aa)][_0x2a6d92(0x1b7)](_0x45faea=>({'id':_0x45faea['id'],'title':_0x45faea[_0x2a6d92(0x1b1)]||_0x235cd(this[_0x2a6d92(0x1cb)][_0x2a6d92(0x1d1)],_0x2a6d92(0x1bc)),'createdAt':new Date(_0x45faea[_0x2a6d92(0x1e0)])[_0x2a6d92(0x1e7)](),'active':_0x45faea['id']===_0x4cee5b,'pinned':_0x45faea[_0x2a6d92(0x1ae)]}))}));this[_0x2a6d92(0x193)][_0x2a6d92(0x1bb)](_0x221d89);}[_0x227c46(0x1a2)](_0x46e668,_0x103336){const _0x3c5742=_0x227c46;this[_0x3c5742(0x193)][_0x3c5742(0x1ea)](_0x46e668,_0x103336,!0x0);}[_0x227c46(0x1e4)](_0x37f041){const _0x472978=_0x227c46;this[_0x472978(0x193)][_0x472978(0x1ea)](_0x37f041,null,!0x1);}[_0x227c46(0x1b0)](_0x435b22,_0x17645e,_0x3cba56){const _0x4946ca=_0x227c46,_0x342ab1=this[_0x4946ca(0x1df)](_0x17645e,_0x3cba56);this[_0x4946ca(0x193)][_0x4946ca(0x1b2)](_0x342ab1),_0x3cba56&&this[_0x4946ca(0x1e4)](_0x3cba56),this[_0x4946ca(0x193)][_0x4946ca(0x1ad)](!0x1);}[_0x227c46(0x1df)](_0x2ee889,_0x4a01db){const _0x378248=_0x227c46,_0x198fc4=_0x4a01db?this[_0x378248(0x1d6)][_0x378248(0x1c0)](_0x4a01db):null,_0x2edb1b=_0x198fc4?.[_0x378248(0x1b1)]||_0x235cd(this[_0x378248(0x1cb)][_0x378248(0x1d1)],_0x378248(0x1bc));switch(_0x2ee889){case _0x378248(0x1dd):return _0x235cd(this[_0x378248(0x1cb)][_0x378248(0x1d1)],_0x378248(0x1db),_0x2edb1b);case _0x378248(0x1ed):{const _0x2a5c72=_0x235cd(this[_0x378248(0x1cb)][_0x378248(0x1d1)],_0x198fc4?.[_0x378248(0x1ae)]?_0x378248(0x1c3):_0x378248(0x1ef));return _0x235cd(this[_0x378248(0x1cb)][_0x378248(0x1d1)],_0x378248(0x192),[_0x2a5c72,_0x2edb1b]);}case _0x378248(0x18d):return _0x235cd(this[_0x378248(0x1cb)][_0x378248(0x1d1)],_0x378248(0x19f),_0x2edb1b);case _0x378248(0x1d9):case _0x378248(0x1b4):return _0x235cd(this[_0x378248(0x1cb)][_0x378248(0x1d1)],_0x378248(0x1c9));default:return _0x235cd(this[_0x378248(0x1cb)][_0x378248(0x1d1)],_0x378248(0x1f0));}}[_0x227c46(0x1d3)](){const _0x3c2a25=_0x227c46,_0x4f7bfd=new Date(),_0x58527a=new Date(_0x4f7bfd[_0x3c2a25(0x1c2)](),_0x4f7bfd[_0x3c2a25(0x1cf)](),_0x4f7bfd[_0x3c2a25(0x1c6)]()),_0x30a85a=new Date(_0x58527a);_0x30a85a[_0x3c2a25(0x19d)](_0x30a85a[_0x3c2a25(0x1c6)]()-0x1);const _0x2d05d7=new Date(_0x58527a);_0x2d05d7[_0x3c2a25(0x19d)](_0x2d05d7[_0x3c2a25(0x1c6)]()-0xe);const _0xcaaa96=this[_0x3c2a25(0x1d6)][_0x3c2a25(0x1b6)]({'pinned':!0x0}),_0x18ab7b=this[_0x3c2a25(0x1d6)][_0x3c2a25(0x1b6)]({'from':_0x58527a,'to':_0x58527a}),_0x3e1ff3=this[_0x3c2a25(0x1d6)][_0x3c2a25(0x1b6)]({'from':_0x30a85a,'to':_0x30a85a}),_0x1bd829=this[_0x3c2a25(0x1d6)][_0x3c2a25(0x1b6)]({'from':_0x2d05d7,'to':_0x30a85a}),_0x28bb77=this[_0x3c2a25(0x1d6)][_0x3c2a25(0x1b6)]({'to':_0x2d05d7}),_0x5db413=[];return _0xcaaa96[_0x3c2a25(0x19a)]>0x0&&_0x5db413[_0x3c2a25(0x1a7)]({'title':_0x235cd(this[_0x3c2a25(0x1cb)][_0x3c2a25(0x1d1)],_0x3c2a25(0x1c1)),'items':_0xcaaa96}),_0x18ab7b[_0x3c2a25(0x19a)]>0x0&&_0x5db413[_0x3c2a25(0x1a7)]({'title':_0x235cd(this[_0x3c2a25(0x1cb)][_0x3c2a25(0x1d1)],_0x3c2a25(0x1d8)),'items':_0x18ab7b}),_0x3e1ff3[_0x3c2a25(0x19a)]>0x0&&_0x5db413[_0x3c2a25(0x1a7)]({'title':_0x235cd(this[_0x3c2a25(0x1cb)][_0x3c2a25(0x1d1)],_0x3c2a25(0x1ec)),'items':_0x3e1ff3}),_0x1bd829[_0x3c2a25(0x19a)]>0x0&&_0x5db413[_0x3c2a25(0x1a7)]({'title':_0x235cd(this[_0x3c2a25(0x1cb)][_0x3c2a25(0x1d1)],_0x3c2a25(0x1a9)),'items':_0x1bd829}),_0x28bb77[_0x3c2a25(0x19a)]>0x0&&_0x5db413[_0x3c2a25(0x1a7)]({'title':_0x235cd(this[_0x3c2a25(0x1cb)][_0x3c2a25(0x1d1)],_0x3c2a25(0x19e)),'items':_0x28bb77}),_0x5db413;}[_0x227c46(0x1d0)](_0x47f143){const _0x37f4f6=_0x227c46;this[_0x37f4f6(0x193)][_0x37f4f6(0x1a3)](_0x47f143);}}