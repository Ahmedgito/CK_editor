/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Collection as _0x4cb982,KeystrokeHandler as _0x17e8f6,FocusTracker as _0x4a0647}from'ckeditor5/src/utils.js';import{View as _0xf8c373,ViewCollection as _0x35f1e7,ButtonView as _0x39d2df,FormRowView as _0x59ea51,createDropdown as _0x5b023c,addListToDropdown as _0x208925,UIModel as _0x268acc,ButtonLabelView as _0x3600ae,LabeledFieldView as _0x4af9c6,FocusCycler as _0x32df2f}from'ckeditor5/src/ui.js';import{AIReviewModePromptInputView as _0x54f84f}from'./aireviemodepromptinputview.js';import{getTranslation as _0x8afad}from'../../aicore/utils/common-translations.js';export class AIReviewModeCustomCheckView extends _0xf8c373{['focusTracker']=new _0x4a0647();['keystrokes']=new _0x17e8f6();['focusCycler'];['_focusables']=new _0x35f1e7();['submitButtonView'];['cancelButtonView'];['promptInputView'];['actionsFooterView'];['_modelSelectionDropdown'];['_modelSelectionDropdownItems'];['_check'];['_defaultValue'];['_defaultLabel'];constructor(_0x243a6d,_0x168af6){super(_0x243a6d),this['_check']=_0x168af6,this['set']('prompt',''),this['set']('modelId',''),this['_defaultValue']=_0x168af6['models']&&_0x168af6['models']['length']>0x0?_0x168af6['models'][0x0]['id']:'',this['_defaultLabel']=_0x168af6['models']&&_0x168af6['models']['length']>0x0?_0x168af6['models'][0x0]['name']:'',this['submitButtonView']=this['_createSubmitButtonView'](),this['cancelButtonView']=this['_createCancelButtonView'](),(this['promptInputView']=new _0x4af9c6(this['locale'],()=>new _0x54f84f(_0x243a6d)),this['promptInputView']['fieldView']['bind']('value')['to'](this,'prompt'),this['promptInputView']['fieldView']['on']('input',()=>{this['prompt']=this['promptInputView']['fieldView']['element']['value'];}),this['_modelSelectionDropdown']=this['_createModelSelectionDropdown'](),this['_modelSelectionDropdownItems']=new _0x4cb982(),this['_setModelList'](),_0x208925(this['_modelSelectionDropdown'],this['_modelSelectionDropdownItems']),this['actionsFooterView']=this['_createActionsFooterView'](),this['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__check-list-item-custom-actions']},'children':[new _0x59ea51(this['locale'],{'children':[this['promptInputView']]}),new _0x59ea51(this['locale'],{'children':[this['actionsFooterView']]})]}),this['promptInputView']['fieldView']['keystrokes']['set']('Enter',(_0x591a69,_0x538bbc)=>{this['_isValid']()?(this['fire']('runReviewCheck',{'id':'custom','args':{'prompt':this['prompt'],'model':this['modelId']},'isCustom':!0x0}),_0x538bbc()):_0x538bbc();}),this['focusCycler']=new _0x32df2f({'focusables':this['_focusables'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'actions':{'focusPrevious':'shift\x20+\x20tab','focusNext':'tab'}}));}['render'](){super['render'](),([this['promptInputView'],this['_modelSelectionDropdown'],this['cancelButtonView'],this['submitButtonView']]['forEach'](_0x155c3e=>{this['_focusables']['add'](_0x155c3e),this['focusTracker']['add'](_0x155c3e['element']);}),this['keystrokes']['listenTo'](this['element']));}get['modelDefaultValue'](){return this['_defaultValue'];}get['modelDefaultLabel'](){return this['_defaultLabel'];}['resetToDefault'](){this['prompt']='',this['modelId']=this['modelDefaultValue'],this['_modelSelectionDropdown']['buttonView']['label']=this['modelDefaultLabel'],this['resetFormValidationStatus']();}['resetFormValidationStatus'](){this['promptInputView']['errorText']='';}['_isValid'](){this['resetFormValidationStatus']();for(const _0x188cf6 of this['_getFormValidators']()){const _0x4d0f86=_0x188cf6();if(_0x4d0f86)return this['promptInputView']['errorText']=_0x4d0f86,!0x1;}return!0x0;}['_getFormValidators'](){return[()=>{if(0x0===this['promptInputView']['fieldView']['value']?.['trim']()['length'])return _0x8afad(this['locale'],'AI_REVIEW_MODE_PROMPT_EMPTY_ERROR');}];}['_createSubmitButtonView'](){const _0x3d1a84=new _0x39d2df(this['locale']),t=this['locale']['t'];return _0x3d1a84['set']({'label':t('Submit'),'withText':!0x0,'class':'ck-ai-button-primary'}),_0x3d1a84['on']('execute',()=>{this['_isValid']()&&this['fire']('runReviewCheck',{'id':'custom','args':{'prompt':this['prompt'],'model':this['modelId']},'isCustom':!0x0});}),_0x3d1a84;}['_createCancelButtonView'](){const _0x506e22=new _0x39d2df(this['locale']),t=this['locale']['t'];return _0x506e22['set']({'label':t('Cancel'),'withText':!0x0,'class':'ck-ai-button-tertiary-filled'}),_0x506e22['extendTemplate']({'on':{'click':this['bindTemplate']['to'](_0x17f28f=>{_0x17f28f['stopPropagation']();})}}),_0x506e22['on']('execute',()=>{this['resetToDefault'](),this['fire']('closeCustomCheck');}),_0x506e22;}['_setModelList'](){this['_modelSelectionDropdownItems']['clear']();const _0x55a8b4=this['_check']['models'];if(this['resetToDefault'](),_0x55a8b4?.['length'])for(const _0x4b151b of _0x55a8b4){const _0x25b67b=new _0x268acc({'label':_0x4b151b['name'],'withText':!0x0,'role':'menuitemradio','id':_0x4b151b['id'],'model':_0x4b151b});_0x25b67b['bind']('isOn')['to'](this,'modelId',_0x226850=>_0x226850===_0x4b151b['id']),this['_modelSelectionDropdownItems']['add']({'type':'button','model':_0x25b67b,'labelView':new Hs(this['locale'],_0x4b151b)});}}['_createModelSelectionDropdown'](){const _0x35ce50=_0x5b023c(this['locale']);return _0x35ce50['set']({'panelPosition':'se','class':'ck-ai-review-mode__check-list-item-model-dropdown'}),_0x35ce50['buttonView']['set']({'label':this['_defaultLabel'],'withText':!0x0,'tooltip':!0x0}),this['listenTo'](_0x35ce50,'execute',_0x5cd230=>{this['modelId']=_0x5cd230['source']['model']['id'],_0x35ce50['buttonView']['label']=_0x5cd230['source']['label'];}),_0x35ce50;}['_createActionsFooterView'](){const _0x5282f1=new _0xf8c373(this['locale']);return _0x5282f1['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__check-list-item-custom-actions-footer']},'children':[this['_modelSelectionDropdown'],{'tag':'div','attributes':{'class':['ck-ai-review-mode__check-list-item-parameterized-custom-actions-buttons']},'children':[this['cancelButtonView'],this['submitButtonView']]}]}),_0x5282f1;}}class Hs extends _0x3600ae{constructor(_0x3ce27b,_0x5a0dbb){super();const _0x22b3e0=this['bindTemplate'];this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-button__label'],'style':_0x22b3e0['to']('style'),'id':_0x22b3e0['to']('id')},'children':[{'tag':'div','attributes':{'class':['ck-ai-review-mode__check-list-item-model-dropdown-name']},'children':[{'tag':'span','children':[{'text':_0x22b3e0['to']('text')}]}]},{'tag':'div','attributes':{'class':['ck-ai-review-mode__check-list-item-model-dropdown-description']},'children':[{'tag':'span','children':[_0x5a0dbb['description']||'']}]}]});}}