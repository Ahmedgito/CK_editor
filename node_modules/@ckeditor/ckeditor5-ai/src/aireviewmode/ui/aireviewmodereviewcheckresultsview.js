/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{ListItemView as _0x268da3,View as _0x5c0d57,ViewCollection as _0x1dbc32,ButtonView as _0x128384}from'ckeditor5/src/ui.js';import{IconStop as _0x1fc932,IconEye as _0x3a1b1b,IconEyeCrossedOut as _0x3364ef}from'ckeditor5/src/icons.js';import{AIReviewModeReviewCheckListItemResultsView as _0x595bd1}from'./aireviewmodechecklistitemresultview.js';import{AISkeletonView as _0x134278,SKELETON_DEFINITIONS as _0x5099f4}from'../../aicore/ui/aiskeleton.js';import{AIDisclaimerView as _0x98c88f}from'../../aicore/ui/aidisclaimerview.js';import{getTranslation as _0x26c4ec}from'../../aicore/utils/common-translations.js';import{AISpinnerView as _0x459653}from'../../aicore/ui/aispinner.js';import'../../../theme/aireviewmode/aireviewmode-check-run.css';import'../../../theme/aireviewmode/aireviewmode-check-run-result.css';export class AIReviewModeReviewCheckResultsView extends _0x268da3{['_resultViews'];['resultsHeader'];['reviewDisclaimer'];['_cancelButtonView'];['_acceptAllButtonView'];['_exitReviewButtonView'];['_toggleDiffButtonView'];['_errorMessageView'];constructor(_0x1d8ab0){super(_0x1d8ab0),this['_resultViews']=new _0x1dbc32(),this['_cancelButtonView']=this['_createCancelButtonView'](),this['_acceptAllButtonView']=this['_createAcceptAllButtonView'](),this['_exitReviewButtonView']=this['_createExitReviewButtonView'](),this['_toggleDiffButtonView']=this['_createToggleDiffButtonView'](),this['resultsHeader']=this['_createResultHeaderView'](),this['_errorMessageView']=this['_createErrorView'](),this['reviewDisclaimer']=new _0x98c88f(_0x1d8ab0),this['set']('isLoading',!0x1),this['set']('isToggleDiffOn',!0x1),this['set']('isResultReady',!0x1),this['set']('headerTitle',''),this['set']('headerSubtitle',''),this['set']('isError',!0x1),this['set']('showErrorMessage',!0x1),this['set']('errorType','general');const _0x4a79a4=this['_createCombinedSkeletonLoader'](),_0x2ced09=this['bindTemplate'];this['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run',_0x2ced09['if']('isVisible','ck-hidden',_0x26d541=>!_0x26d541)]},'children':[this['resultsHeader'],{'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run-results-wrapper']},'children':[this['_errorMessageView'],{'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run-results-container',this['bindTemplate']['if']('isLoading','ck-hidden',_0x5939cf=>_0x5939cf)]},'children':this['_resultViews']},_0x4a79a4]},this['reviewDisclaimer']]});}['clearResults'](){this['_resultViews']['clear']();}['getResults'](){return this['_resultViews'];}['addResult'](_0x32f39f){const _0x460a75=new _0x595bd1(this['locale'],_0x32f39f['id']);_0x460a75['delegate']('acceptChange','dismissChange','activateChange')['to'](this),this['_resultViews']['add'](_0x460a75),_0x460a75['resultResponseView']['element']['innerHTML']=_0x32f39f['contentDiffed'];}['hideResult'](_0x42dbed){const _0x291a22=this['_resultViews']['find'](_0x487b8e=>_0x487b8e['id']===_0x42dbed);_0x291a22&&(_0x291a22['element']?.['classList']['add']('ck-ai-review-mode__check-run-result_removing'),_0x291a22['element']?.['addEventListener']('animationend',()=>{this['_resultViews']['remove'](_0x291a22),_0x291a22['destroy']();},{'once':!0x0}));}['setTitle'](_0x51bcc1,_0xea624c){this['headerTitle']=_0x51bcc1,this['headerSubtitle']=_0xea624c||'';}['showChunkErrorMessage'](){this['errorType']='chunk',this['showErrorMessage']=!0x0;}['showGeneralErrorMessage'](){this['isError']=!0x0,this['errorType']='general',this['showErrorMessage']=!0x0;}['resetErrorState'](){this['isError']=!0x1,this['errorType']='general',this['showErrorMessage']=!0x1;}['_createSkeletonLoader'](){return new _0x134278(this['locale'],_0x5099f4['aiReviewChecks']);}['_createCombinedSkeletonLoader'](){const _0x295718=new _0x5c0d57(this['locale']),_0xa9c87a=[];for(let _0x370fa0=0x0;_0x370fa0<0x10;_0x370fa0++){const _0x4e4cf5=this['_createSkeletonLoader']();_0x4e4cf5['extendTemplate']({'attributes':{'class':['ck-ai-review-mode__check-run-skeleton-item']}}),_0xa9c87a['push'](_0x4e4cf5);}return _0x295718['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run-skeleton-container',this['bindTemplate']['if']('isLoading','ck-hidden',_0x311d83=>!_0x311d83)]},'children':_0xa9c87a}),_0x295718;}['_createErrorView'](){const _0x5481cd=new _0x5c0d57(this['locale']),_0x4241bb=new _0x128384(this['locale']),t=this['locale']['t'];return _0x5481cd['delegate']('retryReview')['to'](this),_0x4241bb['set']({'label':t('Try\x20again'),'withText':!0x0,'class':'ck-ai-button-secondary\x20ck-ai-review-mode__check-run-error-retry-button'}),_0x4241bb['on']('execute',()=>{this['fire']('retryReview');}),_0x5481cd['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run-error-container',this['bindTemplate']['if']('showErrorMessage','ck-hidden',_0x5b93e4=>!_0x5b93e4),this['bindTemplate']['if']('errorType','ck-ai-review-mode__check-run-error-container_border-bottom',_0x496b00=>'chunk'===_0x496b00)]},'children':[{'tag':'div','attributes':{'class':['ck','ck-ai-chat-error','ck-ai-chat-error_full-width','ck-ai-review-mode__check-run-error-message',this['bindTemplate']['if']('errorType','ck-ai-chat-error_warning',_0x15b5f0=>'chunk'===_0x15b5f0)]},'children':[{'tag':'p','attributes':{'class':['ck-ai-chat-error__content',this['bindTemplate']['if']('errorType','ck-hidden',_0x29815a=>'general'!==_0x29815a)]},'children':[{'text':_0x26c4ec(this['locale'],'AI_REVIEW_MODE_GENERAL_ERROR_MESSAGE')}]},{'tag':'p','attributes':{'class':['ck-ai-chat-error__content',this['bindTemplate']['if']('errorType','ck-hidden',_0x339d9b=>'chunk'!==_0x339d9b)]},'children':[{'text':_0x26c4ec(this['locale'],'AI_REVIEW_MODE_CHUNK_ERROR_MESSAGE')}]}]},_0x4241bb]}),_0x5481cd;}['_createCancelButtonView'](){const _0x36d40c=new _0x128384(this['locale']);return _0x36d40c['set']({'label':_0x26c4ec(this['locale'],'AI_REVIEW_MODE_STOP_GENERATING'),'withText':!0x0,'class':['ai-chat-controls-loader__cancel-button'],'icon':_0x1fc932}),_0x36d40c['extendTemplate']({'attributes':{'class':[this['bindTemplate']['if']('isResultReady','ck-hidden',_0x5b0690=>_0x5b0690)]}}),_0x36d40c['on']('execute',()=>{this['fire']('abortReviewStream');}),_0x36d40c;}['_createToggleDiffButtonView'](){const _0x157732=new _0x128384(this['locale']);_0x157732['set']({'tooltip':!0x0,'isToggleable':!0x0,'role':'menuitemcheckbox'}),_0x157732['bind']('isEnabled')['to'](this,'isError',_0x1877b7=>!_0x1877b7),_0x157732['extendTemplate']({'attributes':{'class':['ck-ai-button-secondary','ck-ai-review-mode__check-run-toggle-diff-button',this['bindTemplate']['if']('isResultReady','ck-hidden',_0x3ae012=>!_0x3ae012)]}});const _0x206dec=_0x26c4ec(this['locale'],'AI_REVIEW_MODE_HIDE_CHANGES'),_0x4f35d0=_0x26c4ec(this['locale'],'AI_REVIEW_MODE_SHOW_CHANGES');return _0x157732['bind']('isOn')['to'](this,'isToggleDiffOn',_0x1c9cfc=>_0x1c9cfc),_0x157732['bind']('icon')['to'](this,'isToggleDiffOn',_0x387d31=>_0x387d31?_0x3a1b1b:_0x3364ef),_0x157732['bind']('label')['to'](this,'isToggleDiffOn',_0x1a0f88=>_0x1a0f88?_0x206dec:_0x4f35d0),_0x157732['on']('execute',()=>{this['isToggleDiffOn']=!this['isToggleDiffOn'],this['fire']('toggleDiff',{'on':this['isToggleDiffOn']});}),_0x157732;}['_createAcceptAllButtonView'](){const _0x1c97e6=new _0x128384(this['locale']);return _0x1c97e6['set']({'label':_0x26c4ec(this['locale'],'AI_REVIEW_MODE_ACCEPT_ALL'),'withText':!0x0}),_0x1c97e6['bind']('isEnabled')['to'](this,'isError',_0x4359d3=>!_0x4359d3),_0x1c97e6['extendTemplate']({'attributes':{'class':['ck-ai-button-primary','ck-ai-review-mode__check-run-accept-all-button',this['bindTemplate']['if']('isResultReady','ck-hidden',_0x4f08e5=>!_0x4f08e5)]}}),_0x1c97e6['on']('execute',()=>{this['fire']('acceptAllChanges');}),_0x1c97e6;}['_createExitReviewButtonView'](){const _0x3c0bc5=new _0x128384(this['locale']);return _0x3c0bc5['set']({'label':_0x26c4ec(this['locale'],'AI_REVIEW_MODE_EXIT_REVIEW'),'withText':!0x0}),_0x3c0bc5['extendTemplate']({'attributes':{'class':['ck-ai-button-tertiary-filled','ck-ai-review-mode__check-run-exit-button',this['bindTemplate']['if']('isResultReady','ck-hidden',_0x18847a=>!_0x18847a)]}}),_0x3c0bc5['on']('execute',()=>{this['fire']('leaveReviewModeResultList');}),_0x3c0bc5;}['_createResultHeaderView'](){const _0x549fff=new _0x5c0d57(this['locale']),_0x309a66=this['_createTitleView']();return _0x549fff['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run-results-header']},'children':[_0x309a66,{'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run-results-header-buttons']},'children':[this['_cancelButtonView'],this['_acceptAllButtonView'],this['_exitReviewButtonView'],this['_toggleDiffButtonView']]}]}),_0x549fff;}['_createTitleView'](){const _0x3fb9d8=new _0x5c0d57(this['locale']),_0x1d7fdb=new _0x459653();return _0x1d7fdb['bind']('isVisible')['to'](this,'isResultReady',_0x48b6e8=>!_0x48b6e8),_0x3fb9d8['setTemplate']({'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run-results-header-title-wrapper']},'children':[_0x1d7fdb,{'tag':'div','attributes':{'class':['ck-ai-review-mode__check-run-results-header-title-content']},'children':[{'tag':'span','attributes':{'class':['ck-ai-review-mode__check-run-results-header-title']},'children':[{'text':this['bindTemplate']['to']('headerTitle')}]},{'tag':'span','attributes':{'class':['ck-ai-review-mode__check-run-results-header-subtitle']},'children':[{'text':this['bindTemplate']['to']('headerSubtitle')}]}]}]}),_0x3fb9d8;}}