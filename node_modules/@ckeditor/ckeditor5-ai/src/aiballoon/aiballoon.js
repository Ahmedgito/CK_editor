/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x54cc2e=_0x3af7;(function(_0x11c55a,_0x4ecb5e){const _0x331747=_0x3af7,_0x238fdc=_0x11c55a();while(!![]){try{const _0x36aab3=parseInt(_0x331747(0x1a9))/0x1+parseInt(_0x331747(0x1b3))/0x2+parseInt(_0x331747(0x197))/0x3+-parseInt(_0x331747(0x1b8))/0x4+-parseInt(_0x331747(0x1a4))/0x5+parseInt(_0x331747(0x192))/0x6+parseInt(_0x331747(0x1c2))/0x7*(parseInt(_0x331747(0x1c6))/0x8);if(_0x36aab3===_0x4ecb5e)break;else _0x238fdc['push'](_0x238fdc['shift']());}catch(_0x4c3d22){_0x238fdc['push'](_0x238fdc['shift']());}}}(_0x38a4,0xc1c38));import{ContextPlugin as _0x1eef6c}from'ckeditor5/src/core.js';import{AIConnector as _0x4b8ea8}from'../aicore/aiconnector.js';import{AIEditing as _0x1d8cc7}from'../aicore/aiediting.js';import{AI_BALLOON_VIEW_EVENT_NAMES as _0x8bcbe7,AIBalloonView as _0x25e9cb}from'./ui/aiballoonview.js';import'../../theme/aiballoon/aiballoon.css';import{getAllMarkersDomElementsSorted as _0x5334c3}from'@ckeditor/ckeditor5-collaboration-core';import{getEditorFromContext as _0x3fe23f}from'../aicore/utils/geteditorfromcontext.js';import{ACTIONS as _0x18e9bf}from'../aichat/ui/feed/aichatfeedsuggestionitemactionsview.js';function _0x3af7(_0x147448,_0x3d9bcc){const _0x38a4b1=_0x38a4();return _0x3af7=function(_0x3af703,_0x2709ff){_0x3af703=_0x3af703-0x18f;let _0x3dcce2=_0x38a4b1[_0x3af703];return _0x3dcce2;},_0x3af7(_0x147448,_0x3d9bcc);}export const AI_BALLOON_EVENT_NAMES=[..._0x8bcbe7,_0x54cc2e(0x198)];function _0x38a4(){const _0x152bb0=['_config','trackChanges','1027142VOWyqk','icon','model','round','config','2214372iGYBfT','isPremiumPlugin','getBoundingClientRect','_calculateDialogPosition','get','bind','open','\x20ai-balloon-rotator','fire','_calculateOptimalTopPosition','315NQefSF','AIBalloon','setupRotator','innerHeight','11928TfMoAr','close','locale','ai-selection','left','ai-balloon','showRotator','_setupVisualSelection','editing','width','markers','plugins','getMarkersGroup','AIEditing','2155290OOjxzR','hide','isTrackChangesOn','ai-balloon-selection','delegate','1360179pIRImP','dialogClosed','balloonView','hideFakeVisualSelection','aiBalloon','context','Dialog','_showDialog','ai.availableReplyActions','index','length','show','requires','2146095auamNP','height','isOfficialPlugin','ai-balloon-','showFakeVisualSelection','383194ZYYinp','commands','ranges','top','title','pluginName','value','isOpen'];_0x38a4=function(){return _0x152bb0;};return _0x38a4();}export class AIBalloon extends _0x1eef6c{static get[_0x54cc2e(0x1a3)](){return[_0x4b8ea8,_0x1d8cc7];}static get[_0x54cc2e(0x1ae)](){const _0x4cc4b9=_0x54cc2e;return _0x4cc4b9(0x1c3);}static get[_0x54cc2e(0x1a6)](){return!0x0;}static get[_0x54cc2e(0x1b9)](){return!0x0;}[_0x54cc2e(0x1b0)]=!0x1;[_0x54cc2e(0x1b1)];[_0x54cc2e(0x1be)](_0x1e7b18){const _0x4ee915=_0x54cc2e,_0xb5528e=_0x3fe23f(this[_0x4ee915(0x19c)]);this[_0x4ee915(0x1b1)]=_0x1e7b18;const _0x4cfebc=this[_0x4ee915(0x19c)][_0x4ee915(0x1b7)][_0x4ee915(0x1bc)](_0x4ee915(0x19f))||[..._0x18e9bf],_0x4fc7e8=_0xb5528e?.[_0x4ee915(0x1aa)][_0x4ee915(0x1bc)](_0x4ee915(0x1b2)),_0x229fa6=_0x4fc7e8?.[_0x4ee915(0x1af)];this[_0x4ee915(0x199)]=new _0x25e9cb(_0xb5528e[_0x4ee915(0x1c8)],_0x1e7b18,_0x4cfebc,!!_0x229fa6),this[_0x4ee915(0x199)][_0x4ee915(0x196)](..._0x8bcbe7)['to'](this),_0x4fc7e8&&this[_0x4ee915(0x199)][_0x4ee915(0x1bd)](_0x4ee915(0x194))['to'](_0x4fc7e8,_0x4ee915(0x1af)),this[_0x4ee915(0x19e)](_0x1e7b18);}[_0x54cc2e(0x1c7)](){const _0x1fccf9=_0x54cc2e;_0x3fe23f(this[_0x1fccf9(0x19c)])[_0x1fccf9(0x18f)][_0x1fccf9(0x1bc)](_0x1fccf9(0x19d))[_0x1fccf9(0x193)]();}[_0x54cc2e(0x1cd)](_0xfe4e,_0x334102){const _0x344046=_0x54cc2e;this[_0x344046(0x19c)][_0x344046(0x18f)][_0x344046(0x1bc)](_0x1d8cc7)[_0x344046(0x1a8)](_0xfe4e,_0x344046(0x1a7)+_0x334102,!0x0,!0x0);}[_0x54cc2e(0x19e)](_0x311fe8){const _0x5cc576=_0x54cc2e,_0x1154f4=_0x3fe23f(this[_0x5cc576(0x19c)]);this[_0x5cc576(0x1cd)](_0x311fe8[_0x5cc576(0x1ab)],_0x311fe8[_0x5cc576(0x1a0)]),_0x1154f4[_0x5cc576(0x18f)][_0x5cc576(0x1bc)](_0x5cc576(0x19d))[_0x5cc576(0x1a2)]({'title':_0x311fe8[_0x5cc576(0x1ad)],'icon':_0x311fe8[_0x5cc576(0x1b4)],'hasCloseButton':!0x0,'id':_0x5cc576(0x19b),'position':this[_0x5cc576(0x1bb)][_0x5cc576(0x1bd)](this),'className':_0x5cc576(0x1cb)+(_0x311fe8[_0x5cc576(0x1cc)]?_0x5cc576(0x1bf):''),'content':this[_0x5cc576(0x199)],'onShow':_0x3e05be=>{const _0x2a6665=_0x5cc576;_0x311fe8[_0x2a6665(0x1cc)]&&this[_0x2a6665(0x199)][_0x2a6665(0x1c4)](_0x3e05be),this[_0x2a6665(0x1b0)]=!0x0;},'onHide':()=>{const _0x3fa792=_0x5cc576;this[_0x3fa792(0x19c)][_0x3fa792(0x18f)][_0x3fa792(0x1bc)](_0x3fa792(0x191))[_0x3fa792(0x19a)](_0x3fa792(0x1a7)+_0x311fe8[_0x3fa792(0x1a0)]),this[_0x3fa792(0x1c0)](_0x3fa792(0x198)),this[_0x3fa792(0x1b0)]=!0x1;}});}[_0x54cc2e(0x1bb)](_0x5216cb,_0x4270a0){const _0x423d8e=_0x54cc2e,_0x24567c=_0x3fe23f(this[_0x423d8e(0x19c)]);if(!_0x4270a0)return null;const _0x3c8774=_0x5334c3(_0x24567c[_0x423d8e(0x1ce)],[..._0x24567c[_0x423d8e(0x1b5)][_0x423d8e(0x1d0)][_0x423d8e(0x190)](_0x423d8e(0x1c9)),..._0x24567c[_0x423d8e(0x1b5)][_0x423d8e(0x1d0)][_0x423d8e(0x190)](_0x423d8e(0x195))]);if(!_0x3c8774||0x0===_0x3c8774[_0x423d8e(0x1a1)])return{'left':Math[_0x423d8e(0x1b6)](_0x4270a0[_0x423d8e(0x1ca)]+_0x4270a0[_0x423d8e(0x1cf)]/0x2-_0x5216cb[_0x423d8e(0x1cf)]/0x2),'top':Math[_0x423d8e(0x1b6)](_0x4270a0[_0x423d8e(0x1ac)]+_0x4270a0[_0x423d8e(0x1a5)]/0x2-_0x5216cb[_0x423d8e(0x1a5)]/0x2)};const _0x409c32=Math[_0x423d8e(0x1b6)](_0x4270a0[_0x423d8e(0x1ca)]+_0x4270a0[_0x423d8e(0x1cf)]/0x2-_0x5216cb[_0x423d8e(0x1cf)]/0x2),_0x1e36e3=_0x3c8774[0x0][_0x423d8e(0x1ba)](),_0x1b00cf=_0x3c8774[_0x3c8774[_0x423d8e(0x1a1)]-0x1][_0x423d8e(0x1ba)](),_0x43122a=_0x5216cb[_0x423d8e(0x1a5)],_0x589ef2=this[_0x423d8e(0x1b1)][_0x423d8e(0x1cc)]?0x8:0x0;return{'left':_0x409c32,'top':this[_0x423d8e(0x1c1)](_0x1e36e3,_0x1b00cf,_0x43122a,_0x589ef2)};}[_0x54cc2e(0x1c1)](_0x113d0e,_0x43f160,_0xc256bb,_0x1950ff=0x0){const _0x1e647d=_0x54cc2e,_0x28befc=_0x43f160[_0x1e647d(0x1ac)]+_0x43f160[_0x1e647d(0x1a5)],_0x438a2b=_0x113d0e[_0x1e647d(0x1ac)]-_0xc256bb-_0x1950ff,_0x18e2c0=window[_0x1e647d(0x1c5)]-_0x28befc-0xa,_0x331568=_0x113d0e[_0x1e647d(0x1ac)]-_0x1950ff-0xa;let _0x2cd0ff;if(_0x18e2c0>=_0xc256bb)_0x2cd0ff=_0x28befc+0xa;else{if(_0x331568>=_0xc256bb)_0x2cd0ff=_0x438a2b-0xa;else _0x2cd0ff=_0x113d0e[_0x1e647d(0x1ac)]+(_0x43f160[_0x1e647d(0x1ac)]+_0x43f160[_0x1e647d(0x1a5)])/0x2-(_0xc256bb+_0x1950ff)/0x2;}return _0x2cd0ff;}}