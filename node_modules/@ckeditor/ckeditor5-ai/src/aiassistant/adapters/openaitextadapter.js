/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x3cbf68=_0x3492;(function(_0x17bfb7,_0x540ba3){const _0x4e5926=_0x3492,_0x4dcf10=_0x17bfb7();while(!![]){try{const _0x2ba7d5=-parseInt(_0x4e5926(0x1f3))/0x1*(parseInt(_0x4e5926(0x1c8))/0x2)+parseInt(_0x4e5926(0x1e5))/0x3*(-parseInt(_0x4e5926(0x1ea))/0x4)+-parseInt(_0x4e5926(0x1f1))/0x5*(-parseInt(_0x4e5926(0x1ca))/0x6)+-parseInt(_0x4e5926(0x1fa))/0x7*(parseInt(_0x4e5926(0x1dd))/0x8)+parseInt(_0x4e5926(0x1c5))/0x9*(parseInt(_0x4e5926(0x1e7))/0xa)+parseInt(_0x4e5926(0x1bd))/0xb+-parseInt(_0x4e5926(0x1de))/0xc;if(_0x2ba7d5===_0x540ba3)break;else _0x4dcf10['push'](_0x4dcf10['shift']());}catch(_0xb5feb7){_0x4dcf10['push'](_0x4dcf10['shift']());}}}(_0x14f8,0x4f3a2));function _0x3492(_0x4fd767,_0x4721bc){const _0x14f895=_0x14f8();return _0x3492=function(_0x349250,_0x5d7e55){_0x349250=_0x349250-0x1bb;let _0x440d10=_0x14f895[_0x349250];return _0x440d10;},_0x3492(_0x4fd767,_0x4721bc);}import{AITextAdapter as _0x2f2f2b}from'./aitextadapter.js';function _0x14f8(){const _0x12bba2=['signal','map','55xzLTlI','split','1319dwDEdu','message','ai.assistant.adapter.openAI.requestHeaders','ai.assistant.adapter.openAI.requestParameters','AI_ERROR_CONTEXT_LENGTH','stringify','Your\x20task\x20is\x20to\x20execute\x20the\x20instruction\x20using\x20the\x20provided\x20HTML\x20content.\x20Follow\x20the\x20instruction\x20closely.\x20Your\x20answer\x20must\x20be\x20a\x20properly\x20formatted\x20HTML\x20code.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.','259mevpwy','content','[DONE]','editor','pluginName','Instruction:\x0a','filter','config','text','\x0aYou\x20must\x20keep\x20the\x20text\x20formatting.\x0a\x0aContent:\x0a','join','5395192qPqfLF','gpt-4o','body','OpenAITextAdapter','reject','locale','get','delta','4226841AczZYy','includes','abortController','902CuOpAX','data:\x20','141126FtJUsx','_readStreamableResponse','user','https://api.openai.com/v1/chat/completions','system','_prepareRequestParameters','_requestHeaders','json','getReader','_requestParameters','parse','_readStaticResponse','POST','stream','length','prepareMessages','AI_ERROR_MODERATION','choices','resolve','200ekDugA','3292176MIXHbP','_apiUrl','replace','Moderation','_isBufferIncomplete','_prepareRequestHeaders','define','3156edUZEt','Your\x20task\x20is\x20to\x20generate\x20HTML\x20content\x20accordingly\x20to\x20the\x20given\x20instruction.\x20Never\x20include\x20<img>\x20tag\x20in\x20your\x20response\x20even\x20if\x20asked\x20for.\x20Your\x20answer\x20must\x20be\x20a\x20well-structured\x20and\x20properly\x20formatted\x20HTML\x20code.\x20Answer\x20only\x20with\x20the\x20generated\x20HTML\x20content.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.','10lOmtwZ','decode','read','92Sbteru','ai.assistant.adapter.openAI.apiUrl','_cleanUpData','context_length_exceeded','sendRequest'];_0x14f8=function(){return _0x12bba2;};return _0x14f8();}import{AIRequestError as _0x2917e7}from'./aiadapter.js';import{getTranslation as _0x177bc6}from'../utils/common-translations.js';export class OpenAITextAdapter extends _0x2f2f2b{[_0x3cbf68(0x1df)];[_0x3cbf68(0x1d0)];[_0x3cbf68(0x1d3)];static get[_0x3cbf68(0x1fe)](){const _0xada52c=_0x3cbf68;return _0xada52c(0x1c0);}constructor(_0x4e1e04){const _0x1838dd=_0x3cbf68;super(_0x4e1e04),_0x4e1e04[_0x1838dd(0x201)][_0x1838dd(0x1e4)](_0x1838dd(0x1eb),_0x1838dd(0x1cd)),_0x4e1e04[_0x1838dd(0x201)][_0x1838dd(0x1c3)](_0x1838dd(0x1f6))||_0x4e1e04[_0x1838dd(0x201)][_0x1838dd(0x1e4)](_0x1838dd(0x1f6),{'model':_0x1838dd(0x1be),'temperature':0x1,'top_p':0x1,'stream':!0x0}),this[_0x1838dd(0x1df)]=_0x4e1e04[_0x1838dd(0x201)][_0x1838dd(0x1c3)](_0x1838dd(0x1eb)),this[_0x1838dd(0x1d0)]=_0x4e1e04[_0x1838dd(0x201)][_0x1838dd(0x1c3)](_0x1838dd(0x1f5))||{},this[_0x1838dd(0x1d3)]=_0x4e1e04[_0x1838dd(0x201)][_0x1838dd(0x1c3)](_0x1838dd(0x1f6));}async[_0x3cbf68(0x1ee)]({query:_0x48c09a,context:_0x3e03d0,onData:_0x525b73,actionId:_0x264357}){const _0x58737a=_0x3cbf68,_0x4aa57a=this[_0x58737a(0x1fd)][_0x58737a(0x1c2)],_0x2ef763=await this[_0x58737a(0x1d9)](_0x48c09a,_0x3e03d0,_0x264357),_0x12c2db=await this[_0x58737a(0x1e3)](this[_0x58737a(0x1d0)],_0x264357),_0x4373c5=await this[_0x58737a(0x1cf)](this[_0x58737a(0x1d3)],_0x264357),_0x34b887={'messages':_0x2ef763,..._0x4373c5},_0x109364={'method':_0x58737a(0x1d6),'headers':_0x12c2db,'body':JSON[_0x58737a(0x1f8)](_0x34b887),'signal':this[_0x58737a(0x1c7)][_0x58737a(0x1ef)]},_0xdc677a=await fetch(this[_0x58737a(0x1df)],_0x109364);if(_0xdc677a['ok'])return _0x4373c5[_0x58737a(0x1d7)]?await this[_0x58737a(0x1cb)](_0xdc677a,_0x525b73):await this[_0x58737a(0x1d5)](_0xdc677a,_0x525b73),Promise[_0x58737a(0x1dc)]();{const _0x45b822=await _0xdc677a[_0x58737a(0x202)]();return _0x45b822[_0x58737a(0x1c6)](_0x58737a(0x1ed))?Promise[_0x58737a(0x1c1)](new _0x2917e7(_0x177bc6(_0x4aa57a,_0x58737a(0x1f7)))):_0x45b822[_0x58737a(0x1c6)](_0x58737a(0x1e1))?Promise[_0x58737a(0x1c1)](new _0x2917e7(_0x177bc6(_0x4aa57a,_0x58737a(0x1da)))):Promise[_0x58737a(0x1c1)](new Error(_0x45b822));}}async[_0x3cbf68(0x1d9)](_0x169e7e,_0x1ab2cc,_0x210a17){const _0x563b2c=_0x3cbf68;let _0x20d7ee,_0x23e09a;return _0x1ab2cc?(_0x20d7ee=_0x563b2c(0x1f9),_0x23e09a=_0x563b2c(0x1ff)+_0x169e7e+_0x563b2c(0x1bb)+_0x1ab2cc):(_0x20d7ee=_0x563b2c(0x1e6),_0x23e09a=_0x169e7e),[{'role':_0x563b2c(0x1ce),'content':_0x20d7ee},{'role':_0x563b2c(0x1cc),'content':_0x23e09a}];}async[_0x3cbf68(0x1cb)](_0x2ab897,_0x5a3ac3){const _0x380a09=_0x3cbf68,_0x665613=_0x2ab897[_0x380a09(0x1bf)][_0x380a09(0x1d2)](),_0x2306ab=new TextDecoder();let _0x34347b='',_0x2eee39='',_0x52569a='',_0x16a4e0=!0x1;for(;!_0x16a4e0;){const {done:_0x44b77b,value:_0x2d21be}=await _0x665613[_0x380a09(0x1e9)](),_0x1167e8=_0x34347b+_0x2306ab[_0x380a09(0x1e8)](_0x2d21be);let _0x49f5a8='';_0x16a4e0=_0x44b77b;try{_0x49f5a8=this[_0x380a09(0x1ec)](_0x1167e8),_0x34347b='';}catch{_0x34347b=_0x1167e8;continue;}_0x2eee39+=_0x49f5a8,!_0x16a4e0&&this[_0x380a09(0x1e2)](_0x2eee39)||_0x2eee39&&(_0x52569a+=_0x2eee39,_0x2eee39='',_0x5a3ac3(_0x52569a));}return Promise[_0x380a09(0x1dc)]();}async[_0x3cbf68(0x1d5)](_0x5c316f,_0x5b67bf){const _0x123ecd=_0x3cbf68;return _0x5b67bf((await _0x5c316f[_0x123ecd(0x1d1)]())[_0x123ecd(0x1db)][0x0][_0x123ecd(0x1f4)][_0x123ecd(0x1fb)]),Promise[_0x123ecd(0x1dc)]();}[_0x3cbf68(0x1e2)](_0x38654e){const _0x5a5411=_0x3cbf68,_0x594261=_0x38654e[_0x5a5411(0x1f2)]('<')[_0x5a5411(0x1d8)]!==_0x38654e[_0x5a5411(0x1f2)]('>')[_0x5a5411(0x1d8)],_0x3116e1=_0x38654e[_0x5a5411(0x1d8)]<0x1e;return _0x594261&&_0x3116e1;}[_0x3cbf68(0x1ec)](_0x5b63d7){const _0x66a17e=_0x3cbf68;return _0x5b63d7[_0x66a17e(0x1f2)](/\n(?![^{]*\})/g)[_0x66a17e(0x1f0)](_0x1fedf0=>_0x1fedf0[_0x66a17e(0x1e0)](_0x66a17e(0x1c9),''))[_0x66a17e(0x200)](_0x39ac8=>_0x39ac8&&_0x39ac8[_0x66a17e(0x1d8)]>0x0&&_0x66a17e(0x1fc)!==_0x39ac8)[_0x66a17e(0x1f0)](_0x4249e5=>{const _0x4fa0d6=_0x66a17e,{choices:_0x32238f}=JSON[_0x4fa0d6(0x1d4)](_0x4249e5);if(_0x32238f[0x0]?.[_0x4fa0d6(0x1c4)]?.[_0x4fa0d6(0x1fb)])return _0x32238f[0x0][_0x4fa0d6(0x1c4)][_0x4fa0d6(0x1fb)];})[_0x66a17e(0x200)](_0x17e9a9=>_0x17e9a9)[_0x66a17e(0x1bc)]('');}}