/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
function _0xb188(_0x3dabaf,_0x30c469){const _0x583fb1=_0x583f();return _0xb188=function(_0xb18869,_0x51489e){_0xb18869=_0xb18869-0xc1;let _0x4cdcd7=_0x583fb1[_0xb18869];return _0x4cdcd7;},_0xb188(_0x3dabaf,_0x30c469);}const _0x5aa151=_0xb188;(function(_0x2d94a8,_0x3804a4){const _0x502bfe=_0xb188,_0x14909d=_0x2d94a8();while(!![]){try{const _0x156eba=-parseInt(_0x502bfe(0xd1))/0x1*(parseInt(_0x502bfe(0xe5))/0x2)+parseInt(_0x502bfe(0xc5))/0x3+-parseInt(_0x502bfe(0x101))/0x4+parseInt(_0x502bfe(0xe6))/0x5+parseInt(_0x502bfe(0xf8))/0x6+parseInt(_0x502bfe(0xc2))/0x7+parseInt(_0x502bfe(0x10a))/0x8*(-parseInt(_0x502bfe(0xc1))/0x9);if(_0x156eba===_0x3804a4)break;else _0x14909d['push'](_0x14909d['shift']());}catch(_0x4b58dc){_0x14909d['push'](_0x14909d['shift']());}}}(_0x583f,0xeead7));import{AITextAdapter as _0x21084b}from'./aitextadapter.js';import{AIRequestError as _0x1abbff}from'./aiadapter.js';import{BedrockRuntimeClient as _0x2bce99,InvokeModelCommand as _0xe06c69,InvokeModelWithResponseStreamCommand as _0xf40813}from'@aws-sdk/client-bedrock-runtime';function _0x583f(){const _0x42ccbc=['send','16qBWoZB','Instruction:\x0a','json','utf-8','define','cohere.command','_readStreamableResponse','\x0a\x0aAssistant:','decode','pluginName','_processAWSRequest','Your\x20task\x20is\x20to\x20generate\x20HTML\x20content\x20accordingly\x20to\x20the\x20given\x20instruction.\x20Never\x20include\x20<img>\x20tag\x20in\x20your\x20response\x20even\x20if\x20asked\x20for.\x20Your\x20answer\x20must\x20be\x20a\x20well-structured\x20and\x20properly\x20formatted\x20HTML\x20code.\x20Answer\x20only\x20with\x20the\x20generated\x20HTML\x20content.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.','length','generations','_getGeneratedText','abortController','bytes','split','text','bedrock-2023-05-31','200276oXgqdO','8074300vVHcxl','getModelFamily','_requestHeaders','body','POST','ai21.j2','stringify','ai.assistant.adapter.aws.apiUrl','preparePrompt','sendRequest','resolve','completion','map','meta.llama','AI_ERROR_UNSUPPORTED_MODEL','test','getReader','_readAsyncIterableResponse','3528186GHkGnd','get','signal','parse','editor','Human:\x0a','anthropic.claude','_bedrockClientConfig','application/json','994132WFJBau','AWSTextAdapter','anthropic.claude-v2','_prepareRequestParameters','generation','ai.assistant.adapter.aws.requestHeaders','\x0a<</SYS>>\x0a[INST]\x0a','_readStaticResponse','join','60136ycmzsh','config','ai.assistant.adapter.aws.bedrockClientConfig','read','completions','data','1107WLyYfy','7020454SNSfle','chunk','<<SYS>>\x0a','1641426OwxPEg','filter','\x0aYou\x20must\x20keep\x20the\x20text\x20formatting.\x0a\x0aContent:\x0a','_processProxyRequest','_apiUrl','Your\x20task\x20is\x20to\x20execute\x20the\x20instruction\x20using\x20the\x20provided\x20HTML\x20content.\x20Follow\x20the\x20instruction\x20closely.\x20Your\x20answer\x20must\x20be\x20a\x20properly\x20formatted\x20HTML\x20code.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.','\x0a[/INST]','ai.assistant.adapter.aws.requestParameters','_requestParameters','_prepareRequestHeaders','locale'];_0x583f=function(){return _0x42ccbc;};return _0x583f();}import{getTranslation as _0x3c261e}from'../utils/common-translations.js';export class AWSTextAdapter extends _0x21084b{[_0x5aa151(0xc9)];[_0x5aa151(0xe8)];[_0x5aa151(0xff)];[_0x5aa151(0xcd)];static get[_0x5aa151(0xda)](){const _0x51adaf=_0x5aa151;return _0x51adaf(0x102);}constructor(_0x2315cd){const _0x1fb907=_0x5aa151;super(_0x2315cd),_0x2315cd[_0x1fb907(0x10b)][_0x1fb907(0xf9)](_0x1fb907(0xcc))||_0x2315cd[_0x1fb907(0x10b)][_0x1fb907(0xd5)](_0x1fb907(0xcc),{'model':_0x1fb907(0x103),'max_tokens_to_sample':0x7d0,'temperature':0x1,'top_p':0x1,'top_k':0xfa,'anthropic_version':_0x1fb907(0xe4),'stream':!0x0}),this[_0x1fb907(0xc9)]=_0x2315cd[_0x1fb907(0x10b)][_0x1fb907(0xf9)](_0x1fb907(0xed)),this[_0x1fb907(0xff)]=_0x2315cd[_0x1fb907(0x10b)][_0x1fb907(0xf9)](_0x1fb907(0x10c)),this[_0x1fb907(0xe8)]=_0x2315cd[_0x1fb907(0x10b)][_0x1fb907(0xf9)](_0x1fb907(0x106)),this[_0x1fb907(0xcd)]=_0x2315cd[_0x1fb907(0x10b)][_0x1fb907(0xf9)](_0x1fb907(0xcc));}async[_0x5aa151(0xef)]({query:_0x1d6f63,context:_0xbf7289,onData:_0x19e47c,actionId:_0x2d666b}){const _0x1aec7d=_0x5aa151,{model:_0x5b6fd8,stream:_0x11c8bb,..._0x58457c}=await this[_0x1aec7d(0x104)](this[_0x1aec7d(0xcd)],_0x2d666b),_0x18230d={'prompt':await this[_0x1aec7d(0xee)](_0x1d6f63,_0xbf7289,_0x5b6fd8,_0x2d666b),..._0x58457c};this[_0x1aec7d(0xc9)]?await this[_0x1aec7d(0xc8)](_0x18230d,_0x5b6fd8,_0x11c8bb,_0x19e47c,_0x2d666b):await this[_0x1aec7d(0xdb)](_0x18230d,_0x5b6fd8,_0x11c8bb,_0x19e47c);}async[_0x5aa151(0xee)](_0x2a71cb,_0x4cb3f6,_0x2af56f,_0x238ec6){const _0x8886f9=_0x5aa151;let _0x3bf686,_0x5ec109;return _0x4cb3f6?(_0x3bf686=_0x8886f9(0xca),_0x5ec109=_0x8886f9(0xd2)+_0x2a71cb+_0x8886f9(0xc7)+_0x4cb3f6):(_0x3bf686=_0x8886f9(0xdc),_0x5ec109=_0x2a71cb),_0x8886f9(0xf3)==this[_0x8886f9(0xe7)](_0x2af56f)?_0x8886f9(0xc4)+_0x3bf686+_0x8886f9(0x107)+_0x5ec109+_0x8886f9(0xcb):_0x8886f9(0xfd)+_0x3bf686+'\x0a'+_0x5ec109+_0x8886f9(0xd8);}[_0x5aa151(0xe7)](_0x3b456a){const _0x313783=_0x5aa151;if(/^anthropic\.claude/[_0x313783(0xf5)](_0x3b456a))return _0x313783(0xfe);if(/^ai21\.j2/[_0x313783(0xf5)](_0x3b456a))return _0x313783(0xeb);if(/^cohere\.command/[_0x313783(0xf5)](_0x3b456a))return _0x313783(0xd6);if(/^meta\.llama/[_0x313783(0xf5)](_0x3b456a))return _0x313783(0xf3);throw new _0x1abbff(_0x3c261e(this[_0x313783(0xfc)][_0x313783(0xcf)],_0x313783(0xf4),_0x3b456a));}async[_0x5aa151(0xc8)](_0x212c8a,_0x1e9488,_0x19185b,_0x26f5bc,_0x57d101){const _0x745028=_0x5aa151,_0x506bc5={'method':_0x745028(0xea),'headers':await this[_0x745028(0xce)](this[_0x745028(0xe8)],_0x57d101),'body':JSON[_0x745028(0xec)]({..._0x212c8a,'model':_0x1e9488,'stream':_0x19185b}),'signal':this[_0x745028(0xe0)][_0x745028(0xfa)]},_0x5a1e9d=await fetch(this[_0x745028(0xc9)],_0x506bc5);_0x19185b?await this[_0x745028(0xd7)](_0x5a1e9d,_0x1e9488,_0x26f5bc):await this[_0x745028(0x108)](_0x5a1e9d,_0x1e9488,_0x26f5bc);}async[_0x5aa151(0xdb)](_0x3ea5d8,_0x52b4e6,_0x43ddf0,_0x40dc2e){const _0x4f95a9=_0x5aa151,_0x4a7c36=new _0x2bce99(this[_0x4f95a9(0xff)]),_0x317029={'body':JSON[_0x4f95a9(0xec)](_0x3ea5d8),'contentType':_0x4f95a9(0x100),'accept':_0x4f95a9(0x100),'modelId':_0x52b4e6};let _0x42eb1c;if(_0x43ddf0){const _0x1fd45c=new _0xf40813(_0x317029);_0x42eb1c=await _0x4a7c36[_0x4f95a9(0xd0)](_0x1fd45c,{'abortSignal':this[_0x4f95a9(0xe0)][_0x4f95a9(0xfa)]}),await this[_0x4f95a9(0xf7)](_0x42eb1c,_0x52b4e6,_0x40dc2e);}else{const _0x4cc2ee=new _0xe06c69(_0x317029);_0x42eb1c=await _0x4a7c36[_0x4f95a9(0xd0)](_0x4cc2ee,{'abortSignal':this[_0x4f95a9(0xe0)][_0x4f95a9(0xfa)]}),await this[_0x4f95a9(0x108)](_0x42eb1c,_0x52b4e6,_0x40dc2e);}}async[_0x5aa151(0xf7)](_0xcad743,_0x2b4900,_0x1f182a){const _0x24981e=_0x5aa151,_0x42e2b3=_0xcad743[_0x24981e(0xe9)],_0x3bd606=new TextDecoder(_0x24981e(0xd4));let _0x3822c1='';for await(const _0x2f129a of _0x42e2b3)if(_0x2f129a[_0x24981e(0xc3)]){const _0xf5b8cf=_0x3bd606[_0x24981e(0xd9)](_0x2f129a[_0x24981e(0xc3)][_0x24981e(0xe1)]),_0x2dddde=JSON[_0x24981e(0xfb)](_0xf5b8cf);_0x3822c1+=this[_0x24981e(0xdf)](_0x2dddde,_0x2b4900),_0x1f182a(_0x3822c1);}return Promise[_0x24981e(0xf0)]();}async[_0x5aa151(0xd7)](_0x276e7b,_0x7cac7a,_0x2925bb){const _0x3edcd5=_0x5aa151,_0x4ef1bb=_0x276e7b[_0x3edcd5(0xe9)],_0x363e9f=new TextDecoder(_0x3edcd5(0xd4)),_0x82e6b5=_0x4ef1bb[_0x3edcd5(0xf6)]();let _0x401db3='',_0x13577f='',_0xcf736c=!0x1;for(;!_0xcf736c;){const {done:_0x5c7a75,value:_0x214477}=await _0x82e6b5[_0x3edcd5(0x10d)]();if(_0xcf736c=_0x5c7a75,_0xcf736c)break;const _0x1e00c8=(_0x401db3+_0x363e9f[_0x3edcd5(0xd9)](_0x214477))[_0x3edcd5(0xe2)]('\x0a')[_0x3edcd5(0xf2)](_0x1b07c8=>{const _0x56a1d0=_0x3edcd5;try{return _0x401db3='',JSON[_0x56a1d0(0xfb)](_0x1b07c8);}catch{return _0x401db3=_0x1b07c8,null;}})[_0x3edcd5(0xc6)](_0x1a9217=>null!==_0x1a9217);_0x1e00c8[_0x3edcd5(0xdd)]&&(_0x13577f+=_0x1e00c8[_0x3edcd5(0xf2)](_0x5e746f=>this[_0x3edcd5(0xdf)](_0x5e746f,_0x7cac7a))[_0x3edcd5(0x109)](''),_0x2925bb(_0x13577f));}return Promise[_0x3edcd5(0xf0)]();}async[_0x5aa151(0x108)](_0x167231,_0x67d28a,_0x2ba7c9){const _0x596599=_0x5aa151;let _0x5edfd8;return _0x5edfd8=_0x167231 instanceof Response?await _0x167231[_0x596599(0xd3)]():JSON[_0x596599(0xfb)](new TextDecoder(_0x596599(0xd4))[_0x596599(0xd9)](_0x167231[_0x596599(0xe9)])),(_0x2ba7c9(this[_0x596599(0xdf)](_0x5edfd8,_0x67d28a)),Promise[_0x596599(0xf0)]());}[_0x5aa151(0xdf)](_0x2184e9,_0x502350){const _0x20166e=_0x5aa151;switch(this[_0x20166e(0xe7)](_0x502350)){case _0x20166e(0xfe):return _0x2184e9[_0x20166e(0xf1)];case _0x20166e(0xeb):return _0x2184e9[_0x20166e(0x10e)][0x0][_0x20166e(0x10f)][_0x20166e(0xe3)];case _0x20166e(0xd6):return _0x2184e9[_0x20166e(0xde)][0x0][_0x20166e(0xe3)];case _0x20166e(0xf3):return _0x2184e9[_0x20166e(0x105)];}}}