/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{ContextPlugin as _0x1bd94c,Editor as _0x1b7d16}from'@ckeditor/ckeditor5-core/dist/index.js';import{CKEditorError as _0x50018a,Collection as _0x111f19,uid as _0x3f9071,first as _0x4a6617,FocusTracker as _0x2d507b,KeystrokeHandler as _0x25ee0c}from'@ckeditor/ckeditor5-utils/dist/index.js';import{View as _0x1335a5,IconView as _0xebf6bc,ButtonView as _0x2a985d,DropdownButtonView as _0xcf28ef,FocusCycler as _0x281852,isViewWithFocusCycler as _0xc76688}from'@ckeditor/ckeditor5-ui/dist/index.js';import{IconNotification as _0xbd0ee5,IconCheck as _0x2dd664,IconCancel as _0x24e9ce}from'@ckeditor/ckeditor5-icons/dist/index.js';import{DateTime as _0x19aea3}from'luxon';import{InsertOperation as _0x1dea62,MoveOperation as _0x56cbd7,ModelPosition as _0x7ab2f4,ModelRange as _0x13a22e,MarkerOperation as _0x52d228,MergeOperation as _0x2367a6,SplitOperation as _0x17f0dc,RenameOperation as _0x23ebce,AttributeOperation as _0x3f2114,ModelTreeWalker as _0x340666,ModelText as _0x5e4e07}from'@ckeditor/ckeditor5-engine/dist/index.js';import{diffArrays as _0x364f0f}from'diff';class _ extends _0x1bd94c{static get['pluginName'](){return'Permissions';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}['setPermissions'](_0x2a2823,_0x10a7b1){let _0xf81a69;if(_0x10a7b1||(_0x10a7b1=this['context']['config']['get']('collaboration.channelId')),this['context']['config']['get']('collaboration.channelId')==_0x10a7b1?_0xf81a69=this['context']:'editors'in this['context']&&this['context']['editors']&&(_0xf81a69=this['context']['editors']['find'](_0x413023=>_0x413023['config']['get']('collaboration.channelId')==_0x10a7b1)),!_0xf81a69)throw new _0x50018a('permissions-set-permissions-invalid-channel-id',null);const _0x507420=_0xf81a69['plugins'],_0x20f9f7=_0x507420['has']('CommentsRepository')?_0x507420['get']('CommentsRepository'):void 0x0,_0x1c57da=_0x507420['has']('CommentsOnly')&&_0x507420['get']('CommentsOnly'),_0x5aa9e3=_0x2a2823['includes']('document:write'),_0x882f57=_0x2a2823['includes']('comment:modify_all'),_0x571700=_0x2a2823['includes']('comment:admin'),_0x340869=_0x2a2823['includes']('comment:write'),_0x42e7fc=_0x340869||_0x571700,_0x792fb4=_0x42e7fc||_0x882f57,_0x93b04d=_0x5aa9e3||_0x42e7fc;(_0x1c57da&&(_0x1c57da['isEnabled']=!_0x5aa9e3&&_0x792fb4),_0xf81a69 instanceof _0x1b7d16)&&(!(_0x5aa9e3||_0x792fb4&&_0x20f9f7)?_0xf81a69['enableReadOnlyMode']('no-permissions'):_0xf81a69['disableReadOnlyMode']('no-permissions'));if(_0x20f9f7){_0x20f9f7['setPermissions']({'admin':_0x571700,'modifyAll':_0x882f57,'write':_0x340869,'resolve':_0x93b04d},_0x10a7b1);const _0x4a4936=_0xf81a69 instanceof _0x1b7d16&&_0xf81a69['commands']['get']('addCommentThread');_0x4a4936&&(_0x42e7fc?_0x4a4936['clearForceDisabled']('noPermissions'):_0x4a4936['forceDisabled']('noPermissions'));}}}function y(_0x56c5c3,_0x3ee1fd){const t=_0x56c5c3['t'];switch(_0x3ee1fd){case'Anonymous':return t('Anonymous');case'Yes':return t('Yes');case'No':return t('No');case'Are\x20you\x20sure?':return t('Are\x20you\x20sure?');case'Today':return t('Today');case'Yesterday':return t('Yesterday');case'Last':return t('Last');case'Monday':return t('Monday');case'Tuesday':return t('Tuesday');case'Wednesday':return t('Wednesday');case'Thursday':return t('Thursday');case'Friday':return t('Friday');case'Saturday':return t('Saturday');case'Sunday':return t('Sunday');default:return'';}}class P extends _0x1bd94c{['users'];['_lastColor'];['_myId'];['_locale'];static get['pluginName'](){return'Users';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}static get['requires'](){return[_];}constructor(_0x1c0ccf){super(_0x1c0ccf),this['context']['config']['define']('users.anonymousUserId','anonymous-user'),this['context']['config']['define']('users.colorsCount',0x8),this['users']=new _0x111f19(),this['_locale']=_0x1c0ccf['locale'],this['_lastColor']=0x0,this['_myId']=null,this['decorate']('getOperationAuthor');}['init'](){this['_addAnonymousUser']();}get['me'](){return null==this['_myId']?null:this['getUser'](this['_myId']);}['addUser']({id:_0x505241,name:_0x42a6ec,..._0x26da95}){if(!_0x505241||'string'!=typeof _0x505241)throw new _0x50018a('users-add-invalid-id');if(this['users']['has'](_0x505241))throw new _0x50018a('users-add-duplicated-id',null,{'id':_0x505241});const _0x13a59a=this['context']['config']['get']('users.getInitialsCallback'),_0x3069fb={..._0x26da95,'id':_0x505241,'name':C(this['_locale'],_0x42a6ec),'color':this['_getNextColor']()};_0x3069fb['name']=C(this['_locale'],_0x3069fb['name']);const _0x427d26=new R(_0x3069fb,_0x13a59a);return this['users']['add'](_0x427d26),_0x427d26;}['getUser'](_0x4d708d){return this['users']['get'](_0x4d708d);}['useAnonymousUser'](){const _0xd718a9=this['context']['config']['get']('users.anonymousUserId');this['_myId']||this['defineMe'](_0xd718a9);}['defineMe'](_0x2ec9c2){if(this['_myId'])throw new _0x50018a('users-me-already-defined',null);const _0x4519af=this['getUser'](_0x2ec9c2);if(!_0x4519af)throw new _0x50018a('users-me-missing-user',null);this['_myId']=_0x2ec9c2,_0x4519af['_isMe']=!0x0;}['getOperationAuthor'](){return this['me'];}['_getNextColor'](){const _0xe50ead=this['context']['config']['get']('users.colorsCount');return this['_lastColor']>=_0xe50ead&&(this['_lastColor']=0x0),new Y(this['_lastColor']++);}['_addAnonymousUser'](){const _0xdb9c37=this['context']['config']['get']('users.anonymousUserId');this['addUser']({'id':_0xdb9c37,'name':y(this['_locale'],'Anonymous')})['_isAnonymous']=!0x0;}}class R{['id'];['color'];['name'];['initials'];['avatar'];['_isMe'];['_isAnonymous'];constructor(_0x8d343a,_0x19ed96){this['id']=_0x8d343a['id'],this['color']=_0x8d343a['color'],this['name']=_0x8d343a['name'],this['initials']=_0x19ed96?_0x19ed96(this['name']):this['_computeInitials'](),this['avatar']=_0x8d343a['avatar'],this['_isAnonymous']=!0x1,this['_isMe']=!0x1;}get['isAnonymous'](){return this['_isAnonymous'];}get['isMe'](){return this['_isMe'];}['_computeInitials'](){const _0x483c28=this['name']['split']('\x20')['filter'](_0x37d6d3=>/^[\p{Letter}]/u['test'](_0x37d6d3));return 0x1===_0x483c28['length']?this['_getInitial'](_0x483c28[0x0]):0x0===_0x483c28['length']?this['_getInitial'](this['name']):this['_getInitial'](_0x483c28[0x0])+this['_getInitial'](_0x483c28[_0x483c28['length']-0x1]);}['_getInitial'](_0x485736){return String['fromCodePoint'](_0x485736['codePointAt'](0x0))['toUpperCase']();}}function C(_0x570f74,_0x319b1f=''){return''==(_0x319b1f=_0x319b1f['trim']())?y(_0x570f74,'Anonymous'):_0x319b1f;}class Y{['_id'];constructor(_0x35720){this['_id']=_0x35720;}get['id'](){return this['_id'];}['getBackgroundColorClass'](){return'ck-user__bg-color--'+this['id'];}['getSelectionClass'](){return'ck-user__selection--'+this['id'];}['getMarkerClass'](){return'ck-user__marker--'+this['id'];}}class Z extends _0x1335a5{['name'];['notificationView'];constructor(_0x5817e2,_0x41d893,_0x2530da){super(_0x5817e2),this['name']=_0x41d893['name'],this['notificationView']=null;const _0x2877ca=['ck','ck-user'],_0x3f9683=['ck','ck-user__img'];if(_0x41d893['isAnonymous']&&_0x3f9683['push']('ck-user__anonymous'),!_0x41d893['isAnonymous']&&_0x41d893['isMe']&&_0x2877ca['push']('ck-user_me'),_0x41d893['avatar']&&_0x3f9683['push']('ck-user__avatar'),_0x2530da){const _0x38f57e=new _0xebf6bc();_0x38f57e['extendTemplate']({'attributes':{'class':['ck-user__icon']}}),_0x38f57e['content']=_0xbd0ee5,this['notificationView']={'tag':'div','attributes':{'class':['ck','ck-user__notification'],'data-cke-tooltip-position':'n','data-cke-tooltip-text':_0x2530da},'children':[_0x38f57e]};}const _0x44eaca=[{'tag':'div','attributes':{'class':_0x3f9683,'style':{'background-image':_0x41d893['avatar']?'url(\x27'+_0x41d893['avatar']+'\x27)':''}}},{'tag':'div','attributes':{'class':_0x41d893['avatar']?'ck\x20ck-user__name\x20ck-user__name--hidden':'ck\x20ck-user__name','aria-label':_0x41d893['name']},'children':[{'text':_0x41d893['initials']}]}];this['notificationView']&&_0x44eaca['push'](this['notificationView']),this['setTemplate']({'tag':'div','attributes':{'class':_0x2877ca,'data-user-id':_0x41d893['id']},'children':_0x44eaca});}}class Q extends _0x1335a5{['id'];constructor(_0x49c874,_0xd0a1c1){super(_0x49c874),this['id']='ck-aria-description-'+_0x3f9071(),this['setTemplate']({'tag':'span','attributes':{'class':['ck','ck-aria-description'],'id':this['id']},'children':[{'text':_0xd0a1c1}]});}}class X extends _0x2a985d{['render'](){super['render'](),J(this);}}class tt extends _0xcf28ef{['render'](){super['render'](),J(this);}}function J(_0x1fe1d8){_0x1fe1d8['listenTo'](_0x1fe1d8['element'],'mousedown',(_0x1fd310,_0x58d8ef)=>{_0x58d8ef['stopPropagation'](),_0x58d8ef['preventDefault']();}),_0x1fe1d8['listenTo'](_0x1fe1d8['element'],'mouseup',()=>{_0x1fe1d8['element']['focus']();});}function et(_0x45888a={},_0x548356){if(void 0x0!==_0x45888a['dateTimeFormat']&&'function'!=typeof _0x45888a['dateTimeFormat'])throw new _0x50018a('invalid-date-time-format');return _0x340fe6=>{const _0x51f271='string'==typeof _0x340fe6?_0x19aea3['fromISO'](_0x340fe6):_0x19aea3['fromJSDate'](_0x340fe6),_0x30062e=_0x19aea3['now'](),_0x16ad8c=Math['floor'](_0x30062e['diff'](_0x51f271,'days')['days']);return _0x45888a['dateTimeFormat']?_0x45888a['dateTimeFormat'](_0x51f271['toJSDate'](),_0x548356&&_0x548356['t']?_0x548356['t']:void 0x0):0x0===_0x16ad8c?_0x548356?y(_0x548356,'Today')+'\x20'+_0x51f271['toFormat']('hh:mma'):_0x51f271['toFormat']('\x27Today\x27\x20hh:mma'):0x1===_0x16ad8c?_0x548356?y(_0x548356,'Yesterday')+'\x20'+_0x51f271['toFormat']('hh:mma'):_0x51f271['toFormat']('\x27Yesterday\x27\x20hh:mma'):_0x16ad8c<0x7?_0x548356?y(_0x548356,'Last')+'\x20'+y(_0x548356,_0x51f271['toFormat']('EEEE'))+'\x20'+_0x51f271['toFormat']('hh:mma'):_0x51f271['toFormat']('\x27Last\x27\x20EEEE\x20hh:mma'):_0x51f271['toFormat']('LL-dd-yyyy\x20hh:mma');};}function st(_0x5cd0d4,_0x40e579){const _0x4a6206=_0x5cd0d4['mapper']['markerNameToElements'](_0x40e579['name']);if(!_0x4a6206)return null;const _0xe7920b=_0x4a6617(_0x4a6206['values']());return _0x5cd0d4['view']['domConverter']['mapViewToDom'](_0xe7920b)||null;}function nt(_0x504f79,_0x5b75e9){if(0x0===_0x5b75e9['length'])return null;const _0x3f8386=[],_0x511fb2=_0x504f79['view']['domConverter'];for(const _0x3eb262 of _0x5b75e9){const _0x4ab1e1=_0x504f79['mapper']['markerNameToElements'](_0x3eb262['name']);if(!_0x4ab1e1)continue;const _0x5bf714=Array['from'](_0x4ab1e1)['map'](_0x86d1c9=>_0x511fb2['mapViewToDom'](_0x86d1c9))['filter'](_0x7cc2f4=>!!_0x7cc2f4);_0x3f8386['push'](..._0x5bf714);}if(0x0===_0x3f8386['length'])return null;const _0x356a2d=[];for(const _0x13de54 of _0x3f8386){const _0x5a9f42=_0x13de54['getClientRects']()['item'](0x0);_0x5a9f42&&_0x356a2d['push']({'x':_0x5a9f42['x'],'y':_0x5a9f42['y'],'domElement':_0x13de54});}return 0x0===_0x356a2d['length']?null:(_0x356a2d['sort']((_0x5d4f89,_0x1dee9a)=>_0x5d4f89['y']-_0x1dee9a['y']||_0x5d4f89['x']-_0x1dee9a['x']),_0x356a2d['map'](_0xb00853=>_0xb00853['domElement']));}function it(_0x4393ee,{limit:_0x335254,suffix:_0x416374='...'}){const _0x202312=[];let _0x2c4cd9=0x0;const _0x40a63c=_0x4393ee['replace'](/</g,'\x0a<')['replace'](/>/g,'>\x0a')['replace'](/^\n/g,'')['replace'](/\n$/g,'')['split']('\x0a');for(let _0x24f330=0x0;_0x24f330<_0x40a63c['length'];_0x24f330++){let _0x2d9e6f=_0x40a63c[_0x24f330];const _0x4695ab=H(_0x2d9e6f);if(_0x2d9e6f['startsWith']('<')){if(_0x2c4cd9>=_0x335254){const _0x1771d5=_0x2d9e6f['match'](/[a-zA-Z]+/);if(!_0x1771d5){_0x40a63c[_0x24f330]='';continue;}const _0x40315c=_0x1771d5[0x0];_0x2d9e6f['startsWith']('</')?(_0x202312['length']&&(_0x2d9e6f=''),_0x202312['pop']()):(_0x202312['push'](_0x40315c),_0x2d9e6f='');}}else{if(_0x2c4cd9>=_0x335254)_0x2d9e6f='';else{if(_0x2c4cd9+_0x4695ab['length']>=_0x335254){let _0x369789=_0x335254-_0x2c4cd9;if('\x20'===_0x4695ab[_0x369789-0x1])_0x369789--;else{const _0x10ae2a=_0x4695ab['slice'](_0x369789)['indexOf']('\x20');-0x1!==_0x10ae2a?_0x369789+=_0x10ae2a:_0x369789=_0x2d9e6f['length'];}_0x2d9e6f=_0x4695ab['slice'](0x0,_0x369789)['join']('')+_0x416374,_0x2c4cd9=_0x335254;}else _0x2c4cd9+=_0x4695ab['length'];}}_0x40a63c[_0x24f330]=_0x2d9e6f;}return _0x40a63c['join']('\x0a')['replace'](/\n/g,'');}function H(_0x2f105d){const _0x3955c2=[];for(let _0x16d6b4=0x0;_0x16d6b4<_0x2f105d['length'];_0x16d6b4++){const _0x1b6335=_0x2f105d['substring'](_0x16d6b4)['match'](/^&[a-z0-9#]+;/);if(_0x1b6335){const _0x3f620b=_0x1b6335[0x0];_0x3955c2['push'](_0x3f620b),_0x16d6b4+=_0x3f620b['length']-0x1;}else _0x3955c2['push'](_0x2f105d[_0x16d6b4]);}return _0x3955c2;}class v extends _0x1335a5{['submitView'];['cancelView'];['focusTracker'];['keystrokes'];['focusCycler'];['focusables'];constructor(_0x1e7358){super(_0x1e7358);const _0x48ad7b=this['bindTemplate'];this['set']('message',y(_0x1e7358,'Are\x20you\x20sure?')),this['submitView']=this['_createButtonView'](_0x1e7358,y(_0x1e7358,'Yes'),_0x2dd664,'submit'),this['cancelView']=this['_createButtonView'](_0x1e7358,y(_0x1e7358,'No'),_0x24e9ce,'cancel'),this['focusables']=this['createCollection']([this['submitView'],this['cancelView']]),this['focusTracker']=new _0x2d507b(),this['keystrokes']=new _0x25ee0c(),this['focusCycler']=new _0x281852({'focusables':this['focusables'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'actions':{'focusPrevious':'shift+tab','focusNext':'tab'}}),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-confirm-view'],'tabindex':-0x1,'role':'alertdialog'},'children':[{'tag':'div','attributes':{'class':'ck-confirm-view-inner','role':'presentation'},'children':[{'tag':'p','children':[{'text':_0x48ad7b['to']('message')}]},{'tag':'div','attributes':{'class':'ck-confirm-view-actions'},'children':[this['submitView'],this['cancelView']]}]}]});}['render'](){super['render'](),this['_setupKeyboardNavigation']();}['focus'](){this['cancelView']['element']['focus']({'preventScroll':!0x0});}['_createButtonView'](_0x2d5db5,_0x241232,_0x365533,_0x28c008){const _0x3489e8=new _0x2a985d(_0x2d5db5);return _0x3489e8['label']=_0x241232,_0x3489e8['icon']=_0x365533,_0x3489e8['extendTemplate']({'attributes':{'class':'ck-confirm-view-'+_0x28c008}}),_0x3489e8['on']('execute',()=>this['fire'](_0x28c008)),_0x3489e8;}['_setupKeyboardNavigation'](){this['focusables']['forEach'](_0x5005ac=>{this['keystrokes']['listenTo'](_0x5005ac['element']),this['focusTracker']['add'](_0x5005ac['element']);}),this['keystrokes']['set']('esc',(_0x57ffa4,_0x3b1b60)=>{this['fire']('cancel'),_0x3b1b60();});}}function ot(_0x2117f2){return class extends _0x2117f2{['showConfirm'](_0x3cb657,_0x226dd2){return this['confirmView']=new v(this['locale']),this['confirmView']['render'](),this['confirmView']['message']=_0x3cb657,this['confirmView']['once']('cancel',()=>{this['_removeConfirm']();}),this['confirmView']['once']('submit',()=>{this['_removeConfirm']();}),_0x226dd2['appendChild'](this['confirmView']['element']),_0x226dd2['classList']['add']('ck-confirm-view-active'),this['registerChild'](this['confirmView']),this['confirmView']['focus'](),this['set']('isConfirm',!0x0),this['on']('change:isConfirm',(_0x325360,_0x4fbee5,_0x32711c)=>{_0x32711c||_0x226dd2['classList']['remove']('ck-confirm-view-active');}),new Promise(_0x4c1e38=>this['confirmView']['on']('submit',_0x4c1e38));}['cancelConfirm'](){this['isConfirm']&&this['confirmView']['fire']('cancel');}['_removeConfirm'](){this['element']&&this['confirmView']&&this['confirmView']['element']&&(this['element']['focus'](),this['confirmView']['element']['remove'](),this['deregisterChild'](this['confirmView']),this['isConfirm']=!0x1,this['fire']('removeConfirm'),this['confirmView']['destroy'](),this['confirmView']=void 0x0);}};}function rt(_0x28c491){let _0x5b62ed=0x0,_0x439f8a=0x0;for(const _0x15cea1 of M(_0x28c491))_0x5b62ed=(_0x5b62ed<<0x5)-_0x5b62ed+_0x15cea1,_0x5b62ed&=_0x5b62ed,[_0x5b62ed,_0x439f8a]=[_0x439f8a,_0x5b62ed];return B(_0x5b62ed)+B(_0x439f8a);}function*O(_0x284db0){null==_0x284db0||null==_0x284db0?yield 0x12b9b0a1:0x0===_0x284db0||!0x1===_0x284db0?yield 0x0:0x1===_0x284db0||0x1==_0x284db0?yield 0x1:Array['isArray'](_0x284db0)?yield*function*(_0x50ef49){for(const _0x45da3c of _0x50ef49)yield*O(_0x45da3c);}(_0x284db0):'object'==typeof _0x284db0?yield*M(_0x284db0):'string'==typeof _0x284db0?yield*q(_0x284db0):'number'==typeof _0x284db0&&(yield _0x284db0);}function*M(_0x2f264f){if(yield z('{'),_0x2f264f){const _0x486ad3=Object['keys'](_0x2f264f)['sort']();for(const _0x2ec9f7 of _0x486ad3){yield*q(_0x2ec9f7),yield z(':');const _0x47f0b8=_0x2f264f[_0x2ec9f7];yield*O(_0x47f0b8);}}yield z('}');}function*q(_0x8734cf){yield z('\x22');for(const _0x3a12a6 of _0x8734cf)yield z(_0x3a12a6);yield z('\x22');}function z(_0x35ddc7){return _0x35ddc7['charCodeAt'](0x0);}function B(_0x33ff8e){return(_0x33ff8e*=Math['sign'](_0x33ff8e))['toString'](0x24);}const W=['initialData','context','toolbar','rootsAttributes'],S=['WebSocketGateway','RevisionTracker','Autosave','WordCount','DocumentOutline','WProofreader'];function G(_0x141d08,_0x5ee7e5,_0x4b4b58,_0x32bb8d=[]){const _0x5a1e15='string'==typeof _0x141d08?_0x4b4b58['get'](_0x141d08)['constructor']:_0x141d08['prototype']['constructor'];if(_0x5ee7e5['has'](_0x5a1e15))return _0x5ee7e5['get'](_0x5a1e15);_0x5ee7e5['set'](_0x5a1e15,!0x0);const _0x226621=[...S,..._0x32bb8d]['map'](_0x870a2b=>{if(_0x4b4b58['has'](_0x870a2b))return _0x4b4b58['get'](_0x870a2b)['constructor'];})['filter'](_0x3c65ec=>_0x3c65ec);if(_0x5a1e15&&_0x226621['includes'](_0x5a1e15))return _0x5ee7e5['set'](_0x5a1e15,!0x1),!0x1;if(!_0x5a1e15['requires'])return _0x5ee7e5['set'](_0x5a1e15,!0x0),!0x0;const _0x1d775f=_0x5a1e15['requires']['every'](_0x4dc001=>G(_0x4dc001,_0x5ee7e5,_0x4b4b58,_0x32bb8d));return _0x5ee7e5['set'](_0x5a1e15,_0x1d775f),_0x1d775f;}function ct(_0x17fab6,_0x454c44){const _0x28f816={};for(const _0x492355 of _0x17fab6['config']['names']())W['includes'](_0x492355)||(_0x28f816[_0x492355]=_0x17fab6['config']['get'](_0x492355));const _0x512241=_0x28f816['plugins']||[],_0x40081e=_0x17fab6['constructor']['builtinPlugins']||[],_0x327f61=_0x512241['length']?_0x512241:_0x40081e,_0x535097=_0x28f816['extraPlugins']||[];delete _0x28f816['extraPlugins'];const _0x26423f=_0x28f816['removePlugins']||[];delete _0x28f816['removePlugins'];const _0x5b60bb=_0x17fab6['_context']['config']['get']('plugins')||[],_0x2e07f6=_0x327f61['concat'](_0x535097)['concat'](_0x5b60bb)['map'](_0x2a614c=>'string'==typeof _0x2a614c?_0x40081e['find'](_0x136002=>_0x136002['pluginName']==_0x2a614c):_0x2a614c)['filter'](_0x18e188=>!_0x26423f['includes'](_0x18e188)&&!_0x26423f['includes'](_0x18e188['pluginName'])),_0x2921c6=Array['from'](new Set(_0x2e07f6)),_0xe21ce3=new Map();return _0x28f816['plugins']=_0x2921c6['filter'](_0x4e75c8=>G(_0x4e75c8,_0xe21ce3,_0x17fab6['plugins'],_0x454c44)),_0x28f816;}function at(_0x532e64,_0x16f6d5){const _0x567623=[];_0x532e64['document']['selection']['on']('change:range',()=>{const _0x4d6632=function(_0x57c8fe,_0xf2f5b2){const _0x129b52=[];for(const _0x24893c of _0x57c8fe['markers']){const _0x1d2242=_0x24893c['getRange']();(_0x1d2242['containsPosition'](_0xf2f5b2)||_0x1d2242['start']['isEqual'](_0xf2f5b2)||_0x1d2242['end']['isEqual'](_0xf2f5b2))&&_0x129b52['push'](_0x24893c);}return _0x129b52;}(_0x532e64,_0x532e64['document']['selection']['focus']),_0x509c1f=[],_0x4e0ba1=[],_0x48bb74=[];for(const _0x4cfd27 of _0x567623)_0x4d6632['includes'](_0x4cfd27)||_0x509c1f['push'](_0x4cfd27);for(const _0x3fa66d of _0x4d6632)_0x567623['includes'](_0x3fa66d)||_0x4e0ba1['push'](_0x3fa66d),_0x48bb74['push'](_0x3fa66d);(_0x509c1f['length']||_0x4e0ba1['length'])&&_0x16f6d5({'left':_0x509c1f,'entered':_0x4e0ba1}),_0x567623['length']=0x0,_0x567623['push'](..._0x48bb74);});}const ht='Ctrl+Shift+E';function lt(_0x1cfa45,_0x49cf33){const _0x21e658=_0x1cfa45['element'];_0x1cfa45['keystrokes']['listenTo'](_0x21e658);for(const _0x46c858 of _0x49cf33)F(_0x1cfa45,_0x46c858);_0x49cf33['on']('change',(_0x22a5a0,_0x55505f)=>{for(const _0x5df2be of _0x55505f['removed'])I(_0x1cfa45,_0x5df2be);for(const _0x2e25c3 of Array['from'](_0x55505f['added'])['reverse']())F(_0x1cfa45,_0x2e25c3);}),_0x1cfa45['keystrokes']['set']('enter',(_0x464de7,_0x259e68)=>{_0x21e658===_0x464de7['target']&&(_0x1cfa45['focusCycler']['focusFirst'](),_0x259e68());},{'filter':_0x51a9f5=>_0x51a9f5['target']===_0x21e658}),_0x1cfa45['keystrokes']['set']('esc',(_0x346a42,_0x1c8514)=>{_0x21e658!==_0x346a42['target']?_0x1cfa45['focus']():_0x1cfa45['fire']('escape'),_0x1c8514();}),_0x1cfa45['keystrokes']['set']('arrowdown',(_0x205477,_0x3ed862)=>{_0x21e658===_0x205477['target']&&(_0x1cfa45['fire']('arrowdown'),_0x3ed862());}),_0x1cfa45['keystrokes']['set']('arrowup',(_0x67276e,_0x19f6f6)=>{_0x21e658===_0x67276e['target']&&(_0x1cfa45['fire']('arrowup'),_0x19f6f6());});}function F(_0x393d52,_0x216aae){_0x216aae['isRendered']&&(_0x393d52['focusTracker']['add'](_0x216aae['element']),_0x393d52['keystrokes']['listenTo'](_0x216aae['element']),_0xc76688(_0x216aae)&&function(_0x4d9b9c,_0x2c0c5c){const _0x256505=_0x4d9b9c['actions'],_0x39d4dd=_0x2c0c5c['actions'];for(const _0x56ebcb of Object['keys'](_0x256505))if(_0x56ebcb in _0x39d4dd&&_0x256505[_0x56ebcb]!==_0x39d4dd[_0x56ebcb])return!0x1;return!0x0;}(_0x393d52['focusCycler'],_0x216aae['focusCycler'])&&_0x393d52['focusCycler']['chain'](_0x216aae['focusCycler']));}function I(_0x297f1b,_0x50c832){_0x297f1b['focusTracker']['remove'](_0x50c832['element']),_0x297f1b['keystrokes']['stopListening'](_0x50c832['element']),_0xc76688(_0x50c832)&&_0x297f1b['focusCycler']['unchain'](_0x50c832['focusCycler']);}const ut='$elementId',dt='data-id';class ft extends _0x1bd94c{static get['pluginName'](){return'DocumentCompare';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}async['init'](){this['context']instanceof _0x1b7d16?this['_integrateEditor'](this['context']):this['listenTo'](this['context']['editors'],'add',(_0x399c39,_0x2c2356)=>{_0x2c2356['on']('ready',()=>{this['_integrateEditor'](_0x2c2356);});});}get['editor'](){if(this['context']instanceof _0x1b7d16)return this['context'];{const _0x1f92f8=this['context']['editors']['first'];if(!_0x1f92f8)throw new _0x50018a('documentcompare-no-editor',this);return _0x1f92f8;}}['getDiff'](_0x4fc0ed,_0x30f4e9,_0x5e8d95={'anchor':'main','markDeletions':!0x1}){let _0x2bd2f8,_0x4b4675;const _0x25a37c=this['editor'];if('string'==typeof _0x5e8d95['anchor']){const _0x499395=_0x25a37c['model']['document']['getRoot'](_0x5e8d95['anchor']);if(!_0x499395)throw new _0x50018a('documentcompare-compare-no-root',this,{'anchor':_0x5e8d95['anchor']});_0x2bd2f8=_0x499395,_0x4b4675=_0x25a37c['model']['createPositionAt'](_0x499395,0x0);}else _0x2bd2f8=_0x5e8d95['anchor']['clone'](),_0x4b4675=_0x5e8d95['anchor']['clone']();const _0x733fd1=_0x25a37c['data']['parse'](_0x4fc0ed,_0x2bd2f8),_0x15c4bd=_0x25a37c['data']['parse'](_0x30f4e9,_0x2bd2f8);return new mt(_0x733fd1,_0x15c4bd,_0x25a37c,{'anchor':_0x4b4675,'markDeletions':_0x5e8d95['markDeletions']});}['isMarkedRemoveOperation'](_0x29a597){return'marker'==_0x29a597['type']&&_0x29a597['name']['startsWith']('$markedRemove');}['_integrateEditor'](_0x246d2a){_0x246d2a['conversion']['for']('upcast')['add'](_0x7e45b8=>{_0x7e45b8['on']('element',(_0x2192dc,_0x5e80b7,_0x222064)=>{if(_0x5e80b7['modelRange'])for(const _0x3905ba of _0x5e80b7['modelRange']['getItems']({'shallow':!0x0})){if(_0x3905ba['is']('$textProxy'))continue;const _0x4bc77b=_0x5e80b7['viewItem']['getAttribute'](dt);_0x4bc77b&&_0x222064['writer']['setAttribute'](ut,_0x4bc77b,_0x3905ba);}},{'priority':'lowest'});}),_0x246d2a['model']['schema']['addAttributeCheck'](()=>!0x0,ut);}}class mt{['_editor'];['_diffItems']=[];['_operationsData']=[];['_markDeletions'];['_anchor'];['_path']=[0x0];['_parents']=[];constructor(_0x4344a9,_0x485c56,_0x2bb9f3,_0x3a986a){this['_editor']=_0x2bb9f3,this['_markDeletions']=!!_0x3a986a['markDeletions'],this['_anchor']=_0x3a986a['anchor'];const _0x2c5abc=this['_tokenizeModel'](_0x4344a9),_0x1ad3e4=this['_tokenizeModel'](_0x485c56);this['_diffItems']=this['_diffModelTokens'](_0x2c5abc,_0x1ad3e4),this['_calculateOperationsData'](),this['_markDeletions']||this['_calculateMarkersOperationsData'](_0x4344a9['markers'],_0x485c56['markers']);}['getOperationsData'](){return this['_operationsData'];}['getOperations'](){const _0x172314=this['_editor']['model']['document'],_0x5461e6=[];let _0x2b4432=_0x172314['version'];for(const _0x97554a of this['_operationsData'])switch(_0x97554a['type']){case'attribute':{const _0x55e5fb=this['_getPositionFromAnchorAndPath'](this['_anchor'],_0x97554a['path']),_0x2f368b=_0x55e5fb['getShiftedBy'](_0x97554a['howMany']),_0x5b1983=new _0x13a22e(_0x55e5fb,_0x2f368b),_0x2a953e=JSON['parse'](_0x97554a['oldValue']),_0x51b444=JSON['parse'](_0x97554a['newValue']);_0x5461e6['push'](new _0x3f2114(_0x5b1983,_0x97554a['key'],_0x2a953e,_0x51b444,_0x2b4432++));break;}case'insert':{const _0x2c1ba5=this['_getPositionFromAnchorAndPath'](this['_anchor'],_0x97554a['path']),_0x3250a1=this['_makeModelFromTokens'](_0x97554a['tokens']);_0x5461e6['push'](new _0x1dea62(_0x2c1ba5,_0x3250a1,_0x2b4432++));break;}case'remove':{const _0x5fa916=this['_getPositionFromAnchorAndPath'](this['_anchor'],_0x97554a['path']),_0x5d5f76=new _0x7ab2f4(_0x172314['graveyard'],[0x0]);_0x5461e6['push'](new _0x56cbd7(_0x5fa916,_0x97554a['howMany'],_0x5d5f76,_0x2b4432++));break;}case'rename':{const _0x4b63fe=this['_getPositionFromAnchorAndPath'](this['_anchor'],_0x97554a['path']);_0x5461e6['push'](new _0x23ebce(_0x4b63fe,_0x97554a['oldName'],_0x97554a['newName'],_0x2b4432++));break;}case'split':{const _0x322a62=this['_getPositionFromAnchorAndPath'](this['_anchor'],_0x97554a['path']),_0xeb89ff=this['_getPositionFromAnchorAndPath'](this['_anchor'],_0x97554a['path']['slice'](0x0,-0x1));_0xeb89ff['offset']++,_0x5461e6['push'](new _0x17f0dc(_0x322a62,Number['NEGATIVE_INFINITY'],_0xeb89ff,null,_0x2b4432++));break;}case'merge':{const _0x167457=_0x97554a['path']['slice'](),_0x31555e=_0x167457['slice'](0x0,-0x1);_0x31555e[_0x31555e['length']-0x1]++,_0x31555e['push'](0x0);const _0x5d3f7b=this['_getPositionFromAnchorAndPath'](this['_anchor'],_0x31555e),_0x8094e2=this['_getPositionFromAnchorAndPath'](this['_anchor'],_0x167457),_0x56aa1f=new _0x7ab2f4(_0x172314['graveyard'],[0x0]);_0x5461e6['push'](new _0x2367a6(_0x5d3f7b,Number['NEGATIVE_INFINITY'],_0x8094e2,_0x56aa1f,_0x2b4432++));break;}case'marker':case'markedRemove':{let _0xed09eb=null;if(_0x97554a['range']){const _0x98392c=this['_getPositionFromAnchorAndPath'](this['_anchor'],_0x97554a['range']['start']),_0x5e156b=this['_getPositionFromAnchorAndPath'](this['_anchor'],_0x97554a['range']['end']);_0xed09eb=new _0x13a22e(_0x98392c,_0x5e156b);}const _0x9c417e='marker'==_0x97554a['type']?_0x97554a['name']:'$markedRemove:'+_0x3f9071();_0x5461e6['push'](new _0x52d228(_0x9c417e,null,_0xed09eb,_0x172314['model']['markers'],!0x0,_0x2b4432++));break;}case'unwrap':{const _0x26a2d1=_0x97554a['path']['slice']();_0x26a2d1['push'](0x0);const _0x4dc904=_0x97554a['path']['slice'](),_0x4f3c29=this['_getPositionFromAnchorAndPath'](this['_anchor'],_0x26a2d1),_0x42c3e8=this['_getPositionFromAnchorAndPath'](this['_anchor'],_0x4dc904),_0x1dbf34=new _0x7ab2f4(_0x172314['graveyard'],[0x0]);_0x5461e6['push'](new _0x56cbd7(_0x4f3c29,_0x97554a['howMany'],_0x42c3e8,_0x2b4432++)),_0x5461e6['push'](new _0x56cbd7(_0x42c3e8['getShiftedBy'](_0x97554a['howMany']),0x1,_0x1dbf34,_0x2b4432++));break;}case'wrap':{const _0x3a55d5=this['_getPositionFromAnchorAndPath'](this['_anchor'],_0x97554a['range']['start']),_0x1d029b=this['_getPositionFromAnchorAndPath'](this['_anchor'],_0x97554a['range']['end']),_0x44e098=_0x97554a['token']['element']['_clone'](!0x1),_0x751a08=_0x97554a['range']['end']['slice']();_0x751a08['push'](0x0);const _0x690d5d=this['_getPositionFromAnchorAndPath'](this['_anchor'],_0x751a08);_0x5461e6['push'](new _0x1dea62(_0x1d029b,_0x44e098,_0x2b4432++)),_0x5461e6['push'](new _0x56cbd7(_0x3a55d5,_0x1d029b['offset']-_0x3a55d5['offset'],_0x690d5d,_0x2b4432++));break;}}return _0x5461e6;}['_tokenizeModel'](_0x4a8449){const _0x6af04c=[],_0xe53c1d=_0x13a22e['_createIn'](_0x4a8449),_0x42d5de=new _0x340666({'boundaries':_0xe53c1d});let _0x43dfbd='',_0x3ec795=null;const _0x483e06=[''],_0x3ef27c=new Map();for(const _0x3a8701 of _0x42d5de)if('elementStart'==_0x3a8701['type']||'elementEnd'==_0x3a8701['type']){let _0x5aad3a=_0x483e06[0x0];''!==_0x43dfbd&&(_0x6af04c['push'](...this['_makeTokensFromTextByWords'](_0x43dfbd,_0x3ec795,_0x5aad3a)),_0x43dfbd='');const _0x3a3519=_0x3a8701['item'];let _0x215271;_0x3a3519['getAttribute'](ut)?_0x215271=_0x3a3519['getAttribute'](ut):'elementStart'==_0x3a8701['type']?(_0x215271=_0x3f9071(),_0x3ef27c['set'](_0x3a3519,_0x215271)):_0x215271=_0x3ef27c['get'](_0x3a3519);const _0x299531=this['_getElementCategory'](_0x3a3519);'solid'==_0x299531&&('elementStart'==_0x3a8701['type']?(_0x5aad3a=_0x215271,_0x483e06['unshift'](_0x5aad3a)):_0x483e06['shift']());const _0x4ff7eb={'type':'element','element':_0x3a3519,'elementId':_0x215271,'category':_0x299531,'isStart':'elementStart'==_0x3a8701['type'],'limitId':_0x5aad3a};_0x6af04c['push'](_0x4ff7eb);}else''==_0x43dfbd&&(_0x3ec795=_0x3a8701['previousPosition']['clone']()),_0x43dfbd+=_0x3a8701['item']['data'];return''!==_0x43dfbd&&_0x6af04c['push'](...this['_makeTokensFromTextByWords'](_0x43dfbd,_0x3ec795,_0x483e06[0x0])),_0x6af04c;}['_makeTokensFromTextByWords'](_0x4f635c,_0x2c93f3,_0xc5c930){const _0x7a54cd=_0x4f635c['matchAll'](/(\s)/g),_0x3943fd=Array['from'](_0x7a54cd)['map'](_0x381d7b=>_0x381d7b['index']);_0x3943fd['push'](_0x4f635c['length']),0x0==_0x3943fd[0x0]&&_0x3943fd['shift']();const _0x819bb=[],_0x4d8b00=_0x2c93f3['parent'];let _0x30446a=0x0,_0x3735ae=_0x2c93f3['offset'];for(let _0x42cf34=0x0;_0x42cf34<_0x3943fd['length'];_0x42cf34++)_0x819bb['push']({'type':'text','data':_0x4f635c['slice'](_0x30446a,_0x3943fd[_0x42cf34]),'parent':_0x4d8b00,'offset':_0x3735ae,'limitId':_0xc5c930}),_0x30446a=_0x3943fd[_0x42cf34],_0x3735ae=_0x2c93f3['offset']+_0x3943fd[_0x42cf34];return _0x819bb;}['_getElementCategory'](_0x2bf7bc){const _0x2ba184=this['_editor']['model']['schema'];return _0x2ba184['isLimit'](_0x2bf7bc)||_0x2ba184['isContent'](_0x2bf7bc)||_0x2ba184['isInline'](_0x2bf7bc)?'solid':_0x2ba184['isBlock'](_0x2bf7bc)?'block':'container';}['_diffModelTokens'](_0x17d04a,_0x1617ef){const _0xe76ac7=_0x364f0f(_0x17d04a,_0x1617ef,{'comparator':k});this['_handleUnclosedBlockOpeningTags'](_0xe76ac7);const _0x51a84c=_0xe76ac7['flatMap'](_0x4db807=>{const _0x26b213=_0x4db807['added']?'added':_0x4db807['removed']?'removed':'unchanged';return _0x4db807['value']['map'](_0x5b3918=>({'token':_0x5b3918,'change':_0x26b213}));});let _0x4130e9=0x0;for(const _0x20278c of _0x51a84c)'added'!=_0x20278c['change']&&('unchanged'==_0x20278c['change']&&(_0x20278c['before']=_0x17d04a[_0x4130e9]),_0x4130e9++);return _0x51a84c;}['_handleUnclosedBlockOpeningTags'](_0x57f1c0){for(let _0x45024a=0x0;_0x45024a<_0x57f1c0['length']-0x1;_0x45024a++)if(_0x57f1c0[_0x45024a]['removed']&&_0x57f1c0[_0x45024a+0x1]['added']){const _0x261912=this['_findUnclosedBlockOpeningToken'](_0x57f1c0[_0x45024a]['value']);if(null!==_0x261912){const _0x575b8a=this['_findUnclosedBlockOpeningToken'](_0x57f1c0[_0x45024a+0x1]['value']),_0xe7349b=_0x57f1c0[_0x45024a]['value']['splice'](_0x261912),_0x4d9d51=_0x57f1c0[_0x45024a+0x1]['value']['splice'](_0x575b8a),_0x5b8008=[_0x4d9d51['shift']()];_0xe7349b['shift']();const _0x55509a={'value':_0xe7349b,'removed':!0x0},_0x140a44={'value':_0x4d9d51,'added':!0x0},_0x20cd75={'value':_0x5b8008};_0x57f1c0['splice'](_0x45024a+0x2,0x0,_0x20cd75,_0x55509a,_0x140a44);}}}['_findUnclosedBlockOpeningToken'](_0x273bb2){let _0x91d1a1=0x0,_0x3c65d2=-0x1;for(let _0x4da935=0x0;_0x4da935<_0x273bb2['length'];_0x4da935++){const _0x1c8721=_0x273bb2[_0x4da935];'element'==_0x1c8721['type']&&'block'==_0x1c8721['category']&&(_0x91d1a1+=_0x1c8721['isStart']?0x1:-0x1,_0x1c8721['isStart']&&(_0x3c65d2=_0x4da935));}return 0x0===_0x91d1a1?null:_0x3c65d2;}['_calculateOperationsData'](){this['_handleUnwraps'](),this['_path']=[0x0],this['_parents']=[];for(let _0x26d168=0x0;_0x26d168<this['_diffItems']['length'];_0x26d168++){const _0x5b5a33=this['_diffItems'][_0x26d168]['change'],_0x5f45d1=[];_0x5f45d1['push'](this['_diffItems'][_0x26d168]);let _0x5a7822=_0x26d168+0x1;for(;this['_diffItems'][_0x5a7822]&&this['_diffItems'][_0x5a7822]['change']==_0x5b5a33;)_0x5f45d1['push'](this['_diffItems'][_0x5a7822]),_0x5a7822++,_0x26d168++;const _0x40382c=_0x5f45d1['map'](_0x364ff3=>_0x364ff3['token']);if('unchanged'==_0x5b5a33)_0x5f45d1['map'](_0x4ca699=>_0x4ca699['before'])['forEach'](_0x479ba2=>this['_traverseOverItem'](_0x479ba2));else{if('removed'==_0x5b5a33){if(this['_markDeletions']){const _0x4b107e=this['_path']['slice']();_0x40382c['forEach'](_0xc571e6=>this['_traverseOverItem'](_0xc571e6));const _0x41841b=this['_path']['slice']();this['_operationsData']['push']({'type':'markedRemove','range':{'start':_0x4b107e,'end':_0x41841b}});}else this['_handleChanged'](_0x40382c,!0x0,this['_path']['slice']());}else{const _0x439244=_0x40382c['filter'](_0x190d6e=>'element'!=_0x190d6e['type']||'container'!=_0x190d6e['category']);this['_handleChanged'](_0x439244,!0x1,this['_path']);}}}this['_handleWraps'](),this['_path']=[0x0],this['_parents']=[];for(let _0x2a9331=0x0;_0x2a9331<this['_diffItems']['length'];_0x2a9331++){const _0x429d47=this['_diffItems'][_0x2a9331]['change'],_0x1d779c=[];_0x1d779c['push'](this['_diffItems'][_0x2a9331]);let _0x1c03b2=_0x2a9331+0x1;for(;this['_diffItems'][_0x1c03b2]&&this['_diffItems'][_0x1c03b2]['change']==_0x429d47;)_0x1d779c['push'](this['_diffItems'][_0x1c03b2]),_0x1c03b2++,_0x2a9331++;const _0x4d8dbb=_0x1d779c['map'](_0x10c510=>_0x10c510['token']);if('unchanged'==_0x429d47){const _0xf8e908=_0x1d779c['map'](_0x453540=>_0x453540['before']);this['_handleUnchanged'](_0xf8e908,_0x4d8dbb);}else('removed'!=_0x429d47||this['_markDeletions'])&&_0x4d8dbb['forEach'](_0x33b888=>{this['_traverseOverItem'](_0x33b888);});}}['_calculateMarkersOperationsData'](_0x3da9d1,_0x2b7a11){const _0x38dd71={};for(const [_0xc466c]of _0x3da9d1)_0x38dd71[_0xc466c]=null;for(const [_0x34d18a,_0x3e67b9]of _0x2b7a11)_0x38dd71[_0x34d18a]=_0x3e67b9;const _0xb54b2=Object['entries'](_0x38dd71)['map'](([_0x13dd8a,_0x4c5b02])=>({'type':'marker','name':_0x13dd8a,'range':_0x4c5b02?{'start':_0x4c5b02['start']['path']['slice'](),'end':_0x4c5b02['end']['path']['slice']()}:null}));this['_operationsData']['push'](..._0xb54b2);}['_handleUnwraps'](){const _0x166be1=new Map(),_0x2cb485=[],_0x32e43b=[0x0];let _0x1b8ff5=this['_diffItems']['length']+0x1;for(let _0x3ae611=this['_diffItems']['length']-0x1;_0x3ae611>=0x0;_0x3ae611--){const {token:_0x5c56ce,before:_0x6b264,change:_0x475866}=this['_diffItems'][_0x3ae611];if('removed'!=_0x475866&&(_0x1b8ff5=_0x3ae611),'element'!=_0x5c56ce['type']||'container'!=_0x5c56ce['category']||'added'==_0x475866)continue;const _0x17a8ed=_0x6b264?_0x6b264['element']:_0x5c56ce['element'];if(_0x5c56ce['isStart']){const _0x396be9=_0x166be1['get'](_0x17a8ed),_0x3daa79=this['_diffItems'][_0x396be9];('removed'==_0x475866||'removed'==_0x3daa79['change'])&&_0x1b8ff5<_0x396be9&&(this['_operationsData']['push']({'type':'unwrap','path':_0x17a8ed['getPath'](),'howMany':_0x17a8ed['maxOffset']+_0x32e43b[0x0]}),_0x32e43b['shift'](),_0x32e43b[0x0]+=_0x17a8ed['maxOffset']-0x1,_0x2cb485['push'](_0x3ae611),_0x2cb485['push'](_0x396be9));}else _0x166be1['set'](_0x17a8ed,_0x3ae611),_0x32e43b['unshift'](0x0);}_0x2cb485['sort']((_0x20a68a,_0x230d2b)=>_0x230d2b-_0x20a68a),_0x2cb485['forEach'](_0x285b5d=>{const _0x14e84e=this['_diffItems'][_0x285b5d];'removed'==_0x14e84e['change']?this['_diffItems']['splice'](_0x285b5d,0x1):(_0x14e84e['change']='added',delete _0x14e84e['before']);});}['_handleWraps'](){this['_path']=[0x0],this['_parents']=[];const _0x1557e4=[];for(let _0x64163a=0x0;_0x64163a<this['_diffItems']['length'];_0x64163a++){const {change:_0x147a4b,token:_0x29e65b}=this['_diffItems'][_0x64163a];if('added'==_0x147a4b&&'element'==_0x29e65b['type']&&'container'==_0x29e65b['category']){if(_0x29e65b['isStart'])_0x1557e4['push'](this['_path']['slice']());else{if(!_0x29e65b['isStart']){const _0x5467d2=_0x1557e4['pop']();this['_operationsData']['push']({'type':'wrap','range':{'start':_0x5467d2,'end':this['_path']['slice']()},'token':_0x29e65b}),this['_path'][this['_path']['length']-0x1]=_0x5467d2[this['_path']['length']-0x1]+0x1;}}}else('removed'!=_0x147a4b||this['_markDeletions'])&&this['_traverseOverItem'](_0x29e65b);}}['_handleUnchanged'](_0x26fcd1,_0x5b7dfb){for(let _0x3b5b0a=0x0;_0x3b5b0a<_0x26fcd1['length'];_0x3b5b0a++){const _0x3c4d9d=_0x26fcd1[_0x3b5b0a];if('element'==_0x3c4d9d['type']&&_0x3c4d9d['isStart']){const _0x925e9a=_0x5b7dfb[_0x3b5b0a];'block'==_0x3c4d9d['category']&&this['_handleElementRename'](_0x3c4d9d['element'],_0x925e9a['element'],this['_path']),this['_handleElementAttributeChanges'](_0x3c4d9d['element'],_0x925e9a['element'],this['_path']),this['_path']['push'](0x0),this['_parents']['push'](_0x925e9a);}else{if('element'!=_0x3c4d9d['type']||_0x3c4d9d['isStart']){if('text'==_0x3c4d9d['type']){const _0x261835=this['_path']['slice'](),_0x5414d6=[],_0x2d4518=[];for(;_0x26fcd1[_0x3b5b0a]&&'text'==_0x26fcd1[_0x3b5b0a]['type'];)_0x5414d6['push'](_0x26fcd1[_0x3b5b0a]),_0x2d4518['push'](_0x5b7dfb[_0x3b5b0a]),this['_path'][this['_path']['length']-0x1]+=_0x26fcd1[_0x3b5b0a]['data']['length'],_0x3b5b0a++;_0x3b5b0a--,this['_handleTextAttributeChanges'](_0x5414d6,_0x2d4518,_0x261835);}}else this['_path']['pop'](),this['_path'][this['_path']['length']-0x1]++,this['_parents']['pop']();}}}['_handleChanged'](_0x3716b3,_0xad0c8d,_0x2aaac0){const _0x127d8b=[],_0xe1ad76=[],_0x4c76f9=_0x2aaac0['slice']();for(let _0x24de3f=0x0;_0x24de3f<_0x3716b3['length'];_0x24de3f++){const _0xee4b33=_0x3716b3[_0x24de3f],_0x3ed0ae=_0x2aaac0['slice']();if('element'!=_0xee4b33['type']||_0xee4b33['isStart'])'element'==_0xee4b33['type']&&_0xee4b33['isStart']?(_0x2aaac0['push'](0x0),_0xad0c8d||this['_parents']['push'](_0xee4b33),_0xe1ad76['push']({'before':_0x3ed0ae,'after':_0x2aaac0['slice'](),'index':_0x24de3f})):_0x2aaac0[_0x2aaac0['length']-0x1]+=_0xee4b33['data']['length'];else{let _0x3297e2;_0x2aaac0['pop'](),_0x2aaac0[_0x2aaac0['length']-0x1]++,_0x3297e2=_0xad0c8d?this['_parents'][this['_parents']['length']-0x1]:this['_parents']['pop'](),_0xe1ad76['length']?_0xe1ad76['pop']():_0x127d8b['push']({'before':_0x3ed0ae,'after':_0x2aaac0['slice'](),'index':_0x24de3f,'related':_0x3297e2});}}if(_0xe1ad76['length']!==_0x127d8b['length'])throw new _0x50018a('model-diff-incorrect-matching-and-closing-tags',null,{'tokens':_0x3716b3,'isRemove':_0xad0c8d});const _0x1a2103=[{'after':_0x4c76f9['slice'](),'index':-0x1},..._0x127d8b,..._0xe1ad76,{'before':_0x2aaac0['slice'](),'index':_0x3716b3['length']}];if(_0xad0c8d){for(let _0x147296=_0x1a2103['length']-0x1;_0x147296>=0x1;_0x147296--){const _0x38dfe2=_0x1a2103[_0x147296-0x1]['after'],_0x594647=_0x1a2103[_0x147296]['before'],_0x4ffbd2=_0x594647[_0x594647['length']-0x1]-_0x38dfe2[_0x38dfe2['length']-0x1];_0x4ffbd2&&(this['_operationsData']['push']({'type':'remove','path':_0x38dfe2,'howMany':_0x4ffbd2}),_0x594647[_0x594647['length']-0x1]-=_0x4ffbd2);}for(const {before:_0x5347ab}of _0x127d8b)this['_operationsData']['push']({'type':'merge','path':_0x5347ab});}else for(let _0x9a4e45=0x0;_0x9a4e45<_0x1a2103['length']-0x1;_0x9a4e45++){const _0x3864ac=_0x1a2103[_0x9a4e45]['after'],_0x2cd0ee=_0x1a2103[_0x9a4e45+0x1]['before'],_0x4b37eb=_0x1a2103[_0x9a4e45]['index']+0x1,_0x165f59=_0x1a2103[_0x9a4e45+0x1]['index'];if(_0x4b37eb!==_0x165f59&&this['_operationsData']['push']({'type':'insert','path':_0x3864ac,'tokens':_0x3716b3['slice'](_0x4b37eb,_0x165f59)}),_0x9a4e45<_0x127d8b['length']){this['_operationsData']['push']({'type':'split','path':_0x2cd0ee});const _0x293c7a=_0x3716b3[_0xe1ad76[_0xe1ad76['length']-0x1-_0x9a4e45]['index']],_0x2c7c20=_0x127d8b[_0x9a4e45]['after'],_0xe2645c=_0x127d8b[_0x9a4e45]['related']['element'];this['_handleElementRename'](_0xe2645c,_0x293c7a['element'],_0x2c7c20),this['_handleElementAttributeChanges'](_0xe2645c,_0x293c7a['element'],_0x2c7c20);}}}['_traverseOverItem'](_0x5ef5f4){'element'==_0x5ef5f4['type']&&_0x5ef5f4['isStart']?(this['_path']['push'](0x0),this['_parents']['push'](_0x5ef5f4)):'element'!=_0x5ef5f4['type']||_0x5ef5f4['isStart']?'text'==_0x5ef5f4['type']&&(this['_path'][this['_path']['length']-0x1]+=_0x5ef5f4['data']['length']):(this['_path']['pop'](),this['_path'][this['_path']['length']-0x1]++,this['_parents']['pop']());}['_handleElementRename'](_0x4d849b,_0x4a5c5d,_0x226969){_0x4d849b['name']!=_0x4a5c5d['name']&&this['_operationsData']['push']({'type':'rename','path':_0x226969['slice'](),'oldName':_0x4d849b['name'],'newName':_0x4a5c5d['name']});}['_handleElementAttributeChanges'](_0x4d590e,_0x1ae349,_0xa5c036){const _0x48dd2b=this['_getAttributeChanges'](_0x4d590e['getAttributes'](),_0x1ae349['getAttributes']());for(const _0x334416 in _0x48dd2b){const {oldValue:_0x4f9657,newValue:_0x2c3092}=_0x48dd2b[_0x334416];this['_operationsData']['push']({'type':'attribute','path':_0xa5c036['slice'](),'howMany':0x1,'key':_0x334416,'oldValue':_0x4f9657,'newValue':_0x2c3092});}}['_handleTextAttributeChanges'](_0x16a8d6,_0x441fce,_0x220242){const _0x53fe8a=this['_operationsData'],_0x59e957=_0x16a8d6[0x0]['parent'],_0x1da12d=_0x16a8d6[0x0]['offset'],_0x485781=_0x441fce[0x0]['parent'],_0x4bbdb0=_0x441fce[0x0]['offset'],_0x269bbf=_0x16a8d6['reduce']((_0xd14d81,_0x2ba7cc)=>_0xd14d81+_0x2ba7cc['data']['length'],0x0),_0x1edf2e=this['_getAttrsForOffsets'](_0x59e957,_0x1da12d,_0x269bbf),_0x3156a6=this['_getAttrsForOffsets'](_0x485781,_0x4bbdb0,_0x269bbf),_0x1e49b8={};for(let _0x489157=0x0;_0x489157<_0x269bbf;_0x489157++){const _0x350643=_0x1edf2e[_0x1da12d+_0x489157],_0x30bc6b=_0x3156a6[_0x4bbdb0+_0x489157],_0x245d19=this['_getAttributeChanges'](_0x350643,_0x30bc6b);for(const _0x3965ce in _0x1e49b8)_0x245d19[_0x3965ce]||_0xec3d42(_0x3965ce);for(const _0x1b41a2 in _0x245d19){const {oldValue:_0x5178af,newValue:_0x5e270d}=_0x245d19[_0x1b41a2],_0x52a94d=_0x1e49b8[_0x1b41a2];_0x52a94d?_0x52a94d['oldValue']==_0x5178af&&_0x52a94d['newValue']==_0x5e270d?_0x52a94d['length']++:(_0xec3d42(_0x1b41a2),_0x1e49b8[_0x1b41a2]={'oldValue':_0x5178af,'newValue':_0x5e270d,'start':_0x489157,'length':0x1}):_0x1e49b8[_0x1b41a2]={'oldValue':_0x5178af,'newValue':_0x5e270d,'start':_0x489157,'length':0x1};}}for(const _0x53bfe9 in _0x1e49b8)_0xec3d42(_0x53bfe9);function _0xec3d42(_0x5e8e18){const _0x550f13=_0x1e49b8[_0x5e8e18],_0x666b17=_0x220242['slice']();_0x666b17[_0x666b17['length']-0x1]+=_0x550f13['start'],_0x53fe8a['push']({'type':'attribute','path':_0x666b17,'howMany':_0x550f13['length'],'key':_0x5e8e18,'oldValue':_0x550f13['oldValue'],'newValue':_0x550f13['newValue']}),delete _0x1e49b8[_0x5e8e18];}}['_getAttributeChanges'](_0x522d57,_0x5abfae){const _0x5e78e2={};for(const [_0x13929f,_0x8ed54b]of _0x522d57)_0x5e78e2[_0x13929f]={'oldValue':JSON['stringify'](_0x8ed54b),'newValue':'null'};for(const [_0x3a5799,_0x155c74]of _0x5abfae){const _0x3c1378=JSON['stringify'](_0x155c74);_0x5e78e2[_0x3a5799]?_0x5e78e2[_0x3a5799]['oldValue']==_0x3c1378?delete _0x5e78e2[_0x3a5799]:_0x5e78e2[_0x3a5799]['newValue']=_0x3c1378:_0x5e78e2[_0x3a5799]={'oldValue':'null','newValue':_0x3c1378};}return delete _0x5e78e2[ut],_0x5e78e2;}['_getAttrsForOffsets'](_0x43a914,_0x3f6f4d,_0x31c338){const _0x39e0ba=new Array(_0x3f6f4d+_0x31c338);let _0x176a04=_0x43a914['getChildAtOffset'](_0x3f6f4d),_0x5ccd43=_0x176a04['startOffset'];for(;_0x176a04&&_0x5ccd43<_0x3f6f4d+_0x31c338;){const _0x1c29d2=Array['from'](_0x176a04['getAttributes']());_0x39e0ba['fill'](_0x1c29d2,_0x5ccd43,_0x5ccd43+_0x176a04['offsetSize']),_0x5ccd43+=_0x176a04['offsetSize'],_0x176a04=_0x176a04['nextSibling'];}return _0x39e0ba;}['_getPositionFromAnchorAndPath'](_0x346380,_0x22c9d7){const _0x5189f0=[..._0x346380['path']['slice'](0x0,-0x1),_0x346380['offset']+_0x22c9d7[0x0],..._0x22c9d7['slice'](0x1)];return new _0x7ab2f4(_0x346380['root'],_0x5189f0);}['_makeModelFromTokens'](_0x5cc4ec){const _0x21671e=[];let _0x2cf569=null;for(const _0x48fa3c of _0x5cc4ec)if('element'!=_0x48fa3c['type']||_0x48fa3c['isStart']||_0x2cf569!=_0x48fa3c['element']){if(!_0x2cf569){if('text'==_0x48fa3c['type']){const _0x31d796=_0x7ab2f4['_createAt'](_0x48fa3c['parent'],_0x48fa3c['offset']),_0x56393a=_0x13a22e['_createFromPositionAndShift'](_0x31d796,_0x48fa3c['data']['length']),_0x2fc8b7=Array['from'](_0x56393a['getItems']())['map'](_0x13a7e6=>new _0x5e4e07(_0x13a7e6['data'],_0x13a7e6['getAttributes']()));_0x21671e['push'](..._0x2fc8b7);}else{_0x2cf569=_0x48fa3c['element'];const _0x4a494b=_0x48fa3c['element']['_clone'](!0x0);_0x4a494b['_removeAttribute'](ut);for(const _0x45ff5f of this['_editor']['model']['createRangeIn'](_0x4a494b)['getItems']())_0x45ff5f['is']('element')&&_0x45ff5f['_removeAttribute'](ut);_0x21671e['push'](_0x4a494b);}}}else _0x2cf569=null;return _0x21671e;}}function k(_0x33befe,_0x2952f8){return _0x33befe['type']===_0x2952f8['type']&&(_0x33befe['limitId']===_0x2952f8['limitId']&&('text'==_0x33befe['type']?_0x33befe['data']==_0x2952f8['data']:function(_0x483165,_0x44b42b){if(_0x483165['isStart']!=_0x44b42b['isStart'])return!0x1;if(_0x483165['isStart']&&_0x483165['elementId']!=_0x44b42b['elementId'])return!0x1;if(_0x483165['category']!=_0x44b42b['category'])return!0x1;if('block'==_0x483165['category'])return!0x0;if('container'==_0x483165['category']&&_0x483165['elementId']!=_0x44b42b['elementId'])return!0x1;return _0x483165['element']['name']==_0x44b42b['element']['name'];}(_0x33befe,_0x2952f8)));}export{Q as AriaDescriptionView,ot as ConfirmMixin,ut as DATA_ID_MODEL_ATTRIBUTE,dt as DATA_ID_VIEW_ATTRIBUTE,ft as DocumentCompare,ht as FOCUS_ANNOTATION_KEYSTROKE,X as LateFocusButtonView,tt as LateFocusDropdownButtonView,_ as Permissions,Z as UserView,P as Users,nt as getAllMarkersDomElementsSorted,et as getDateTimeFormatter,st as getMarkerDomElement,rt as hashObject,ct as sanitizeEditorConfig,lt as setupThreadKeyboardNavigation,at as surroundingMarkersDetector,it as trimHtml};