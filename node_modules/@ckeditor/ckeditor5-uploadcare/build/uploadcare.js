!function(e){const t=e.en=e.en||{};t.dictionary=Object.assign(t.dictionary||{},{"Edit Image (Uploadcare)":"Edit image","Insert with Dropbox":"Insert with Dropbox","Insert with Facebook":"Insert with Facebook","Insert with Google Drive":"Insert with Google Drive","Insert with Google Photos":"Insert with Google Photos","Insert with OneDrive":"Insert with OneDrive","Loading image...":"Loading image...","Replace via URL":"Replace via URL","Replace with Dropbox":"Replace with Dropbox","Replace with Facebook":"Replace with Facebook","Replace with Google Drive":"Replace with Google Drive","Replace with Google Photos":"Replace with Google Photos","Replace with OneDrive":"Replace with OneDrive","The image was not found. Its source may have been removed.":"The image was not found. Its source may have been removed.","Try again (Uploadcare)":"Try again","Unable to load":"Unable to load","We were unable to load the image due to network connection issues.":"We were unable to load the image due to network connection issues.","With Dropbox":"With Dropbox","With Facebook":"With Facebook","With Google Drive":"With Google Drive","With Google Photos":"With Google Photos","With OneDrive":"With OneDrive"})}(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),
/*!
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */(()=>{var e={2:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r(933),o=r.n(i),a=r(718),n=r.n(a)()(o());n.push([e.id,":root{--ck-uploadcare-form-view-width:700px;--ck-uploadcare-external-source-view-height:350px;--ck-uploadcare-color-image-background:oklch(0.97 0 0);--ck-uploadcare-color-icon-error:#db3700;--ck-uploadcare-color-skeleton:#fafafa}.ck .ck-uploadcare-form{max-width:100%;width:var(--ck-uploadcare-form-view-width)}.ck .ck-uploadcare-form .ck-uploadcare-form__loading .ck-uploadcare-form__loading-spinner{align-items:center;background-color:var(--ck-uploadcare-color-image-background);display:flex;flex-direction:column;height:var(--ck-uploadcare-external-source-view-height);justify-content:center;width:100%}.ck .ck-uploadcare-form .ck-uploadcare-form__loading .ck-uploadcare-form__loading-spinner .ck-spinner-container{margin-bottom:10px}.ck .ck-uploadcare-form .ck-uploadcare-form__error .ck-uploadcare-form__error-contents{align-items:center;background-color:var(--ck-uploadcare-color-image-background);display:flex;flex-direction:column;gap:5px;height:var(--ck-uploadcare-external-source-view-height);justify-content:center;width:100%}.ck .ck-uploadcare-form .ck-uploadcare-form__error .ck-uploadcare-form__error-contents h3{font-weight:700;margin:0;padding:0}.ck .ck-uploadcare-form .ck-uploadcare-form__error .ck-uploadcare-form__error-contents .ck-icon{color:var(--ck-uploadcare-color-icon-error)}.ck .ck-uploadcare-form .ck-uploadcare-form__error .ck-uploadcare-form__error-contents .ck-button{margin-top:10px}.ck .ck-uploadcare-form .ck-uploadcare-form__skeleton{height:115px;width:100%}.ck .ck-uploadcare-form .ck-uploadcare-form__skeleton div{align-items:center;box-sizing:border-box;display:flex;flex-direction:row;height:50%;justify-content:center;min-width:100%}.ck .ck-uploadcare-form .ck-uploadcare-form__skeleton div span{background-color:var(--ck-uploadcare-color-skeleton);display:block;height:32px;width:32px}.ck .ck-uploadcare-form .ck-uploadcare-form__skeleton div+div{gap:20px}.ck .ck-uploadcare-form .ck-uploadcare-form__skeleton div+div span:first-child{left:8px;position:absolute;width:80px}.ck .ck-uploadcare-form .ck-uploadcare-form__skeleton div+div span:last-child{position:absolute;right:8px;width:80px}.ck .ck-uploadcare-form .ck-uploadcare-form__skeleton div:first-child{gap:4px}.ck .ck-uploadcare-form .mini-btn{display:none}.ck .ck-uploadcare-form .uc-viewport{height:var(--ck-uploadcare-external-source-view-height)}.ck .ck-uploadcare-form .uc-primary-btn,.ck .ck-uploadcare-form .uc-secondary-btn,.ck .ck-uploadcare-form uc-btn-ui button{min-height:var(--ck-ui-component-min-height);min-width:var(--ck-ui-component-min-height);padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}.ck .ck-uploadcare-form .uc-primary-btn,.ck .ck-uploadcare-form uc-btn-ui.uc-primary button{background:var(--ck-color-button-action-background)}.ck .ck-uploadcare-form .uc-primary-btn:not(.ck-disabled):hover,.ck .ck-uploadcare-form uc-btn-ui.uc-primary button:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck .ck-uploadcare-form .uc-primary-btn:not(.ck-disabled):active,.ck .ck-uploadcare-form uc-btn-ui.uc-primary button:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background)}.ck .ck-uploadcare-form .uc-primary-btn.ck-disabled,.ck .ck-uploadcare-form uc-btn-ui.uc-primary button.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck .ck-uploadcare-form .uc-secondary-btn,.ck .ck-uploadcare-form uc-btn-ui.uc-secondary button{background:var(--ck-color-button-default-background)}.ck .ck-uploadcare-form .uc-secondary-btn:not(.ck-disabled):hover,.ck .ck-uploadcare-form uc-btn-ui.uc-secondary button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck .ck-uploadcare-form .uc-secondary-btn:not(.ck-disabled):active,.ck .ck-uploadcare-form uc-btn-ui.uc-secondary button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background)}.ck .ck-uploadcare-form .uc-secondary-btn.ck-disabled,.ck .ck-uploadcare-form uc-btn-ui.uc-secondary button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck .ck-uploadcare-form uc-upload-list .uc-toolbar{gap:var(--ck-spacing-large)}.ck .ck-uploadcare-form uc-upload-list .uc-files{max-height:var(--ck-uploadcare-external-source-view-height);overflow-y:auto;padding-top:var(--ck-spacing-large)}.ck .ck-uploadcare-form .uc-content{gap:var(--ck-spacing-large);padding:var(--ck-spacing-large)}.ck .ck-uploadcare-form .uc-content>.uc-iframe-wrapper{height:var(--ck-uploadcare-external-source-view-height)}.ck .ck-uploadcare-form .uc-content>.uc-toolbar{padding:var(--ck-spacing-large) 0 0}.ck .ck-uploadcare-form uc-start-from .uc-content{gap:0}.ck .ck-uploadcare-form uc-file-item>.uc-inner{font-size:1em}.ck .ck-uploadcare-form uc-file-item>.uc-inner:where([finished]) .uc-badge{background:var(--ck-color-button-action-active-background)}.ck .ck-uploadcare-form uc-external-source .uc-cancel-btn{pointer-events:none;visibility:hidden}.ck .ck-uploadcare-form uc-activity-header,.ck .ck-uploadcare-form uc-source-list{display:none}.ck .ck-uploadcare-form uc-cloud-image-editor-block [icon=closeMax] .uc-icon_left{transform:rotate(90deg)}",""]);const s=n},6:e=>{"use strict";var t=[];function r(e){for(var r=-1,i=0;i<t.length;i++)if(t[i].identifier===e){r=i;break}return r}function i(e,i){for(var a={},n=[],s=0;s<e.length;s++){var c=e[s],l=i.base?c[0]+i.base:c[0],u=a[l]||0,d="".concat(l," ").concat(u);a[l]=u+1;var h=r(d),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var g=o(p,i);i.byIndex=s,t.splice(s,0,{identifier:d,updater:g,references:1})}n.push(d)}return n}function o(e,t){var r=t.domAPI(t);r.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,o){var a=i(e=e||[],o=o||{});return function(e){e=e||[];for(var n=0;n<a.length;n++){var s=r(a[n]);t[s].references--}for(var c=i(e,o),l=0;l<a.length;l++){var u=r(a[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=c}}},70:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var i=r(933),o=r.n(i),a=r(718),n=r.n(a),s=r(725),c=r.n(s),l=new URL(r(659),r.b),u=n()(o()),d=c()(l);u.push([e.id,`:where([uc-wgt-common]){--uc-font-family:system-ui;--uc-font-size:14px;--uc-line-height:normal;--uc-simple-btn-font-family:system-ui;--uc-simple-btn-font-size:14px;--uc-button-size:32px;--uc-preview-size:32px;--uc-padding:10px;--uc-radius:8px;--uc-transition:.2s ease;--uc-dialog-width:430px;--uc-dialog-max-width:920px;--uc-dialog-max-height:675px;--uc-simple-btn-padding:7px 14px;--uc-grid-col:3;--uc-grid-preview-image-height:auto;--uc-grid-gap:calc(var(--uc-padding)/2);--uc-grid-aspect-ratio:1/1;--uc-background:var(--uc-background-light);--uc-foreground:var(--uc-foreground-light);--uc-primary:var(--uc-primary-light);--uc-primary-hover:var(--uc-primary-hover-light);--uc-primary-transparent:var(--uc-primary-transparent-light);--uc-primary-foreground:var(--uc-primary-foreground-light);--uc-secondary:var(--uc-secondary-light);--uc-secondary-hover:var(--uc-secondary-hover-light);--uc-secondary-foreground:var(--uc-secondary-foreground-light);--uc-muted:var(--uc-muted-light);--uc-muted-foreground:var(--uc-muted-foreground-light);--uc-destructive:var(--uc-destructive-light);--uc-destructive-foreground:var(--uc-destructive-foreground-light);--uc-border:var(--uc-border-light);--uc-dialog-shadow:var(--uc-dialog-shadow-light);--uc-simple-btn:var(--uc-simple-btn-light);--uc-simple-btn-hover:var(--uc-simple-btn-hover-light);--uc-simple-btn-foreground:var(--uc-simple-btn-foreground-light)}@supports not (color:oklch(0% 0 0)){:where([uc-wgt-common]){--uc-primary-rgb-light:23 75 215;--uc-primary-light:rgb(var(--uc-primary-rgb-light));--uc-primary-hover-light:rgb(var(--uc-primary-rgb-light)/90%);--uc-primary-transparent-light:rgb(var(--uc-primary-rgb-light)/10%);--uc-background-light:#fff;--uc-foreground-light:#181818;--uc-primary-foreground-light:#fff;--uc-secondary-light:hsla(0,0%,9%,.05);--uc-secondary-hover-light:hsla(0,0%,9%,.08);--uc-secondary-foreground-light:#181818;--uc-muted-light:#f5f5f5;--uc-muted-foreground-light:#717171;--uc-destructive-light:rgb(232 19 20/5%);--uc-destructive-foreground-light:#e81314;--uc-border-light:#e4e4e8;--uc-dialog-shadow-light:0px 6px 20px rgba(0,0,0,.1);--uc-simple-btn-light:#ebebeb;--uc-simple-btn-hover-light:#e4e4e4;--uc-simple-btn-foreground-light:#181818;--uc-primary-rgb-dark:87 154 255;--uc-primary-dark:rgb(var(--uc-primary-rgb-dark));--uc-primary-hover-dark:rgb(var(--uc-primary-rgb-dark)/90%);--uc-primary-transparent-dark:rgb(var(--uc-primary-rgb-dark)/7%);--uc-background-dark:#1b1b1b;--uc-foreground-dark:#e1e1e1;--uc-primary-foreground-dark:#000;--uc-secondary-dark:hsla(0,0%,88%,.07);--uc-secondary-hover-dark:hsla(0,0%,88%,.1);--uc-secondary-foreground-dark:#e1e1e1;--uc-muted-dark:#242424;--uc-muted-foreground-dark:#989898;--uc-destructive-dark:rgba(244,90,79,.1);--uc-destructive-foreground-dark:#f45a4f;--uc-border-dark:#3d3d3d;--uc-dialog-shadow-dark:0px 6px 20px rgba(0,0,0,.25);--uc-simple-btn-dark:#242424;--uc-simple-btn-hover-dark:#2b2b2b;--uc-simple-btn-foreground-dark:#fff}}@supports (color:oklch(0% 0 0)){:where([uc-wgt-common]){--uc-primary-oklch-light:47% .22 264;--uc-primary-light:oklch(var(--uc-primary-oklch-light));--uc-primary-hover-light:oklch(var(--uc-primary-oklch-light)/90%);--uc-primary-transparent-light:oklch(var(--uc-primary-oklch-light)/7%);--uc-background-light:oklch(100% 0 0);--uc-foreground-light:oklch(21% 0 0);--uc-primary-foreground-light:oklch(100% 0 0);--uc-secondary-light:oklch(21% 0 0/.05);--uc-secondary-hover-light:oklch(21% 0 0/.08);--uc-secondary-foreground-light:oklch(21% 0 0);--uc-muted-light:oklch(97% 0 0);--uc-muted-foreground-light:oklch(40% 0 0);--uc-destructive-light:oklch(59% .235 28.5/.05);--uc-destructive-foreground-light:oklch(59% .235 28.5);--uc-border-light:oklch(92% 0 0);--uc-dialog-shadow-light:0px 6px 20px oklch(0% 0 0/.1);--uc-simple-btn-light:oklch(94% 0 0);--uc-simple-btn-hover-light:oklch(92% 0 0);--uc-simple-btn-foreground-light:oklch(20% 0 0);--uc-primary-oklch-dark:69% .1768 258.4;--uc-primary-dark:oklch(var(--uc-primary-oklch-dark));--uc-primary-hover-dark:oklch(var(--uc-primary-oklch-dark)/90%);--uc-primary-transparent-dark:oklch(var(--uc-primary-oklch-dark)/7%);--uc-background-dark:oklch(22% 0 0);--uc-foreground-dark:oklch(91% 0 0);--uc-primary-foreground-dark:oklch(0% 0 0);--uc-secondary-dark:oklch(91% 0 0/.07);--uc-secondary-hover-dark:oklch(91% 0 0/.1);--uc-secondary-foreground-dark:oklch(91% 0 0);--uc-muted-dark:oklch(26% 0 0);--uc-muted-foreground-dark:oklch(68% 0 0);--uc-destructive-dark:oklch(67% .191 27.5/.1);--uc-destructive-foreground-dark:oklch(67% .191 27.5);--uc-border-dark:oklch(36% 0 0);--uc-dialog-shadow-dark:0px 6px 20px oklch(0% 0 0/.25);--uc-simple-btn-dark:oklch(26% 0 0);--uc-simple-btn-hover-dark:oklch(29% 0 0);--uc-simple-btn-foreground-dark:oklch(100% 0 0)}}@media only screen and (max-height:600px){:where([uc-wgt-common]){--uc-dialog-max-height:100%}}@media only screen and (max-width:680px){:where([uc-wgt-common]){--uc-grid-col:2}}@media only screen and (max-width:430px){:where([uc-wgt-common]){--uc-dialog-max-width:100vw;--uc-dialog-max-height:var(--uploadcare-blocks-window-height);--uc-grid-col:1}}@media (prefers-color-scheme:light){:where([uc-wgt-common]){--uc-background:var(--uc-background-light);--uc-foreground:var(--uc-foreground-light);--uc-primary:var(--uc-primary-light);--uc-primary-hover:var(--uc-primary-hover-light);--uc-primary-transparent:var(--uc-primary-transparent-light);--uc-primary-foreground:var(--uc-primary-foreground-light);--uc-secondary:var(--uc-secondary-light);--uc-secondary-hover:var(--uc-secondary-hover-light);--uc-secondary-foreground:var(--uc-secondary-foreground-light);--uc-muted:var(--uc-muted-light);--uc-muted-foreground:var(--uc-muted-foreground-light);--uc-destructive:var(--uc-destructive-light);--uc-destructive-foreground:var(--uc-destructive-foreground-light);--uc-border:var(--uc-border-light);--uc-dialog-shadow:var(--uc-dialog-shadow-light);--uc-simple-btn:var(--uc-simple-btn-light);--uc-simple-btn-hover:var(--uc-simple-btn-hover-light);--uc-simple-btn-foreground:var(--uc-simple-btn-foreground-light)}}@media (prefers-color-scheme:dark){:where([uc-wgt-common]){--uc-background:var(--uc-background-dark);--uc-foreground:var(--uc-foreground-dark);--uc-primary:var(--uc-primary-dark);--uc-primary-hover:var(--uc-primary-hover-dark);--uc-primary-transparent:var(--uc-primary-transparent-dark);--uc-primary-foreground:var(--uc-primary-foreground-dark);--uc-secondary:var(--uc-secondary-dark);--uc-secondary-hover:var(--uc-secondary-hover-dark);--uc-secondary-foreground:var(--uc-secondary-foreground-dark);--uc-muted:var(--uc-muted-dark);--uc-muted-foreground:var(--uc-muted-foreground-dark);--uc-destructive:var(--uc-destructive-dark);--uc-destructive-foreground:var(--uc-destructive-foreground-dark);--uc-border:var(--uc-border-dark);--uc-dialog-shadow:var(--uc-dialog-shadow-dark);--uc-simple-btn:var(--uc-simple-btn-dark);--uc-simple-btn-hover:var(--uc-simple-btn-hover-dark);--uc-simple-btn-foreground:var(--uc-simple-btn-foreground-dark)}}:where(.uc-light){--uc-background:var(--uc-background-light);--uc-foreground:var(--uc-foreground-light);--uc-primary:var(--uc-primary-light);--uc-primary-hover:var(--uc-primary-hover-light);--uc-primary-transparent:var(--uc-primary-transparent-light);--uc-primary-foreground:var(--uc-primary-foreground-light);--uc-secondary:var(--uc-secondary-light);--uc-secondary-hover:var(--uc-secondary-hover-light);--uc-secondary-foreground:var(--uc-secondary-foreground-light);--uc-muted:var(--uc-muted-light);--uc-muted-foreground:var(--uc-muted-foreground-light);--uc-destructive:var(--uc-destructive-light);--uc-destructive-foreground:var(--uc-destructive-foreground-light);--uc-border:var(--uc-border-light);--uc-dialog-shadow:var(--uc-dialog-shadow-light);--uc-simple-btn:var(--uc-simple-btn-light);--uc-simple-btn-hover:var(--uc-simple-btn-hover-light);--uc-simple-btn-foreground:var(--uc-simple-btn-foreground-light)}:where(.uc-dark){--uc-background:var(--uc-background-dark);--uc-foreground:var(--uc-foreground-dark);--uc-primary:var(--uc-primary-dark);--uc-primary-hover:var(--uc-primary-hover-dark);--uc-primary-transparent:var(--uc-primary-transparent-dark);--uc-primary-foreground:var(--uc-primary-foreground-dark);--uc-secondary:var(--uc-secondary-dark);--uc-secondary-hover:var(--uc-secondary-hover-dark);--uc-secondary-foreground:var(--uc-secondary-foreground-dark);--uc-muted:var(--uc-muted-dark);--uc-muted-foreground:var(--uc-muted-foreground-dark);--uc-destructive:var(--uc-destructive-dark);--uc-destructive-foreground:var(--uc-destructive-foreground-dark);--uc-border:var(--uc-border-dark);--uc-dialog-shadow:var(--uc-dialog-shadow-dark);--uc-simple-btn:var(--uc-simple-btn-dark);--uc-simple-btn-hover:var(--uc-simple-btn-hover-dark);--uc-simple-btn-foreground:var(--uc-simple-btn-foreground-dark)}:where(.uc-purple){--uc-primary-oklch-light:47% .22 300;--uc-primary-oklch-dark:69% .1768 300}:where(.uc-red){--uc-primary-oklch-light:47% .21 21;--uc-primary-oklch-dark:71% .1768 21}:where(.uc-orange){--uc-primary-oklch-light:47% .1376 51.88;--uc-primary-oklch-dark:69% .1768 51.88}:where(.uc-green){--uc-primary-oklch-light:45% .14 130;--uc-primary-oklch-dark:69% .1768 130}:where(.uc-turquoise){--uc-primary-oklch-light:45% .0854 174;--uc-primary-oklch-dark:69% .1768 174}:where(.uc-gray){--uc-primary-oklch-light:10% 0 0;--uc-primary-oklch-dark:97% 0 0}:where(.uc-contrast){--uc-border-light:oklch(50% 0 0);--uc-border-dark:oklch(50% 0 0);--uc-muted-light:oklch(98% 0 0);--uc-muted-dark:oklch(16% 0 0);--uc-muted-foreground-light:oklch(20% 0 0);--uc-muted-foreground-dark:oklch(80% 0 0);--uc-background-light:oklch(100% 0 0);--uc-foreground-light:oklch(0% 0 0);--uc-background-dark:oklch(10% 0 0);--uc-foreground-dark:oklch(100% 0 0)}[uc-cloud-image-editor]{--color-primary-accent:var(--uc-primary);--color-text-base:var(--uc-foreground);--color-text-accent-contrast:var(--uc-background);--color-fill-contrast:var(--uc-background);--color-modal-backdrop:oklch(0 0 0/.1);--color-image-background:var(--uc-muted);--color-focus-ring:var(--color-primary-accent);--color-crop-guides:var(--uc-foreground);--font-size-ui:var(--uc-font-size);--size-touch-area:var(--uc-button-size);--size-panel-heading:calc(var(--uc-button-size) + var(--uc-padding)*2);--size-ui-min-width:130px;--size-line-width:1px;--size-modal-width:650px;--size-icon:calc(var(--uc-button-size)/2);--border-radius-editor:var(--uc-radius);--border-radius-thumb:var(--uc-radius);--border-radius-ui:var(--uc-radius);--border-radius-base:var(--uc-radius);--cldtr-gap-min:5px;--cldtr-gap-mid-1:10px;--cldtr-gap-mid-2:15px;--cldtr-gap-max:20px;--transition-duration-2:var(--transition-duration-all,.2s);--transition-duration-3:var(--transition-duration-all,.3s);--transition-duration-4:var(--transition-duration-all,.4s);--transition-duration-5:var(--transition-duration-all,.5s);--modal-header-opacity:1;--modal-header-height:var(--size-panel-heading);--modal-toolbar-height:var(--size-panel-heading);--transparent-pixel:url(${d});display:block;height:100%;max-height:100%;width:100%}[uc-cloud-image-editor] :is([can-handle-paste]:hover,[can-handle-paste]:focus){--can-handle-paste:"true"}[uc-cloud-image-editor] :is([tabindex][focus-visible],[tabindex]:hover,[with-effects][focus-visible],[with-effects]:hover){--filter-effect:var(--hover-filter)!important;--opacity-effect:var(--hover-opacity)!important;--color-effect:var(--hover-color-rgb)!important;--background-effect:var(--hover-background)!important}[uc-cloud-image-editor] :is([tabindex]:active,[with-effects]:active){--filter-effect:var(--down-filter)!important;--opacity-effect:var(--down-opacity)!important;--color-effect:var(--down-color-rgb)!important;--background-effect:var(--down-background)!important}[uc-cloud-image-editor] :is([tabindex][active],[with-effects][active]){--filter-effect:var(--active-filter)!important;--opacity-effect:var(--active-opacity)!important;--color-effect:var(--active-color-rgb)!important;--background-effect:var(--active-background)!important}[uc-cloud-image-editor] [hidden-scrollbar]::-webkit-scrollbar{display:none}[uc-cloud-image-editor] [hidden-scrollbar]{-ms-overflow-style:none;scrollbar-width:none}[uc-cloud-image-editor].uc-editor_ON{--modal-header-opacity:0;--modal-header-height:0px;--modal-toolbar-height:calc(var(--size-panel-heading)*2)}[uc-cloud-image-editor].uc-editor_OFF{--modal-header-opacity:1;--modal-header-height:var(--size-panel-heading);--modal-toolbar-height:var(--size-panel-heading)}[uc-cloud-image-editor]>.uc-wrapper{--l-min-img-height:var(--modal-toolbar-height);--l-max-img-height:100%;--l-edit-button-width:120px;--l-toolbar-horizontal-padding:var(--cldtr-gap-mid-1);display:grid;grid-template-rows:minmax(var(--l-min-img-height),var(--l-max-img-height)) minmax(var(--modal-toolbar-height),auto);height:100%;overflow:hidden;overflow-y:auto;position:relative}@media only screen and (max-width:800px){[uc-cloud-image-editor]>.uc-wrapper{--l-edit-button-width:70px;--l-toolbar-horizontal-padding:var(--cldtr-gap-min)}}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport{align-items:center;display:flex;justify-content:center;overflow:hidden}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-image_container>.uc-image{--viewer-image-opacity:1;background-color:var(--color-image-background);box-sizing:border-box;display:block;height:100%;left:0;object-fit:scale-down;opacity:var(--viewer-image-opacity);pointer-events:auto;position:absolute;top:0;transform:scale(1);user-select:none;width:100%;z-index:10}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-image_container>.uc-image.uc-image_visible_viewer{transition:opacity var(--transition-duration-3) ease-in-out,transform var(--transition-duration-4)}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-image_container>.uc-image.uc-image_hidden_to_cropper{--viewer-image-opacity:0;background-image:var(--transparent-pixel);pointer-events:none;transform:scale(1);transition:transform var(--transition-duration-4),opacity var(--transition-duration-3) step-end}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-image_container>.uc-image.uc-image_hidden_effects{--viewer-image-opacity:0;pointer-events:none;transform:scale(1);transition:opacity var(--transition-duration-3) cubic-bezier(.5,0,1,1),transform var(--transition-duration-4)}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-image_container{background-color:var(--color-image-background);display:block;height:100%;position:relative;transition:var(--transition-duration-3);width:100%}[uc-cloud-image-editor]>.uc-wrapper>.uc-toolbar{position:relative;transition:.3s}[uc-cloud-image-editor]>.uc-wrapper>.uc-toolbar>.uc-toolbar_content{background-color:var(--color-fill-contrast);bottom:0;box-sizing:border-box;height:var(--modal-toolbar-height);left:0;min-height:var(--size-panel-heading);position:absolute;width:100%}[uc-cloud-image-editor]>.uc-wrapper>.uc-toolbar>.uc-toolbar_content.uc-toolbar_content__viewer{align-items:center;display:flex;height:var(--size-panel-heading);justify-content:space-between;padding-left:var(--l-toolbar-horizontal-padding);padding-right:var(--l-toolbar-horizontal-padding)}[uc-cloud-image-editor]>.uc-wrapper>.uc-toolbar>.uc-toolbar_content.uc-toolbar_content__editor{display:flex}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-info_pan{position:absolute;user-select:none}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-file_type_outer{display:flex;max-width:120px;position:absolute;transform:translate(-40px);user-select:none;z-index:2}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-file_type_outer>.uc-file_type{padding:4px .8em}[uc-cloud-image-editor]>.uc-wrapper>.uc-network_problems_splash{background-color:var(--color-fill-contrast);display:flex;flex-direction:column;height:100%;position:absolute;width:100%;z-index:4}[uc-cloud-image-editor]>.uc-wrapper>.uc-network_problems_splash>.uc-network_problems_content{align-items:center;display:flex;flex:1;flex-direction:column;justify-content:center}[uc-cloud-image-editor]>.uc-wrapper>.uc-network_problems_splash>.uc-network_problems_content>.uc-network_problems_icon{align-items:center;background-color:var(--uc-muted);border-radius:50%;color:var(--uc-foreground);display:flex;height:40px;justify-content:center;width:40px}[uc-cloud-image-editor]>.uc-wrapper>.uc-network_problems_splash>.uc-network_problems_content>.uc-network_problems_text{color:var(--uc-foreground);font-size:var(--font-size-ui);margin-top:var(--cldtr-gap-max)}[uc-cloud-image-editor]>.uc-wrapper>.uc-network_problems_splash>.uc-network_problems_footer{align-items:center;display:flex;height:var(--size-panel-heading);justify-content:center}uc-crop-frame>.uc-svg{border-top-left-radius:var(--border-radius-base);border-top-right-radius:var(--border-radius-base);height:100%;left:0;opacity:inherit;position:absolute;top:0;transition:var(--transition-duration-3);width:100%;z-index:2}uc-crop-frame>.uc-thumb{--idle-color-rgb:var(--color-text-base);--hover-color-rgb:var(--color-primary-accent);--focus-color-rgb:var(--color-primary-accent);--down-color-rgb:var(--color-primary-accent);--color-effect:var(--idle-color-rgb);color:var(--color-effect);transition:color var(--transition-duration-3),opacity var(--transition-duration-3)}uc-crop-frame>.uc-thumb--visible{opacity:1;pointer-events:auto}uc-crop-frame>.uc-thumb--hidden{opacity:0;pointer-events:none}uc-crop-frame>.uc-guides{transition:var(--transition-duration-3)}uc-crop-frame>.uc-guides--hidden{opacity:0}uc-crop-frame>.uc-guides--semi-hidden{opacity:.2}uc-crop-frame>.uc-guides--visible{opacity:1}uc-editor-button-control,uc-editor-crop-button-control,uc-editor-filter-control,uc-editor-operation-control{--l-base-min-width:var(--uc-button-size);--l-base-height:var(--uc-button-size);--opacity-effect:var(--idle-opacity);--color-effect:var(--idle-color-rgb);--background-effect:var(--idle-background);--filter-effect:var(--idle-filter);--idle-color-rgb:var(--uc-secondary-foreground);--idle-opacity:1;--idle-filter:1;--idle-background:var(--uc-secondary);--hover-color-rgb:var(--uc-secondary-foreground);--hover-opacity:1;--hover-filter:.8;--hover-background:var(--uc-secondary-hover);--down-color-rgb:var(--hover-color-rgb);--down-opacity:1;--down-filter:.6;--down-background:var(--uc-secondary);border-radius:var(--uc-radius)}uc-editor-button-control>button,uc-editor-crop-button-control>button,uc-editor-filter-control>button,uc-editor-operation-control>button{all:unset;align-items:center;color:var(--color-effect);cursor:pointer;display:grid;grid-template-columns:var(--l-base-min-width) auto;grid-template-rows:100%;height:var(--l-base-height);opacity:var(--opacity-effect);position:relative;transition:var(--l-width-transition)}:where(uc-editor-button-control,uc-editor-crop-button-control,uc-editor-filter-control,uc-editor-operation-control)>uc-icon>svg{height:var(--size-icon);width:var(--size-icon)}uc-editor-filter-control>uc-icon.uc-original-icon>svg{height:100%;width:100%}uc-editor-button-control.uc-active,uc-editor-crop-button-control.uc-active,uc-editor-filter-control.uc-active,uc-editor-operation-control.uc-active{--idle-color-rgb:var(--uc-primary-foreground);--idle-background:var(--uc-primary);--idle-opacity:1;--hover-color-rgb:var(--uc-primary-foreground);--hover-background:var(--uc-primary);--hover-opacity:1}uc-editor-filter-control.uc-not_active .uc-preview[loaded]{opacity:1}uc-editor-filter-control.uc-active .uc-preview{opacity:0}uc-editor-button-control.uc-not_active,uc-editor-crop-button-control.uc-not_active,uc-editor-filter-control.uc-not_active,uc-editor-operation-control.uc-not_active{--idle-color-rgb:var(--uc-secondary-foreground)}:where(.uc-contrast) uc-editor-button-control.uc-not_active,:where(.uc-contrast) uc-editor-crop-button-control.uc-not_active,:where(.uc-contrast) uc-editor-filter-control.uc-not_active,:where(.uc-contrast) uc-editor-operation-control.uc-not_active{--idle-background:transparent;--hover-background:var(--uc-secondary);outline:1px solid var(--uc-border);outline-offset:-1px}uc-editor-button-control>button:before,uc-editor-crop-button-control>button:before,uc-editor-filter-control>button:before,uc-editor-operation-control>button:before{background-color:var(--background-effect);border-radius:var(--border-radius-editor);content:"";height:100%;left:0;position:absolute;right:0;transition:var(--transition-duration-3);width:100%;z-index:-1}uc-editor-button-control>button .uc-title,uc-editor-crop-button-control>button .uc-title,uc-editor-filter-control>button .uc-title,uc-editor-operation-control>button .uc-title{font-size:.7em;letter-spacing:1.004px;padding-right:var(--cldtr-gap-mid-1);text-transform:uppercase}uc-editor-button-control>button uc-icon,uc-editor-crop-button-control>button uc-icon,uc-editor-filter-control>button uc-icon,uc-editor-operation-control>button uc-icon{pointer-events:none}uc-editor-filter-control>button .uc-preview{background-repeat:no-repeat;background-size:contain;border-radius:var(--border-radius-editor);filter:brightness(var(--filter-effect));height:var(--l-base-height);left:0;opacity:0;position:absolute;right:0;transition:var(--transition-duration-3);width:100%;z-index:-1}uc-editor-filter-control>.uc-original-icon{color:var(--color-effect);opacity:.3}uc-editor-image-cropper{color:var(--color-crop-guides);display:block;height:100%;left:0;opacity:0;pointer-events:none;position:absolute;top:0;touch-action:none;width:100%;z-index:10}uc-editor-image-cropper.uc-active_from_editor,uc-editor-image-cropper.uc-active_from_viewer{opacity:1;pointer-events:auto;transform:scale(1) translate(0);transition:transform var(--transition-duration-4) cubic-bezier(.37,0,.63,1) .4s,opacity var(--transition-duration-3)}uc-editor-image-cropper.uc-inactive_to_editor{opacity:0;pointer-events:none;transition:transform var(--transition-duration-4) cubic-bezier(.37,0,.63,1),opacity var(--transition-duration-3) calc(var(--transition-duration-3) + .05s)}uc-editor-image-cropper>.uc-canvas{z-index:1}uc-editor-image-cropper>.uc-canvas,uc-editor-image-fader{display:block;height:100%;left:0;position:absolute;top:0;width:100%}uc-editor-image-fader.uc-active_from_viewer{opacity:1;pointer-events:auto;transform:scale(1);transition:transform var(--transition-duration-4),opacity var(--transition-duration-3) step-start;z-index:3}uc-editor-image-fader.uc-active_from_cropper{opacity:1;pointer-events:auto}uc-editor-image-fader.uc-active_from_cropper,uc-editor-image-fader.uc-inactive_to_cropper{transform:scale(1);transition:transform var(--transition-duration-4),opacity var(--transition-duration-3) step-end;z-index:3}uc-editor-image-fader.uc-inactive_to_cropper{opacity:0;pointer-events:none}uc-editor-image-fader .uc-fader-image{content-visibility:auto;display:block;height:100%;left:0;object-fit:scale-down;position:absolute;top:0;transform:scale(1);user-select:none;width:100%}uc-editor-image-fader .uc-fader-image--preview{background-color:var(--color-image-background);border-top-left-radius:var(--border-radius-base);border-top-right-radius:var(--border-radius-base);opacity:0;transform:scale(1);transition:var(--transition-duration-3)}uc-editor-scroller{height:100%;overflow-x:scroll}uc-editor-scroller,uc-editor-slider{align-items:center;display:flex;width:100%}uc-editor-slider{height:var(--size-panel-heading);justify-content:center}uc-editor-toolbar{height:100%;position:relative;width:100%}@media only screen and (max-width:600px){uc-editor-toolbar{--l-tab-gap:var(--cldtr-gap-mid-1);--l-slider-padding:var(--uc-padding);--l-controls-padding:var(--uc-padding)}}@media only screen and (min-width:601px){uc-editor-toolbar{--l-tab-gap:var(--cldtr-gap-max);--l-slider-padding:var(--uc-padding);--l-controls-padding:var(--uc-padding)}}uc-editor-toolbar>.uc-toolbar-container{height:100%;overflow:hidden;position:relative;width:100%}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar{background-color:var(--color-fill-contrast);display:grid;grid-template-rows:1fr 1fr;height:100%;position:absolute;transition:opacity var(--transition-duration-3) ease-in-out,transform var(--transition-duration-3) ease-in-out,visibility var(--transition-duration-3) ease-in-out;width:100%}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar.uc-sub-toolbar--visible{opacity:1;pointer-events:auto;transform:translateY(0)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar.uc-sub-toolbar--top-hidden{opacity:0;pointer-events:none;transform:translateY(100%)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar.uc-sub-toolbar--bottom-hidden{opacity:0;pointer-events:none;transform:translateY(-100%)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row{align-items:center;display:flex;justify-content:space-between;padding-left:var(--l-controls-padding);padding-right:var(--l-controls-padding)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles{display:grid;grid-auto-flow:column;position:relative;grid-gap:0 var(--l-tab-gap);align-items:center;height:100%}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles>.uc-tab-toggles_indicator{background-color:var(--uc-secondary-foreground);bottom:0;height:2px;left:0;position:absolute;transform:translate(0);transition:transform var(--transition-duration-3);width:var(--size-touch-area)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row{position:relative}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content{content-visibility:auto;display:flex;height:100%;left:0;opacity:0;overflow:hidden;position:absolute;top:0;width:100%}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content.uc-tab-content--visible{opacity:1;pointer-events:auto}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content.uc-tab-content--hidden{opacity:0;pointer-events:none}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles>.uc-tab-toggle.uc-tab-toggle--visible{display:contents}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles.uc-tab-toggles--hidden,uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles>.uc-tab-toggle.uc-tab-toggle--hidden{display:none}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles>.uc-tab-toggle>uc-btn-ui{width:var(--uc-button-size)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles>.uc-tab-toggle>uc-btn-ui>uc-icon>svg{height:var(--size-icon);width:var(--size-icon)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content .uc-controls-list_align{box-sizing:border-box;display:grid;grid-template-areas:". inner .";grid-template-columns:1fr auto 1fr;min-width:100%;padding-left:var(--uc-padding)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content .uc-controls-list_inner{display:grid;gap:6px;grid-area:inner;grid-auto-flow:column}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content .uc-controls-list_inner:last-child{padding-right:var(--uc-padding)}uc-editor-toolbar .uc-controls-list_last-item{margin-right:var(--cldtr-gap-max)}uc-editor-toolbar .uc-info-tooltip_container{align-items:flex-start;display:flex;height:100%;justify-content:center;position:absolute;width:100%}uc-editor-toolbar .uc-info-tooltip_wrapper{display:flex;flex-direction:column;height:100%;justify-content:flex-end;pointer-events:none;position:absolute;top:calc(-100% - var(--cldtr-gap-mid-2))}uc-editor-toolbar .uc-info-tooltip{background-color:var(--color-text-accent-contrast);border-radius:var(--border-radius-editor);color:var(--color-text-base);font-size:.7em;letter-spacing:1px;opacity:0;padding:3px 6px;text-transform:uppercase;transform:translateY(100%);transition:var(--transition-duration-3);z-index:3}uc-editor-toolbar .uc-info-tooltip_visible{opacity:1;transform:translateY(0)}uc-editor-toolbar .uc-slider{padding-left:var(--l-slider-padding);padding-right:var(--l-slider-padding)}uc-btn-ui>button{--filter-effect:var(--idle-brightness);--opacity-effect:var(--idle-opacity);--color-effect:var(--idle-color-rgb);--background-effect:var(--idle-background);--l-transition-effect:var( --css-transition,color var(--transition-duration-2),background-color var(--transition-duration-2),filter var(--transition-duration-2) );all:unset;align-items:center;background-color:var(--background-effect);border-radius:var(--uc-radius);box-sizing:var(--css-box-sizing,border-box);color:var(--color-effect);cursor:pointer;display:inline-flex;filter:brightness(var(--filter-effect));font-size:1em;height:var(--css-height,var(--uc-button-size));opacity:var(--opacity-effect);padding-left:var(--css-padding-left,14px);padding-right:var(--css-padding-right,14px);transition:var(--l-transition-effect);user-select:none}uc-btn-ui>button>uc-icon{pointer-events:none}uc-btn-ui .uc-text{white-space:nowrap}uc-btn-ui .uc-icon{align-items:center;color:var(--color-effect);display:flex;filter:brightness(var(--filter-effect));justify-content:center;transition:var(--l-transition-effect)}uc-btn-ui .uc-icon_left{margin-left:0;margin-right:var(--cldtr-gap-mid-1)}uc-btn-ui .uc-icon_right{margin-left:var(--cldtr-gap-mid-1);margin-right:0}uc-btn-ui .uc-icon_single{margin-left:0;margin-right:0}uc-btn-ui .uc-icon_hidden{display:none;margin:0}uc-btn-ui.uc-primary>button{--idle-color-rgb:var(--uc-primary-foreground);--idle-brightness:1;--idle-opacity:1;--idle-background:var(--uc-primary);--hover-color-rgb:var(--uc-primary-foreground);--hover-brightness:1;--hover-opacity:1;--hover-background:var(--uc-primary-hover);--down-color-rgb:var(--uc-primary-foreground);--down-brightness:.75;--down-opacity:1;--down-background:var(--uc-primary);--active-color-rgb:var(--uc-primary-foreground);--active-brightness:1;--active-opacity:1;--active-background:var(--uc-primary)}uc-btn-ui.uc-primary-icon>button{--idle-color-rgb:var(--uc-primary);--idle-brightness:1;--idle-opacity:1;--idle-background:transparent;--hover-color-rgb:var(--uc-primary);--hover-brightness:1;--hover-opacity:1;--hover-background:var(--uc-primary-transparent);--down-color-rgb:var(--uc-primary);--down-brightness:.75;--down-opacity:1;--down-background:var(--uc-primary-transparent);--active-color-rgb:var(--uc-primary-foreground);--active-brightness:1;--active-opacity:1;--active-background:var(--uc-primary);padding:0;width:var(--uc-button-size)}uc-btn-ui.uc-secondary>button{--idle-color-rgb:var(--uc-secondary-foreground);--idle-brightness:1;--idle-opacity:1;--idle-background:var(--uc-secondary);--hover-color-rgb:var(--uc-secondary-foreground);--hover-brightness:1;--hover-opacity:1;--hover-background:var(--uc-secondary-hover);--down-color-rgb:var(--uc-secondary-foreground);--down-brightness:1;--down-opacity:1;--down-background:var(--uc-secondary-hover);--active-color-rgb:var(--uc-secondary-foreground);--active-brightness:1;--active-opacity:1;--active-background:transparent}:where(.uc-contrast) uc-btn-ui.uc-secondary>button{border:1px solid var(--uc-border)}uc-btn-ui.uc-secondary-icon>button,uc-btn-ui.uc-tab>button{--idle-color-rgb:var(--uc-secondary-foreground);--idle-brightness:1;--idle-opacity:1;--idle-background:transparent;--hover-color-rgb:var(--uc-secondary-foreground);--hover-brightness:1;--hover-opacity:1;--hover-background:var(--uc-secondary);--down-color-rgb:var(--uc-secondary-foreground);--down-brightness:1;--down-opacity:1;--down-background:var(--uc-secondary);--active-color-rgb:var(--uc-secondary-foreground);--active-brightness:1;--active-opacity:1;--active-background:transparent;padding:0;width:var(--uc-button-size)}uc-btn-ui.uc-default>button{--idle-color-rgb:var(--uc-secondary-foreground);--idle-brightness:1;--idle-opacity:1;--idle-background:var(--uc-secondary);--hover-color-rgb:var(--uc-secondary-foreground);--hover-brightness:1;--hover-opacity:1;--hover-background:var(--uc-secondary-hover);--down-color-rgb:var(--uc-secondary-foreground);--down-brightness:.75;--down-opacity:1;--down-background:var(--uc-secondary);--active-color-rgb:var(--uc-primary);--active-brightness:1;--active-opacity:1;--active-background:var(--uc-primary-transparent)}:where(.uc-contrast) uc-btn-ui.uc-default>button{--idle-background:transparent;--hover-background:var(--uc-secondary);--active-background:var(--uc-foreground);--active-color-rgb:var(--uc-background)}uc-line-loader-ui{height:2px;left:0;opacity:.5;position:absolute;top:0;width:100%;z-index:9999}uc-line-loader-ui .uc-inner{height:100%;max-width:200px;width:25%}uc-line-loader-ui .uc-line{background-color:var(--uc-primary);height:100%;transform:translate(-101%);transition:transform 1s;width:100%}uc-slider-ui{--l-thumb-size:24px;--l-zero-dot-size:5px;--l-zero-dot-offset:2px;--idle-color-rgb:var(--uc-foreground);--hover-color-rgb:var(--uc-primary);--down-color-rgb:var(--uc-primary);--color-effect:var(--idle-color-rgb);--l-color:var(--color-effect);align-items:center;display:flex;height:calc(var(--l-thumb-size) + (var(--l-zero-dot-size) + var(--l-zero-dot-offset))*2);justify-content:center;position:relative;width:100%}uc-slider-ui .uc-thumb{background-color:var(--l-color);border-radius:50%;height:var(--l-thumb-size);left:0;opacity:1;position:absolute;transform:translate(0);transition:opacity var(--transition-duration-2),background-color var(--transition-duration-2);width:var(--l-thumb-size)}uc-slider-ui .uc-steps{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding-left:calc(var(--l-thumb-size)/2);padding-right:calc(var(--l-thumb-size)/2);position:absolute;width:100%}uc-slider-ui .uc-border-step{height:10px;opacity:1}uc-slider-ui .uc-border-step,uc-slider-ui .uc-minor-step{border-right:1px solid var(--uc-foreground);transition:border-color var(--transition-duration-2);width:0}uc-slider-ui .uc-minor-step{height:4px;opacity:.6}uc-slider-ui .uc-zero-dot{background-color:var(--color-primary-accent);border-radius:50%;height:var(--l-zero-dot-size);left:calc(var(--l-thumb-size)/2 - var(--l-zero-dot-size)/2);opacity:0;position:absolute;top:calc(100% - var(--l-zero-dot-offset)*2);transition:var(--transition-duration-3);width:var(--l-zero-dot-size)}uc-slider-ui .uc-input{cursor:pointer;height:100%;margin:0;opacity:0;position:absolute;width:calc(100% - 10px)}uc-presence-toggle.uc-transition{transition:opacity var(--transition-duration-3),visibility var(--transition-duration-3)}uc-presence-toggle.uc-visible{opacity:1;pointer-events:inherit}uc-presence-toggle.uc-hidden{opacity:0;pointer-events:none}uc-presence-toggle.uc-initial{display:none!important;transition:none!important}[uc-cloud-image-editor] [role=button]:focus-visible,[uc-cloud-image-editor] button:focus-visible{outline:1px auto Highlight;outline:1px auto -webkit-focus-ring-color}[uc-cloud-image-editor] .uc-cloud-mask{pointer-events:none}:where([uc-cloud-image-editor]) uc-icon{align-items:center;display:flex;height:100%;justify-content:center;width:100%}:where([uc-cloud-image-editor]) uc-icon svg{height:calc(var(--uc-button-size)/2);width:calc(var(--uc-button-size)/2)}`,""]);const h=u},230:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r(933),o=r.n(i),a=r(718),n=r.n(a)()(o());n.push([e.id,':root{--ck-image-processing-highlight-color:#f9fafa;--ck-image-processing-background-color:#e3e5e8}.ck.ck-editor__editable .image-inline.image-processing picture,.ck.ck-editor__editable .image.image-processing picture{display:block;height:100%;position:relative;width:100%}.ck.ck-editor__editable .image-inline.image-processing picture:before,.ck.ck-editor__editable .image.image-processing picture:before{animation:ck-image-processing-animation 2s linear infinite;background:linear-gradient(90deg,var(--ck-image-processing-background-color),var(--ck-image-processing-highlight-color),var(--ck-image-processing-background-color));background-size:200% 100%;content:"";height:100%;left:0;position:absolute;top:0;width:100%;z-index:1}.ck.ck-editor__editable .image-inline.image-processing picture img,.ck.ck-editor__editable .image.image-processing picture img{height:100%}.ck.ck-editor__editable .image-inline.image-processing-blur,.ck.ck-editor__editable .image.image-processing-blur{clip-path:inset(0);filter:blur(1.6rem)}@keyframes ck-image-processing-animation{0%{background-position:200% 0}to{background-position:-200% 0}}',""]);const s=n},237:e=>{"use strict";e.exports=CKEditor5.dll},260:(e,t,r)=>{e.exports=r(237)("./src/upload.js")},290:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},302:e=>{"use strict";e.exports=function(e,t){Object.keys(t).forEach(function(r){e.setAttribute(r,t[r])})}},311:(e,t,r)=>{e.exports=r(237)("./src/ui.js")},355:(e,t,r)=>{e.exports=r(237)("./src/icons.js")},536:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var i=r(933),o=r.n(i),a=r(718),n=r.n(a),s=r(725),c=r.n(s),l=new URL(r(659),r.b),u=n()(o()),d=c()(l);u.push([e.id,`:where([uc-wgt-common]){--cfg-init-activity:"start-from";--cfg-done-activity:""}:where([uc-wgt-common]){--uc-font-family:system-ui;--uc-font-size:14px;--uc-line-height:normal;--uc-simple-btn-font-family:system-ui;--uc-simple-btn-font-size:14px;--uc-button-size:32px;--uc-preview-size:32px;--uc-padding:10px;--uc-radius:8px;--uc-transition:.2s ease;--uc-dialog-width:430px;--uc-dialog-max-width:920px;--uc-dialog-max-height:675px;--uc-simple-btn-padding:7px 14px;--uc-grid-col:3;--uc-grid-preview-image-height:auto;--uc-grid-gap:calc(var(--uc-padding)/2);--uc-grid-aspect-ratio:1/1;--uc-background:var(--uc-background-light);--uc-foreground:var(--uc-foreground-light);--uc-primary:var(--uc-primary-light);--uc-primary-hover:var(--uc-primary-hover-light);--uc-primary-transparent:var(--uc-primary-transparent-light);--uc-primary-foreground:var(--uc-primary-foreground-light);--uc-secondary:var(--uc-secondary-light);--uc-secondary-hover:var(--uc-secondary-hover-light);--uc-secondary-foreground:var(--uc-secondary-foreground-light);--uc-muted:var(--uc-muted-light);--uc-muted-foreground:var(--uc-muted-foreground-light);--uc-destructive:var(--uc-destructive-light);--uc-destructive-foreground:var(--uc-destructive-foreground-light);--uc-border:var(--uc-border-light);--uc-dialog-shadow:var(--uc-dialog-shadow-light);--uc-simple-btn:var(--uc-simple-btn-light);--uc-simple-btn-hover:var(--uc-simple-btn-hover-light);--uc-simple-btn-foreground:var(--uc-simple-btn-foreground-light)}@supports not (color:oklch(0% 0 0)){:where([uc-wgt-common]){--uc-primary-rgb-light:23 75 215;--uc-primary-light:rgb(var(--uc-primary-rgb-light));--uc-primary-hover-light:rgb(var(--uc-primary-rgb-light)/90%);--uc-primary-transparent-light:rgb(var(--uc-primary-rgb-light)/10%);--uc-background-light:#fff;--uc-foreground-light:#181818;--uc-primary-foreground-light:#fff;--uc-secondary-light:hsla(0,0%,9%,.05);--uc-secondary-hover-light:hsla(0,0%,9%,.08);--uc-secondary-foreground-light:#181818;--uc-muted-light:#f5f5f5;--uc-muted-foreground-light:#717171;--uc-destructive-light:rgb(232 19 20/5%);--uc-destructive-foreground-light:#e81314;--uc-border-light:#e4e4e8;--uc-dialog-shadow-light:0px 6px 20px rgba(0,0,0,.1);--uc-simple-btn-light:#ebebeb;--uc-simple-btn-hover-light:#e4e4e4;--uc-simple-btn-foreground-light:#181818;--uc-primary-rgb-dark:87 154 255;--uc-primary-dark:rgb(var(--uc-primary-rgb-dark));--uc-primary-hover-dark:rgb(var(--uc-primary-rgb-dark)/90%);--uc-primary-transparent-dark:rgb(var(--uc-primary-rgb-dark)/7%);--uc-background-dark:#1b1b1b;--uc-foreground-dark:#e1e1e1;--uc-primary-foreground-dark:#000;--uc-secondary-dark:hsla(0,0%,88%,.07);--uc-secondary-hover-dark:hsla(0,0%,88%,.1);--uc-secondary-foreground-dark:#e1e1e1;--uc-muted-dark:#242424;--uc-muted-foreground-dark:#989898;--uc-destructive-dark:rgba(244,90,79,.1);--uc-destructive-foreground-dark:#f45a4f;--uc-border-dark:#3d3d3d;--uc-dialog-shadow-dark:0px 6px 20px rgba(0,0,0,.25);--uc-simple-btn-dark:#242424;--uc-simple-btn-hover-dark:#2b2b2b;--uc-simple-btn-foreground-dark:#fff}}@supports (color:oklch(0% 0 0)){:where([uc-wgt-common]){--uc-primary-oklch-light:47% .22 264;--uc-primary-light:oklch(var(--uc-primary-oklch-light));--uc-primary-hover-light:oklch(var(--uc-primary-oklch-light)/90%);--uc-primary-transparent-light:oklch(var(--uc-primary-oklch-light)/7%);--uc-background-light:oklch(100% 0 0);--uc-foreground-light:oklch(21% 0 0);--uc-primary-foreground-light:oklch(100% 0 0);--uc-secondary-light:oklch(21% 0 0/.05);--uc-secondary-hover-light:oklch(21% 0 0/.08);--uc-secondary-foreground-light:oklch(21% 0 0);--uc-muted-light:oklch(97% 0 0);--uc-muted-foreground-light:oklch(40% 0 0);--uc-destructive-light:oklch(59% .235 28.5/.05);--uc-destructive-foreground-light:oklch(59% .235 28.5);--uc-border-light:oklch(92% 0 0);--uc-dialog-shadow-light:0px 6px 20px oklch(0% 0 0/.1);--uc-simple-btn-light:oklch(94% 0 0);--uc-simple-btn-hover-light:oklch(92% 0 0);--uc-simple-btn-foreground-light:oklch(20% 0 0);--uc-primary-oklch-dark:69% .1768 258.4;--uc-primary-dark:oklch(var(--uc-primary-oklch-dark));--uc-primary-hover-dark:oklch(var(--uc-primary-oklch-dark)/90%);--uc-primary-transparent-dark:oklch(var(--uc-primary-oklch-dark)/7%);--uc-background-dark:oklch(22% 0 0);--uc-foreground-dark:oklch(91% 0 0);--uc-primary-foreground-dark:oklch(0% 0 0);--uc-secondary-dark:oklch(91% 0 0/.07);--uc-secondary-hover-dark:oklch(91% 0 0/.1);--uc-secondary-foreground-dark:oklch(91% 0 0);--uc-muted-dark:oklch(26% 0 0);--uc-muted-foreground-dark:oklch(68% 0 0);--uc-destructive-dark:oklch(67% .191 27.5/.1);--uc-destructive-foreground-dark:oklch(67% .191 27.5);--uc-border-dark:oklch(36% 0 0);--uc-dialog-shadow-dark:0px 6px 20px oklch(0% 0 0/.25);--uc-simple-btn-dark:oklch(26% 0 0);--uc-simple-btn-hover-dark:oklch(29% 0 0);--uc-simple-btn-foreground-dark:oklch(100% 0 0)}}@media only screen and (max-height:600px){:where([uc-wgt-common]){--uc-dialog-max-height:100%}}@media only screen and (max-width:680px){:where([uc-wgt-common]){--uc-grid-col:2}}@media only screen and (max-width:430px){:where([uc-wgt-common]){--uc-dialog-max-width:100vw;--uc-dialog-max-height:var(--uploadcare-blocks-window-height);--uc-grid-col:1}}@media (prefers-color-scheme:light){:where([uc-wgt-common]){--uc-background:var(--uc-background-light);--uc-foreground:var(--uc-foreground-light);--uc-primary:var(--uc-primary-light);--uc-primary-hover:var(--uc-primary-hover-light);--uc-primary-transparent:var(--uc-primary-transparent-light);--uc-primary-foreground:var(--uc-primary-foreground-light);--uc-secondary:var(--uc-secondary-light);--uc-secondary-hover:var(--uc-secondary-hover-light);--uc-secondary-foreground:var(--uc-secondary-foreground-light);--uc-muted:var(--uc-muted-light);--uc-muted-foreground:var(--uc-muted-foreground-light);--uc-destructive:var(--uc-destructive-light);--uc-destructive-foreground:var(--uc-destructive-foreground-light);--uc-border:var(--uc-border-light);--uc-dialog-shadow:var(--uc-dialog-shadow-light);--uc-simple-btn:var(--uc-simple-btn-light);--uc-simple-btn-hover:var(--uc-simple-btn-hover-light);--uc-simple-btn-foreground:var(--uc-simple-btn-foreground-light)}}@media (prefers-color-scheme:dark){:where([uc-wgt-common]){--uc-background:var(--uc-background-dark);--uc-foreground:var(--uc-foreground-dark);--uc-primary:var(--uc-primary-dark);--uc-primary-hover:var(--uc-primary-hover-dark);--uc-primary-transparent:var(--uc-primary-transparent-dark);--uc-primary-foreground:var(--uc-primary-foreground-dark);--uc-secondary:var(--uc-secondary-dark);--uc-secondary-hover:var(--uc-secondary-hover-dark);--uc-secondary-foreground:var(--uc-secondary-foreground-dark);--uc-muted:var(--uc-muted-dark);--uc-muted-foreground:var(--uc-muted-foreground-dark);--uc-destructive:var(--uc-destructive-dark);--uc-destructive-foreground:var(--uc-destructive-foreground-dark);--uc-border:var(--uc-border-dark);--uc-dialog-shadow:var(--uc-dialog-shadow-dark);--uc-simple-btn:var(--uc-simple-btn-dark);--uc-simple-btn-hover:var(--uc-simple-btn-hover-dark);--uc-simple-btn-foreground:var(--uc-simple-btn-foreground-dark)}}:where(.uc-light){--uc-background:var(--uc-background-light);--uc-foreground:var(--uc-foreground-light);--uc-primary:var(--uc-primary-light);--uc-primary-hover:var(--uc-primary-hover-light);--uc-primary-transparent:var(--uc-primary-transparent-light);--uc-primary-foreground:var(--uc-primary-foreground-light);--uc-secondary:var(--uc-secondary-light);--uc-secondary-hover:var(--uc-secondary-hover-light);--uc-secondary-foreground:var(--uc-secondary-foreground-light);--uc-muted:var(--uc-muted-light);--uc-muted-foreground:var(--uc-muted-foreground-light);--uc-destructive:var(--uc-destructive-light);--uc-destructive-foreground:var(--uc-destructive-foreground-light);--uc-border:var(--uc-border-light);--uc-dialog-shadow:var(--uc-dialog-shadow-light);--uc-simple-btn:var(--uc-simple-btn-light);--uc-simple-btn-hover:var(--uc-simple-btn-hover-light);--uc-simple-btn-foreground:var(--uc-simple-btn-foreground-light)}:where(.uc-dark){--uc-background:var(--uc-background-dark);--uc-foreground:var(--uc-foreground-dark);--uc-primary:var(--uc-primary-dark);--uc-primary-hover:var(--uc-primary-hover-dark);--uc-primary-transparent:var(--uc-primary-transparent-dark);--uc-primary-foreground:var(--uc-primary-foreground-dark);--uc-secondary:var(--uc-secondary-dark);--uc-secondary-hover:var(--uc-secondary-hover-dark);--uc-secondary-foreground:var(--uc-secondary-foreground-dark);--uc-muted:var(--uc-muted-dark);--uc-muted-foreground:var(--uc-muted-foreground-dark);--uc-destructive:var(--uc-destructive-dark);--uc-destructive-foreground:var(--uc-destructive-foreground-dark);--uc-border:var(--uc-border-dark);--uc-dialog-shadow:var(--uc-dialog-shadow-dark);--uc-simple-btn:var(--uc-simple-btn-dark);--uc-simple-btn-hover:var(--uc-simple-btn-hover-dark);--uc-simple-btn-foreground:var(--uc-simple-btn-foreground-dark)}:where(.uc-purple){--uc-primary-oklch-light:47% .22 300;--uc-primary-oklch-dark:69% .1768 300}:where(.uc-red){--uc-primary-oklch-light:47% .21 21;--uc-primary-oklch-dark:71% .1768 21}:where(.uc-orange){--uc-primary-oklch-light:47% .1376 51.88;--uc-primary-oklch-dark:69% .1768 51.88}:where(.uc-green){--uc-primary-oklch-light:45% .14 130;--uc-primary-oklch-dark:69% .1768 130}:where(.uc-turquoise){--uc-primary-oklch-light:45% .0854 174;--uc-primary-oklch-dark:69% .1768 174}:where(.uc-gray){--uc-primary-oklch-light:10% 0 0;--uc-primary-oklch-dark:97% 0 0}:where(.uc-contrast){--uc-border-light:oklch(50% 0 0);--uc-border-dark:oklch(50% 0 0);--uc-muted-light:oklch(98% 0 0);--uc-muted-dark:oklch(16% 0 0);--uc-muted-foreground-light:oklch(20% 0 0);--uc-muted-foreground-dark:oklch(80% 0 0);--uc-background-light:oklch(100% 0 0);--uc-foreground-light:oklch(0% 0 0);--uc-background-dark:oklch(10% 0 0);--uc-foreground-dark:oklch(100% 0 0)}:where([uc-wgt-common]){color:var(--uc-foreground);font-family:var(--uc-font-family);font-size:var(--uc-font-size);line-height:var(--uc-line-height)}:where([uc-wgt-common]) *{box-sizing:border-box}:where([uc-wgt-common]) [hidden]{display:none!important}:where([uc-wgt-common]) [activity]:not([active],.active){display:none}:where([uc-wgt-common]) dialog:not([open]) [activity]{display:none}:where([uc-wgt-common]) button{align-items:center;border:none;border-radius:var(--uc-radius);cursor:pointer;display:flex;font-family:inherit;font-size:1em;height:var(--uc-button-size);justify-content:center;padding-left:14px;padding-right:14px;transition:background-color var(--uc-transition);user-select:none;white-space:nowrap}:where([uc-wgt-common]) button:focus-visible{outline-offset:2px}:where([uc-wgt-common]) button.uc-primary-btn{background-color:var(--uc-primary);color:var(--uc-primary-foreground)}:where([uc-wgt-common]) button.uc-primary-btn:hover{background-color:var(--uc-primary-hover)}:where([uc-wgt-common]) button.uc-secondary-btn{background-color:var(--uc-secondary);color:var(--uc-secondary-foreground)}:where([uc-wgt-common]) button.uc-secondary-btn:hover{background-color:var(--uc-secondary-hover)}:where([uc-wgt-common].uc-contrast) button.uc-secondary-btn{border:1px solid var(--uc-border)}:where([uc-wgt-common]) button.uc-mini-btn{background-color:transparent;color:var(--uc-secondary-foreground);height:var(--uc-button-size);padding:0}:where([uc-wgt-common]) button.uc-mini-btn:hover{background-color:var(--uc-secondary)}:where([uc-wgt-common]) :is(button[disabled],button.uc-primary-btn[disabled],button.uc-secondary-btn[disabled]){opacity:.5;pointer-events:none}:where([uc-wgt-common]) a{color:var(--uc-primary);text-decoration:none}:where([uc-wgt-common]) a[disabled]{pointer-events:none}:where([uc-wgt-common]) input[type=text]{background-color:var(--uc-background);border:1px solid var(--uc-border);border-radius:var(--uc-radius);color:var(--uc-foreground);display:flex;font-family:inherit;font-size:1em;height:var(--uc-button-size);outline:1px solid transparent;padding-left:10px;padding-right:10px;transition:border-color var(--uc-transition),outline-color var(--uc-transition);width:100%}:where([uc-wgt-common]) input[type=text]::placeholder{color:var(--uc-muted-foreground)}:where([uc-wgt-common]) input[type=text]:focus{border-color:var(--uc-primary-hover);outline-color:var(--uc-primary-hover)}:where([uc-wgt-common]) input[disabled]{opacity:.6;pointer-events:none}:where([uc-wgt-common]) select[disabled],:where([uc-wgt-common]) uc-select[disabled]{opacity:.6;pointer-events:none}uc-icon{align-items:center;display:inline-flex;height:var(--uc-button-size);justify-content:center;width:var(--uc-button-size)}uc-icon svg{height:calc(var(--uc-button-size)/2);width:calc(var(--uc-button-size)/2)}uc-range{align-items:center;display:inline-flex;height:var(--uc-button-size);justify-content:center;position:relative}uc-range datalist{display:none}uc-range input{height:100%;opacity:0;width:100%}uc-range .uc-track-wrapper{left:10px;pointer-events:none;right:10px;user-select:none}uc-range .uc-track,uc-range .uc-track-wrapper{align-items:center;display:flex;height:2px;justify-content:center;position:absolute}uc-range .uc-track{background-color:currentColor;border-radius:2px;left:0;opacity:.5;right:0}uc-range .uc-slider{border-radius:100%;height:16px;transform:translate(-50%);width:16px}uc-range .uc-bar,uc-range .uc-slider{background-color:currentColor;position:absolute}uc-range .uc-bar{border-radius:2px;height:100%;left:0}uc-range .uc-caption{display:inline-flex;justify-content:center;position:absolute}uc-config{display:none}:where([uc-simple-btn]){display:inline-flex;position:relative}:where([uc-simple-btn]) button{background-color:var(--uc-simple-btn);color:var(--uc-simple-btn-foreground);font-family:var(--uc-simple-btn-font-family);font-size:var(--uc-simple-btn-font-size);gap:.5em;height:auto;padding:var(--uc-simple-btn-padding)}:where([uc-simple-btn]) button uc-icon{height:auto;width:auto}:where([uc-simple-btn]) button uc-icon svg{height:.9em;width:.9em}:where([uc-simple-btn]) button:hover{background-color:var(--uc-simple-btn-hover)}:where([uc-simple-btn])>uc-drop-area{display:contents}:where([uc-simple-btn]) .uc-visual-drop-area{align-items:center;background-color:transparent;border:1px dashed var(--uc-simple-btn-foreground);border-radius:inherit;color:transparent;display:flex;font-size:var(--uc-simple-btn-font-size);height:100%;justify-content:center;left:0;opacity:0;padding:var(--uc-simple-btn-padding);position:absolute;top:0;transition:opacity var(--uc-transition);width:100%}:where([uc-simple-btn])>uc-drop-area[drag-state=active] .uc-visual-drop-area{opacity:1}:where([uc-simple-btn])>uc-drop-area[drag-state=inactive] .uc-visual-drop-area{opacity:0}:where([uc-simple-btn])>uc-drop-area[drag-state=near] .uc-visual-drop-area{opacity:1}:where([uc-simple-btn])>uc-drop-area[drag-state=over] .uc-visual-drop-area{opacity:1}uc-source-btn>button{align-items:center;background-color:unset;border-radius:var(--uc-radius);color:var(--uc-foreground);cursor:pointer;display:flex;height:unset;margin-bottom:2px;padding:2px var(--uc-padding);transition:background-color var(--uc-transition),color var(--uc-transition);user-select:none;width:100%}uc-source-btn:last-child>button{margin-bottom:0}uc-source-btn>button:hover{background-color:var(--uc-primary-transparent)}:where(.uc-contrast) uc-source-btn>button:hover{background-color:var(--uc-secondary);color:var(--uc-foreground)}uc-source-btn uc-icon{display:inline-flex;flex-grow:1;justify-content:center;margin-right:var(--uc-padding);min-width:var(--uc-button-size);opacity:.8}:where(.uc-contrast) uc-source-btn uc-icon{opacity:1}uc-source-btn .uc-txt{align-items:center;border:none;box-sizing:border-box;display:flex;height:var(--uc-button-size);padding:0;white-space:nowrap;width:100%}:where([uc-drop-area]){border:1px dashed var(--uc-border);border-radius:calc(var(--uc-radius)*1.75);overflow:hidden;padding:2px;transition:border var(--uc-transition),border-radius var(--uc-transition)}:where([uc-drop-area]),:where([uc-drop-area]) .uc-content-wrapper{align-items:center;display:flex;height:100%;justify-content:center;width:100%}:where([uc-drop-area]) .uc-text{color:var(--uc-muted-foreground);margin:var(--uc-padding);position:relative;transition:color var(--uc-transition)}:where([uc-drop-area])[ghost][drag-state=inactive]{display:none}:where([uc-drop-area])[ghost]:not([fullscreen]):is([drag-state=active],[drag-state=near],[drag-state=over]){background:var(--uc-background)}:where([uc-drop-area]):is([drag-state=active],[drag-state=near],[drag-state=over],:hover){background:var(--uc-primary-transparent);border-color:var(--uc-primary-transparent)}:where(.uc-contrast) :where([uc-drop-area]):is([drag-state=active],[drag-state=near],[drag-state=over],:hover){background:transparent;border-color:var(--uc-foreground);border-style:solid;border-width:2px;color:var(--uc-foreground)}:where([uc-drop-area]):is([drag-state=active],[drag-state=near]){opacity:1}:where([uc-drop-area])[drag-state=over]{border-color:var(--uc-primary);opacity:1}:where([uc-drop-area])[with-icon]{min-height:180px}:where([uc-drop-area])[with-icon] .uc-content-wrapper{display:flex;flex-direction:column}:where([uc-drop-area])[with-icon] .uc-text{color:var(--uc-foreground);font-size:1.1em;font-weight:500}:where([uc-drop-area])[with-icon] .uc-icon-container{background-color:var(--uc-muted);border-radius:50%;color:var(--uc-foreground);height:64px;margin:var(--uc-padding);overflow:hidden;position:relative;transition:color var(--uc-transition),background-color var(--uc-transition);width:64px}:where([uc-drop-area])[with-icon] uc-icon{height:32px;left:calc(50% - 16px);position:absolute;top:calc(50% - 16px);transition:transform var(--uc-transition);width:32px}:where([uc-drop-area])[with-icon] uc-icon:last-child{transform:translateY(48px)}:where(.uc-contrast) :where([uc-drop-area])[with-icon]:hover .uc-icon-container,:where(.uc-contrast) :where([uc-drop-area])[with-icon]:hover .uc-text{color:var(--uc-foreground)}:where([uc-drop-area])[with-icon]:hover .uc-icon-container{background-color:var(--uc-primary-transparent)}:where(.uc-contrast) :where([uc-drop-area])[with-icon]:hover .uc-icon-container{background-color:var(--uc-muted)}:where([uc-drop-area])[with-icon]>.uc-content-wrapper:is([drag-state=active],[drag-state=near],[drag-state=over]) .uc-icon-container{background-color:var(--uc-primary);color:var(--uc-primary-foreground)}:where([uc-drop-area])[with-icon]>.uc-content-wrapper:is([drag-state=active],[drag-state=near],[drag-state=over]) .uc-text{color:var(--uc-foreground)}:where(.uc-contrast) :where([uc-drop-area])[with-icon]>.uc-content-wrapper:is([drag-state=active],[drag-state=near],[drag-state=over]) .uc-text{color:var(--uc-foreground)}:where([uc-drop-area])[with-icon]>.uc-content-wrapper:is([drag-state=active],[drag-state=near],[drag-state=over]) uc-icon:first-child{transform:translateY(-48px)}:where([uc-drop-area])[with-icon]>.uc-content-wrapper:is([drag-state=active],[drag-state=near],[drag-state=over]) uc-icon:last-child{transform:translateY(0)}:where([uc-drop-area])[with-icon]>.uc-content-wrapper[drag-state=near] uc-icon:last-child{transform:scale(1.3)}:where([uc-drop-area])[with-icon]>.uc-content-wrapper[drag-state=over] uc-icon:last-child{transform:scale(1.5)}:where([uc-drop-area])[fullscreen]{align-items:center;display:flex;height:calc(100vh - var(--uc-padding)*2);inset:0;justify-content:center;margin:var(--uc-padding);position:fixed;width:calc(100vw - var(--uc-padding)*2);z-index:2147483647}:where([uc-drop-area])[fullscreen] .uc-content-wrapper{background-color:var(--uc-background);border-radius:calc(var(--uc-radius)*1.75);box-shadow:var(--uc-dialog-shadow);color:var(--uc-foreground);height:180px;max-width:calc(var(--uc-dialog-width)*.8);transition:color var(--uc-transition),background-color var(--uc-transition),box-shadow var(--uc-transition),border-radius var(--uc-transition),transform var(--uc-transition);width:100%}:where([uc-drop-area])[with-icon][fullscreen][drag-state=active]>.uc-content-wrapper,:where([uc-drop-area])[with-icon][fullscreen][drag-state=near]>.uc-content-wrapper{opacity:0;transform:translateY(10px)}:where([uc-drop-area])[with-icon][fullscreen][drag-state=over]>.uc-content-wrapper{opacity:1;transform:translateY(0)}:is(:where([uc-drop-area])[with-icon][fullscreen])>.uc-content-wrapper uc-icon:first-child{transform:translateY(-48px)}:where([uc-drop-area])[clickable]{cursor:pointer}@supports selector(dialog::backdrop){:where([uc-modal])>dialog::backdrop{background-color:#0000001a}:where([uc-modal])[strokes]>dialog::backdrop{background-image:var(--modal-backdrop-background-image)}}:where([uc-modal])>dialog[open]{opacity:1;transform:translateY(0);visibility:visible}:where([uc-modal])>dialog:not([open]){opacity:0;transform:translateY(20px);visibility:hidden}:where([uc-modal])>dialog{background-color:var(--uc-background);border:0;border-radius:calc(var(--uc-radius)*1.75);box-shadow:var(--uc-dialog-shadow);display:flex;flex-direction:column;margin:auto;max-height:min(calc(100% - var(--uc-padding)*2),var(--uc-dialog-max-height));max-width:min(calc(100% - var(--uc-padding)*2),var(--uc-dialog-max-width));min-height:var(--uc-button-size);overflow:hidden;padding:0;transition:transform .4s ease,opacity .4s ease;width:min(var(--uc-dialog-width),100%)}:where(.uc-contrast) :where([uc-modal])>dialog{outline:1px solid var(--uc-border)}uc-url-source{background-color:var(--uc-background);display:block}uc-url-source>.uc-content{display:grid;grid-gap:4px;grid-template-columns:1fr min-content;padding:var(--uc-padding);padding-top:0}uc-url-source .uc-url-input{display:flex}uc-camera-source{background-color:var(--uc-background);border-radius:var(--uc-radius);display:flex;flex-direction:column;height:100%;max-height:100%;overflow:hidden;position:relative;width:100%}[uc-modal]>dialog:has(uc-camera-source[active]){height:100%;width:100%}uc-camera-source:not(.uc-initialized) .uc-controls{display:none}uc-camera-source video{background-color:var(--uc-muted);border-radius:var(--uc-radius);display:block;max-height:100%;object-fit:contain;object-position:center center;width:100%}uc-camera-source .uc-toolbar{background-color:var(--uc-background);bottom:0;display:flex;justify-content:space-between;padding:var(--uc-padding);position:absolute;width:100%}uc-camera-source .uc-content{display:flex;flex:1;height:100%;justify-content:center;overflow:hidden;padding:var(--uc-padding);padding-top:0;width:100%}uc-camera-source .uc-message-box{display:flex;flex-direction:column;grid-gap:40px;align-items:center;color:var(--uc-foreground);justify-content:center;padding:40px 40px 0}uc-camera-source .uc-message-box button{background-color:var(--uc-primary);color:var(--uc-primary-foreground)}uc-camera-source .uc-shot-btn{background-color:var(--uc-primary-light);border-radius:50%;color:var(--uc-background);height:58px;opacity:.85;transition:bottom var(--uc-transition),opacity var(--uc-transition),transform var(--uc-transition);width:58px}uc-camera-source .uc-shot-btn:hover{opacity:1;transform:scale(1.05)}uc-camera-source .uc-shot-btn:active{opacity:1;transform:scale(1)}uc-camera-source .uc-shot-btn[disabled]{bottom:-80px}uc-camera-source .uc-shot-btn uc-icon svg{height:20px;width:20px}uc-camera-source .uc-controls{align-items:center;display:flex;flex-wrap:wrap;justify-content:space-between;min-height:74px;padding:0 var(--uc-padding) var(--uc-padding);position:relative}uc-camera-source .uc-switcher{display:flex;gap:calc(var(--uc-padding)/2)}uc-camera-source .uc-switch.uc-active{background-color:var(--uc-secondary)}uc-camera-source .uc-camera-actions{align-items:center;display:flex;gap:5px;justify-content:center}uc-camera-source .uc-stop-record{background-color:var(--uc-destructive-foreground-light);opacity:1}:where(uc-camera-source:is(.uc-recording)) .uc-recording-timer uc-icon{display:none}:where(uc-camera-source:is(.uc-recording)) .uc-recording-timer{pointer-events:none}uc-camera-source .uc-recording-timer{overflow:hidden;position:relative;z-index:1}:where(uc-camera-source) .uc-recording-timer uc-icon{height:10px;margin-right:10px;width:10px}uc-camera-source .uc-recording-timer .uc-line{background-color:var(--uc-foreground-light);bottom:0;content:"";height:2px;left:0;position:absolute;right:0;transform:scaleX(0);transform-origin:left;transition:transform var(--uc-transition)}uc-camera-source .uc-btn-microphone{z-index:1}uc-camera-source .uc-select{display:flex}uc-camera-source .uc-audio-select{width:98px}uc-camera-source .uc-audio-select select{width:100%}uc-camera-source .uc-camera-action{inset:0 var(--uc-padding) var(--uc-padding);margin:0 auto;position:absolute}uc-external-source{background-color:var(--uc-background);display:flex;flex-direction:column;height:100%;overflow:hidden;position:relative;width:100%}[uc-modal]>dialog:has(uc-external-source[active]){height:100%;width:100%}uc-external-source>.uc-content{display:grid;flex:1;grid-template-rows:1fr min-content;position:relative}uc-external-source iframe{border:none;display:block;height:100%;width:100%}uc-external-source .uc-iframe-wrapper{overflow:hidden}uc-external-source .uc-toolbar{display:flex;width:100%;grid-gap:var(--uc-padding);align-items:center;border-top:1px solid var(--uc-border);justify-content:space-between;padding:var(--uc-padding)}uc-external-source .uc-back-btn{padding-left:0}uc-external-source .uc-selection-status-box{align-items:center;color:var(--uc-foreground);display:flex;flex-direction:column;justify-content:center}uc-external-source .uc-selection-status-box button{background:none;color:var(--uc-primary);height:auto;padding:0}uc-external-source .uc-selection-status-box button:hover{text-decoration:underline}uc-external-source uc-activity-header{justify-content:flex-end;left:0;pointer-events:none;position:absolute;right:0;top:0;width:100%;z-index:1}uc-external-source uc-activity-header .uc-close-btn{pointer-events:auto}uc-external-source .uc-done-btn>span.uc-hidden{pointer-events:none;visibility:hidden}uc-external-source .uc-done-btn>uc-spinner{align-items:center;display:flex;height:100%;justify-content:center;position:absolute;width:100%}uc-upload-list{background-color:var(--uc-background);display:flex;flex-direction:column;height:max-content;overflow:hidden;position:relative;transition:opacity var(--uc-transition);width:100%}uc-upload-list .uc-no-files{height:32px;padding:20px}uc-upload-list .uc-files{display:block;flex:1;min-height:32px;overflow:auto;padding:0 var(--uc-padding)}uc-upload-list .uc-files-wrapper{display:contents}uc-upload-list .uc-toolbar{background-color:var(--uc-background);display:flex;gap:4px;justify-content:space-between;padding:var(--uc-padding)}uc-upload-list .uc-toolbar-spacer{flex:1}uc-upload-list uc-drop-area{border-radius:var(--uc-radius);height:calc(100% - var(--uc-padding)*2);left:0;margin:var(--uc-padding);position:absolute;top:0;width:calc(100% - var(--uc-padding)*2)}uc-upload-list uc-activity-header>.uc-header-text{padding:0 var(--uc-padding)}uc-upload-list .uc-common-error{align-items:center;background-color:var(--uc-destructive);border-radius:var(--uc-radius);color:var(--uc-destructive-foreground);display:flex;font-size:.925em;justify-content:center;margin:4px var(--uc-padding) 0 var(--uc-padding);padding:var(--uc-padding)}uc-upload-list .uc-add-more-btn uc-icon{display:none}uc-upload-list[mode=grid] .uc-files{display:flex;flex-wrap:wrap;gap:var(--uc-grid-gap)}uc-upload-list .uc-files .uc-add-more-btn,uc-upload-list[mode=grid] uc-file-item{aspect-ratio:var(--uc-grid-aspect-ratio);flex:0 0 calc((100% - var(--uc-grid-gap)*(var(--uc-grid-col) - 1))/var(--uc-grid-col));height:var(--uc-grid-preview-image-height);max-width:calc((100% - var(--uc-grid-gap)*(var(--uc-grid-col) - 1))/var(--uc-grid-col))}uc-upload-list .uc-files .uc-add-more-btn{display:none}uc-start-from{display:block;overflow-y:auto}uc-start-from .uc-content{background-color:var(--uc-background);display:grid;gap:calc(var(--uc-padding)*2);grid-auto-flow:row;height:100%;padding:calc(var(--uc-padding)*2);width:100%}[uc-modal]>dialog:has(uc-start-from[active]){width:var(--uc-dialog-width)}[uc-modal] uc-start-from uc-drop-area{border-radius:var(--uc-radius)}@media only screen and (max-width:430px){[uc-modal] uc-start-from uc-drop-area{display:none}}uc-file-item{--uc-file-item-gap:4px;--uc-file-item-height:calc(var(--uc-preview-size) + var(--uc-padding)*2 + var(--uc-file-item-gap));display:block;min-height:var(--uc-file-item-height);overflow:hidden}uc-file-item:last-of-type{--uc-file-item-gap:0}uc-file-item>.uc-inner{align-items:center;background-color:var(--uc-muted);border-radius:var(--uc-radius);display:grid;font-size:.925em;gap:2px;grid-template-columns:var(--uc-preview-size) 1fr max-content;margin-bottom:var(--uc-file-item-gap);overflow:hidden;padding:var(--uc-padding);position:relative;transition:background-color var(--uc-transition)}uc-file-item>.uc-inner[focused]{background-color:transparent}uc-file-item>.uc-inner[uploading] .uc-edit-btn{display:none}uc-file-item>:where(.uc-inner[failed],.uc-inner[limit-overflow]){background-color:var(--uc-destructive)}uc-file-item .uc-thumb{background-color:var(--uc-secondary);background-position:50%;background-repeat:no-repeat;background-size:cover;border-radius:var(--uc-radius);display:inline-flex;height:var(--uc-preview-size);position:relative;width:var(--uc-preview-size)}uc-file-item .uc-file-name-wrapper{align-items:flex-start;color:var(--uc-muted-foreground);display:flex;flex-direction:column;justify-content:center;max-width:100%;overflow:hidden;padding-left:var(--uc-padding);padding-right:var(--uc-padding);text-align:left}uc-file-item .uc-file-name{max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}uc-file-item .uc-file-error{color:var(--uc-destructive-foreground);display:none;font-size:.85em;z-index:2}uc-file-item button.uc-edit-btn,uc-file-item button.uc-remove-btn{color:var(--uc-muted-foreground)}uc-file-item button svg{pointer-events:none}uc-file-item button.uc-upload-btn{display:none}uc-file-item .uc-badge{align-items:center;background-color:var(--uc-foreground);border-radius:50%;bottom:2px;color:var(--uc-background);display:flex;height:14px;justify-content:center;opacity:0;position:absolute;right:2px;transform:scale(.3);transition:opacity var(--uc-transition),transform var(--uc-transition);width:14px}uc-file-item>.uc-inner:where([failed],[limit-overflow],[finished]) .uc-badge{opacity:1;transform:scale(1)}uc-file-item>.uc-inner:where([failed],[limit-overflow]) .uc-badge{background-color:var(--uc-destructive-foreground)}uc-file-item>.uc-inner:where([failed],[limit-overflow]) .uc-file-error{display:block}uc-file-item .uc-badge uc-icon,uc-file-item .uc-badge uc-icon svg{height:100%;width:100%}uc-file-item .uc-progress-bar{height:2px;opacity:.7;top:calc(100% - 2px)}:where(.uc-contrast) uc-file-item .uc-progress-bar{opacity:1}uc-file-item .uc-file-actions{align-items:center;display:flex;gap:2px;justify-content:center}uc-file-item[mode=grid]{min-height:auto;overflow:visible}uc-file-item[mode=grid] .uc-inner{background-color:transparent;border-radius:0;grid-template-columns:1fr;grid-template-rows:1fr max-content;height:100%;margin-bottom:0;padding:0}uc-file-item[mode=grid] .uc-inner[failed] .uc-badge{display:none}uc-file-item[mode=grid] .uc-thumb{height:100%;width:100%}uc-file-item[mode=grid] .uc-badge{bottom:var(--uc-padding);right:var(--uc-padding)}uc-file-item[mode=grid] .uc-file-name-wrapper{padding:0}uc-file-item[mode=grid] .uc-file-name:not([hidden])+.uc-file-error{bottom:calc(var(--uc-padding) + var(--uc-font-size))}uc-file-item[mode=grid] .uc-file-error{background-color:var(--uc-destructive-foreground);bottom:var(--uc-padding);color:var(--uc-background)}uc-file-item[mode=grid] .uc-file-error,uc-file-item[mode=grid] .uc-file-hint{border-radius:var(--uc-radius);left:var(--uc-padding);padding:calc(var(--uc-padding)/2) var(--uc-padding);position:absolute;right:var(--uc-padding)}uc-file-item[mode=grid] .uc-file-hint{background-color:var(--uc-background);bottom:calc(var(--uc-padding)*2);color:var(--uc-foreground)}uc-file-item[mode=grid] .uc-file-actions{position:absolute;right:var(--uc-padding);top:var(--uc-padding)}uc-file-item[mode=grid] button{background-color:var(--uc-background)}uc-file-item[mode=grid] button:hover{background-color:var(--uc-muted)}uc-file-item[mode=grid] .uc-progress-bar{background-color:var(--uc-background);border-radius:var(--uc-radius);bottom:var(--uc-padding);height:4px!important;left:var(--uc-padding);right:var(--uc-padding);top:auto!important;transition:background-color .3s,opacity .3s;width:auto;z-index:1}uc-file-item[mode=grid] .uc-progress-bar :is(.uc-fake-progress,.uc-progress){background-color:var(--uc-primary)}uc-file-item[mode=grid] .uc-progress-bar[hasfilename]{bottom:calc(var(--uc-padding) + var(--uc-font-size))}uc-progress-bar-common{background-color:var(--uc-background);bottom:0;display:block;height:10px;left:0;position:fixed;right:0;transition:opacity .3s;z-index:10000}uc-progress-bar-common:not([active]){opacity:0;pointer-events:none}uc-progress-bar{--l-progress-value:0;bottom:0;height:100%;left:0;opacity:1;overflow:hidden;pointer-events:none;position:absolute;top:0;transition:opacity .3s;width:100%}uc-progress-bar.uc-progress-bar--hidden{opacity:0}uc-progress-bar .uc-progress{background-color:var(--uc-primary);height:100%;opacity:1;position:absolute;transform:translate(0);transition:width .6s,opacity .3s;width:calc(var(--l-progress-value)*1%)}uc-progress-bar .uc-progress--hidden{opacity:0}uc-progress-bar .uc-fake-progress{--l-fake-progress-width:30;animation:fake-progress-animation 1s ease-in-out infinite;background-color:var(--uc-primary);height:100%;opacity:1;position:absolute;transition:opacity .3s;width:calc(var(--l-fake-progress-width)*1%);z-index:1}uc-progress-bar .uc-fake-progress--hidden{animation:none;opacity:0}@keyframes fake-progress-animation{0%{transform:translate(-100%)}to{transform:translate(calc(100/var(--l-fake-progress-width)*100*1%))}}uc-activity-header{color:var(--uc-foreground);display:flex;font-size:1em;font-weight:500;gap:var(--uc-padding);justify-content:space-between;padding:var(--uc-padding)}uc-activity-header>*{align-items:center;display:flex}uc-copyright{display:flex;justify-content:center;width:100%}uc-copyright .uc-credits{all:unset;background-color:var(--uc-background);border-radius:6px;bottom:12px;color:var(--uc-muted-foreground);cursor:pointer;font-size:12px;font-weight:400;opacity:.9;padding:2px 5px;position:absolute;transition:opacity var(--uc-transition),background-color var(--uc-transition)}uc-copyright .uc-credits:focus-visible{outline:1px auto Highlight;outline:1px auto -webkit-focus-ring-color}uc-copyright .uc-credits:hover{background-color:var(--uc-muted);opacity:1}[uc-cloud-image-editor]{--color-primary-accent:var(--uc-primary);--color-text-base:var(--uc-foreground);--color-text-accent-contrast:var(--uc-background);--color-fill-contrast:var(--uc-background);--color-modal-backdrop:oklch(0 0 0/.1);--color-image-background:var(--uc-muted);--color-focus-ring:var(--color-primary-accent);--color-crop-guides:var(--uc-foreground);--font-size-ui:var(--uc-font-size);--size-touch-area:var(--uc-button-size);--size-panel-heading:calc(var(--uc-button-size) + var(--uc-padding)*2);--size-ui-min-width:130px;--size-line-width:1px;--size-modal-width:650px;--size-icon:calc(var(--uc-button-size)/2);--border-radius-editor:var(--uc-radius);--border-radius-thumb:var(--uc-radius);--border-radius-ui:var(--uc-radius);--border-radius-base:var(--uc-radius);--cldtr-gap-min:5px;--cldtr-gap-mid-1:10px;--cldtr-gap-mid-2:15px;--cldtr-gap-max:20px;--transition-duration-2:var(--transition-duration-all,.2s);--transition-duration-3:var(--transition-duration-all,.3s);--transition-duration-4:var(--transition-duration-all,.4s);--transition-duration-5:var(--transition-duration-all,.5s);--modal-header-opacity:1;--modal-header-height:var(--size-panel-heading);--modal-toolbar-height:var(--size-panel-heading);--transparent-pixel:url(${d});display:block;height:100%;max-height:100%;width:100%}[uc-cloud-image-editor] :is([can-handle-paste]:hover,[can-handle-paste]:focus){--can-handle-paste:"true"}[uc-cloud-image-editor] :is([tabindex][focus-visible],[tabindex]:hover,[with-effects][focus-visible],[with-effects]:hover){--filter-effect:var(--hover-filter)!important;--opacity-effect:var(--hover-opacity)!important;--color-effect:var(--hover-color-rgb)!important;--background-effect:var(--hover-background)!important}[uc-cloud-image-editor] :is([tabindex]:active,[with-effects]:active){--filter-effect:var(--down-filter)!important;--opacity-effect:var(--down-opacity)!important;--color-effect:var(--down-color-rgb)!important;--background-effect:var(--down-background)!important}[uc-cloud-image-editor] :is([tabindex][active],[with-effects][active]){--filter-effect:var(--active-filter)!important;--opacity-effect:var(--active-opacity)!important;--color-effect:var(--active-color-rgb)!important;--background-effect:var(--active-background)!important}[uc-cloud-image-editor] [hidden-scrollbar]::-webkit-scrollbar{display:none}[uc-cloud-image-editor] [hidden-scrollbar]{-ms-overflow-style:none;scrollbar-width:none}[uc-cloud-image-editor].uc-editor_ON{--modal-header-opacity:0;--modal-header-height:0px;--modal-toolbar-height:calc(var(--size-panel-heading)*2)}[uc-cloud-image-editor].uc-editor_OFF{--modal-header-opacity:1;--modal-header-height:var(--size-panel-heading);--modal-toolbar-height:var(--size-panel-heading)}[uc-cloud-image-editor]>.uc-wrapper{--l-min-img-height:var(--modal-toolbar-height);--l-max-img-height:100%;--l-edit-button-width:120px;--l-toolbar-horizontal-padding:var(--cldtr-gap-mid-1);display:grid;grid-template-rows:minmax(var(--l-min-img-height),var(--l-max-img-height)) minmax(var(--modal-toolbar-height),auto);height:100%;overflow:hidden;overflow-y:auto;position:relative}@media only screen and (max-width:800px){[uc-cloud-image-editor]>.uc-wrapper{--l-edit-button-width:70px;--l-toolbar-horizontal-padding:var(--cldtr-gap-min)}}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport{align-items:center;display:flex;justify-content:center;overflow:hidden}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-image_container>.uc-image{--viewer-image-opacity:1;background-color:var(--color-image-background);box-sizing:border-box;display:block;height:100%;left:0;object-fit:scale-down;opacity:var(--viewer-image-opacity);pointer-events:auto;position:absolute;top:0;transform:scale(1);user-select:none;width:100%;z-index:10}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-image_container>.uc-image.uc-image_visible_viewer{transition:opacity var(--transition-duration-3) ease-in-out,transform var(--transition-duration-4)}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-image_container>.uc-image.uc-image_hidden_to_cropper{--viewer-image-opacity:0;background-image:var(--transparent-pixel);pointer-events:none;transform:scale(1);transition:transform var(--transition-duration-4),opacity var(--transition-duration-3) step-end}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-image_container>.uc-image.uc-image_hidden_effects{--viewer-image-opacity:0;pointer-events:none;transform:scale(1);transition:opacity var(--transition-duration-3) cubic-bezier(.5,0,1,1),transform var(--transition-duration-4)}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-image_container{background-color:var(--color-image-background);display:block;height:100%;position:relative;transition:var(--transition-duration-3);width:100%}[uc-cloud-image-editor]>.uc-wrapper>.uc-toolbar{position:relative;transition:.3s}[uc-cloud-image-editor]>.uc-wrapper>.uc-toolbar>.uc-toolbar_content{background-color:var(--color-fill-contrast);bottom:0;box-sizing:border-box;height:var(--modal-toolbar-height);left:0;min-height:var(--size-panel-heading);position:absolute;width:100%}[uc-cloud-image-editor]>.uc-wrapper>.uc-toolbar>.uc-toolbar_content.uc-toolbar_content__viewer{align-items:center;display:flex;height:var(--size-panel-heading);justify-content:space-between;padding-left:var(--l-toolbar-horizontal-padding);padding-right:var(--l-toolbar-horizontal-padding)}[uc-cloud-image-editor]>.uc-wrapper>.uc-toolbar>.uc-toolbar_content.uc-toolbar_content__editor{display:flex}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-info_pan{position:absolute;user-select:none}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-file_type_outer{display:flex;max-width:120px;position:absolute;transform:translate(-40px);user-select:none;z-index:2}[uc-cloud-image-editor]>.uc-wrapper>.uc-viewport>.uc-file_type_outer>.uc-file_type{padding:4px .8em}[uc-cloud-image-editor]>.uc-wrapper>.uc-network_problems_splash{background-color:var(--color-fill-contrast);display:flex;flex-direction:column;height:100%;position:absolute;width:100%;z-index:4}[uc-cloud-image-editor]>.uc-wrapper>.uc-network_problems_splash>.uc-network_problems_content{align-items:center;display:flex;flex:1;flex-direction:column;justify-content:center}[uc-cloud-image-editor]>.uc-wrapper>.uc-network_problems_splash>.uc-network_problems_content>.uc-network_problems_icon{align-items:center;background-color:var(--uc-muted);border-radius:50%;color:var(--uc-foreground);display:flex;height:40px;justify-content:center;width:40px}[uc-cloud-image-editor]>.uc-wrapper>.uc-network_problems_splash>.uc-network_problems_content>.uc-network_problems_text{color:var(--uc-foreground);font-size:var(--font-size-ui);margin-top:var(--cldtr-gap-max)}[uc-cloud-image-editor]>.uc-wrapper>.uc-network_problems_splash>.uc-network_problems_footer{align-items:center;display:flex;height:var(--size-panel-heading);justify-content:center}uc-crop-frame>.uc-svg{border-top-left-radius:var(--border-radius-base);border-top-right-radius:var(--border-radius-base);height:100%;left:0;opacity:inherit;position:absolute;top:0;transition:var(--transition-duration-3);width:100%;z-index:2}uc-crop-frame>.uc-thumb{--idle-color-rgb:var(--color-text-base);--hover-color-rgb:var(--color-primary-accent);--focus-color-rgb:var(--color-primary-accent);--down-color-rgb:var(--color-primary-accent);--color-effect:var(--idle-color-rgb);color:var(--color-effect);transition:color var(--transition-duration-3),opacity var(--transition-duration-3)}uc-crop-frame>.uc-thumb--visible{opacity:1;pointer-events:auto}uc-crop-frame>.uc-thumb--hidden{opacity:0;pointer-events:none}uc-crop-frame>.uc-guides{transition:var(--transition-duration-3)}uc-crop-frame>.uc-guides--hidden{opacity:0}uc-crop-frame>.uc-guides--semi-hidden{opacity:.2}uc-crop-frame>.uc-guides--visible{opacity:1}uc-editor-button-control,uc-editor-crop-button-control,uc-editor-filter-control,uc-editor-operation-control{--l-base-min-width:var(--uc-button-size);--l-base-height:var(--uc-button-size);--opacity-effect:var(--idle-opacity);--color-effect:var(--idle-color-rgb);--background-effect:var(--idle-background);--filter-effect:var(--idle-filter);--idle-color-rgb:var(--uc-secondary-foreground);--idle-opacity:1;--idle-filter:1;--idle-background:var(--uc-secondary);--hover-color-rgb:var(--uc-secondary-foreground);--hover-opacity:1;--hover-filter:.8;--hover-background:var(--uc-secondary-hover);--down-color-rgb:var(--hover-color-rgb);--down-opacity:1;--down-filter:.6;--down-background:var(--uc-secondary);border-radius:var(--uc-radius)}uc-editor-button-control>button,uc-editor-crop-button-control>button,uc-editor-filter-control>button,uc-editor-operation-control>button{all:unset;align-items:center;color:var(--color-effect);cursor:pointer;display:grid;grid-template-columns:var(--l-base-min-width) auto;grid-template-rows:100%;height:var(--l-base-height);opacity:var(--opacity-effect);position:relative;transition:var(--l-width-transition)}:where(uc-editor-button-control,uc-editor-crop-button-control,uc-editor-filter-control,uc-editor-operation-control)>uc-icon>svg{height:var(--size-icon);width:var(--size-icon)}uc-editor-filter-control>uc-icon.uc-original-icon>svg{height:100%;width:100%}uc-editor-button-control.uc-active,uc-editor-crop-button-control.uc-active,uc-editor-filter-control.uc-active,uc-editor-operation-control.uc-active{--idle-color-rgb:var(--uc-primary-foreground);--idle-background:var(--uc-primary);--idle-opacity:1;--hover-color-rgb:var(--uc-primary-foreground);--hover-background:var(--uc-primary);--hover-opacity:1}uc-editor-filter-control.uc-not_active .uc-preview[loaded]{opacity:1}uc-editor-filter-control.uc-active .uc-preview{opacity:0}uc-editor-button-control.uc-not_active,uc-editor-crop-button-control.uc-not_active,uc-editor-filter-control.uc-not_active,uc-editor-operation-control.uc-not_active{--idle-color-rgb:var(--uc-secondary-foreground)}:where(.uc-contrast) uc-editor-button-control.uc-not_active,:where(.uc-contrast) uc-editor-crop-button-control.uc-not_active,:where(.uc-contrast) uc-editor-filter-control.uc-not_active,:where(.uc-contrast) uc-editor-operation-control.uc-not_active{--idle-background:transparent;--hover-background:var(--uc-secondary);outline:1px solid var(--uc-border);outline-offset:-1px}uc-editor-button-control>button:before,uc-editor-crop-button-control>button:before,uc-editor-filter-control>button:before,uc-editor-operation-control>button:before{background-color:var(--background-effect);border-radius:var(--border-radius-editor);content:"";height:100%;left:0;position:absolute;right:0;transition:var(--transition-duration-3);width:100%;z-index:-1}uc-editor-button-control>button .uc-title,uc-editor-crop-button-control>button .uc-title,uc-editor-filter-control>button .uc-title,uc-editor-operation-control>button .uc-title{font-size:.7em;letter-spacing:1.004px;padding-right:var(--cldtr-gap-mid-1);text-transform:uppercase}uc-editor-button-control>button uc-icon,uc-editor-crop-button-control>button uc-icon,uc-editor-filter-control>button uc-icon,uc-editor-operation-control>button uc-icon{pointer-events:none}uc-editor-filter-control>button .uc-preview{background-repeat:no-repeat;background-size:contain;border-radius:var(--border-radius-editor);filter:brightness(var(--filter-effect));height:var(--l-base-height);left:0;opacity:0;position:absolute;right:0;transition:var(--transition-duration-3);width:100%;z-index:-1}uc-editor-filter-control>.uc-original-icon{color:var(--color-effect);opacity:.3}uc-editor-image-cropper{color:var(--color-crop-guides);display:block;height:100%;left:0;opacity:0;pointer-events:none;position:absolute;top:0;touch-action:none;width:100%;z-index:10}uc-editor-image-cropper.uc-active_from_editor,uc-editor-image-cropper.uc-active_from_viewer{opacity:1;pointer-events:auto;transform:scale(1) translate(0);transition:transform var(--transition-duration-4) cubic-bezier(.37,0,.63,1) .4s,opacity var(--transition-duration-3)}uc-editor-image-cropper.uc-inactive_to_editor{opacity:0;pointer-events:none;transition:transform var(--transition-duration-4) cubic-bezier(.37,0,.63,1),opacity var(--transition-duration-3) calc(var(--transition-duration-3) + .05s)}uc-editor-image-cropper>.uc-canvas{z-index:1}uc-editor-image-cropper>.uc-canvas,uc-editor-image-fader{display:block;height:100%;left:0;position:absolute;top:0;width:100%}uc-editor-image-fader.uc-active_from_viewer{opacity:1;pointer-events:auto;transform:scale(1);transition:transform var(--transition-duration-4),opacity var(--transition-duration-3) step-start;z-index:3}uc-editor-image-fader.uc-active_from_cropper{opacity:1;pointer-events:auto}uc-editor-image-fader.uc-active_from_cropper,uc-editor-image-fader.uc-inactive_to_cropper{transform:scale(1);transition:transform var(--transition-duration-4),opacity var(--transition-duration-3) step-end;z-index:3}uc-editor-image-fader.uc-inactive_to_cropper{opacity:0;pointer-events:none}uc-editor-image-fader .uc-fader-image{content-visibility:auto;display:block;height:100%;left:0;object-fit:scale-down;position:absolute;top:0;transform:scale(1);user-select:none;width:100%}uc-editor-image-fader .uc-fader-image--preview{background-color:var(--color-image-background);border-top-left-radius:var(--border-radius-base);border-top-right-radius:var(--border-radius-base);opacity:0;transform:scale(1);transition:var(--transition-duration-3)}uc-editor-scroller{height:100%;overflow-x:scroll}uc-editor-scroller,uc-editor-slider{align-items:center;display:flex;width:100%}uc-editor-slider{height:var(--size-panel-heading);justify-content:center}uc-editor-toolbar{height:100%;position:relative;width:100%}@media only screen and (max-width:600px){uc-editor-toolbar{--l-tab-gap:var(--cldtr-gap-mid-1);--l-slider-padding:var(--uc-padding);--l-controls-padding:var(--uc-padding)}}@media only screen and (min-width:601px){uc-editor-toolbar{--l-tab-gap:var(--cldtr-gap-max);--l-slider-padding:var(--uc-padding);--l-controls-padding:var(--uc-padding)}}uc-editor-toolbar>.uc-toolbar-container{height:100%;overflow:hidden;position:relative;width:100%}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar{background-color:var(--color-fill-contrast);display:grid;grid-template-rows:1fr 1fr;height:100%;position:absolute;transition:opacity var(--transition-duration-3) ease-in-out,transform var(--transition-duration-3) ease-in-out,visibility var(--transition-duration-3) ease-in-out;width:100%}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar.uc-sub-toolbar--visible{opacity:1;pointer-events:auto;transform:translateY(0)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar.uc-sub-toolbar--top-hidden{opacity:0;pointer-events:none;transform:translateY(100%)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar.uc-sub-toolbar--bottom-hidden{opacity:0;pointer-events:none;transform:translateY(-100%)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row{align-items:center;display:flex;justify-content:space-between;padding-left:var(--l-controls-padding);padding-right:var(--l-controls-padding)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles{display:grid;grid-auto-flow:column;position:relative;grid-gap:0 var(--l-tab-gap);align-items:center;height:100%}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles>.uc-tab-toggles_indicator{background-color:var(--uc-secondary-foreground);bottom:0;height:2px;left:0;position:absolute;transform:translate(0);transition:transform var(--transition-duration-3);width:var(--size-touch-area)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row{position:relative}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content{content-visibility:auto;display:flex;height:100%;left:0;opacity:0;overflow:hidden;position:absolute;top:0;width:100%}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content.uc-tab-content--visible{opacity:1;pointer-events:auto}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content.uc-tab-content--hidden{opacity:0;pointer-events:none}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles>.uc-tab-toggle.uc-tab-toggle--visible{display:contents}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles.uc-tab-toggles--hidden,uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles>.uc-tab-toggle.uc-tab-toggle--hidden{display:none}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles>.uc-tab-toggle>uc-btn-ui{width:var(--uc-button-size)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-controls-row>.uc-tab-toggles>.uc-tab-toggle>uc-btn-ui>uc-icon>svg{height:var(--size-icon);width:var(--size-icon)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content .uc-controls-list_align{box-sizing:border-box;display:grid;grid-template-areas:". inner .";grid-template-columns:1fr auto 1fr;min-width:100%;padding-left:var(--uc-padding)}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content .uc-controls-list_inner{display:grid;gap:6px;grid-area:inner;grid-auto-flow:column}uc-editor-toolbar>.uc-toolbar-container>.uc-sub-toolbar>.uc-tab-content-row>.uc-tab-content .uc-controls-list_inner:last-child{padding-right:var(--uc-padding)}uc-editor-toolbar .uc-controls-list_last-item{margin-right:var(--cldtr-gap-max)}uc-editor-toolbar .uc-info-tooltip_container{align-items:flex-start;display:flex;height:100%;justify-content:center;position:absolute;width:100%}uc-editor-toolbar .uc-info-tooltip_wrapper{display:flex;flex-direction:column;height:100%;justify-content:flex-end;pointer-events:none;position:absolute;top:calc(-100% - var(--cldtr-gap-mid-2))}uc-editor-toolbar .uc-info-tooltip{background-color:var(--color-text-accent-contrast);border-radius:var(--border-radius-editor);color:var(--color-text-base);font-size:.7em;letter-spacing:1px;opacity:0;padding:3px 6px;text-transform:uppercase;transform:translateY(100%);transition:var(--transition-duration-3);z-index:3}uc-editor-toolbar .uc-info-tooltip_visible{opacity:1;transform:translateY(0)}uc-editor-toolbar .uc-slider{padding-left:var(--l-slider-padding);padding-right:var(--l-slider-padding)}uc-btn-ui>button{--filter-effect:var(--idle-brightness);--opacity-effect:var(--idle-opacity);--color-effect:var(--idle-color-rgb);--background-effect:var(--idle-background);--l-transition-effect:var( --css-transition,color var(--transition-duration-2),background-color var(--transition-duration-2),filter var(--transition-duration-2) );all:unset;align-items:center;background-color:var(--background-effect);border-radius:var(--uc-radius);box-sizing:var(--css-box-sizing,border-box);color:var(--color-effect);cursor:pointer;display:inline-flex;filter:brightness(var(--filter-effect));font-size:1em;height:var(--css-height,var(--uc-button-size));opacity:var(--opacity-effect);padding-left:var(--css-padding-left,14px);padding-right:var(--css-padding-right,14px);transition:var(--l-transition-effect);user-select:none}uc-btn-ui>button>uc-icon{pointer-events:none}uc-btn-ui .uc-text{white-space:nowrap}uc-btn-ui .uc-icon{align-items:center;color:var(--color-effect);display:flex;filter:brightness(var(--filter-effect));justify-content:center;transition:var(--l-transition-effect)}uc-btn-ui .uc-icon_left{margin-left:0;margin-right:var(--cldtr-gap-mid-1)}uc-btn-ui .uc-icon_right{margin-left:var(--cldtr-gap-mid-1);margin-right:0}uc-btn-ui .uc-icon_single{margin-left:0;margin-right:0}uc-btn-ui .uc-icon_hidden{display:none;margin:0}uc-btn-ui.uc-primary>button{--idle-color-rgb:var(--uc-primary-foreground);--idle-brightness:1;--idle-opacity:1;--idle-background:var(--uc-primary);--hover-color-rgb:var(--uc-primary-foreground);--hover-brightness:1;--hover-opacity:1;--hover-background:var(--uc-primary-hover);--down-color-rgb:var(--uc-primary-foreground);--down-brightness:.75;--down-opacity:1;--down-background:var(--uc-primary);--active-color-rgb:var(--uc-primary-foreground);--active-brightness:1;--active-opacity:1;--active-background:var(--uc-primary)}uc-btn-ui.uc-primary-icon>button{--idle-color-rgb:var(--uc-primary);--idle-brightness:1;--idle-opacity:1;--idle-background:transparent;--hover-color-rgb:var(--uc-primary);--hover-brightness:1;--hover-opacity:1;--hover-background:var(--uc-primary-transparent);--down-color-rgb:var(--uc-primary);--down-brightness:.75;--down-opacity:1;--down-background:var(--uc-primary-transparent);--active-color-rgb:var(--uc-primary-foreground);--active-brightness:1;--active-opacity:1;--active-background:var(--uc-primary);padding:0;width:var(--uc-button-size)}uc-btn-ui.uc-secondary>button{--idle-color-rgb:var(--uc-secondary-foreground);--idle-brightness:1;--idle-opacity:1;--idle-background:var(--uc-secondary);--hover-color-rgb:var(--uc-secondary-foreground);--hover-brightness:1;--hover-opacity:1;--hover-background:var(--uc-secondary-hover);--down-color-rgb:var(--uc-secondary-foreground);--down-brightness:1;--down-opacity:1;--down-background:var(--uc-secondary-hover);--active-color-rgb:var(--uc-secondary-foreground);--active-brightness:1;--active-opacity:1;--active-background:transparent}:where(.uc-contrast) uc-btn-ui.uc-secondary>button{border:1px solid var(--uc-border)}uc-btn-ui.uc-secondary-icon>button,uc-btn-ui.uc-tab>button{--idle-color-rgb:var(--uc-secondary-foreground);--idle-brightness:1;--idle-opacity:1;--idle-background:transparent;--hover-color-rgb:var(--uc-secondary-foreground);--hover-brightness:1;--hover-opacity:1;--hover-background:var(--uc-secondary);--down-color-rgb:var(--uc-secondary-foreground);--down-brightness:1;--down-opacity:1;--down-background:var(--uc-secondary);--active-color-rgb:var(--uc-secondary-foreground);--active-brightness:1;--active-opacity:1;--active-background:transparent;padding:0;width:var(--uc-button-size)}uc-btn-ui.uc-default>button{--idle-color-rgb:var(--uc-secondary-foreground);--idle-brightness:1;--idle-opacity:1;--idle-background:var(--uc-secondary);--hover-color-rgb:var(--uc-secondary-foreground);--hover-brightness:1;--hover-opacity:1;--hover-background:var(--uc-secondary-hover);--down-color-rgb:var(--uc-secondary-foreground);--down-brightness:.75;--down-opacity:1;--down-background:var(--uc-secondary);--active-color-rgb:var(--uc-primary);--active-brightness:1;--active-opacity:1;--active-background:var(--uc-primary-transparent)}:where(.uc-contrast) uc-btn-ui.uc-default>button{--idle-background:transparent;--hover-background:var(--uc-secondary);--active-background:var(--uc-foreground);--active-color-rgb:var(--uc-background)}uc-line-loader-ui{height:2px;left:0;opacity:.5;position:absolute;top:0;width:100%;z-index:9999}uc-line-loader-ui .uc-inner{height:100%;max-width:200px;width:25%}uc-line-loader-ui .uc-line{background-color:var(--uc-primary);height:100%;transform:translate(-101%);transition:transform 1s;width:100%}uc-slider-ui{--l-thumb-size:24px;--l-zero-dot-size:5px;--l-zero-dot-offset:2px;--idle-color-rgb:var(--uc-foreground);--hover-color-rgb:var(--uc-primary);--down-color-rgb:var(--uc-primary);--color-effect:var(--idle-color-rgb);--l-color:var(--color-effect);align-items:center;display:flex;height:calc(var(--l-thumb-size) + (var(--l-zero-dot-size) + var(--l-zero-dot-offset))*2);justify-content:center;position:relative;width:100%}uc-slider-ui .uc-thumb{background-color:var(--l-color);border-radius:50%;height:var(--l-thumb-size);left:0;opacity:1;position:absolute;transform:translate(0);transition:opacity var(--transition-duration-2),background-color var(--transition-duration-2);width:var(--l-thumb-size)}uc-slider-ui .uc-steps{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding-left:calc(var(--l-thumb-size)/2);padding-right:calc(var(--l-thumb-size)/2);position:absolute;width:100%}uc-slider-ui .uc-border-step{height:10px;opacity:1}uc-slider-ui .uc-border-step,uc-slider-ui .uc-minor-step{border-right:1px solid var(--uc-foreground);transition:border-color var(--transition-duration-2);width:0}uc-slider-ui .uc-minor-step{height:4px;opacity:.6}uc-slider-ui .uc-zero-dot{background-color:var(--color-primary-accent);border-radius:50%;height:var(--l-zero-dot-size);left:calc(var(--l-thumb-size)/2 - var(--l-zero-dot-size)/2);opacity:0;position:absolute;top:calc(100% - var(--l-zero-dot-offset)*2);transition:var(--transition-duration-3);width:var(--l-zero-dot-size)}uc-slider-ui .uc-input{cursor:pointer;height:100%;margin:0;opacity:0;position:absolute;width:calc(100% - 10px)}uc-presence-toggle.uc-transition{transition:opacity var(--transition-duration-3),visibility var(--transition-duration-3)}uc-presence-toggle.uc-visible{opacity:1;pointer-events:inherit}uc-presence-toggle.uc-hidden{opacity:0;pointer-events:none}uc-presence-toggle.uc-initial{display:none!important;transition:none!important}[uc-cloud-image-editor] [role=button]:focus-visible,[uc-cloud-image-editor] button:focus-visible{outline:1px auto Highlight;outline:1px auto -webkit-focus-ring-color}[uc-cloud-image-editor] .uc-cloud-mask{pointer-events:none}:where([uc-cloud-image-editor]) uc-icon{align-items:center;display:flex;height:100%;justify-content:center;width:100%}:where([uc-cloud-image-editor]) uc-icon svg{height:calc(var(--uc-button-size)/2);width:calc(var(--uc-button-size)/2)}uc-cloud-image-editor-activity{background-color:var(--uc-background);display:flex;height:100%;overflow:hidden;position:relative;width:100%}[uc-modal]>dialog:has(uc-cloud-image-editor-activity[active]){height:100%;width:100%}uc-select,uc-select select{display:inline-flex}uc-select select{align-items:center;background-color:var(--uc-secondary);border:none;border-radius:var(--uc-radius);color:var(--uc-secondary-foreground);cursor:pointer;font-family:inherit;font-size:1em;height:var(--uc-button-size);justify-content:center;padding:0 14px;position:relative;transition:background-color var(--uc-transition);user-select:none;white-space:nowrap}@keyframes uc-spinner-keyframes{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.uc-spinner{animation:uc-spinner-keyframes .4s linear infinite;border-color:currentcolor transparent transparent currentcolor;border-radius:50%;border-style:solid;border-width:2px;height:1em;width:1em}uc-thumb{height:100%;width:100%}:where([uc-wgt-common]) uc-source-btn[type]{all:unset}[uc-file-uploader-inline] uc-start-from{container-type:inline-size;height:100%}[uc-file-uploader-inline]{--cfg-done-activity:"start-from";--cfg-init-activity:"start-from";flex:1}[uc-file-uploader-inline] uc-activity-header:after{content:"";height:var(--uc-button-size);width:var(--uc-button-size)}[uc-file-uploader-inline] uc-activity-header .uc-close-btn{display:none}[uc-file-uploader-inline] uc-copyright .uc-credits{position:static}@container (min-width: 500px){[uc-file-uploader-inline] uc-start-from .uc-content{grid-template-columns:1fr max-content;height:100%}[uc-file-uploader-inline] uc-start-from uc-copyright{grid-column:2}[uc-file-uploader-inline] uc-start-from uc-drop-area{grid-row:span 3}[uc-file-uploader-inline] uc-start-from:has(uc-copyright[hidden]) uc-drop-area{grid-row:span 2}[uc-file-uploader-inline] uc-start-from:has(.uc-cancel-btn[hidden]) uc-drop-area{grid-row:span 2}[uc-file-uploader-inline] uc-start-from:has(uc-copyright[hidden]):has(.uc-cancel-btn[hidden]) uc-drop-area{grid-row:span 1}}`,""]);const h=u},557:e=>{"use strict";var t={};e.exports=function(e,r){var i=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(r)}},584:(e,t,r)=>{e.exports=r(237)("./src/utils.js")},602:e=>{"use strict";var t,r=(t=[],function(e,r){return t[e]=r,t.filter(Boolean).join("\n")});function i(e,t,i,o){var a;if(i)a="";else{a="",o.supports&&(a+="@supports (".concat(o.supports,") {")),o.media&&(a+="@media ".concat(o.media," {"));var n=void 0!==o.layer;n&&(a+="@layer".concat(o.layer.length>0?" ".concat(o.layer):""," {")),a+=o.css,n&&(a+="}"),o.media&&(a+="}"),o.supports&&(a+="}")}if(e.styleSheet)e.styleSheet.cssText=r(t,a);else{var s=document.createTextNode(a),c=e.childNodes;c[t]&&e.removeChild(c[t]),c.length?e.insertBefore(s,c[t]):e.appendChild(s)}}var o={singleton:null,singletonCounter:0};e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=o.singletonCounter++,r=o.singleton||(o.singleton=e.insertStyleElement(e));return{update:function(e){i(r,t,!1,e)},remove:function(e){i(r,t,!0,e)}}}},659:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="},718:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r="",i=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),i&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),i&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r}).join("")},t.i=function(e,r,i,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var n={};if(i)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(n[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);i&&n[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},725:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},782:(e,t,r)=>{e.exports=r(237)("./src/core.js")},809:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r(933),o=r.n(i),a=r(718),n=r.n(a)()(o());n.push([e.id,".ck-uploadcare-theme{--uc-font-size:13px;--uc-radius:2px;--uc-padding:0.9em;--uc-primary-oklch-light:54.45% 0.182 263.76;--uc-foreground-light:#333;--uc-secondary-foreground-light:#333;--uc-muted-foreground-light:#333;--uc-border-light:#ccced1}",""]);const s=n},933:e=>{"use strict";e.exports=function(e){return e[1]}}},t={};function r(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={id:i,exports:{}};return e[i](a,a.exports,r),a.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.b=document.baseURI||self.location.href;var i={};(()=>{"use strict";r.r(i),r.d(i,{Uploadcare:()=>cc,UploadcareCommand:()=>ae,UploadcareEditing:()=>ft,UploadcareImageEdit:()=>Nc,UploadcareImageEditCommand:()=>xc,UploadcareImageEditEditing:()=>$c,UploadcareImageEditUI:()=>Uc,UploadcareUI:()=>$,UploadcareUploadAdapter:()=>ht});var e={};r.r(e),r.d(e,{ActivityBlock:()=>uo,ActivityHeader:()=>Hs,BaseComponent:()=>zt,Block:()=>no,BtnUi:()=>As,CameraSource:()=>Jn,CloudImageEditor:()=>rc,CloudImageEditorActivity:()=>Rs,CloudImageEditorBlock:()=>ss,Config:()=>Na,Copyright:()=>Ks,CropFrame:()=>cs,Data:()=>wt,DropArea:()=>nn,EditorCropButtonControl:()=>us,EditorFilterControl:()=>fs,EditorImageCropper:()=>ws,EditorImageFader:()=>xs,EditorOperationControl:()=>vs,EditorScroller:()=>Cs,EditorSlider:()=>gs,EditorToolbar:()=>Ts,ExternalSource:()=>Bs,ExternalUploadSource:()=>Po,FileItem:()=>Bn,FileUploaderInline:()=>tc,FileUploaderMinimal:()=>ec,FileUploaderRegular:()=>Js,FormInput:()=>js,Icon:()=>Da,Img:()=>Wa,LineLoaderUi:()=>Es,Modal:()=>Hn,ModalEvents:()=>io,PACKAGE_NAME:()=>To,PACKAGE_VERSION:()=>Ao,PresenceToggle:()=>$s,ProgressBar:()=>rs,ProgressBarCommon:()=>ts,Select:()=>qs,SimpleBtn:()=>Xa,SliderUi:()=>Ls,SolutionBlock:()=>so,SourceBtn:()=>sn,SourceList:()=>cn,Spinner:()=>Gs,StartFrom:()=>Za,Thumb:()=>Ys,UID:()=>xt,UploadCtxProvider:()=>es,UploadList:()=>qn,UploadSource:()=>No,UploaderBlock:()=>ga,UrlSource:()=>Kn,defineComponents:()=>ic,defineLocale:()=>Bi,loadFileUploaderFrom:()=>ac,toKebabCase:()=>ma});var t,o,a,n=r(782),s=r(355),c=r(311);function l(e,t){var r=u();return(l=function(e,t){return r[e-=494]})(e,t)}function u(){var e=["GPhotos","4prvVXs","835605vQuZrf","5753517Phepoe","gphotos","156284vjQBeI","Dropbox","308613SQVlhi","URL","GDrive","facebook","18CLUoYI","415875kzgnXh","8ZXbYSg","local","Local","OneDrive","45CNJuJJ","onedrive","5477050nOTFSQ","url","Facebook","dropbox","1086274oQeTRn","gdrive"];return(u=function(){return e})()}function d(e,r,i){const o=e.t,a=e.t;switch(r){case t.Local:return{text:a("Insert"===i?"Upload from computer":"Replace from computer"),shortText:a("From computer")};case t.URL:return{text:"Insert"===i?a("Insert via URL"):o("Replace via URL"),shortText:a("Via URL")};case t.Dropbox:return{text:o("Insert"===i?"Insert with Dropbox":"Replace with Dropbox"),shortText:o("With Dropbox")};case t.Facebook:return{text:o("Insert"===i?"Insert with Facebook":"Replace with Facebook"),shortText:o("With Facebook")};case t.GDrive:return{text:o("Insert"===i?"Insert with Google Drive":"Replace with Google Drive"),shortText:o("With Google Drive")};case t.GPhotos:return{text:o("Insert"===i?"Insert with Google Photos":"Replace with Google Photos"),shortText:o("With Google Photos")};case t.OneDrive:return{text:o("Insert"===i?"Insert with OneDrive":"Replace with OneDrive"),shortText:o("With OneDrive")};default:return r}}!function(e){for(var t=l,r=e();;)try{if(365013===-parseInt(t(500))/1*(parseInt(t(494))/2)+-parseInt(t(510))/3*(parseInt(t(498))/4)+-parseInt(t(505))/5*(-parseInt(t(504))/6)+parseInt(t(516))/7*(parseInt(t(506))/8)+parseInt(t(495))/9+parseInt(t(512))/10+parseInt(t(496))/11)break;r.push(r.shift())}catch(e){r.push(r.shift())}}(u),(o=t||(t={}))[(a=l)(508)]=a(507),o[a(501)]=a(513),o[a(499)]=a(515),o[a(502)]=a(517),o[a(514)]=a(503),o[a(518)]=a(497),o[a(509)]=a(511);var h=r(6),p=r.n(h),g=r(602),m=r.n(g),b=r(557),f=r.n(b),v=r(302),y=r.n(v),w=r(290),_=r.n(w),k=r(536),x={attributes:{"data-cke":!0}};x.setAttributes=y(),x.insert=f().bind(null,"head"),x.domAPI=m(),x.insertStyleElement=_();p()(k.A,x);k.A&&k.A.locals&&k.A.locals;var C=r(809),T={attributes:{"data-cke":!0}};T.setAttributes=y(),T.insert=f().bind(null,"head"),T.domAPI=m(),T.insertStyleElement=_();p()(C.A,T);C.A&&C.A.locals&&C.A.locals;var A=r(230),E={attributes:{"data-cke":!0}};E.setAttributes=y(),E.insert=f().bind(null,"head"),E.domAPI=m(),E.insertStyleElement=_();p()(A.A,E);A.A&&A.A.locals&&A.A.locals;const I=M;function S(){const e=["expired","Dropbox","commands","pluginName","featureNotAllowed","uploadcareLicenseKeyValid","isPremiumPlugin","Insert","OneDrive","7oNXmOf","URL","uploadcareLicenseKeyExpired","Uploadcare","uploadcare","type","config","locale","map","uploadcareLicenseKeyNotAllowed","GPhotos","execute","forEach","tooltip","_createToolbarButton","editor","usageLimit","assetManager","licenseKey","uploadcareLicenseKeyEvaluationLimit","url","push","init","_showLicenseError","uploadcareLicenseKeyInvalid","Local","label","shortText","invalid","5114748uvhnve","bind","_licenseKeyCheckInterval","53069166wgBRMh","isEnabled","reduce","trialLimit","_createMenuBarButtons","text","afterInit","ImageInsertUI","has","uploadcare.uploader.sourceList","11606360YxFXqv","GDrive","isImageSelected","uploadcareLicenseKeyUsageLimit","isOfficialPlugin","withText","domainLimit","UploadcareUI","5keRHcU","1517426wsXZvJ","upload","238460pOhBRh","_createDropdownButtons","_getIntegrationKey","evaluationLimit","898850lzjTlY","entries","Replace","_normalizeConfigSourceList","2614530yPSwVq","get","registerIntegration","uploadcareLicenseKeyTrialLimit","destroy","uploadcareLicenseKeyDomainLimit","Facebook","icon","_createButton","plugins"];return(S=function(){return e})()}function M(e,t){const r=S();return(M=function(e,t){return r[e-=243]})(e,t)}!function(e){const t=M,r=e();for(;;)try{if(814575===-parseInt(t(284))/1+-parseInt(t(290))/2+-parseInt(t(294))/3+-parseInt(t(286))/4*(-parseInt(t(283))/5)+parseInt(t(262))/6*(-parseInt(t(313))/7)+-parseInt(t(275))/8+parseInt(t(265))/9)break;r.push(r.shift())}catch(e){r.push(r.shift())}}(S);class $ extends n.Plugin{[I(251)];[I(264)];static get[I(307)](){return I(282)}static get[I(279)](){return!0}static get[I(310)](){return!0}[I(255)](){const e=I;this[e(251)]=this[e(248)][e(319)][e(295)](e(251));const t=this[e(248)];this[e(264)]=setInterval(()=>{const r=e;let i;for(const e in t){const o=e,a=t[o];if(r(309)==a||r(257)==a||r(315)==a||r(299)==a||r(322)==a||r(252)==a||r(297)==a||r(278)==a){delete t[o],i=a,clearInterval(this[r(264)]),this[r(264)]=void 0;break}}r(257)==i&&t[r(256)](r(261)),r(315)==i&&t[r(256)](r(304)),r(299)==i&&t[r(256)](r(281)),r(322)==i&&t[r(256)](r(308),r(316)),r(252)==i&&t[r(256)](r(289)),r(297)==i&&t[r(256)](r(268)),r(278)==i&&t[r(256)](r(249))},1e3)}[I(271)](){const e=I,{editor:t}=this,r=t[e(306)][e(295)](e(317));if(!r)return;const i=this[e(293)](t[e(319)][e(295)](e(274)))[e(267)]((t,r)=>{const i=e,o=this[i(288)](r[i(318)]);return t[o]||(t[o]=[]),t[o][i(254)](r),t},{});t[e(303)][e(273)](e(272))&&t[e(306)][e(295)](e(317))&&Object[e(291)](i)[e(245)](([i,o])=>{const a=e;t[a(303)][a(295)](a(272))[a(296)]({name:i,observable:()=>r,buttonViewCreator:()=>this[a(247)](o),formViewCreator:()=>this[a(287)](o),menuBarButtonViewCreator:()=>this[a(269)](o),override:a(250)!==i})})}[I(298)](){const e=I;super[e(298)](),this[e(264)]&&clearInterval(this[e(264)])}[I(293)](e){const r=I,{locale:i}=this[r(248)];return e[r(321)](e=>{const o=r,a=d(i,e,o(311));switch(e){case t[o(258)]:return{icon:s.IconUploadcareImageUpload,type:t[o(258)],...a};case t[o(314)]:return{icon:s.IconUploadcareLink,type:t[o(314)],...a};case t[o(305)]:return{icon:s.IconDropbox,type:t[o(305)],...a};case t[o(300)]:return{icon:s.IconFacebook,type:t[o(300)],...a};case t[o(276)]:return{icon:s.IconGoogleDrive,type:t[o(276)],...a};case t[o(243)]:return{icon:s.IconGooglePhotos,type:t[o(243)],...a};case t[o(312)]:return{icon:s.IconOneDrive,type:t[o(312)],...a}}})}[I(288)](e){const r=I;switch(e){case t[r(258)]:return r(285);case t[r(314)]:return r(253);default:return r(250)}}[I(302)](e,t){const r=I,i=this[r(248)],o=new e(i[r(320)]),a=i[r(306)][r(295)](r(317));return o[r(263)](r(266)).to(a),o.on(r(244),()=>{a[r(244)](t)}),o}[I(247)](e){const t=I,{locale:r}=this[t(248)],i=this[t(248)][t(303)][t(295)](t(272)),o=e[0],a=this[t(302)](c.ButtonView,o[t(318)]);return a[t(301)]=o[t(301)],a[t(263)](t(259)).to(i,t(277),e=>d(r,o[t(318)],t(e?292:311))[t(270)]),a[t(246)]=!0,a}[I(287)](e){const t=I,{locale:r}=this[t(248)],i=this[t(248)][t(303)][t(295)](t(272));return e[t(321)](e=>{const o=t,a=this[o(302)](c.ButtonView,e[o(318)]);return a[o(280)]=!0,a[o(301)]=e[o(301)],a[o(263)](o(259)).to(i,o(277),t=>d(r,e[o(318)],o(t?292:311))[o(270)]),a})}[I(269)](e){const t=I;return e[t(321)](e=>{const r=t,i=this[r(302)](c.MenuBarMenuListItemButtonView,e[r(318)]);return i[r(301)]=e[r(301)],i[r(259)]=e[r(260)],i})}}var L=r(584),R=r(2),U={attributes:{"data-cke":!0}};U.setAttributes=y(),U.insert=f().bind(null,"head"),U.domAPI=m(),U.insertStyleElement=_();p()(R.A,U);R.A&&R.A.locals&&R.A.locals;function O(e,t){var r=z();return(O=function(e,t){return r[e-=319]})(e,t)}var P=O;function z(){var e=["focusTracker","128622zaShJL","forwardCycle","getFocusableElement","createCollection","768903eDHVvi","focusCycler","2464722lYNXyw","12198662mFtWpy","810RlmjZZ","11753944SwrPPh","32102064GGxXOD","true","9375NrogRi","fire","div","bindTemplate","24XDIXcv"];return(z=function(){return e})()}!function(e){for(var t=O,r=e();;)try{if(905053===parseInt(t(326))/1+-parseInt(t(332))/2+parseInt(t(330))/3*(-parseInt(t(324))/4)+-parseInt(t(320))/5*(-parseInt(t(334))/6)+-parseInt(t(333))/7+parseInt(t(335))/8+parseInt(t(336))/9)break;r.push(r.shift())}catch(e){r.push(r.shift())}}(z);class N extends c.View{[P(325)];[P(331)];constructor(e){var t=P;super(e),this[t(325)]=new L.FocusTracker,this[t(331)]=new c.FocusCycler({focusables:this[t(329)](),focusTracker:this[t(325)]})}[P(328)](){var e=P;return{tag:e(322),attributes:{"aria-hidden":e(319),tabindex:"0"},on:{focus:this[e(323)].to(()=>{var t=e;this[t(331)][t(321)](t(327))})}}}}var D=F;function F(e,t){var r=V();return(F=function(e,t){return r[e-=395]})(e,t)}function V(){var e=["ck-uploadcare-theme","7STEWeY","884060OCplwt","ck-reset_all-excluded","uc-light","2559784SLWSaB","setTemplate","3rhFPza","36cVDnwc","div","940bPxWAA","getFocusableElement","7127615yTVCQo","uploader-","ck-uploadcare-form","element","34242bjTAHV","uc-file-uploader-inline","5751603UjrunG","1349116enFXgv","520283mcCrMI","focus","6srfkEC"];return(V=function(){return e})()}!function(e){for(var t=F,r=e();;)try{if(796461===parseInt(t(398))/1*(parseInt(t(400))/2)+parseInt(t(408))/3*(parseInt(t(397))/4)+-parseInt(t(411))/5*(-parseInt(t(417))/6)+-parseInt(t(402))/7*(-parseInt(t(406))/8)+-parseInt(t(396))/9+parseInt(t(403))/10+-parseInt(t(413))/11*(parseInt(t(409))/12))break;r.push(r.shift())}catch(e){r.push(r.shift())}}(V);class B extends N{constructor(e,t){var r=F;super(e),this[r(407)]({tag:r(410),attributes:{class:["ck",r(404),r(415)],tabindex:"-1"},children:[{tag:r(395),attributes:{class:[r(405),r(401)],"ctx-name":r(414)+t}},this[r(412)]()]})}[D(399)](){var e=D;this[e(416)][e(399)]()}}function j(e,t){const r=G();return(j=function(e,t){return r[e-=419]})(e,t)}function H(e,t){const r=j,i=[320,480,768,1024,1200,1600,1920,2400][r(473)](e=>e<=t)[r(432)](t=>e[r(450)](/\/$/,"")+r(447)+t+r(444)+t+"w");return{imageFallbackUrl:e,imageSources:[{srcset:i[r(437)](", "),sizes:r(456)+t+r(421)+t+"px",type:r(459)}]}}function q(e,t,r){const i=e[j(460)](/\/crop\/(\d+)x(\d+)\//);return{width:i?parseInt(i[1],10):t,height:i?parseInt(i[2],10):r}}function K(e,t){const r=j,i=new((0,L.DomEmitterMixin)()),o=e[r(424)][r(465)](r(466)),a=e[r(457)][r(476)][r(448)](t),n=o[r(420)](a),s=e[r(457)][r(425)][r(472)][r(433)](n),c=t[r(422)](r(458)),l=t[r(422)](r(455)),u=r(436);e[r(457)][r(425)][r(445)](e=>{const t=r;e[t(475)](u,a),e[t(449)](t(462),c+"/"+l,n)}),i[r(463)](s,r(478),()=>{const t=r;i[t(423)](s,t(478)),e[t(457)][t(425)][t(445)](e=>{const r=t;e[r(430)](u,a),e[r(419)](r(462),n)})})}function G(){const e=["959970djlGyO","hasAttribute","413959rLBuqB","removeClass","baseURI","map","viewToDom","28LzUXtU","imageBlock","image-processing","join","6566031swbSXA","src","document","16BQmecJ","1zRGAYU","1729tnxiFN","x/ ","change","location","/-/resize/","toViewElement","setStyle","replace","origin","1018505nLgjXF","11CqiQsw","function","height","(max-width: ","editing","width","image/webp","match","isArray","aspect-ratio","listenTo","10178440ADBVmW","get","ImageUtils","some","uploadcareImageId","18IONcPT","element","255324fWArzf","domConverter","filter","imageInline","addClass","mapper","window","load","removeStyle","findViewImgElement","px) 100vw, ","getAttribute","stopListening","plugins","view","1899030nGUFdf"];return(G=function(){return e})()}function W(e){const t=j;if(Array[t(461)](e)){const r=e[t(432)](W);return e=>r[t(467)](t=>t(e))}if(t(451)==e){const e=L.global[t(477)][t(446)][t(451)];return r=>new URL(r,L.global[t(440)][t(431)])[t(451)]==e}return t(454)==typeof e?e:e instanceof RegExp?r=>!(!r[t(460)](e)&&!r[t(450)](/^https?:\/\//,"")[t(460)](e)):()=>!1}function X(e,t){var r=Z();return(X=function(e,t){return r[e-=283]})(e,t)}function Z(){var e=["2MUoWws","288807TcUJjk","11254896ehXXuI","includes","1416341jbiHGH","130IXZXsG","13169590ShyFrO","2165470TAbGig","68064931qoyHAi","52gsKfgL","8LQCtbZ","target","398802iWzOIS"];return(Z=function(){return e})()}function Y(e,t){var r=X;return(0,L.getAncestors)(e[r(287)])[r(292)](t)}function J(){const e=["4unlVug","369XAEsPq","execute","source-list","image","isOpen","952878ZxeWje","removeSelectionAttribute","focus","editing","imageInline","_type","imageInfo","7RJaxQH","initFlow","setAttribute","get","stopListening","setCurrentActivity","stopDelegating","_dialog","insertImage","allEntries","change","view","382112VtbqeB","getOutputCollectionState","Local","uploadCare","EDITOR_TOP_CENTER","model","selection","configElement","imageBlock","getSelectedElement","_insertAsset","_editor","828BEvjou","_formView","destroy","document","303222EcnkaB","length","element","_editing","idle","removeAllFiles","width","uuid","setSelection","text","ucContextId","89750hHeTfy","plugins","_api","attributes","160270POBNhI","getLastPosition","linkHref","Insert","status","addEventListener","212168CkKkZQ","getAPI","_initListeners","doneFlow","_initDialog","show","_insertImage","detail","hide","ctxElement","Replace","done-click"];return(J=function(){return e})()}!function(e){const t=j,r=e();for(;;)try{if(753114===parseInt(t(442))/1*(-parseInt(t(426))/2)+-parseInt(t(427))/3+-parseInt(t(434))/4*(parseInt(t(452))/5)+parseInt(t(469))/6*(parseInt(t(429))/7)+parseInt(t(441))/8*(parseInt(t(438))/9)+parseInt(t(464))/10*(-parseInt(t(453))/11)+-parseInt(t(471))/12*(-parseInt(t(443))/13))break;r.push(r.shift())}catch(e){r.push(r.shift())}}(G),function(e){for(var t=X,r=e();;)try{if(946274===-parseInt(t(293))/1*(parseInt(t(289))/2)+parseInt(t(290))/3*(parseInt(t(285))/4)+-parseInt(t(294))/5*(parseInt(t(288))/6)+parseInt(t(295))/7*(-parseInt(t(286))/8)+-parseInt(t(291))/9+-parseInt(t(283))/10+parseInt(t(284))/11)break;r.push(r.shift())}catch(e){r.push(r.shift())}}(Z);const Q=ee;function ee(e,t){const r=J();return(ee=function(e,t){return r[e-=218]})(e,t)}!function(e){const t=ee,r=e();for(;;)try{if(125543===parseInt(t(247))/1+-parseInt(t(259))/2*(-parseInt(t(226))/3)+parseInt(t(222))/4+-parseInt(t(241))/5+parseInt(t(265))/6+parseInt(t(272))/7*(-parseInt(t(284))/8)+parseInt(t(260))/9*(-parseInt(t(237))/10))break;r.push(r.shift())}catch(e){r.push(r.shift())}}(J);class te extends((0,L.ObservableMixin)()){[Q(221)];[Q(279)];[Q(229)];[Q(239)];[Q(270)]=null;[Q(223)]=null;constructor(e,t,r){const i=Q;super(),this[i(221)]=e,this[i(229)]=t,this[i(279)]=e[i(238)][i(275)](c.Dialog),this[i(239)]=t[i(256)][i(248)](),this[i(270)]=r,this[i(229)][i(291)][i(274)](i(262),this[i(270)]),this[i(251)](),this[i(249)](),this[i(239)][i(273)]()}[Q(224)](){const e=Q;this[e(223)]&&(this[e(223)][e(224)](),this[e(223)]=null),this[e(239)]&&this[e(239)][e(250)](),this[e(276)](),this[e(278)]()}[Q(251)](){const e=Q,{locale:t,model:r}=this[e(221)],i=r[e(225)][e(290)][e(219)](),o=i&&(i.is(e(228),e(218))||i.is(e(228),e(269)));this[e(223)]=new B(t,this[e(229)][e(236)]),this[e(279)][e(252)]({id:e(287),icon:s.IconUploadcareImageUpload,title:d(t,this[e(270)],e(o?257:244))[e(235)],content:this[e(223)],position:c.DialogViewPosition[e(288)],isModal:!0,onShow:()=>{const t=e;this[t(223)][t(267)]()},onHide:()=>{const t=e;this[t(239)][t(231)](),this[t(221)][t(268)][t(283)][t(267)](),this[t(224)]()},keystrokeHandlerOptions:{filter:t=>!Y(t,this[e(223)][e(228)])}})}[Q(249)](){const e=Q;this[e(229)][e(256)][e(246)](e(258),()=>{const t=e,{allEntries:r}=this[t(239)][t(285)]();this[t(221)][t(289)][t(282)](e=>{const i=t,o=r[i(227)];for(const t of r){const a=t===r[o-1],{cdnUrl:n,fileInfo:s}=t;if(!n||!s)continue;const{width:c,height:l}=s[i(271)],u=q(n,c,l),d=H(n,u[i(232)]),h={id:s[i(233)],type:i(263),attributes:{imageDimension:u,...d}};this[i(220)](h,a,e)}}),this[t(279)][t(255)]()}),this[e(229)][e(256)][e(246)](e(282),r=>{const i=e;i(230)===r[i(254)][i(245)]&&!r[i(254)][i(281)][i(227)]&&this[i(279)][i(264)]&&(this[i(270)]===t[i(286)]?this[i(239)][i(277)](t[i(286)]):this[i(239)][i(273)]())})}[Q(220)](e,t,r){const i=Q,o=this[i(221)][i(289)][i(225)][i(290)],a=o[i(219)](),n=!(!a||!a.is(i(228),i(269)));r[i(266)](i(243)),this[i(253)](e,n),t||r[i(234)](o[i(242)]())}[Q(253)](e,t){const r=Q,i=this[r(221)],{imageDimension:o,imageFallbackUrl:a,imageSources:n}=e[r(240)];i[r(261)](r(280),{imageType:t?r(269):null,source:{uploadcareImageId:e.id,src:a,sources:n,...o}})}}var re=ie;function ie(e,t){var r=oe();return(ie=function(e,t){return r[e-=336]})(e,t)}function oe(){var e=["48MXPIUU","execute","1196631aBskUV","editor","destroy","isEnabled","requires","3713192FsZXWV","181qUSrJf","commands","2574FiCtGr","181377gSQJpB","_controller","_checkEnabled","283090dQyngY","insertImage","7920153pnEQTq","_editing","get","plugins","36808pOCzCz","refresh"];return(oe=function(){return e})()}!function(e){for(var t=ie,r=e();;)try{if(253697===-parseInt(t(336))/1*(parseInt(t(338))/2)+-parseInt(t(352))/3+-parseInt(t(348))/4+parseInt(t(342))/5*(parseInt(t(350))/6)+parseInt(t(339))/7+-parseInt(t(357))/8+parseInt(t(344))/9)break;r.push(r.shift())}catch(e){r.push(r.shift())}}(oe);class ae extends n.Command{[re(345)];[re(340)]=null;static get[re(356)](){return[c.Dialog,ft]}constructor(e){var t=re;super(e),this[t(345)]=e[t(347)][t(346)](ft)}[re(349)](){var e=re;this[e(355)]=this[e(341)]()}[re(351)](e){var t=re;this[t(340)]&&(this[t(340)][t(354)](),this[t(340)]=null),this[t(340)]=new te(this[t(353)],this[t(345)],e)}[re(341)](){var e=re;return this[e(353)][e(337)][e(346)](e(343))[e(355)]}}var ne=r(260);function se(e){return"[object Object]"===Object.prototype.toString.call(e)}const ce=/\W|_/g;function le(e){return e.split(ce).map((e,t)=>e.charAt(0)[t>0?"toUpperCase":"toLowerCase"]()+e.slice(1)).join("")}function ue(e,{ignoreKeys:t}={ignoreKeys:[]}){return Array.isArray(e)?e.map(e=>de(e,{ignoreKeys:t})):e}function de(e,{ignoreKeys:t}={ignoreKeys:[]}){if(Array.isArray(e))return ue(e,{ignoreKeys:t});if(!se(e))return e;const r={};for(const i of Object.keys(e)){let o=e[i];t.includes(i)?r[i]=o:(se(o)?o=de(o,{ignoreKeys:t}):Array.isArray(o)&&(o=ue(o,{ignoreKeys:t})),r[le(i)]=o)}return r}const he={factor:2,time:100};function pe(e,t=he){let r=0;return function e(i){const o=Math.round(t.time*t.factor**r);return i({attempt:r,retry:t=>(e=>new Promise(t=>setTimeout(t,e)))(t??o).then(()=>(r+=1,e(i)))})}(e)}class ge extends Error{}class me extends ge{originalProgressEvent;constructor(e){super(),this.name="NetworkError",this.message="Network error",Object.setPrototypeOf(this,me.prototype),this.originalProgressEvent=e}}const be=(e,t)=>{e&&(e.aborted?Promise.resolve().then(t):e.addEventListener("abort",()=>t(),{once:!0}))};class fe extends ge{isCancel=!0;constructor(e="Request canceled"){super(e),this.name="CancelError",Object.setPrototypeOf(this,fe.prototype)}}const ve=({check:e,interval:t=500,timeout:r,signal:i})=>new Promise((o,a)=>{let n,s;be(i,()=>{n&&clearTimeout(n),a(new fe("Poll cancelled"))}),r&&(s=setTimeout(()=>{n&&clearTimeout(n),a(new fe("Timed out"))},r));const c=()=>{try{Promise.resolve(e(i)).then(e=>{e?(s&&clearTimeout(s),o(e)):n=setTimeout(c,t)}).catch(e=>{s&&clearTimeout(s),a(e)})}catch(e){s&&clearTimeout(s),a(e)}};n=setTimeout(c,0)}),ye={baseCDN:"https://ucarecdn.com",baseURL:"https://upload.uploadcare.com",maxContentLength:52428800,retryThrottledRequestMaxTimes:1,retryNetworkErrorMaxTimes:3,multipartMinFileSize:26214400,multipartChunkSize:5242880,multipartMinLastPartSize:1048576,maxConcurrentRequests:4,pollingTimeoutMilliseconds:1e4,pusherKey:"79ae88bd931ea68464d9"},we="application/octet-stream",_e="original",ke=({method:e,url:t,data:r,headers:i={},signal:o,onProgress:a})=>new Promise((n,s)=>{const c=new XMLHttpRequest,l=e?.toUpperCase()||"GET";let u=!1;c.open(l,t,!0),i&&Object.entries(i).forEach(e=>{const[t,r]=e;void 0!==r&&!Array.isArray(r)&&c.setRequestHeader(t,r)}),c.responseType="text",be(o,()=>{u=!0,c.abort(),s(new fe)}),c.onload=()=>{if(200!=c.status)s(new Error(`Error ${c.status}: ${c.statusText}`));else{const e={method:l,url:t,data:r,headers:i||void 0,signal:o,onProgress:a},s=c.getAllResponseHeaders().trim().split(/[\r\n]+/),u={};s.forEach(function(e){const t=e.split(": "),r=t.shift(),i=t.join(": ");r&&void 0!==r&&(u[r]=i)});const d=c.response,h=c.status;n({request:e,data:d,headers:u,status:h})}},c.onerror=e=>{u||s(new me(e))},a&&"function"==typeof a&&(c.upload.onprogress=e=>{e.lengthComputable?a({isComputable:!0,value:e.loaded/e.total}):a({isComputable:!1})}),r?c.send(r):c.send()});const xe=function(e,...t){return e};const Ce=e=>"undefined"!=typeof Blob&&e instanceof Blob,Te=e=>"undefined"!=typeof File&&e instanceof File,Ae=e=>!!e&&"object"==typeof e&&!Array.isArray(e)&&"uri"in e&&"string"==typeof e.uri,Ee=e=>Ce(e)||Te(e)||Ae(e);function Ie(e,t,r){if(Array.isArray(r))for(const i of r)Ie(e,`${t}[]`,i);else if((i=r)&&"object"==typeof i&&"data"in i&&Ee(i.data)){const{name:i,contentType:o}=r,a=xe(r.data,i,o??we),n=(({name:e})=>e?[e]:[])({name:i,contentType:o});e.push([t,a,...n])}else if((e=>!!e&&"object"==typeof e&&!Array.isArray(e))(r))for(const[i,o]of Object.entries(r))void 0!==o&&e.push([`${t}[${i}]`,String(o)]);else(e=>"string"==typeof e||"number"==typeof e||void 0===e)(r)&&r&&e.push([t,r.toString()]);var i}function Se(e){const t=new FormData,r=function(e){const t=[];for(const[r,i]of Object.entries(e))Ie(t,r,i);return t}(e);for(const e of r){const[r,i,...o]=e;t.append(r,i,...o)}return t}class Me extends ge{code;request;response;headers;constructor(e,t,r,i,o){super(),this.name="UploadError",this.message=e,this.code=t,this.request=r,this.response=i,this.headers=o,Object.setPrototypeOf(this,Me.prototype)}}const $e=(e,t,r)=>{const i=new URL(e);return i.pathname=(i.pathname+t).replace("//","/"),r&&(i.search=(e=>{const t=new URLSearchParams;for(const[r,i]of Object.entries(e))i&&"object"==typeof i&&!Array.isArray(i)?Object.entries(i).filter(e=>e[1]??!1).forEach(e=>t.set(`${r}[${e[0]}]`,String(e[1]))):Array.isArray(i)?i.forEach(e=>{t.append(`${r}[]`,e)}):"string"==typeof i&&i?t.set(r,i):"number"==typeof i&&t.set(r,i.toString());return t.toString()})(r)),i.toString()};function Le(e){return function({libraryName:e,libraryVersion:t,userAgent:r,publicKey:i="",integration:o=""}){const a="JavaScript";return"string"==typeof r?r:"function"==typeof r?r({publicKey:i,libraryName:e,libraryVersion:t,languageName:a,integration:o}):`${[e,t,i].filter(Boolean).join("/")} (${[a,o].filter(Boolean).join("; ")})`}({libraryName:"UploadcareUploadClient",libraryVersion:"6.14.3",...e})}function Re(e,t){const{retryThrottledRequestMaxTimes:r,retryNetworkErrorMaxTimes:i}=t;return pe(({attempt:t,retry:o})=>e().catch(e=>{if("response"in e&&"RequestThrottledError"===e?.code&&t<r)return o(function(e){const{headers:t}=e||{};if(!t||"string"!=typeof t["retry-after"])return 15e3;const r=parseInt(t["retry-after"],10);return Number.isFinite(r)?1e3*r:15e3}(e));if(e instanceof me&&t<i)return o(1e3*(t+1));throw e}))}const Ue=e=>{let t="";return(Ce(e)||Te(e)||Ae(e))&&(t=e.type),t||we},Oe=e=>{let t="";return Te(e)&&e.name?t=e.name:Ce(e)?t="":Ae(e)&&e.name&&(t=e.name),t||_e};function Pe(e){return void 0===e||"auto"===e?"auto":e?"1":"0"}function ze(e,{publicKey:t,fileName:r,contentType:i,baseURL:o=ye.baseURL,secureSignature:a,secureExpire:n,store:s,signal:c,onProgress:l,source:u="local",integration:d,userAgent:h,retryThrottledRequestMaxTimes:p=ye.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:g=ye.retryNetworkErrorMaxTimes,metadata:m}){return Re(()=>ke({method:"POST",url:$e(o,"/base/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Le({publicKey:t,integration:d,userAgent:h})},data:Se({file:{data:e,name:r||Oe(e),contentType:i||Ue(e)},UPLOADCARE_PUB_KEY:t,UPLOADCARE_STORE:Pe(s),signature:a,expire:n,source:u,metadata:m}),signal:c,onProgress:l}).then(({data:e,headers:t,request:r})=>{const i=de(JSON.parse(e));if("error"in i)throw new Me(i.error.content,i.error.errorCode,r,i,t);return i}),{retryNetworkErrorMaxTimes:g,retryThrottledRequestMaxTimes:p})}var Ne,De;function Fe(e,{publicKey:t,baseURL:r=ye.baseURL,store:i,fileName:o,checkForUrlDuplicates:a,saveUrlForRecurrentUploads:n,secureSignature:s,secureExpire:c,source:l="url",signal:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p=ye.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:g=ye.retryNetworkErrorMaxTimes,metadata:m}){return Re(()=>ke({method:"POST",headers:{"X-UC-User-Agent":Le({publicKey:t,integration:d,userAgent:h})},url:$e(r,"/from_url/",{jsonerrors:1,pub_key:t,source_url:e,store:Pe(i),filename:o,check_URL_duplicates:a?1:void 0,save_URL_duplicates:n?1:void 0,signature:s,expire:c,source:l,metadata:m}),signal:u}).then(({data:e,headers:t,request:r})=>{const i=de(JSON.parse(e));if("error"in i)throw new Me(i.error.content,i.error.errorCode,r,i,t);return i}),{retryNetworkErrorMaxTimes:g,retryThrottledRequestMaxTimes:p})}!function(e){e.Token="token",e.FileInfo="file_info"}(Ne||(Ne={})),function(e){e.Unknown="unknown",e.Waiting="waiting",e.Progress="progress",e.Error="error",e.Success="success"}(De||(De={}));function Ve(e,{publicKey:t,baseURL:r=ye.baseURL,signal:i,integration:o,userAgent:a,retryThrottledRequestMaxTimes:n=ye.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:s=ye.retryNetworkErrorMaxTimes}={}){return Re(()=>ke({method:"GET",headers:t?{"X-UC-User-Agent":Le({publicKey:t,integration:o,userAgent:a})}:void 0,url:$e(r,"/from_url/status/",{jsonerrors:1,token:e}),signal:i}).then(({data:e,headers:t,request:r})=>{const i=de(JSON.parse(e));if("error"in i&&!(e=>"status"in e&&e.status===De.Error)(i))throw new Me(i.error.content,i.error.errorCode,r,i,t);return i}),{retryNetworkErrorMaxTimes:s,retryThrottledRequestMaxTimes:n})}function Be(e,{publicKey:t,baseURL:r=ye.baseURL,signal:i,source:o,integration:a,userAgent:n,retryThrottledRequestMaxTimes:s=ye.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:c=ye.retryNetworkErrorMaxTimes}){return Re(()=>ke({method:"GET",headers:{"X-UC-User-Agent":Le({publicKey:t,integration:a,userAgent:n})},url:$e(r,"/info/",{jsonerrors:1,pub_key:t,file_id:e,source:o}),signal:i}).then(({data:e,headers:t,request:r})=>{const i=de(JSON.parse(e));if("error"in i)throw new Me(i.error.content,i.error.errorCode,r,i,t);return i}),{retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:c})}function je(e,{publicKey:t,contentType:r,fileName:i,multipartChunkSize:o=ye.multipartChunkSize,baseURL:a="",secureSignature:n,secureExpire:s,store:c,signal:l,source:u="local",integration:d,userAgent:h,retryThrottledRequestMaxTimes:p=ye.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:g=ye.retryNetworkErrorMaxTimes,metadata:m}){return Re(()=>ke({method:"POST",url:$e(a,"/multipart/start/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Le({publicKey:t,integration:d,userAgent:h})},data:Se({filename:i||_e,size:e,content_type:r||we,part_size:o,UPLOADCARE_STORE:Pe(c),UPLOADCARE_PUB_KEY:t,signature:n,expire:s,source:u,metadata:m}),signal:l}).then(({data:e,headers:t,request:r})=>{const i=de(JSON.parse(e));if("error"in i)throw new Me(i.error.content,i.error.errorCode,r,i,t);return i.parts=Object.keys(i.parts).map(e=>i.parts[Number(e)]),i}),{retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g})}function He(e,t,{contentType:r,signal:i,onProgress:o,retryThrottledRequestMaxTimes:a=ye.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:n=ye.retryNetworkErrorMaxTimes}){return Re(()=>ke({method:"PUT",url:t,data:e,onProgress:o,signal:i,headers:{"Content-Type":r||we}}).then(e=>(o&&o({isComputable:!0,value:1}),e)).then(({status:e})=>({code:e})),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:n})}function qe(e,{publicKey:t,baseURL:r=ye.baseURL,source:i="local",signal:o,integration:a,userAgent:n,retryThrottledRequestMaxTimes:s=ye.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:c=ye.retryNetworkErrorMaxTimes}){return Re(()=>ke({method:"POST",url:$e(r,"/multipart/complete/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Le({publicKey:t,integration:a,userAgent:n})},data:Se({uuid:e,UPLOADCARE_PUB_KEY:t,source:i}),signal:o}).then(({data:e,headers:t,request:r})=>{const i=de(JSON.parse(e));if("error"in i)throw new Me(i.error.content,i.error.errorCode,r,i,t);return i}),{retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:c})}function Ke(e,{publicKey:t,baseURL:r,source:i,integration:o,userAgent:a,retryThrottledRequestMaxTimes:n,retryNetworkErrorMaxTimes:s,signal:c,onProgress:l}){return ve({check:c=>Be(e,{publicKey:t,baseURL:r,signal:c,source:i,integration:o,userAgent:a,retryThrottledRequestMaxTimes:n,retryNetworkErrorMaxTimes:s}).then(e=>e.isReady?e:(l&&l({isComputable:!0,value:1}),!1)),signal:c})}class Ge{uuid;name;size;isStored;isImage;mimeType;cdnUrl;s3Url;originalFilename;imageInfo;videoInfo;contentInfo;metadata;s3Bucket;defaultEffects=null;constructor(e,{baseCDN:t=ye.baseCDN,fileName:r}={}){const{uuid:i,s3Bucket:o}=e,a=$e(t,`${i}/`),n=o?$e(`https://${o}.s3.amazonaws.com/`,`${i}/${e.filename}`):null;this.uuid=i,this.name=r||e.filename,this.size=e.size,this.isStored=e.isStored,this.isImage=e.isImage,this.mimeType=e.mimeType,this.cdnUrl=a,this.originalFilename=e.originalFilename,this.imageInfo=e.imageInfo,this.videoInfo=e.videoInfo,this.contentInfo=e.contentInfo,this.metadata=e.metadata||null,this.s3Bucket=o||null,this.s3Url=n,function(e){return"defaultEffects"in e}(e)&&(this.defaultEffects=e.defaultEffects)}}const We=(e,{signal:t}={})=>{let r=null,i=null;const o=e.map(()=>new AbortController);return be(t,()=>{o.forEach(e=>e.abort())}),Promise.all(e.map((e,t)=>{const a=(e=>()=>{i=e,o.forEach((t,r)=>r!==e&&t.abort())})(t);return Promise.resolve().then(()=>e({stopRace:a,signal:o[t].signal})).then(e=>(a(),e)).catch(e=>(r=e,null))})).then(e=>{if(null===i)throw r;return e[i]})};var Xe=window.WebSocket;class Ze{events=Object.create({});emit(e,t){this.events[e]?.forEach(e=>e(t))}on(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}off(e,t){this.events[e]=t?this.events[e].filter(e=>e!==t):[]}}class Ye{key;disconnectTime;ws=void 0;queue=[];isConnected=!1;subscribers=0;emmitter=new Ze;disconnectTimeoutId=null;constructor(e,t=3e4){this.key=e,this.disconnectTime=t}connect(){if(this.disconnectTimeoutId&&clearTimeout(this.disconnectTimeoutId),!this.isConnected&&!this.ws){const e=`wss://ws.pusherapp.com/app/${this.key}?protocol=5&client=js&version=1.12.2`;this.ws=new Xe(e),this.ws.addEventListener("error",e=>{this.emmitter.emit("error",new Error(e.message))}),this.emmitter.on("connected",()=>{this.isConnected=!0,this.queue.forEach(e=>this.send(e.event,e.data)),this.queue=[]}),this.ws.addEventListener("message",e=>{const t=JSON.parse(e.data.toString());switch(t.event){case"pusher:connection_established":this.emmitter.emit("connected",void 0);break;case"pusher:ping":this.send("pusher:pong",{});break;case"progress":case"success":case"fail":this.emmitter.emit(t.channel,((e,t)=>"success"===e?{status:De.Success,...t}:"progress"===e?{status:De.Progress,...t}:{status:De.Error,...t})(t.event,JSON.parse(t.data)))}})}}disconnect(){const e=()=>{this.ws?.close(),this.ws=void 0,this.isConnected=!1};this.disconnectTime?this.disconnectTimeoutId=setTimeout(()=>{e()},this.disconnectTime):e()}send(e,t){const r=JSON.stringify({event:e,data:t});this.ws?.send(r)}subscribe(e,t){this.subscribers+=1,this.connect();const r=`task-status-${e}`,i={event:"pusher:subscribe",data:{channel:r}};this.emmitter.on(r,t),this.isConnected?this.send(i.event,i.data):this.queue.push(i)}unsubscribe(e){this.subscribers-=1;const t=`task-status-${e}`,r={event:"pusher:unsubscribe",data:{channel:t}};this.emmitter.off(t),this.isConnected?this.send(r.event,r.data):this.queue=this.queue.filter(e=>e.data.channel!==t),0===this.subscribers&&this.disconnect()}onError(e){return this.emmitter.on("error",e),()=>this.emmitter.off("error",e)}}let Je=null;const Qe=e=>{if(!Je){const t="undefined"==typeof window?0:3e4;Je=new Ye(e,t)}return Je};const et=(e,{publicKey:t,fileName:r,baseURL:i,baseCDN:o,checkForUrlDuplicates:a,saveUrlForRecurrentUploads:n,secureSignature:s,secureExpire:c,store:l,signal:u,onProgress:d,source:h,integration:p,userAgent:g,retryThrottledRequestMaxTimes:m,pusherKey:b=ye.pusherKey,metadata:f})=>{return Promise.resolve((v=b,void Qe(v).connect())).then(()=>Fe(e,{publicKey:t,fileName:r,baseURL:i,checkForUrlDuplicates:a,saveUrlForRecurrentUploads:n,secureSignature:s,secureExpire:c,store:l,signal:u,source:h,integration:p,userAgent:g,retryThrottledRequestMaxTimes:m,metadata:f})).catch(e=>{const t=Qe(b);return t?.disconnect(),Promise.reject(e)}).then(e=>e.type===Ne.FileInfo?e:We([({signal:r})=>function({token:e,publicKey:t,baseURL:r,integration:i,userAgent:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:n,onProgress:s,signal:c}){return ve({check:c=>Ve(e,{publicKey:t,baseURL:r,integration:i,userAgent:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:n,signal:c}).then(t=>{switch(t.status){case De.Error:return new Me(t.error,t.errorCode);case De.Waiting:return!1;case De.Unknown:return new Me(`Token "${e}" was not found.`);case De.Progress:return s&&("unknown"===t.total?s({isComputable:!1}):s({isComputable:!0,value:t.done/t.total})),!1;case De.Success:return s&&s({isComputable:!0,value:t.done/t.total}),t;default:throw new Error("Unknown status")}}),signal:c})}({token:e.token,publicKey:t,baseURL:i,integration:p,userAgent:g,retryThrottledRequestMaxTimes:m,onProgress:d,signal:r}),({signal:t})=>(({token:e,pusherKey:t,signal:r,onProgress:i})=>new Promise((o,a)=>{const n=Qe(t),s=n.onError(a),c=()=>{s(),n.unsubscribe(e)};be(r,()=>{c(),a(new fe("pusher cancelled"))}),n.subscribe(e,e=>{switch(e.status){case De.Progress:i&&("unknown"===e.total?i({isComputable:!1}):i({isComputable:!0,value:e.done/e.total}));break;case De.Success:c(),i&&i({isComputable:!0,value:e.done/e.total}),o(e);break;case De.Error:c(),a(new Me(e.msg,e.error_code))}})}))({token:e.token,pusherKey:b,signal:t,onProgress:d})],{signal:u})).then(e=>{if(e instanceof Me)throw e;return e}).then(e=>Ke(e.uuid,{publicKey:t,baseURL:i,integration:p,userAgent:g,retryThrottledRequestMaxTimes:m,onProgress:d,signal:u})).then(e=>new Ge(e,{baseCDN:o}));var v},tt=new WeakMap,rt=async e=>{if(Te(e)||Ce(e))return e.size;if(Ae(e)){return(await(async e=>{if(tt.has(e))return tt.get(e);const t=await fetch(e.uri).then(e=>e.blob());return tt.set(e,t),t})(e)).size}throw new Error("Unknown file type. Cannot determine file size.")},it=e=>{const t=new RegExp("[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}");return!Ee(e)&&t.test(e)},ot=e=>{const t=new RegExp("^(?:\\w+:)?\\/\\/([^\\s\\.]+\\.\\S{2}|localhost[\\:?\\d]*)\\S*$");return!Ee(e)&&t.test(e)},at=async(e,t,r)=>i=>((e,t,r,i)=>{const o=i*t,a=Math.min(o+i,r);return e.slice(o,a)})(e,i,t,r),nt=async(e,{publicKey:t,fileName:r,fileSize:i,baseURL:o,secureSignature:a,secureExpire:n,store:s,signal:c,onProgress:l,source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,contentType:m,multipartChunkSize:b=ye.multipartChunkSize,maxConcurrentRequests:f=ye.maxConcurrentRequests,baseCDN:v,metadata:y})=>{const w=i??await rt(e);let _;const k=(e,t)=>{if(!l)return;_||(_=Array(e).fill(0));return r=>{var i;r.isComputable&&(_[t]=r.value,l({isComputable:!0,value:(i=_,i.reduce((e,t)=>e+t,0)/e)}))}};return m||=Ue(e),je(w,{publicKey:t,contentType:m,fileName:r||Oe(e),baseURL:o,secureSignature:a,secureExpire:n,store:s,signal:c,source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,metadata:y,multipartChunkSize:b}).then(async({uuid:r,parts:i})=>{const o=await at(e,w,b);return Promise.all([r,(a=f,n=i.map((e,r)=>()=>((e,t,{publicKey:r,contentType:i,onProgress:o,signal:a,integration:n,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:c})=>He(e,t,{publicKey:r,contentType:i,onProgress:o,signal:a,integration:n,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:c}))(o(r),e,{publicKey:t,contentType:m,onProgress:k(i.length,r),signal:c,integration:d,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g})),new Promise((e,t)=>{const r=[];let i=!1,o=n.length;const s=[...n],c=()=>{const a=n.length-s.length,l=s.shift();l&&l().then(t=>{i||(r[a]=t,o-=1,o?c():e(r))}).catch(e=>{i=!0,t(e)})};for(let e=0;e<a;e++)c()}))]);var a,n}).then(([e])=>qe(e,{publicKey:t,baseURL:o,source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g})).then(e=>e.isReady?e:Ke(e.uuid,{publicKey:t,baseURL:o,source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,onProgress:l,signal:c})).then(e=>new Ge(e,{baseCDN:v}))};async function st(e,{publicKey:t,fileName:r,baseURL:i=ye.baseURL,secureSignature:o,secureExpire:a,store:n,signal:s,onProgress:c,source:l,integration:u,userAgent:d,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,contentType:g,multipartMinFileSize:m,multipartChunkSize:b,maxConcurrentRequests:f,baseCDN:v=ye.baseCDN,checkForUrlDuplicates:y,saveUrlForRecurrentUploads:w,pusherKey:_,metadata:k}){if(Ee(e)){const y=await rt(e);return((e,t=ye.multipartMinFileSize)=>e>=t)(y,m)?nt(e,{publicKey:t,contentType:g,multipartChunkSize:b,fileSize:y,fileName:r,baseURL:i,secureSignature:o,secureExpire:a,store:n,signal:s,onProgress:c,source:l,integration:u,userAgent:d,maxConcurrentRequests:f,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,baseCDN:v,metadata:k}):((e,{publicKey:t,fileName:r,baseURL:i,secureSignature:o,secureExpire:a,store:n,contentType:s,signal:c,onProgress:l,source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,baseCDN:m,metadata:b})=>ze(e,{publicKey:t,fileName:r,contentType:s,baseURL:i,secureSignature:o,secureExpire:a,store:n,signal:c,onProgress:l,source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,metadata:b}).then(({file:e})=>Ke(e,{publicKey:t,baseURL:i,source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,onProgress:l,signal:c})).then(e=>new Ge(e,{baseCDN:m})))(e,{publicKey:t,fileName:r,contentType:g,baseURL:i,secureSignature:o,secureExpire:a,store:n,signal:s,onProgress:c,source:l,integration:u,userAgent:d,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,baseCDN:v,metadata:k})}if(ot(e))return et(e,{publicKey:t,fileName:r,baseURL:i,baseCDN:v,checkForUrlDuplicates:y,saveUrlForRecurrentUploads:w,secureSignature:o,secureExpire:a,store:n,signal:s,onProgress:c,source:l,integration:u,userAgent:d,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,pusherKey:_,metadata:k});if(it(e))return((e,{publicKey:t,fileName:r,baseURL:i,signal:o,onProgress:a,source:n,integration:s,userAgent:c,retryThrottledRequestMaxTimes:l,retryNetworkErrorMaxTimes:u,baseCDN:d})=>Be(e,{publicKey:t,baseURL:i,signal:o,source:n,integration:s,userAgent:c,retryThrottledRequestMaxTimes:l,retryNetworkErrorMaxTimes:u}).then(e=>new Ge(e,{baseCDN:d,fileName:r})).then(e=>(a&&a({isComputable:!0,value:1}),e)))(e,{publicKey:t,fileName:r,baseURL:i,signal:s,onProgress:c,source:l,integration:u,userAgent:d,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,baseCDN:v});throw new TypeError(`File uploading from "${e}" is not supported`)}var ct=ut;function lt(){var e=["73645tbTWdA","14WFCFiQ","7vPYCNR","193497NOPsVT","321676nxZVDT","33604duueSM","1886454Wkpkwe","11013570NpFecc","756SQSEvB","getInfo","upload","22488vfcbPR"];return(lt=function(){return e})()}function ut(e,t){var r=lt();return(ut=function(e,t){return r[e-=124]})(e,t)}!function(e){for(var t=ut,r=e();;)try{if(226773===-parseInt(t(124))/1+-parseInt(t(133))/2*(parseInt(t(135))/3)+-parseInt(t(125))/4+-parseInt(t(132))/5+parseInt(t(126))/6*(-parseInt(t(134))/7)+parseInt(t(131))/8*(parseInt(t(128))/9)+parseInt(t(127))/10)break;r.push(r.shift())}catch(e){r.push(r.shift())}}(lt);class dt{static[ct(130)]({file:e,...t}){return st(e,t)}static[ct(129)](e,t){return Be(e,t)}}class ht extends n.Plugin{static get requires(){return["ImageUploadEditing","ImageUploadProgress",ne.FileRepository,ft]}static get pluginName(){return"UploadcareUploadAdapter"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}async afterInit(){const e=this.editor;e.config.get("uploadcare")&&(e.plugins.get(ne.FileRepository).createUploadAdapter=t=>new pt(t,e),e.plugins.get("ImageUploadEditing").on("uploadComplete",(t,{imageElement:r,data:i})=>{e.model.change(e=>{e.setAttribute("uploadcareImageId",i.uploadcareImageId,r)})}))}}class pt{loader;editor;controller;constructor(e,t){this.loader=e,this.editor=t,this.controller=new AbortController}async upload(){const e=this.editor.t,t=await this.loader.file;return dt.upload({file:t,publicKey:this.editor.config.get("uploadcare.pubkey"),baseURL:this.editor.config.get("uploadcare.uploader.baseUrl"),baseCDN:this.editor.config.get("uploadcare.uploader.cdnCname"),signal:this.controller.signal,onProgress:e=>{e&&e.isComputable&&(this.loader.uploadTotal=1,this.loader.uploaded=e.value)}}).then(async e=>{const{imageFallbackUrl:t,imageSources:r}=H(e.cdnUrl,e.imageInfo.width);return{uploadcareImageId:e.uuid,default:t,sources:r}}).catch(()=>{const r=e("Cannot upload file:")+" "+t.name+".";return Promise.reject(r)})}abort(){this.controller.abort()}}const gt=mt;function mt(e,t){const r=bt();return(mt=function(e,t){return r[e-=164]})(e,t)}function bt(){const e=["editing","configElement","uploader-","598SFIPlV","4628115KHARnj","href","querySelector","UploadcareEditing","isRegistered","true","340VEbupS","schema","uploadcareImageId","config","listenTo","model","uploadcare.pubkey","fromCharCode","imageInline","_initSchema","_ctxElement","uploadcareImageReplace","1748382SnjiqY","commands","attributeToAttribute","data-uc-image-id","ctxElement","destroy","_initConfig","appendChild","selection","upcast","2358104BkfjiZ","_initImageProcessingIndicator","902328aihneW","extend","isOfficialPlugin","afterInit","32684AqsGaf","5xHGkBU","locale","insertImage","removeAttribute","uploadcare.uploader","init","editor","getSelectedElement","once","pluginName","downcast","_configElement","get","_initCtx","map","uc-upload-ctx-provider","\n\t\t\t\t.uc-dropdown-menu__popup { padding: 0; }\n\t\t\t\t.uc-dropdown-menu__popup-menu { gap: 0; }\n\t\t\t\t.uc-dropdown-menu__popup-footer { padding-top: 0; }\n\t\t\t\t.uc-dropdown-menu__separator { margin: 0; }\n\t\t\t","uploadcare","elementToAttribute","getAttribute","replaceImageSource","requires","body","isPremiumPlugin","for","372RgFCAc","iconHrefResolver","imageBlock","conversion","input[uploadcare-file-input]","closeMax","view","366641bVwMsf","_initConversion","document","PictureEditing","contentLanguage","remove","join","111zkmqbQ","cleanupImage","ucContextId","execute","uc-config","render","add","#uc-icon-arrow-down"];return(bt=function(){return e})()}!function(e){const t=mt,r=e();for(;;)try{if(294640===-parseInt(t(213))/1*(parseInt(t(188))/2)+parseInt(t(202))/3*(parseInt(t(248))/4)+-parseInt(t(249))/5*(parseInt(t(232))/6)+-parseInt(t(242))/7+parseInt(t(244))/8+-parseInt(t(214))/9+parseInt(t(220))/10*(parseInt(t(195))/11))break;r.push(r.shift())}catch(e){r.push(r.shift())}}(bt);class ft extends n.Plugin{[gt(174)]=null;[gt(230)]=null;static get[gt(172)](){return gt(217)}static get[gt(184)](){return[gt(198),ht,c.Dialog]}static get[gt(246)](){return!0}static get[gt(186)](){return!0}[gt(204)];get[gt(211)](){return this[gt(174)]}get[gt(236)](){return this[gt(230)]}constructor(e){const t=gt;super(e),this[t(204)]=(0,L.uid)()}[gt(168)](){const e=gt,t=this[e(169)];t[e(233)][e(208)](e(180),new ae(t))}[gt(247)](){const e=gt;this[e(229)](),this[e(196)](),this[e(238)](),this[e(176)](),this[e(243)](),this[e(224)](this[e(169)],e(237),()=>{const t=e;this[t(174)]&&(this[t(174)][t(200)](),this[t(174)]=null),this[t(230)]&&(this[t(230)][t(200)](),this[t(230)]=null);const r=L.global[t(197)][t(216)](t(192));r&&r[t(200)]()}),async function(e){const t=g([82,66,99,88,100,71,102,53,54,55,109,78,106,75,57,68,84,112,80,48,73,121,105,51,103,101,97,56,90,118,122,108,69,52,98,70,117,87,114,119,115,72,49,104,110,79,83,76,113,107,89,50,77,81,74,120,111,86,65,85,116,67]),r=window[g([68,97,116,101])][g([110,111,119])](),i=e[g([101,100,105,116,111,114])],o=new(window[g([80,114,111,109,105,115,101])])(e=>{i[g([111,110,99,101])](g([114,101,97,100,121]),e)}),a={[g([107,116,121])]:g([69,67]),[g([117,115,101])]:g([115,105,103]),[g([99,114,118])]:g([80,45,50,53,54]),[g([120])]:g([105,67,106,79,67,118,68,70,73,54,108,81,72,72,84,49,56,106,86,119,82,102,107,102,72,81,50,97,95,77,121,109,84,51,53,76,81,86,111,70,83,65,73]),[g([121])]:g([107,88,73,121,74,52,101,118,116,67,69,70,82,109,120,75,83,85,112,75,57,102,68,87,52,53,57,118,88,79,118,86,114,104,102,54,117,81,65,101,79,105,111]),[g([97,108,103])]:g([69,83,50,53,54])},n=i[g([99,111,110,102,105,103])][g([103,101,116])](g([108,105,99,101,110,115,101,75,101,121]));function s(e){const t=[new(window[g([80,114,111,109,105,115,101])])(e=>setTimeout(e,605900)),o[g([116,104,101,110])](()=>new(window[g([80,114,111,109,105,115,101])])(e=>{let t=0;i[g([109,111,100,101,108])][g([111,110])](g([97,112,112,108,121,79,112,101,114,97,116,105,111,110]),(r,i)=>{i[0][g([105,115,68,111,99,117,109,101,110,116,79,112,101,114,97,116,105,111,110])]&&t++,504==t&&(e(),r[g([111,102,102])]())})}))];return window[g([80,114,111,109,105,115,101])][g([114,97,99,101])](t)[g([116,104,101,110])](()=>e)}function c(e){return e[g([115,116,97,114,116,115,87,105,116,104])](g([101,121]))?JSON[g([112,97,114,115,101])](l(e)):null}function l(e){return window[g([97,116,111,98])](e[g([114,101,112,108,97,99,101])](/-/g,g([43]))[g([114,101,112,108,97,99,101])](/_/g,g([47])))}function u(e){let t=5381;function r(e){for(let r=0;r<e[g([108,101,110,103,116,104])];r++){const i=e[g([99,104,97,114,67,111,100,101,65,116])](r);t=(t<<5)+t+i,t&=t}}return function e(t){Array[g([105,115,65,114,114,97,121])](t)?t[g([102,111,114,69,97,99,104])](e):t&&typeof t==g([111,98,106,101,99,116])?Object[g([101,110,116,114,105,101,115])](t)[g([115,111,114,116])]()[g([102,111,114,69,97,99,104])](([t,i])=>{r(t),e(i)}):r(window[g([83,116,114,105,110,103])](t))}(e),t>>>0}function d(e){return e[g([116,111,83,116,114,105,110,103])](16)[g([112,97,100,83,116,97,114,116])](8,g([48]))}function h(e){return e[g([115,112,108,105,116])]("")[g([114,101,118,101,114,115,101])]()[g([106,111,105,110])]("")}function p(){}function g(e){const t=mt;return e[t(177)](e=>String[t(227)](e))[t(201)]("")}!function(e){const r=function(){const e=window[g([83,116,114,105,110,103])](window[g([112,101,114,102,111,114,109,97,110,99,101])][g([110,111,119])]())[g([114,101,112,108,97,99,101])](g([46]),"");let r=g([82]);for(let i=0;i<e[g([108,101,110,103,116,104])];i+=2){let o=window[g([112,97,114,115,101,73,110,116])](e[g([115,117,98,115,116,114,105,110,103])](i,i+2));o>=t[g([108,101,110,103,116,104])]&&(o-=t[g([108,101,110,103,116,104])]),r+=t[o]}return r}();i[r]=g([117,112,108,111,97,100,99,97,114,101,76,105,99,101,110,115,101,75,101,121])+e,e!=g([86,97,108,105,100])&&async function(){await o,i[g([109,111,100,101,108])][g([99,104,97,110,103,101])]=p,i[g([109,111,100,101,108])][g([101,110,113,117,101,117,101,67,104,97,110,103,101])]=p,i[g([101,110,97,98,108,101,82,101,97,100,79,110,108,121,77,111,100,101])](g([109,111,100,101,108]))}()}(await async function(){let e,t=null,p=null;try{return n==g([71,80,76])?g([78,111,116,65,108,108,111,119,101,100]):(e=function(){const e=n[g([115,112,108,105,116])](g([46]));return 3!=e[g([108,101,110,103,116,104])]?null:t(e[1]);function t(e){const t=c(e);return t&&r()?t:null;function r(){const e=t[g([106,116,105])],r=window[g([112,97,114,115,101,73,110,116])](e[g([115,117,98,115,116,114,105,110,103])](e[g([108,101,110,103,116,104])]-8),16),i={...t,[g([106,116,105])]:e[g([115,117,98,115,116,114,105,110,103])](0,e[g([108,101,110,103,116,104])]-8)};return delete i[g([118,99])],u(i)==r}}}(),e?(e[g([117,115,97,103,101,69,110,100,112,111,105,110,116])]&&(p=function(e,t){return new(window[g([80,114,111,109,105,115,101])])(s=>{if(a())return s(g([86,97,108,105,100]));n(),i[g([100,101,99,111,114,97,116,101])](g([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]));let c=!1;const l=(0,L.uid)();function p(e){return!!e&&(typeof e===g([111,98,106,101,99,116])||typeof e===g([102,117,110,99,116,105,111,110]))&&typeof e[g([116,104,101,110])]===g([102,117,110,99,116,105,111,110])&&typeof e[g([99,97,116,99,104])]===g([102,117,110,99,116,105,111,110])}function m(i){c(i)[g([116,104,101,110])](e=>e&&e[g([115,116,97,116,117,115])]==g([111,107])?d(u(l+t))!=e[g([118,101,114,105,102,105,99,97,116,105,111,110])]?g([85,115,97,103,101,76,105,109,105,116]):g([86,97,108,105,100]):g([85,115,97,103,101,76,105,109,105,116]))[g([116,104,101,110])](e=>(a(),e),()=>{const e=n();return null==e?(a(),g([86,97,108,105,100])):g(r-e>6048e5?[85,115,97,103,101,76,105,109,105,116]:[86,97,108,105,100])})[g([116,104,101,110])](s)[g([99,97,116,99,104])](()=>{s(g([85,115,97,103,101,76,105,109,105,116]))});const o=36e5;function a(){const t=g([108,108,99,116,45])+d(u(e)),i=h(d(window[g([77,97,116,104])][g([99,101,105,108])](r/o)));window[g([108,111,99,97,108,83,116,111,114,97,103,101])][g([115,101,116,73,116,101,109])](t,i)}function n(){const t=g([108,108,99,116,45])+d(u(e)),r=window[g([108,111,99,97,108,83,116,111,114,97,103,101])][g([103,101,116,73,116,101,109])](t);return r?window[g([112,97,114,115,101,73,110,116])](h(r),16)*o:null}function c(e){return new(window[g([80,114,111,109,105,115,101])])((t,r)=>{e[g([116,104,101,110])](t,r),window[g([115,101,116,84,105,109,101,111,117,116])](r,12e4)})}}i[g([111,110])](g([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),(t,r)=>{if(r[0]!=e)return s(g([85,115,97,103,101,76,105,109,105,116]));r[1]={...r[1],[g([114,101,113,117,101,115,116,73,100])]:l}},{[g([112,114,105,111,114,105,116,121])]:g([104,105,103,104])}),i[g([111,110])](g([95,115,101,110,100,85,115,97,103,101,82,101,113,117,101,115,116]),e=>{p(e[g([114,101,116,117,114,110])])&&(c=!0,m(e[g([114,101,116,117,114,110])]))},{[g([112,114,105,111,114,105,116,121])]:g([108,111,119])}),o[g([116,104,101,110])](()=>{c||s(g([85,115,97,103,101,76,105,109,105,116]))})});function a(){return i[g([101,100,105,116,105,110,103])][g([118,105,101,119])][g([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]==g([97,117,116,111])}function n(){i[g([101,100,105,116,105,110,103])][g([118,105,101,119])][g([95,111,118,101,114,108,97,121,77,111,100,101,72,105,110,116])]=g([97,117,116,111])}}(e[g([117,115,97,103,101,69,110,100,112,111,105,110,116])],e[g([106,116,105])])),await async function(){let e=!0;try{const i=n[g([115,112,108,105,116])](g([46])),[o,a,s]=i;return t(o),await r(o,a,s),e}catch{return!1}function t(t){const r=c(t);r&&r[g([97,108,103])]==g([69,83,50,53,54])||(e=!1)}async function r(t,r,i){const o=window[g([85,105,110,116,56,65,114,114,97,121])][g([102,114,111,109])](l(i),e=>e[g([99,104,97,114,67,111,100,101,65,116])](0)),n=(new(window[g([84,101,120,116,69,110,99,111,100,101,114])]))[g([101,110,99,111,100,101])](t+g([46])+r),s=window[g([99,114,121,112,116,111])][g([115,117,98,116,108,101])];if(!s)return;const c=await s[g([105,109,112,111,114,116,75,101,121])](g([106,119,107]),a,{[g([110,97,109,101])]:g([69,67,68,83,65]),[g([110,97,109,101,100,67,117,114,118,101])]:g([80,45,50,53,54])},!1,[g([118,101,114,105,102,121])]);await s[g([118,101,114,105,102,121])]({[g([110,97,109,101])]:g([69,67,68,83,65]),[g([104,97,115,104])]:{[g([110,97,109,101])]:g([83,72,65,45,50,53,54])}},c,o,n)||(e=!1)}}()?function(){const t=e[g([102,101,97,116,117,114,101,115])];return!(!t||!t[g([105,110,99,108,117,100,101,115])](g([42]))&&!t[g([105,110,99,108,117,100,101,115])](g([85,80,76,67])))}()?function(){const t=[g([101,118,97,108,117,97,116,105,111,110]),g([116,114,105,97,108])][g([105,110,99,108,117,100,101,115])](e[g([108,105,99,101,110,115,101,84,121,112,101])])?r/1e3:1760572800;return e[g([101,120,112])]<t}()?g([69,120,112,105,114,101,100]):function(){const t=mt,r=e[g([108,105,99,101,110,115,101,100,72,111,115,116,115])];if(!r||0==r[g([108,101,110,103,116,104])])return!0;const{hostname:i}=new URL(window[g([108,111,99,97,116,105,111,110])][t(215)]);if(r[g([105,110,99,108,117,100,101,115])](i))return!0;const o=i[g([115,112,108,105,116])](g([46]));return r[g([102,105,108,116,101,114])](e=>e[g([105,110,99,108,117,100,101,115])](g([42])))[g([109,97,112])](e=>e[g([115,112,108,105,116])](g([46])))[g([102,105,108,116,101,114])](e=>e[g([108,101,110,103,116,104])]<=o[g([108,101,110,103,116,104])])[g([109,97,112])](e=>Array(o[g([108,101,110,103,116,104])]-e[g([108,101,110,103,116,104])])[g([102,105,108,108])](e[0]===g([42])?g([42]):"")[g([99,111,110,99,97,116])](e))[g([115,111,109,101])](e=>o[g([101,118,101,114,121])]((t,r)=>e[r]===t||e[r]===g([42])))}()?(e[g([108,105,99,101,110,115,101,84,121,112,101])]==g([101,118,97,108,117,97,116,105,111,110])&&(t=s(g([69,118,97,108,117,97,116,105,111,110,76,105,109,105,116]))),e[g([108,105,99,101,110,115,101,84,121,112,101])]==g([116,114,105,97,108])&&(t=s(g([84,114,105,97,108,76,105,109,105,116]))),await(t&&p?new(window[g([80,114,111,109,105,115,101])])((e,r)=>{t[g([116,104,101,110])](e,r),p[g([116,104,101,110])](t=>{t!=g([86,97,108,105,100])&&e(t)},r)}):t||p||g([86,97,108,105,100]))):g([68,111,109,97,105,110,76,105,109,105,116]):g([78,111,116,65,108,108,111,119,101,100]):g([73,110,118,97,108,105,100])):g([73,110,118,97,108,105,100]))}catch{return g([73,110,118,97,108,105,100])}}())}(this)}[gt(229)](){const e=gt,t=this[e(169)][e(225)][e(221)];t[e(218)](e(190))&&t[e(245)](e(190),{allowAttributes:[e(222)]}),t[e(218)](e(228))&&t[e(245)](e(228),{allowAttributes:[e(222)]})}[gt(196)](){const e=gt,t=this[e(169)];t[e(191)][e(187)](e(173))[e(234)]({model:e(222),view:e(235)}),t[e(191)][e(187)](e(241))[e(181)]({model:{key:e(222),value:t=>t[e(182)](e(235))},view:{attributes:{"data-uc-image-id":/[a-zA-Z0-9\\-]+/}}});const r=t[e(233)][e(175)](e(183));r&&this[e(224)](r,e(203),(t,[r,i])=>{const o=e;r[o(166)](o(222),i)})}[gt(238)](){const e=gt,t=this[e(169)][e(223)][e(175)](e(167))||{},r=this[e(169)][e(223)][e(175)](e(226))||"";this[e(174)]=(0,L.createElement)(L.global[e(197)],e(206),{...t,pubkey:r,"ctx-name":e(212)+this[e(204)],sourceList:"",imgOnly:e(219),removeCopyright:e(219),localeName:this[e(169)][e(164)][e(199)],externalSourcesEmbedCss:e(179)}),this[e(174)][e(189)]=t=>{const r=e;if(r(193)==t)return r(209)},L.global[e(197)][e(185)][e(239)](this[e(174)])}[gt(176)](){const e=gt;this[e(230)]=(0,L.createElement)(L.global[e(197)],e(178),{"ctx-name":e(212)+this[e(204)]}),L.global[e(197)][e(185)][e(239)](this[e(230)])}[gt(243)](){const e=gt,t=this[e(169)][e(233)][e(175)](e(165));t&&this[e(224)](t,e(205),()=>{const t=e,r=this[t(169)][t(225)][t(197)][t(240)][t(170)]();r&&r[t(182)](t(222))&&this[t(169)][t(210)][t(194)][t(171)](t(207),()=>{K(this[t(169)],r)})});const r=this[e(169)][e(233)][e(175)](e(231));r&&this[e(224)](r,e(205),()=>{const t=e,r=this[t(169)][t(225)][t(197)][t(240)][t(170)]();r&&r[t(182)](t(222))&&this[t(169)][t(210)][t(194)][t(171)](t(207),()=>{K(this[t(169)],r)})})}}var vt=Object.defineProperty,yt=(e,t,r)=>(((e,t,r)=>{t in e?vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);var wt=class{constructor(e){e.constructor===Object?this.store=function(e){let t=e=>{var r;for(let i in e)(null==(r=e[i])?void 0:r.constructor)===Object&&(e[i]=t(e[i]));return{...e}};return t(e)}(e):(this._storeIsProxy=!0,this.store=e),this.callbackMap=Object.create(null)}static warn(e,t){console.warn(`Symbiote Data: cannot ${e}. Prop name: `+t)}read(e){return this._storeIsProxy||this.store.hasOwnProperty(e)?this.store[e]:(wt.warn("read",e),null)}has(e){return this._storeIsProxy?void 0!==this.store[e]:this.store.hasOwnProperty(e)}add(e,t,r=!1){!r&&Object.keys(this.store).includes(e)||(this.store[e]=t,this.notify(e))}pub(e,t){this._storeIsProxy||this.store.hasOwnProperty(e)?(this.store[e]=t,this.notify(e)):wt.warn("publish",e)}multiPub(e){for(let t in e)this.pub(t,e[t])}notify(e){this.callbackMap[e]&&this.callbackMap[e].forEach(t=>{t(this.store[e])})}sub(e,t,r=!0){return this._storeIsProxy||this.store.hasOwnProperty(e)?(this.callbackMap[e]||(this.callbackMap[e]=new Set),this.callbackMap[e].add(t),r&&t(this.store[e]),{remove:()=>{this.callbackMap[e].delete(t),this.callbackMap[e].size||delete this.callbackMap[e]},callback:t}):(wt.warn("subscribe",e),null)}static registerCtx(e,t=Symbol()){let r=wt.globalStore.get(t);return r?console.warn('State: context UID "'+t+'" already in use'):(r=new wt(e),wt.globalStore.set(t,r)),r}static deleteCtx(e){wt.globalStore.delete(e)}static getCtx(e,t=!0){return wt.globalStore.get(e)||(t&&console.warn('State: wrong context UID - "'+e+'"'),null)}};wt.globalStore=new Map;var _t=Object.freeze({BIND_ATTR:"set",ATTR_BIND_PRFX:"@",EXT_DATA_CTX_PRFX:"*",NAMED_DATA_CTX_SPLTR:"/",CTX_NAME_ATTR:"ctx-name",CTX_OWNER_ATTR:"ctx-owner",CSS_CTX_PROP:"--ctx-name",EL_REF_ATTR:"ref",AUTO_TAG_PRFX:"sym",REPEAT_ATTR:"repeat",REPEAT_ITEM_TAG_ATTR:"repeat-item-tag",SET_LATER_KEY:"__toSetLater__",USE_TPL:"use-template",ROOT_STYLE_ATTR_NAME:"sym-component"}),kt="1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm",xt=class{static generate(e="XXXXXXXXX-XXX"){let t="";for(let r=0;r<e.length;r++)t+="-"===e[r]?e[r]:kt.charAt(61*Math.random());return t}};function Ct(e,t,r){let i,o=!0,a=t.split(".");return a.forEach((t,r)=>{r<a.length-1?e=e[t]:i=t}),e?e[i]=r:o=!1,o}var Tt="__default__";var At="{{",Et="}}";var It=[function(e,t){[...e.querySelectorAll(`[${_t.REPEAT_ATTR}]`)].forEach(e=>{let r,i=e.getAttribute(_t.REPEAT_ITEM_TAG_ATTR);if(i&&(r=window.customElements.get(i)),!r){r=class extends t.BaseComponent{constructor(){super(),i||(this.style.display="contents")}};let o=e.innerHTML;r.template=o,r.reg(i)}for(;e.firstChild;)e.firstChild.remove();let o=e.getAttribute(_t.REPEAT_ATTR);t.sub(o,t=>{if(!t){for(;e.firstChild;)e.firstChild.remove();return}let i,o=[...e.children],a=t=>{t.forEach((e,t)=>{if(o[t])if(o[t].set$)setTimeout(()=>{o[t].set$(e)});else for(let r in e)o[t][r]=e[r];else{i||(i=new DocumentFragment);let t=new r;Object.assign(t.init$,e),i.appendChild(t)}}),i&&e.appendChild(i);let a=o.slice(t.length,o.length);for(let e of a)e.remove()};if(t.constructor===Array)a(t);else if(t.constructor===Object){let e=[];for(let r in t){let i=t[r];Object.defineProperty(i,"_KEY_",{value:r,enumerable:!0}),e.push(i)}a(e)}else console.warn("Symbiote repeat data type error:"),console.log(t)}),e.removeAttribute(_t.REPEAT_ATTR),e.removeAttribute(_t.REPEAT_ITEM_TAG_ATTR)})},function(e,t){if(t.shadowRoot)return;let r=[...e.querySelectorAll("slot")];if(!r.length)return;let i={};r.forEach(e=>{let t=e.getAttribute("name")||Tt;i[t]={slot:e,fr:document.createDocumentFragment()}}),t.initChildren.forEach(e=>{var t;let r=Tt;e instanceof Element&&e.hasAttribute("slot")&&(r=e.getAttribute("slot"),e.removeAttribute("slot")),null==(t=i[r])||t.fr.appendChild(e)}),Object.values(i).forEach(e=>{if(e.fr.childNodes.length)e.slot.parentNode.replaceChild(e.fr,e.slot);else if(e.slot.childNodes.length){let t=document.createDocumentFragment();t.append(...e.slot.childNodes),e.slot.parentNode.replaceChild(t,e.slot)}else e.slot.remove()})},function(e,t){[...e.querySelectorAll(`[${_t.EL_REF_ATTR}]`)].forEach(e=>{let r=e.getAttribute(_t.EL_REF_ATTR);t.ref[r]=e,e.removeAttribute(_t.EL_REF_ATTR)})},function(e,t){[...e.querySelectorAll(`[${_t.BIND_ATTR}]`)].forEach(e=>{let r=e.getAttribute(_t.BIND_ATTR).split(";");[...e.attributes].forEach(t=>{if(t.name.startsWith("-")&&t.value){let i=t.name.replace("-","").split("-").map((e,t)=>e&&t?e[0].toUpperCase()+e.slice(1):e).join("").split("_").map((e,t)=>e&&t?e.toUpperCase():e).join("");r.push(i+":"+t.value),e.removeAttribute(t.name)}}),r.forEach(r=>{if(!r)return;let i,o=r.split(":").map(e=>e.trim()),a=o[0];0===a.indexOf(_t.ATTR_BIND_PRFX)&&(i=!0,a=a.replace(_t.ATTR_BIND_PRFX,""));let n=o[1].split(",").map(e=>e.trim());for(let r of n){let o;r.startsWith("!!")?(o="double",r=r.replace("!!","")):r.startsWith("!")&&(o="single",r=r.replace("!","")),t.sub(r,t=>{"double"===o?t=!!t:"single"===o&&(t=!t),i?(null==t?void 0:t.constructor)===Boolean?t?e.setAttribute(a,""):e.removeAttribute(a):e.setAttribute(a,t):Ct(e,a,t)||(e[_t.SET_LATER_KEY]||(e[_t.SET_LATER_KEY]=Object.create(null)),e[_t.SET_LATER_KEY][a]=t)})}}),e.removeAttribute(_t.BIND_ATTR)})},function(e,t){(function(e){let t,r=[],i=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:e=>{var t;return!(null==(t=e.parentElement)?void 0:t.hasAttribute("skip-text"))&&e.textContent.includes(At)&&e.textContent.includes(Et)&&1}});for(;t=i.nextNode();)r.push(t);return r})(e).forEach(e=>{let r,i=[];for(;e.textContent.includes(Et);)e.textContent.startsWith(At)?(r=e.textContent.indexOf(Et)+2,e.splitText(r),i.push(e)):(r=e.textContent.indexOf(At),e.splitText(r)),e=e.nextSibling;i.forEach(e=>{let r=e.textContent.replace(At,"").replace(Et,"");e.textContent="",t.sub(r,t=>{e.textContent=t})})})}],St="'",Mt='"',$t=/\\([0-9a-fA-F]{1,6} ?)/g;function Lt(e){let t=e;var r;(r=e)[0]!==Mt&&r[0]!==St||r[r.length-1]!==Mt&&r[r.length-1]!==St||(t=function(e){return e[0]!==Mt&&e[0]!==St||(e=e.slice(1)),e[e.length-1]!==Mt&&e[e.length-1]!==St||(e=e.slice(0,-1)),e}(t),t=t.replace($t,(e,t)=>String.fromCodePoint(parseInt(t.trim(),16))),t=t.replaceAll("\\\n","\\n"),t=function(e){let t="",r="";for(var i=0;i<e.length;i++){const o=e[i+1];"\\"===e[i]&&'"'===o?(t+='\\"',i++):'"'===e[i]&&"\\"!==r?t+='\\"':t+=e[i],r=e[i]}return t}(t),t=Mt+t+Mt);try{return JSON.parse(t)}catch(r){throw new Error(`Failed to parse CSS property value: ${t}. Original input: ${e}`)}}var Rt=0,Ut=null,Ot=null,Pt=class extends HTMLElement{constructor(){super(),yt(this,"updateCssData",()=>{var e;this.dropCssDataCache(),null==(e=this.__boundCssProps)||e.forEach(e=>{let t=this.getCssData(this.__extractCssName(e),!0);null!==t&&this.$[e]!==t&&(this.$[e]=t)})}),this.init$=Object.create(null),this.cssInit$=Object.create(null),this.tplProcessors=new Set,this.ref=Object.create(null),this.allSubs=new Set,this.pauseRender=!1,this.renderShadow=!1,this.readyToDestroy=!0,this.processInnerHtml=!1,this.allowCustomTemplate=!1,this.ctxOwner=!1}get BaseComponent(){return Pt}initCallback(){}__initCallback(){var e;this.__initialized||(this.__initialized=!0,null==(e=this.initCallback)||e.call(this))}render(e,t=this.renderShadow){let r;if(!t&&!this.constructor.__shadowStylesUrl||this.shadowRoot||this.attachShadow({mode:"open"}),this.allowCustomTemplate){let t=this.getAttribute(_t.USE_TPL);if(t){let r=this.getRootNode(),i=(null==r?void 0:r.querySelector(t))||document.querySelector(t);i?e=i.content.cloneNode(!0):console.warn(`Symbiote template "${t}" is not found...`)}}if(this.processInnerHtml)for(let e of this.tplProcessors)e(this,this);if(e||this.constructor.template){if(this.constructor.template&&!this.constructor.__tpl&&(this.constructor.__tpl=document.createElement("template"),this.constructor.__tpl.innerHTML=this.constructor.template),(null==e?void 0:e.constructor)===DocumentFragment)r=e;else if((null==e?void 0:e.constructor)===String){let t=document.createElement("template");t.innerHTML=e,r=t.content.cloneNode(!0)}else this.constructor.__tpl&&(r=this.constructor.__tpl.content.cloneNode(!0));for(let e of this.tplProcessors)e(r,this)}let i=()=>{r&&(t&&this.shadowRoot.appendChild(r)||this.appendChild(r)),this.__initCallback()};if(this.constructor.__shadowStylesUrl){t=!0;let e=document.createElement("link");e.rel="stylesheet",e.href=this.constructor.__shadowStylesUrl,e.onload=i,this.shadowRoot.prepend(e)}else i()}addTemplateProcessor(e){this.tplProcessors.add(e)}get autoCtxName(){return this.__autoCtxName||(this.__autoCtxName=xt.generate(),this.style.setProperty(_t.CSS_CTX_PROP,`'${this.__autoCtxName}'`)),this.__autoCtxName}get cssCtxName(){return this.getCssData(_t.CSS_CTX_PROP,!0)}get ctxName(){var e;let t=(null==(e=this.getAttribute(_t.CTX_NAME_ATTR))?void 0:e.trim())||this.cssCtxName||this.__cachedCtxName||this.autoCtxName;return this.__cachedCtxName=t,t}get localCtx(){return this.__localCtx||(this.__localCtx=wt.registerCtx({},this)),this.__localCtx}get nodeCtx(){return wt.getCtx(this.ctxName,!1)||wt.registerCtx({},this.ctxName)}static __parseProp(e,t){let r,i;if(e.startsWith(_t.EXT_DATA_CTX_PRFX))r=t.nodeCtx,i=e.replace(_t.EXT_DATA_CTX_PRFX,"");else if(e.includes(_t.NAMED_DATA_CTX_SPLTR)){let t=e.split(_t.NAMED_DATA_CTX_SPLTR);r=wt.getCtx(t[0]),i=t[1]}else r=t.localCtx,i=e;return{ctx:r,name:i}}sub(e,t,r=!0){let i=e=>{this.isConnected&&t(e)},o=Pt.__parseProp(e,this);o.ctx.has(o.name)?this.allSubs.add(o.ctx.sub(o.name,i,r)):window.setTimeout(()=>{this.allSubs.add(o.ctx.sub(o.name,i,r))})}notify(e){let t=Pt.__parseProp(e,this);t.ctx.notify(t.name)}has(e){let t=Pt.__parseProp(e,this);return t.ctx.has(t.name)}add(e,t,r=!1){let i=Pt.__parseProp(e,this);i.ctx.add(i.name,t,r)}add$(e,t=!1){for(let r in e)this.add(r,e[r],t)}get $(){if(!this.__stateProxy){let e=Object.create(null);this.__stateProxy=new Proxy(e,{set:(e,t,r)=>{let i=Pt.__parseProp(t,this);return i.ctx.pub(i.name,r),!0},get:(e,t)=>{let r=Pt.__parseProp(t,this);return r.ctx.read(r.name)}})}return this.__stateProxy}set$(e,t=!1){for(let r in e){let i=e[r],o=[String,Number,Boolean];(t||!o.includes(null==i?void 0:i.constructor)||this.$[r]!==i)&&(this.$[r]=i)}}get __ctxOwner(){return this.ctxOwner||this.hasAttribute(_t.CTX_OWNER_ATTR)&&"false"!==this.getAttribute(_t.CTX_OWNER_ATTR)}__initDataCtx(){let e=this.constructor.__attrDesc;if(e)for(let t of Object.values(e))Object.keys(this.init$).includes(t)||(this.init$[t]="");for(let e in this.init$)if(e.startsWith(_t.EXT_DATA_CTX_PRFX))this.nodeCtx.add(e.replace(_t.EXT_DATA_CTX_PRFX,""),this.init$[e],this.__ctxOwner);else if(e.includes(_t.NAMED_DATA_CTX_SPLTR)){let t=e.split(_t.NAMED_DATA_CTX_SPLTR),r=t[0].trim(),i=t[1].trim();if(r&&i){let t=wt.getCtx(r,!1);t||(t=wt.registerCtx({},r)),t.add(i,this.init$[e])}}else this.localCtx.add(e,this.init$[e]);for(let e in this.cssInit$)this.bindCssData(e,this.cssInit$[e]);this.__dataCtxInitialized=!0}connectedCallback(){var e;if(this.isConnected){if(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),!this.connectedOnce){let t=null==(e=this.getAttribute(_t.CTX_NAME_ATTR))?void 0:e.trim();if(t&&this.style.setProperty(_t.CSS_CTX_PROP,`'${t}'`),this.__initDataCtx(),this[_t.SET_LATER_KEY]){for(let e in this[_t.SET_LATER_KEY])Ct(this,e,this[_t.SET_LATER_KEY][e]);delete this[_t.SET_LATER_KEY]}this.initChildren=[...this.childNodes];for(let e of It)this.addTemplateProcessor(e);if(this.pauseRender)this.__initCallback();else if(this.constructor.__rootStylesLink){let e=this.getRootNode();if(!e)return;if(null==e?void 0:e.querySelector(`link[${_t.ROOT_STYLE_ATTR_NAME}="${this.constructor.is}"]`))return void this.render();let t=this.constructor.__rootStylesLink.cloneNode(!0);t.setAttribute(_t.ROOT_STYLE_ATTR_NAME,this.constructor.is),t.onload=()=>{this.render()},e.nodeType===Node.DOCUMENT_NODE?e.head.appendChild(t):e.prepend(t)}else this.render()}this.connectedOnce=!0}}destroyCallback(){}disconnectedCallback(){this.connectedOnce&&(this.dropCssDataCache(),this.readyToDestroy&&(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),this.__disconnectTimeout=window.setTimeout(()=>{this.destroyCallback();for(let e of this.allSubs)e.remove(),this.allSubs.delete(e);for(let e of this.tplProcessors)this.tplProcessors.delete(e);null==Ot||Ot.delete(this.updateCssData),(null==Ot?void 0:Ot.size)||(null==Ut||Ut.disconnect(),Ut=null,Ot=null)},100)))}static reg(e,t=!1){e||(Rt++,e=`${_t.AUTO_TAG_PRFX}-${Rt}`),this.__tag=e;let r=window.customElements.get(e);r?t||r===this||console.warn([`Element with tag name "${e}" already registered.`,`You're trying to override it with another class "${this.name}".`,"This is most likely a mistake.","New element will not be registered."].join("\n")):window.customElements.define(e,t?class extends(this){}:this)}static get is(){return this.__tag||this.reg(),this.__tag}static bindAttributes(e){this.observedAttributes=Object.keys(e),this.__attrDesc=e}attributeChangedCallback(e,t,r){var i;if(t===r)return;let o=null==(i=this.constructor.__attrDesc)?void 0:i[e];o?this.__dataCtxInitialized?this.$[o]=r:this.init$[o]=r:this[e]=r}getCssData(e,t=!1){if(this.__cssDataCache||(this.__cssDataCache=Object.create(null)),!Object.keys(this.__cssDataCache).includes(e)){this.__computedStyle||(this.__computedStyle=window.getComputedStyle(this));let r=this.__computedStyle.getPropertyValue(e).trim();try{this.__cssDataCache[e]=Lt(r)}catch(r){!t&&console.warn(`CSS Data error: ${e}`),this.__cssDataCache[e]=null}}return this.__cssDataCache[e]}__extractCssName(e){return e.split("--").map((e,t)=>0===t?"":e).join("--")}__initStyleAttrObserver(){Ot||(Ot=new Set),Ot.add(this.updateCssData),Ut||(Ut=new MutationObserver(e=>{"attributes"===e[0].type&&Ot.forEach(e=>{e()})})).observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]})}bindCssData(e,t=""){this.__boundCssProps||(this.__boundCssProps=new Set),this.__boundCssProps.add(e);let r=this.getCssData(this.__extractCssName(e),!0);null===r&&(r=t),this.add(e,r),this.__initStyleAttrObserver()}dropCssDataCache(){this.__cssDataCache=null,this.__computedStyle=null}defineAccessor(e,t,r){let i="__"+e;this[i]=this[e],Object.defineProperty(this,e,{set:e=>{this[i]=e,r?window.setTimeout(()=>{null==t||t(e)}):null==t||t(e)},get:()=>this[i]}),this[e]=this[i]}static set shadowStyles(e){let t=new Blob([e],{type:"text/css"});this.__shadowStylesUrl=URL.createObjectURL(t)}static set rootStyles(e){if(!this.__rootStylesLink){let t=new Blob([e],{type:"text/css"}),r=URL.createObjectURL(t),i=document.createElement("link");i.href=r,i.rel="stylesheet",this.__rootStylesLink=i}}},zt=Pt;yt(zt,"template");var Nt=class{static _print(e){console.warn(e)}static setDefaultTitle(e){this.defaultTitle=e}static setRoutingMap(e){Object.assign(this.appMap,e);for(let e in this.appMap)this.defaultRoute||!0!==this.appMap[e].default?this.errorRoute||!0!==this.appMap[e].error||(this.errorRoute=e):this.defaultRoute=e}static set routingEventName(e){this.__routingEventName=e}static get routingEventName(){return this.__routingEventName||"sym-on-route"}static readAddressBar(){let e={route:null,options:{}};return window.location.search.split(this.separator).forEach(t=>{if(t.includes("?"))e.route=t.replace("?","");else if(t.includes("=")){let r=t.split("=");e.options[r[0]]=decodeURI(r[1])}else e.options[t]=!0}),e}static notify(){let e=this.readAddressBar(),t=this.appMap[e.route];if(t&&t.title&&(document.title=t.title),null===e.route&&this.defaultRoute)return void this.applyRoute(this.defaultRoute);if(!t&&this.errorRoute)return void this.applyRoute(this.errorRoute);if(!t&&this.defaultRoute)return void this.applyRoute(this.defaultRoute);if(!t)return void this._print(`Route "${e.route}" not found...`);let r=new CustomEvent(Nt.routingEventName,{detail:{route:e.route,options:Object.assign(t||{},e.options)}});window.dispatchEvent(r)}static reflect(e,t={}){let r=this.appMap[e];if(!r)return void this._print("Wrong route: "+e);let i="?"+e;for(let e in t)!0===t[e]?i+=this.separator+e:i+=this.separator+e+`=${t[e]}`;let o=r.title||this.defaultTitle||"";window.history.pushState(null,o,i),document.title=o}static applyRoute(e,t={}){this.reflect(e,t),this.notify()}static setSeparator(e){this._separator=e}static get separator(){return this._separator||"&"}static createRouterData(e,t){this.setRoutingMap(t);let r=wt.registerCtx({route:null,options:null,title:null},e);return window.addEventListener(this.routingEventName,e=>{var t;r.multiPub({route:e.detail.route,options:e.detail.options,title:(null==(t=e.detail.options)?void 0:t.title)||this.defaultTitle||""})}),Nt.notify(),this.initPopstateListener(),r}static initPopstateListener(){this.__onPopstate||(this.__onPopstate=()=>{this.notify()},window.addEventListener("popstate",this.__onPopstate))}static removePopstateListener(){window.removeEventListener("popstate",this.__onPopstate),this.__onPopstate=null}};function Dt(e,t){for(let r in t)r.includes("-")?e.style.setProperty(r,t[r]):e.style[r]=t[r]}function Ft(e={tag:"div"}){let t=document.createElement(e.tag);if(e.attributes&&function(e,t){for(let r in t)t[r].constructor===Boolean?t[r]?e.setAttribute(r,""):e.removeAttribute(r):e.setAttribute(r,t[r])}(t,e.attributes),e.styles&&Dt(t,e.styles),e.properties)for(let r in e.properties)t[r]=e.properties[r];return e.processors&&e.processors.forEach(e=>{e(t)}),e.children&&e.children.forEach(e=>{let r=Ft(e);t.appendChild(r)}),t}Nt.appMap=Object.create(null);var Vt="idb-store-ready",Bt=class{_notifyWhenReady(e=null){window.dispatchEvent(new CustomEvent(Vt,{detail:{dbName:this.name,storeName:this.storeName,event:e}}))}get _updEventName(){return"symbiote-idb-update_"+this.name}_getUpdateEvent(e){return new CustomEvent(this._updEventName,{detail:{key:this.name,newValue:e}})}_notifySubscribers(e){window.localStorage.removeItem(this.name),window.localStorage.setItem(this.name,e),window.dispatchEvent(this._getUpdateEvent(e))}constructor(e,t){this.name=e,this.storeName=t,this.version=1,this.request=window.indexedDB.open(this.name,this.version),this.request.onupgradeneeded=e=>{this.db=e.target.result,this.objStore=this.db.createObjectStore(t,{keyPath:"_key"}),this.objStore.transaction.oncomplete=e=>{this._notifyWhenReady(e)}},this.request.onsuccess=e=>{this.db=e.target.result,this._notifyWhenReady(e)},this.request.onerror=e=>{console.error(e)},this._subscriptionsMap={},this._updateHandler=e=>{if(e.key===this.name&&this._subscriptionsMap[e.newValue]){this._subscriptionsMap[e.newValue].forEach(async t=>{t(await this.read(e.newValue))})}},this._localUpdateHandler=e=>{this._updateHandler(e.detail)},window.addEventListener("storage",this._updateHandler),window.addEventListener(this._updEventName,this._localUpdateHandler)}read(e){let t=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).get(e);return new Promise((r,i)=>{t.onsuccess=t=>{var i;(null==(i=t.target.result)?void 0:i._value)?r(t.target.result._value):(r(null),console.warn(`IDB: cannot read "${e}"`))},t.onerror=e=>{i(e)}})}write(e,t,r=!1){let i={_key:e,_value:t},o=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).put(i);return new Promise((t,i)=>{o.onsuccess=i=>{r||this._notifySubscribers(e),t(i.target.result)},o.onerror=e=>{i(e)}})}delete(e,t=!1){let r=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).delete(e);return new Promise((i,o)=>{r.onsuccess=r=>{t||this._notifySubscribers(e),i(r)},r.onerror=e=>{o(e)}})}getAll(){let e=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).getAll();return new Promise((t,r)=>{e.onsuccess=e=>{let r=e.target.result;t(r.map(e=>e._value))},e.onerror=e=>{r(e)}})}subscribe(e,t){this._subscriptionsMap[e]||(this._subscriptionsMap[e]=new Set);let r=this._subscriptionsMap[e];return r.add(t),{remove:()=>{r.delete(t),r.size||delete this._subscriptionsMap[e]}}}stop(){window.removeEventListener("storage",this._updateHandler),this._subscriptionsMap=null,jt.clear(this.name)}},jt=class{static get readyEventName(){return Vt}static open(e="symbiote-db",t="store"){let r=e+"/"+t;return this._reg[r]||(this._reg[r]=new Bt(e,t)),this._reg[r]}static clear(e){window.indexedDB.deleteDatabase(e);for(let t in this._reg)t.split("/")[0]===e&&delete this._reg[t]}};yt(jt,"_reg",Object.create(null));const Ht=e=>{if("string"!=typeof e||!e)return"";let t=e.trim();return t.startsWith("-/")?t=t.slice(2):t.startsWith("/")&&(t=t.slice(1)),t.endsWith("/")&&(t=t.slice(0,t.length-1)),t},qt=(...e)=>e.filter(e=>"string"==typeof e&&e).map(e=>Ht(e)).join("/-/"),Kt=(...e)=>{let t=qt(...e);return t?`-/${t}/`:""};function Gt(e){let t=new URL(e),r=t.pathname+t.search+t.hash,i=r.lastIndexOf("http"),o=r.lastIndexOf("/"),a="";return i>=0?a=r.slice(i):o>=0&&(a=r.slice(o+1)),a}function Wt(e){let t=new URL(e),{pathname:r}=t;const i=r.indexOf("/"),o=r.indexOf("/",i+1);return r.substring(i+1,o)}function Xt(e){let t=Zt(e),r=new URL(t),i=r.pathname.indexOf("/-/");return-1===i?"":r.pathname.substring(i).slice(1)}function Zt(e){let t=new URL(e),r=Gt(e),i=Yt(r)?Jt(r).pathname:r;return t.pathname=t.pathname.replace(i,""),t.search="",t.hash="",t.toString()}function Yt(e){return e.startsWith("http")}function Jt(e){let t=new URL(e);return{pathname:t.origin+t.pathname||"",search:t.search||"",hash:t.hash||""}}const Qt=(e,t,r)=>{let i=new URL(Zt(e));if(r=r||Gt(e),i.pathname.startsWith("//")&&(i.pathname=i.pathname.replace("//","/")),Yt(r)){let e=Jt(r);i.pathname=i.pathname+(t||"")+(e.pathname||""),i.search=e.search,i.hash=e.hash}else i.pathname=i.pathname+(t||"")+(r||"");return i.toString()},er=(e,t)=>{let r=new URL(e);return r.pathname=t+"/",r.toString()},tr=(e,t=",")=>e.trim().split(t).map(e=>e.trim()).filter(e=>e.length>0),rr=Object.freeze({brightness:0,exposure:0,gamma:100,contrast:0,saturation:0,vibrance:0,warmth:0,enhance:0,filter:0,rotate:0,mirror:!1,flip:!1,crop:void 0}),ir=["enhance","brightness","exposure","gamma","contrast","saturation","vibrance","warmth","filter","mirror","flip","rotate","crop"];function or(e){return qt(...ir.filter(t=>void 0!==e[t]&&null!==e[t]).map(t=>function(e,t){if("number"==typeof t){const r=t;return rr[e]!==r?`${e}/${r}`:""}if("boolean"==typeof t){const r=t;return rr[e]!==r?`${e}`:""}if("filter"===e&&t){const{name:r,amount:i}=t;return rr.filter===i?"":`${e}/${r}/${i}`}if("crop"===e&&t){let{dimensions:r,coords:i}=t;return`${e}/${r.join("x")}/${i.join(",")}`}return""}(t,e[t])).filter(e=>!!e))}const ar=qt("format/auto","progressive/yes"),nr=([e])=>void 0!==e?Number(e):void 0,sr=()=>!0,cr=Object.freeze({enhance:nr,brightness:nr,exposure:nr,gamma:nr,contrast:nr,saturation:nr,vibrance:nr,warmth:nr,filter:([e,t])=>({name:e,amount:void 0!==t?Number(t):100}),mirror:sr,flip:sr,rotate:nr,crop:([e,t])=>{if(!/\d+x\d+/.test(e)||!/\d+,\d+/.test(t))throw new Error("Crop by aspect ratio, percentage or alignment shortcuts is not supported.");return{dimensions:tr(e,"x").map(Number),coords:tr(t).map(Number)}}});const lr=Object.freeze({CROP:"crop",TUNING:"tuning",FILTERS:"filters"}),ur=[lr.CROP,lr.TUNING,lr.FILTERS],dr=["brightness","exposure","gamma","contrast","saturation","vibrance","warmth","enhance"],hr=["adaris","briaril","calarel","carris","cynarel","cyren","elmet","elonni","enzana","erydark","fenralan","ferand","galen","gavin","gethriel","iorill","iothari","iselva","jadis","lavra","misiara","namala","nerion","nethari","pamaya","sarnar","sedis","sewen","sorahel","sorlen","tarian","thellassan","varriel","varven","vevera","virkas","yedis","yllara","zatvel","zevcen"],pr=["rotate","mirror","flip"],gr=Object.freeze({brightness:{zero:rr.brightness,range:[-100,100],keypointsNumber:2},exposure:{zero:rr.exposure,range:[-500,500],keypointsNumber:2},gamma:{zero:rr.gamma,range:[0,1e3],keypointsNumber:2},contrast:{zero:rr.contrast,range:[-100,500],keypointsNumber:2},saturation:{zero:rr.saturation,range:[-100,500],keypointsNumber:1},vibrance:{zero:rr.vibrance,range:[-100,500],keypointsNumber:1},warmth:{zero:rr.warmth,range:[-100,100],keypointsNumber:1},enhance:{zero:rr.enhance,range:[0,100],keypointsNumber:1},filter:{zero:rr.filter,range:[0,100],keypointsNumber:1}}),mr=e=>e?e.split(",").map(e=>e.trim()).filter(Boolean):[],br=e=>e?e.join(","):"",fr="https://ucarecdn.com",vr={pubkey:"",multiple:!0,multipleMin:0,multipleMax:Number.MAX_SAFE_INTEGER,confirmUpload:!1,imgOnly:!1,accept:"",externalSourcesPreferredTypes:"",externalSourcesEmbedCss:"",store:"auto",cameraMirror:!1,cameraCapture:"",sourceList:"local, url, camera, dropbox, gdrive",topLevelOrigin:"",cloudImageEditorTabs:br(ur),maxLocalFileSizeBytes:0,thumbSize:76,showEmptyList:!1,useLocalImageEditor:!1,useCloudImageEditor:!0,removeCopyright:!1,cropPreset:"",imageShrink:"",modalScrollLock:!0,modalBackdropStrokes:!1,sourceListWrap:!0,remoteTabSessionKey:"",cdnCname:fr,cdnCnamePrefixed:"https://ucarecd.net",baseUrl:"https://upload.uploadcare.com",socialBaseUrl:"https://social.uploadcare.com",secureSignature:"",secureExpire:"",secureDeliveryProxy:"",retryThrottledRequestMaxTimes:10,retryNetworkErrorMaxTimes:3,multipartMinFileSize:26214400,multipartChunkSize:5242880,maxConcurrentRequests:10,multipartMaxConcurrentRequests:4,multipartMaxAttempts:3,checkForUrlDuplicates:!1,saveUrlForRecurrentUploads:!1,groupOutput:!1,userAgentIntegration:"",debug:!1,metadata:null,localeName:"en",localeDefinitionOverride:null,secureUploadsExpireThreshold:6e5,secureUploadsSignatureResolver:null,secureDeliveryProxyUrlResolver:null,iconHrefResolver:null,fileValidators:[],collectionValidators:[],cameraModes:"photo, video",defaultCameraMode:null,enableAudioRecording:!0,enableVideoRecording:null,maxVideoRecordingDuration:null,mediaRecorderOptions:null,filesViewMode:"list",gridShowFileNames:!1,cloudImageEditorAutoOpen:!1,cloudImageEditorMaskHref:null,testMode:!1},yr=Object.freeze({FILE_ADDED:"file-added",FILE_REMOVED:"file-removed",FILE_UPLOAD_START:"file-upload-start",FILE_UPLOAD_PROGRESS:"file-upload-progress",FILE_UPLOAD_SUCCESS:"file-upload-success",FILE_UPLOAD_FAILED:"file-upload-failed",FILE_URL_CHANGED:"file-url-changed",MODAL_OPEN:"modal-open",MODAL_CLOSE:"modal-close",DONE_CLICK:"done-click",UPLOAD_CLICK:"upload-click",ACTIVITY_CHANGE:"activity-change",COMMON_UPLOAD_START:"common-upload-start",COMMON_UPLOAD_PROGRESS:"common-upload-progress",COMMON_UPLOAD_SUCCESS:"common-upload-success",COMMON_UPLOAD_FAILED:"common-upload-failed",CHANGE:"change",GROUP_CREATED:"group-created"});class wr{_timeoutStore=new Map;_targets=new Set;_debugPrint=null;constructor(e){this._debugPrint=e}bindTarget(e){this._targets.add(e)}unbindTarget(e){this._targets.delete(e)}_dispatch(e,t){for(const r of this._targets)r.dispatchEvent(new CustomEvent(e,{detail:t}));this._debugPrint?.(()=>{const r=t&&"object"==typeof t?{...t}:t;return[`event "${e}"`,r]})}emit(e,t,{debounce:r}={}){if("number"!=typeof r&&!r)return void this._dispatch(e,"function"==typeof t?t():t);this._timeoutStore.has(e)&&window.clearTimeout(this._timeoutStore.get(e));const i="number"==typeof r?r:20,o=window.setTimeout(()=>{this._dispatch(e,"function"==typeof t?t():t),this._timeoutStore.delete(e)},i);this._timeoutStore.set(e,o)}}function _r(e,t){let r;const i=(...i)=>{clearTimeout(r),r=setTimeout(()=>e(...i),t)};return i.cancel=()=>{clearTimeout(r)},i}const kr="--uploadcare-blocks-window-height";class xr{static clientsRegistry=new Set;static flush=_r(()=>{document.documentElement.style.setProperty(kr,`${window.innerHeight}px`)},100);static registerClient(e){0===this.clientsRegistry.size&&this.attachTracker(),this.clientsRegistry.add(e)}static unregisterClient(e){this.clientsRegistry.delete(e),0===this.clientsRegistry.size&&this.detachTracker()}static attachTracker(){window.addEventListener("resize",this.flush,{passive:!0,capture:!0}),this.flush()}static detachTracker(){window.removeEventListener("resize",this.flush,{capture:!0}),document.documentElement.style.removeProperty(kr)}}const Cr=(e,t)=>new Intl.PluralRules(e).select(t),Tr=e=>e,Ar="{{",Er="}}",Ir="plural:";function Sr(e,t,r={}){let{openToken:i=Ar,closeToken:o=Er,transform:a=Tr}=r;for(let r in t){let n=t[r]?.toString();e=e.replaceAll(i+r+o,"string"==typeof n?a(n):n)}return e}function Mr(e){return"[object Object]"===Object.prototype.toString.call(e)}const $r=/\W|_/g;function Lr(e){return e.split($r).map((e,t)=>e.charAt(0)[t>0?"toUpperCase":"toLowerCase"]()+e.slice(1)).join("")}function Rr(e,{ignoreKeys:t}={ignoreKeys:[]}){return Array.isArray(e)?e.map(e=>Ur(e,{ignoreKeys:t})):e}function Ur(e,{ignoreKeys:t}={ignoreKeys:[]}){if(Array.isArray(e))return Rr(e,{ignoreKeys:t});if(!Mr(e))return e;const r={};for(const i of Object.keys(e)){let o=e[i];t.includes(i)?r[i]=o:(Mr(o)?o=Ur(o,{ignoreKeys:t}):Array.isArray(o)&&(o=Rr(o,{ignoreKeys:t})),r[Lr(i)]=o)}return r}function Or({libraryName:e,libraryVersion:t,userAgent:r,publicKey:i="",integration:o=""}){const a="JavaScript";if("string"==typeof r)return r;if("function"==typeof r)return r({publicKey:i,libraryName:e,libraryVersion:t,languageName:a,integration:o});return`${[e,t,i].filter(Boolean).join("/")} (${[a,o].filter(Boolean).join("; ")})`}const Pr={factor:2,time:100};function zr(e,t=Pr){let r=0;return function e(i){const o=Math.round(t.time*t.factor**r);return i({attempt:r,retry:t=>(e=>new Promise(t=>setTimeout(t,e)))(t??o).then(()=>(r+=1,e(i)))})}(e)}class Nr extends Error{}class Dr extends Nr{originalProgressEvent;constructor(e){super(),this.name="NetworkError",this.message="Network error",Object.setPrototypeOf(this,Dr.prototype),this.originalProgressEvent=e}}const Fr=(e,t)=>{e&&(e.aborted?Promise.resolve().then(t):e.addEventListener("abort",()=>t(),{once:!0}))};class Vr extends Nr{isCancel=!0;constructor(e="Request canceled"){super(e),this.name="CancelError",Object.setPrototypeOf(this,Vr.prototype)}}const Br=({check:e,interval:t=500,timeout:r,signal:i})=>new Promise((o,a)=>{let n,s;Fr(i,()=>{n&&clearTimeout(n),a(new Vr("Poll cancelled"))}),r&&(s=setTimeout(()=>{n&&clearTimeout(n),a(new Vr("Timed out"))},r));const c=()=>{try{Promise.resolve(e(i)).then(e=>{e?(s&&clearTimeout(s),o(e)):n=setTimeout(c,t)}).catch(e=>{s&&clearTimeout(s),a(e)})}catch(e){s&&clearTimeout(s),a(e)}};n=setTimeout(c,0)}),jr={baseCDN:"https://ucarecdn.com",baseURL:"https://upload.uploadcare.com",maxContentLength:52428800,retryThrottledRequestMaxTimes:1,retryNetworkErrorMaxTimes:3,multipartMinFileSize:26214400,multipartChunkSize:5242880,multipartMinLastPartSize:1048576,maxConcurrentRequests:4,pollingTimeoutMilliseconds:1e4,pusherKey:"79ae88bd931ea68464d9"},Hr="application/octet-stream",qr="original",Kr=({method:e,url:t,data:r,headers:i={},signal:o,onProgress:a})=>new Promise((n,s)=>{const c=new XMLHttpRequest,l=e?.toUpperCase()||"GET";let u=!1;c.open(l,t,!0),i&&Object.entries(i).forEach(e=>{const[t,r]=e;void 0!==r&&!Array.isArray(r)&&c.setRequestHeader(t,r)}),c.responseType="text",Fr(o,()=>{u=!0,c.abort(),s(new Vr)}),c.onload=()=>{if(200!=c.status)s(new Error(`Error ${c.status}: ${c.statusText}`));else{const e={method:l,url:t,data:r,headers:i||void 0,signal:o,onProgress:a},s=c.getAllResponseHeaders().trim().split(/[\r\n]+/),u={};s.forEach(function(e){const t=e.split(": "),r=t.shift(),i=t.join(": ");r&&void 0!==r&&(u[r]=i)});const d=c.response,h=c.status;n({request:e,data:d,headers:u,status:h})}},c.onerror=e=>{u||s(new Dr(e))},a&&"function"==typeof a&&(c.upload.onprogress=e=>{e.lengthComputable?a({isComputable:!0,value:e.loaded/e.total}):a({isComputable:!1})}),r?c.send(r):c.send()});const Gr=function(e,...t){return e};const Wr=e=>"undefined"!=typeof Blob&&e instanceof Blob,Xr=e=>"undefined"!=typeof File&&e instanceof File,Zr=e=>!!e&&"object"==typeof e&&!Array.isArray(e)&&"uri"in e&&"string"==typeof e.uri,Yr=e=>Wr(e)||Xr(e)||Zr(e);function Jr(e,t,r){if(Array.isArray(r))for(const i of r)Jr(e,`${t}[]`,i);else if((i=r)&&"object"==typeof i&&"data"in i&&Yr(i.data)){const{name:i,contentType:o}=r,a=Gr(r.data,i,o??Hr),n=(({name:e})=>e?[e]:[])({name:i,contentType:o});e.push([t,a,...n])}else if((e=>!!e&&"object"==typeof e&&!Array.isArray(e))(r))for(const[i,o]of Object.entries(r))void 0!==o&&e.push([`${t}[${i}]`,String(o)]);else(e=>"string"==typeof e||"number"==typeof e||void 0===e)(r)&&r&&e.push([t,r.toString()]);var i}function Qr(e){const t=new FormData,r=function(e){const t=[];for(const[r,i]of Object.entries(e))Jr(t,r,i);return t}(e);for(const e of r){const[r,i,...o]=e;t.append(r,i,...o)}return t}class ei extends Nr{code;request;response;headers;constructor(e,t,r,i,o){super(),this.name="UploadError",this.message=e,this.code=t,this.request=r,this.response=i,this.headers=o,Object.setPrototypeOf(this,ei.prototype)}}const ti=(e,t,r)=>{const i=new URL(e);return i.pathname=(i.pathname+t).replace("//","/"),r&&(i.search=(e=>{const t=new URLSearchParams;for(const[r,i]of Object.entries(e))i&&"object"==typeof i&&!Array.isArray(i)?Object.entries(i).filter(e=>e[1]??!1).forEach(e=>t.set(`${r}[${e[0]}]`,String(e[1]))):Array.isArray(i)?i.forEach(e=>{t.append(`${r}[]`,e)}):"string"==typeof i&&i?t.set(r,i):"number"==typeof i&&t.set(r,i.toString());return t.toString()})(r)),i.toString()};function ri(e){return Or({libraryName:"UploadcareUploadClient",libraryVersion:"6.17.0",...e})}function ii(e,t){const{retryThrottledRequestMaxTimes:r,retryNetworkErrorMaxTimes:i}=t;return zr(({attempt:t,retry:o})=>e().catch(e=>{if("response"in e&&"RequestThrottledError"===e?.code&&t<r)return o(function(e){const{headers:t}=e||{};if(!t||"string"!=typeof t["retry-after"])return 15e3;const r=parseInt(t["retry-after"],10);return Number.isFinite(r)?1e3*r:15e3}(e));if(e instanceof Dr&&t<i)return o(1e3*(t+1));throw e}))}const oi=e=>{let t="";return(Wr(e)||Xr(e)||Zr(e))&&(t=e.type),t||Hr},ai=e=>{let t="";return Xr(e)&&e.name?t=e.name:Wr(e)?t="":Zr(e)&&e.name&&(t=e.name),t||qr};function ni(e){return void 0===e||"auto"===e?"auto":e?"1":"0"}function si(e,{publicKey:t,fileName:r,contentType:i,baseURL:o=jr.baseURL,secureSignature:a,secureExpire:n,store:s,signal:c,onProgress:l,source:u="local",integration:d,userAgent:h,retryThrottledRequestMaxTimes:p=jr.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:g=jr.retryNetworkErrorMaxTimes,metadata:m}){return ii(()=>Kr({method:"POST",url:ti(o,"/base/",{jsonerrors:1}),headers:{"X-UC-User-Agent":ri({publicKey:t,integration:d,userAgent:h})},data:Qr({file:{data:e,name:r||ai(e),contentType:i||oi(e)},UPLOADCARE_PUB_KEY:t,UPLOADCARE_STORE:ni(s),signature:a,expire:n,source:u,metadata:m}),signal:c,onProgress:l}).then(({data:e,headers:t,request:r})=>{const i=Ur(JSON.parse(e));if("error"in i)throw new ei(i.error.content,i.error.errorCode,r,i,t);return i}),{retryNetworkErrorMaxTimes:g,retryThrottledRequestMaxTimes:p})}var ci,li;function ui(e,{publicKey:t,baseURL:r=jr.baseURL,store:i,fileName:o,checkForUrlDuplicates:a,saveUrlForRecurrentUploads:n,secureSignature:s,secureExpire:c,source:l="url",signal:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p=jr.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:g=jr.retryNetworkErrorMaxTimes,metadata:m}){return ii(()=>Kr({method:"POST",headers:{"X-UC-User-Agent":ri({publicKey:t,integration:d,userAgent:h})},url:ti(r,"/from_url/",{jsonerrors:1,pub_key:t,source_url:e,store:ni(i),filename:o,check_URL_duplicates:a?1:void 0,save_URL_duplicates:n?1:void 0,signature:s,expire:c,source:l,metadata:m}),signal:u}).then(({data:e,headers:t,request:r})=>{const i=Ur(JSON.parse(e));if("error"in i)throw new ei(i.error.content,i.error.errorCode,r,i,t);return i}),{retryNetworkErrorMaxTimes:g,retryThrottledRequestMaxTimes:p})}!function(e){e.Token="token",e.FileInfo="file_info"}(ci||(ci={})),function(e){e.Unknown="unknown",e.Waiting="waiting",e.Progress="progress",e.Error="error",e.Success="success"}(li||(li={}));function di(e,{publicKey:t,baseURL:r=jr.baseURL,signal:i,integration:o,userAgent:a,retryThrottledRequestMaxTimes:n=jr.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:s=jr.retryNetworkErrorMaxTimes}={}){return ii(()=>Kr({method:"GET",headers:t?{"X-UC-User-Agent":ri({publicKey:t,integration:o,userAgent:a})}:void 0,url:ti(r,"/from_url/status/",{jsonerrors:1,token:e}),signal:i}).then(({data:e,headers:t,request:r})=>{const i=Ur(JSON.parse(e));if("error"in i&&!(e=>"status"in e&&e.status===li.Error)(i))throw new ei(i.error.content,i.error.errorCode,r,i,t);return i}),{retryNetworkErrorMaxTimes:s,retryThrottledRequestMaxTimes:n})}function hi(e,{publicKey:t,baseURL:r=jr.baseURL,jsonpCallback:i,secureSignature:o,secureExpire:a,signal:n,source:s,integration:c,userAgent:l,retryThrottledRequestMaxTimes:u=jr.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:d=jr.retryNetworkErrorMaxTimes}){return ii(()=>Kr({method:"POST",headers:{"X-UC-User-Agent":ri({publicKey:t,integration:c,userAgent:l})},url:ti(r,"/group/",{jsonerrors:1}),data:Qr({files:e,callback:i,pub_key:t,signature:o,expire:a,source:s}),signal:n}).then(({data:e,headers:t,request:r})=>{const i=Ur(JSON.parse(e));if("error"in i)throw new ei(i.error.content,i.error.errorCode,r,i,t);return i}),{retryNetworkErrorMaxTimes:d,retryThrottledRequestMaxTimes:u})}function pi(e,{publicKey:t,baseURL:r=jr.baseURL,signal:i,source:o,integration:a,userAgent:n,retryThrottledRequestMaxTimes:s=jr.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:c=jr.retryNetworkErrorMaxTimes}){return ii(()=>Kr({method:"GET",headers:{"X-UC-User-Agent":ri({publicKey:t,integration:a,userAgent:n})},url:ti(r,"/info/",{jsonerrors:1,pub_key:t,file_id:e,source:o}),signal:i}).then(({data:e,headers:t,request:r})=>{const i=Ur(JSON.parse(e));if("error"in i)throw new ei(i.error.content,i.error.errorCode,r,i,t);return i}),{retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:c})}function gi(e,{publicKey:t,contentType:r,fileName:i,multipartChunkSize:o=jr.multipartChunkSize,baseURL:a="",secureSignature:n,secureExpire:s,store:c,signal:l,source:u="local",integration:d,userAgent:h,retryThrottledRequestMaxTimes:p=jr.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:g=jr.retryNetworkErrorMaxTimes,metadata:m}){return ii(()=>Kr({method:"POST",url:ti(a,"/multipart/start/",{jsonerrors:1}),headers:{"X-UC-User-Agent":ri({publicKey:t,integration:d,userAgent:h})},data:Qr({filename:i||qr,size:e,content_type:r||Hr,part_size:o,UPLOADCARE_STORE:ni(c),UPLOADCARE_PUB_KEY:t,signature:n,expire:s,source:u,metadata:m}),signal:l}).then(({data:e,headers:t,request:r})=>{const i=Ur(JSON.parse(e));if("error"in i)throw new ei(i.error.content,i.error.errorCode,r,i,t);return i.parts=Object.keys(i.parts).map(e=>i.parts[Number(e)]),i}),{retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g})}function mi(e,t,{contentType:r,signal:i,onProgress:o,retryThrottledRequestMaxTimes:a=jr.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:n=jr.retryNetworkErrorMaxTimes}){return ii(()=>Kr({method:"PUT",url:t,data:e,onProgress:o,signal:i,headers:{"Content-Type":r||Hr}}).then(e=>(o&&o({isComputable:!0,value:1}),e)).then(({status:e})=>({code:e})),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:n})}function bi(e,{publicKey:t,baseURL:r=jr.baseURL,source:i="local",signal:o,integration:a,userAgent:n,retryThrottledRequestMaxTimes:s=jr.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:c=jr.retryNetworkErrorMaxTimes}){return ii(()=>Kr({method:"POST",url:ti(r,"/multipart/complete/",{jsonerrors:1}),headers:{"X-UC-User-Agent":ri({publicKey:t,integration:a,userAgent:n})},data:Qr({uuid:e,UPLOADCARE_PUB_KEY:t,source:i}),signal:o}).then(({data:e,headers:t,request:r})=>{const i=Ur(JSON.parse(e));if("error"in i)throw new ei(i.error.content,i.error.errorCode,r,i,t);return i}),{retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:c})}function fi(e,{publicKey:t,baseURL:r,source:i,integration:o,userAgent:a,retryThrottledRequestMaxTimes:n,retryNetworkErrorMaxTimes:s,signal:c,onProgress:l}){return Br({check:c=>pi(e,{publicKey:t,baseURL:r,signal:c,source:i,integration:o,userAgent:a,retryThrottledRequestMaxTimes:n,retryNetworkErrorMaxTimes:s}).then(e=>e.isReady?e:(l&&l({isComputable:!0,value:1}),!1)),signal:c})}class vi{uuid;name;size;isStored;isImage;mimeType;cdnUrl;s3Url;originalFilename;imageInfo;videoInfo;contentInfo;metadata;s3Bucket;defaultEffects=null;constructor(e,{baseCDN:t=jr.baseCDN,fileName:r}={}){const{uuid:i,s3Bucket:o}=e,a=ti(t,`${i}/`),n=o?ti(`https://${o}.s3.amazonaws.com/`,`${i}/${e.filename}`):null;this.uuid=i,this.name=r||e.filename,this.size=e.size,this.isStored=e.isStored,this.isImage=e.isImage,this.mimeType=e.mimeType,this.cdnUrl=a,this.originalFilename=e.originalFilename,this.imageInfo=e.imageInfo,this.videoInfo=e.videoInfo,this.contentInfo=e.contentInfo,this.metadata=e.metadata||null,this.s3Bucket=o||null,this.s3Url=n,function(e){return"defaultEffects"in e}(e)&&(this.defaultEffects=e.defaultEffects)}}const yi=(e,{signal:t}={})=>{let r=null,i=null;const o=e.map(()=>new AbortController);return Fr(t,()=>{o.forEach(e=>e.abort())}),Promise.all(e.map((e,t)=>{const a=(e=>()=>{i=e,o.forEach((t,r)=>r!==e&&t.abort())})(t);return Promise.resolve().then(()=>e({stopRace:a,signal:o[t].signal})).then(e=>(a(),e)).catch(e=>(r=e,null))})).then(e=>{if(null===i)throw r;return e[i]})};var wi=window.WebSocket;class _i{events=Object.create({});emit(e,t){this.events[e]?.forEach(e=>e(t))}on(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}off(e,t){this.events[e]=t?this.events[e].filter(e=>e!==t):[]}}class ki{key;disconnectTime;ws=void 0;queue=[];isConnected=!1;subscribers=0;emmitter=new _i;disconnectTimeoutId=null;constructor(e,t=3e4){this.key=e,this.disconnectTime=t}connect(){if(this.disconnectTimeoutId&&clearTimeout(this.disconnectTimeoutId),!this.isConnected&&!this.ws){const e=`wss://ws.pusherapp.com/app/${this.key}?protocol=5&client=js&version=1.12.2`;this.ws=new wi(e),this.ws.addEventListener("error",e=>{this.emmitter.emit("error",new Error(e.message))}),this.emmitter.on("connected",()=>{this.isConnected=!0,this.queue.forEach(e=>this.send(e.event,e.data)),this.queue=[]}),this.ws.addEventListener("message",e=>{const t=JSON.parse(e.data.toString());switch(t.event){case"pusher:connection_established":this.emmitter.emit("connected",void 0);break;case"pusher:ping":this.send("pusher:pong",{});break;case"progress":case"success":case"fail":this.emmitter.emit(t.channel,((e,t)=>"success"===e?{status:li.Success,...t}:"progress"===e?{status:li.Progress,...t}:{status:li.Error,...t})(t.event,JSON.parse(t.data)))}})}}disconnect(){const e=()=>{this.ws?.close(),this.ws=void 0,this.isConnected=!1};this.disconnectTime?this.disconnectTimeoutId=setTimeout(()=>{e()},this.disconnectTime):e()}send(e,t){const r=JSON.stringify({event:e,data:t});this.ws?.send(r)}subscribe(e,t){this.subscribers+=1,this.connect();const r=`task-status-${e}`,i={event:"pusher:subscribe",data:{channel:r}};this.emmitter.on(r,t),this.isConnected?this.send(i.event,i.data):this.queue.push(i)}unsubscribe(e){this.subscribers-=1;const t=`task-status-${e}`,r={event:"pusher:unsubscribe",data:{channel:t}};this.emmitter.off(t),this.isConnected?this.send(r.event,r.data):this.queue=this.queue.filter(e=>e.data.channel!==t),0===this.subscribers&&this.disconnect()}onError(e){return this.emmitter.on("error",e),()=>this.emmitter.off("error",e)}}let xi=null;const Ci=e=>{if(!xi){const t="undefined"==typeof window?0:3e4;xi=new ki(e,t)}return xi};const Ti=(e,{publicKey:t,fileName:r,baseURL:i,baseCDN:o,checkForUrlDuplicates:a,saveUrlForRecurrentUploads:n,secureSignature:s,secureExpire:c,store:l,signal:u,onProgress:d,source:h,integration:p,userAgent:g,retryThrottledRequestMaxTimes:m,pusherKey:b=jr.pusherKey,metadata:f})=>{return Promise.resolve((v=b,void Ci(v).connect())).then(()=>ui(e,{publicKey:t,fileName:r,baseURL:i,checkForUrlDuplicates:a,saveUrlForRecurrentUploads:n,secureSignature:s,secureExpire:c,store:l,signal:u,source:h,integration:p,userAgent:g,retryThrottledRequestMaxTimes:m,metadata:f})).catch(e=>{const t=Ci(b);return t?.disconnect(),Promise.reject(e)}).then(e=>e.type===ci.FileInfo?e:yi([({signal:r})=>function({token:e,publicKey:t,baseURL:r,integration:i,userAgent:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:n,onProgress:s,signal:c}){return Br({check:c=>di(e,{publicKey:t,baseURL:r,integration:i,userAgent:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:n,signal:c}).then(t=>{switch(t.status){case li.Error:return new ei(t.error,t.errorCode);case li.Waiting:return!1;case li.Unknown:return new ei(`Token "${e}" was not found.`);case li.Progress:return s&&("unknown"===t.total?s({isComputable:!1}):s({isComputable:!0,value:t.done/t.total})),!1;case li.Success:return s&&s({isComputable:!0,value:t.done/t.total}),t;default:throw new Error("Unknown status")}}),signal:c})}({token:e.token,publicKey:t,baseURL:i,integration:p,userAgent:g,retryThrottledRequestMaxTimes:m,onProgress:d,signal:r}),({signal:t})=>(({token:e,pusherKey:t,signal:r,onProgress:i})=>new Promise((o,a)=>{const n=Ci(t),s=n.onError(a),c=()=>{s(),n.unsubscribe(e)};Fr(r,()=>{c(),a(new Vr("pusher cancelled"))}),n.subscribe(e,e=>{switch(e.status){case li.Progress:i&&("unknown"===e.total?i({isComputable:!1}):i({isComputable:!0,value:e.done/e.total}));break;case li.Success:c(),i&&i({isComputable:!0,value:e.done/e.total}),o(e);break;case li.Error:c(),a(new ei(e.msg,e.error_code))}})}))({token:e.token,pusherKey:b,signal:t,onProgress:d})],{signal:u})).then(e=>{if(e instanceof ei)throw e;return e}).then(e=>fi(e.uuid,{publicKey:t,baseURL:i,integration:p,userAgent:g,retryThrottledRequestMaxTimes:m,onProgress:d,signal:u})).then(e=>new vi(e,{baseCDN:o}));var v},Ai=new WeakMap,Ei=async e=>{if(Xr(e)||Wr(e))return e.size;if(Zr(e)){return(await(async e=>{if(Ai.has(e))return Ai.get(e);const t=await fetch(e.uri).then(e=>e.blob());return Ai.set(e,t),t})(e)).size}throw new Error("Unknown file type. Cannot determine file size.")},Ii=e=>{const t=new RegExp("[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}");return!Yr(e)&&t.test(e)},Si=e=>{const t=new RegExp("^(?:\\w+:)?\\/\\/([^\\s\\.]+\\.\\S{2}|localhost[\\:?\\d]*)\\S*$");return!Yr(e)&&t.test(e)},Mi=async(e,t,r)=>i=>((e,t,r,i)=>{const o=i*t,a=Math.min(o+i,r);return e.slice(o,a)})(e,i,t,r),$i=async(e,{publicKey:t,fileName:r,fileSize:i,baseURL:o,secureSignature:a,secureExpire:n,store:s,signal:c,onProgress:l,source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,contentType:m,multipartChunkSize:b=jr.multipartChunkSize,maxConcurrentRequests:f=jr.maxConcurrentRequests,baseCDN:v,metadata:y})=>{const w=i??await Ei(e);let _;const k=(e,t)=>{if(!l)return;_||(_=Array(e).fill(0));return r=>{var i;r.isComputable&&(_[t]=r.value,l({isComputable:!0,value:(i=_,i.reduce((e,t)=>e+t,0)/e)}))}};return m||=oi(e),gi(w,{publicKey:t,contentType:m,fileName:r||ai(e),baseURL:o,secureSignature:a,secureExpire:n,store:s,signal:c,source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,metadata:y,multipartChunkSize:b}).then(async({uuid:r,parts:i})=>{const o=await Mi(e,w,b);return Promise.all([r,(a=f,n=i.map((e,r)=>()=>((e,t,{publicKey:r,contentType:i,onProgress:o,signal:a,integration:n,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:c})=>mi(e,t,{publicKey:r,contentType:i,onProgress:o,signal:a,integration:n,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:c}))(o(r),e,{publicKey:t,contentType:m,onProgress:k(i.length,r),signal:c,integration:d,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g})),new Promise((e,t)=>{const r=[];let i=!1,o=n.length;const s=[...n],c=()=>{const a=n.length-s.length,l=s.shift();l&&l().then(t=>{i||(r[a]=t,o-=1,o?c():e(r))}).catch(e=>{i=!0,t(e)})};for(let e=0;e<a;e++)c()}))]);var a,n}).then(([e])=>bi(e,{publicKey:t,baseURL:o,source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g})).then(e=>e.isReady?e:fi(e.uuid,{publicKey:t,baseURL:o,source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,onProgress:l,signal:c})).then(e=>new vi(e,{baseCDN:v}))};async function Li(e,{publicKey:t,fileName:r,baseURL:i=jr.baseURL,secureSignature:o,secureExpire:a,store:n,signal:s,onProgress:c,source:l,integration:u,userAgent:d,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,contentType:g,multipartMinFileSize:m,multipartChunkSize:b,maxConcurrentRequests:f,baseCDN:v=jr.baseCDN,checkForUrlDuplicates:y,saveUrlForRecurrentUploads:w,pusherKey:_,metadata:k}){if(Yr(e)){const y=await Ei(e);return((e,t=jr.multipartMinFileSize)=>e>=t)(y,m)?$i(e,{publicKey:t,contentType:g,multipartChunkSize:b,fileSize:y,fileName:r,baseURL:i,secureSignature:o,secureExpire:a,store:n,signal:s,onProgress:c,source:l,integration:u,userAgent:d,maxConcurrentRequests:f,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,baseCDN:v,metadata:k}):((e,{publicKey:t,fileName:r,baseURL:i,secureSignature:o,secureExpire:a,store:n,contentType:s,signal:c,onProgress:l,source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,baseCDN:m,metadata:b})=>si(e,{publicKey:t,fileName:r,contentType:s,baseURL:i,secureSignature:o,secureExpire:a,store:n,signal:c,onProgress:l,source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,metadata:b}).then(({file:e})=>fi(e,{publicKey:t,baseURL:i,source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,onProgress:l,signal:c})).then(e=>new vi(e,{baseCDN:m})))(e,{publicKey:t,fileName:r,contentType:g,baseURL:i,secureSignature:o,secureExpire:a,store:n,signal:s,onProgress:c,source:l,integration:u,userAgent:d,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,baseCDN:v,metadata:k})}if(Si(e))return Ti(e,{publicKey:t,fileName:r,baseURL:i,baseCDN:v,checkForUrlDuplicates:y,saveUrlForRecurrentUploads:w,secureSignature:o,secureExpire:a,store:n,signal:s,onProgress:c,source:l,integration:u,userAgent:d,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,pusherKey:_,metadata:k});if(Ii(e))return((e,{publicKey:t,fileName:r,baseURL:i,signal:o,onProgress:a,source:n,integration:s,userAgent:c,retryThrottledRequestMaxTimes:l,retryNetworkErrorMaxTimes:u,baseCDN:d})=>pi(e,{publicKey:t,baseURL:i,signal:o,source:n,integration:s,userAgent:c,retryThrottledRequestMaxTimes:l,retryNetworkErrorMaxTimes:u}).then(e=>new vi(e,{baseCDN:d,fileName:r})).then(e=>(a&&a({isComputable:!0,value:1}),e)))(e,{publicKey:t,fileName:r,baseURL:i,signal:s,onProgress:c,source:l,integration:u,userAgent:d,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,baseCDN:v});throw new TypeError(`File uploading from "${e}" is not supported`)}class Ri{uuid;filesCount;totalSize;isStored;isImage;cdnUrl;files;createdAt;storedAt=null;constructor(e,{baseCDN:t=jr.baseCDN}={}){this.uuid=e.id,this.filesCount=e.filesCount;const r=e.files.filter(Boolean);this.totalSize=Object.values(r).reduce((e,t)=>e+t.size,0),this.isStored=!!e.datetimeStored,this.isImage=!!Object.values(r).filter(e=>e.isImage).length,this.cdnUrl=e.cdnUrl,this.files=r.map(e=>new vi(e,{baseCDN:t})),this.createdAt=e.datetimeCreated,this.storedAt=e.datetimeStored}}function Ui(e,{publicKey:t,fileName:r,baseURL:i=jr.baseURL,secureSignature:o,secureExpire:a,store:n,signal:s,onProgress:c,source:l,integration:u,userAgent:d,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,contentType:g,multipartChunkSize:m=jr.multipartChunkSize,baseCDN:b=jr.baseCDN,checkForUrlDuplicates:f,saveUrlForRecurrentUploads:v,jsonpCallback:y}){if(!(e=>{for(const t of e)if(!Yr(t))return!1;return!0})(e)&&!(e=>{for(const t of e)if(!Si(t))return!1;return!0})(e)&&!(e=>{for(const t of e)if(!Ii(t))return!1;return!0})(e))throw new TypeError(`Group uploading from "${e}" is not supported`);let w,_=!0;const k=e.length,x=(e,t)=>{if(!c)return;w||(w=Array(e).fill(0));return r=>{if(!r.isComputable||!_)return _=!1,void c({isComputable:!1});var i;w[t]=r.value,c({isComputable:!0,value:(i=w,i.reduce((e,t)=>e+t)/e)})}};return Promise.all(e.map((e,c)=>Yr(e)||Si(e)?Li(e,{publicKey:t,fileName:r,baseURL:i,secureSignature:o,secureExpire:a,store:n,signal:s,onProgress:x(k,c),source:l,integration:u,userAgent:d,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,contentType:g,multipartChunkSize:m,baseCDN:b,checkForUrlDuplicates:f,saveUrlForRecurrentUploads:v}).then(e=>e.uuid):e)).then(e=>hi(e,{publicKey:t,baseURL:i,jsonpCallback:y,secureSignature:o,secureExpire:a,signal:s,source:l,integration:u,userAgent:d,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p}).then(e=>new Ri(e,{baseCDN:b})).then(e=>(c&&c({isComputable:!0,value:1}),e)))}class Oi{_concurrency=1;_pending=[];_running=0;_resolvers=new Map;_rejectors=new Map;constructor(e){this._concurrency=e}_run(){const e=this._concurrency-this._running;for(let t=0;t<e;t++){const e=this._pending.shift();if(!e)return;const t=this._resolvers.get(e),r=this._rejectors.get(e);if(!t||!r)throw new Error("Unexpected behavior: resolver or rejector is undefined");this._running+=1,e().finally(()=>{this._resolvers.delete(e),this._rejectors.delete(e),this._running-=1,this._run()}).then(e=>t(e)).catch(e=>r(e))}}add(e){return new Promise((t,r)=>{this._resolvers.set(e,t),this._rejectors.set(e,r),this._pending.push(e),this._run()})}get pending(){return this._pending.length}get running(){return this._running}set concurrency(e){this._concurrency=e,this._run()}get concurrency(){return this._concurrency}}const Pi=e=>({"*currentActivity":null,"*currentActivityParams":{},"*history":[],"*historyBack":null,"*closeModal":()=>{e.modalManager.close(e.$["*currentActivity"]),e.set$({"*currentActivity":null})}}),zi=e=>({...Pi(e),"*commonProgress":0,"*uploadList":[],"*uploadQueue":new Oi(1),"*collectionErrors":[],"*collectionState":null,"*groupInfo":null,"*uploadTrigger":new Set,"*secureUploadsManager":null}),Ni={"locale-id":"en","social-source-lang":"en","upload-file":"Upload file","upload-files":"Upload files","choose-file":"Choose file","choose-files":"Choose files","drop-files-here":"Drop files here","select-file-source":"Select file source",selected:"Selected",upload:"Upload","add-more":"Add more",cancel:"Cancel","start-from-cancel":"Cancel",clear:"Clear","camera-shot":"Shot","upload-url":"Import","upload-url-placeholder":"Paste link here","edit-image":"Edit image","edit-detail":"Details",back:"Back",done:"Done",ok:"Ok","remove-from-list":"Remove",no:"No",yes:"Yes","confirm-your-action":"Confirm your action","are-you-sure":"Are you sure?","selected-count":"{{count}} of {{total}} selected","select-all":"Select all","deselect-all":"Deselect all","upload-error":"Upload error","validation-error":"Validation error","no-files":"No files selected",browse:"Browse","not-uploaded-yet":"Not uploaded yet...",file__one:"file",file__other:"files",error__one:"error",error__other:"errors","header-uploading":"Uploading {{count}} {{plural:file(count)}}","header-failed":"{{count}} {{plural:error(count)}}","header-succeed":"{{count}} {{plural:file(count)}} uploaded","header-total":"{{count}} {{plural:file(count)}} selected","src-type-local":"From device","src-type-from-url":"From link","src-type-camera":"Camera","src-type-mobile-video-camera":"Video","src-type-mobile-photo-camera":"Photo","src-type-draw":"Draw","src-type-facebook":"Facebook","src-type-dropbox":"Dropbox","src-type-gdrive":"Google Drive","src-type-ngdrive":"Google Drive","src-type-gphotos":"Google Photos","src-type-flickr":"Flickr","src-type-vk":"VK","src-type-evernote":"Evernote","src-type-box":"Box","src-type-onedrive":"Onedrive","src-type-huddle":"Huddle","src-type-other":"Other","caption-from-url":"Import from link","caption-camera":"Camera","caption-draw":"Draw","caption-edit-file":"Edit file","file-no-name":"No name...","toggle-fullscreen":"Toggle fullscreen","toggle-guides":"Toggle guides",rotate:"Rotate","flip-vertical":"Flip vertical","flip-horizontal":"Flip horizontal",apply:"Apply",brightness:"Brightness",contrast:"Contrast",saturation:"Saturation",exposure:"Exposure",gamma:"Gamma",vibrance:"Vibrance",warmth:"Warmth",enhance:"Enhance",original:"Original",resize:"Resize image",crop:"Crop","select-color":"Select color",text:"Text",draw:"Draw","cancel-edit":"Cancel edit","tab-view":"Preview","tab-details":"Details","file-name":"Name","file-size":"Size","cdn-url":"CDN URL","file-size-unknown":"Unknown","camera-permissions-denied":"Camera access denied","camera-permissions-prompt":"Please allow access to the camera","camera-permissions-request":"Request access","files-count-limit-error-title":"Files count limit overflow","files-count-limit-error-too-few":"You’ve chosen {{total}} {{plural:file(total)}}. At least {{min}} {{plural:file(min)}} required.","files-count-limit-error-too-many":"You’ve chosen too many files. {{max}} {{plural:file(max)}} is maximum.","files-max-size-limit-error":"File is too big. Max file size is {{maxFileSize}}.","has-validation-errors":"File validation error occurred. Please, check your files before upload.","images-only-accepted":"Only image files are accepted.","file-type-not-allowed":"Uploading of these file types is not allowed.","some-files-were-not-uploaded":"Some files were not uploaded.","file-item-edit-button":"Edit","file-item-remove-button":"Remove","a11y-editor-tab-filters":"Filters","a11y-editor-tab-tuning":"Tuning","a11y-editor-tab-crop":"Crop","a11y-activity-header-button-close":"Close",flip:"Flip",mirror:"Mirror","a11y-cloud-editor-apply-filter":"Apply {{name}} filter","a11y-cloud-editor-apply-crop":"Apply {{name}} operation","a11y-cloud-editor-apply-tuning":"Apply {{name}} tuning",finished:"Finished",failed:"Failed",uploading:"Uploading",idle:"Idle","a11y-file-item-status":"File {{fileName}} in status {{status}}","waiting-for":"Waiting for {{source}}",queued:"Queued"},Di=new Map,Fi=new Map,Vi=(e,t)=>{Di.has(e)&&console.log(`Locale ${e} is already defined. Overwriting...`),Di.set(e,{...Ni,...t})},Bi=(e,t)=>{"function"==typeof t?((e,t)=>{Fi.set(e,t)})(e,t):Vi(e,t)};Bi("en",Ni);const ji=e=>`*l10n/${e}`;class Hi{_blockInstance=null;_localeName="";_callbacks=new Set;_boundBlocks=new Map;constructor(e){this._blockInstance=e;for(let[e,t]of Object.entries(Ni)){const r=!this._blockInstance.has(ji(e))||!this._blockInstance.$[ji(e)];this._blockInstance.add(ji(e),t,r)}setTimeout(()=>{e.subConfigValue("localeName",async e=>{if(!this._blockInstance||!e)return;this._localeName=e;const t=await(async e=>{if(!Di.has(e)){if(!Fi.has(e))throw new Error(`Locale ${e} is not defined`);const t=Fi.get(e),r=await t();Vi(e,r)}return Di.get(e)})(e);if("en"!==e&&this._localeName!==e)return;const r=this._blockInstance.cfg.localeDefinitionOverride?.[e];for(const[e,i]of Object.entries(t)){const t=r?.[e];this._blockInstance.add(ji(e),t??i,!0);for(const e of this._callbacks)e()}}),e.subConfigValue("localeDefinitionOverride",e=>{if(!e)return;const t=e[this._localeName];if(t)for(const[e,r]of Object.entries(t)){this._blockInstance?.add(ji(e),r,!0);for(const e of this._callbacks)e()}})})}onLocaleChange(e){const t=_r(e,0);return this._callbacks.add(t),()=>{this._callbacks.delete(t)}}bindL10n(e,t,r){e.$[t]=r(),this._boundBlocks.has(e)||this._boundBlocks.set(e,new Map),this._boundBlocks.get(e)?.get(t)?.();const i=this.onLocaleChange(()=>{e.$[t]=r()});this._boundBlocks.get(e)?.set(t,i)}destroyL10nBindings(e){const t=this._boundBlocks.get(e);if(t){for(const e of t.values())e();this._boundBlocks.delete(e)}}destroy(){this._callbacks.clear()}}function qi(e,t){[...e.querySelectorAll("[l10n]")].forEach(e=>{let r=e.getAttribute("l10n");if(!r)return;const i=r.split(";");for(const r of i)r&&Ki(e,r,t)})}const Ki=(e,t,r)=>{let i="textContent",o=!1;if(t.includes(":")){const e=t.split(":");i=e[0],t=e[1],i.startsWith("@")&&(i=i.slice(1),o=!0)}const a=t;r.has(a)&&r.sub(a,t=>{if(!t)return;r.l10nProcessorSubs.has(a)||r.l10nProcessorSubs.set(a,new Set);const o=r.l10nProcessorSubs.get(a);o?.forEach(e=>{e.remove(),o.delete(e),r.allSubs.delete(e)});const n=ji(t).replace("*","");r.nodeCtx.has(n)||r.nodeCtx.add(n,t);const s=r.nodeCtx.sub(n,()=>{e[i]=r.l10n(t)});o?.add(s),r.allSubs.add(s),e.removeAttribute("l10n")});const n=ji(t);r.has(n)||r.add(n,""),r.sub(n,()=>{o?e.setAttribute(i,r.l10n(t)):e[i]=r.l10n(t)}),e.removeAttribute("l10n")},Gi=e=>`*cfg/${e}`;const Wi={button:["toolbar"],checkbox:["toolbar"],menuitem:["menu","menubar"],option:["listbox"],tab:["tablist"]};function Xi(e,t){t.tabIndex=0,t.focus(),e.tabIndex=-1}function Zi(e){let t=e.role||e.type||e.tagName;if(!t)return null;let r=Wi[t.toLowerCase()];if(!r)return null;for(let t of r){let r=e.closest(`[role=${t}]`);if(r)return r}}function Yi(e,t){return"toolbar"===t.role?function(e){let t=[...e.querySelectorAll("*")];return t.filter(e=>"button"===e.role||"button"===e.type||"checkbox"===e.role||"checkbox"===e.type)}(t):t.querySelectorAll(`[role=${e.role}]`)}function Ji(e){return t=>{let r=!1,i=e?.searchDelayMs||300,o=0,a="";function n(e){let r=Zi(e.target);if(!r)return void s();let n=Yi(e.target,r),c=Array.from(n).indexOf(e.target),l="ArrowDown",u="ArrowUp";if(function(e){let t=e.getAttribute("aria-orientation");if("vertical"===t)return!1;if("horizontal"===t)return!0;let r=e.role;return"menubar"===r||"tablist"===r||"toolbar"===r}(r)&&("rtl"===t.document.dir?(l="ArrowLeft",u="ArrowRight"):(l="ArrowRight",u="ArrowLeft")),e.key===l)e.preventDefault(),Xi(e.target,n[c+1]||n[0]);else if(e.key===u)e.preventDefault(),Xi(e.target,n[c-1]||n[n.length-1]);else if("Home"===e.key)e.preventDefault(),Xi(e.target,n[0]);else if("End"===e.key)e.preventDefault(),Xi(e.target,n[n.length-1]);else if(1===e.key.length&&"tablist"!==r.role){let t=Date.now();t-o<=i?a+=e.key.toLowerCase():a=e.key.toLowerCase(),o=t;let r=Array.from(n).find(e=>e.textContent?.trim()?.toLowerCase()?.startsWith(a));r&&(e.preventDefault(),Xi(e.target,r))}}function s(){r=!1,t.removeEventListener("keydown",n)}function c(e){let i=Zi(e.target);if(i){r||(r=!0,t.addEventListener("keydown",n));let o=Yi(e.target,i);for(let t of o)t!==e.target&&t.setAttribute("tabindex",-1)}else r&&s()}function l(e){e.relatedTarget&&e.relatedTarget!==t.document||s()}function u(e){let t=Zi(e.target);if(t){let r=Yi(e.target,t);for(let t of r)t!==e.target&&t.setAttribute("tabindex",-1);e.target.setAttribute("tabindex",0)}}return t.addEventListener("click",u),t.addEventListener("focusin",c),t.addEventListener("focusout",l),()=>{s(),t.removeEventListener("click",u),t.removeEventListener("focusin",c),t.removeEventListener("focusout",l)}}}function Qi(e){let t,r,i=e.split(" ");function o(e){"Enter"!==e.key||"BUTTON"!==e.target.tagName&&"A"!==e.target.tagName||(a(),e.target.classList.add(...i),t=e.target,r=e.target)}function a(){t&&t.classList.remove(...i),r=null}function n(e){0===e.clientX&&0===e.clientY&&r!==e.target&&(a(),e.target.classList.add(...i),t=e.target)}return e=>(e.addEventListener("click",n),e.addEventListener("keydown",o),e.addEventListener("keyup",a),()=>{e.removeEventListener("click",n),e.removeEventListener("keydown",o),e.removeEventListener("keyup",a)})}function eo(){return e=>{let t=[];function r(){let i=t.pop();if(!i)return void e.document.activeElement.blur();let o=i.deref();o&&o.isConnected?o.focus():r()}let i,o=0;function a(r){clearInterval(i);let a=r.getAttribute("aria-controls");i=setInterval(()=>{if(o++>50)return void clearInterval(i);let r=e.document.getElementById(a);if(r){let o=r.querySelector('a, button, select, textarea, input:not([type=radio]), [type=radio]:checked, [tabindex]:not([tabindex="-1"])');o&&(clearInterval(i),r.dispatchEvent(new e.CustomEvent("keyuxJump",{bubbles:!0})),function(r){let i=e.document.activeElement;i&&i!==e.document.body&&t.push(new WeakRef(i)),r.focus({focusVisible:!0})}(o))}},50)}function n(e){e.target.getAttribute("aria-controls")&&"Enter"===e.key&&a(e.target),"Escape"===e.key&&r()}return e.addEventListener("keydown",n),()=>{e.removeEventListener("keydown",n)}}}class to{_listeners=new Map;_scope=[];addEventListener(e,t){const r=e=>{const r=e.target;r&&this._scope.some(t=>t===e.target||t.contains(r))&&t(e)};this._listeners.set(t,r),window.addEventListener(e,r)}removeEventListener(e,t){const r=this._listeners.get(t);r&&window.removeEventListener(e,r),this._listeners.delete(t)}get CustomEvent(){return window.CustomEvent}get document(){return window.document}get navigator(){return window.navigator}registerScope(e){this._scope.push(e)}destroy(){this._scope=[],this._listeners.forEach((e,t)=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",e),this._listeners.delete(t)})}}class ro{_destroyKeyUX;_scopedWindow;constructor(){this._scopedWindow=new to,this._destroyKeyUX=function(e,t){let r=t.map(t=>t(e));return()=>{r.forEach(e=>e())}}(this._scopedWindow,[Ji(),Qi("is-pressed"),eo(),e=>{let t,r;function i(e){if("true"===e.target.getAttribute("aria-hidden")){t=e.target,t.setAttribute("aria-hidden","false"),r=t.hidden,r&&(t.hidden=!1);let i=e.target.querySelector('a, button, select, textarea, input:not([type=radio]), [type=radio]:checked, [tabindex]:not([tabindex="-1"])');i&&(i.tabIndex=0)}}function o(e){!t||!t.contains(e.target)||e.relatedTarget&&t.contains(e.relatedTarget)||(e.target.tabIndex=-1,t.setAttribute("aria-hidden","true"),r&&(t.hidden=!0),t=null)}return e.addEventListener("keyuxJump",i),e.addEventListener("focusout",o),()=>{e.removeEventListener("keyuxJump",i),e.removeEventListener("focusout",o)}}])}registerBlock(e){this._scopedWindow.registerScope(e)}destroy(){this._destroyKeyUX?.(),this._scopedWindow.destroy()}}const io=Object.freeze({ADD:"modal:add",DELETE:"modal:delete",OPEN:"modal:open",CLOSE:"modal:close",CLOSE_ALL:"modal:closeAll",DESTROY:"modal:destroy"});class oo{_modals=new Map;_activeModals=new Set;_subscribers=new Map;constructor(e){this._block=e}_debugPrint(...e){this._block.debugPrint("[modal-manager]",...e)}registerModal(e,t){this._modals.set(e,t),this._notify(io.ADD,{id:e,modal:t})}deleteModal(e){if(!this._modals.has(e))return!1;const t=this._modals.get(e);return this._modals.delete(e),this._activeModals.delete(e),this._notify(io.DELETE,{id:e,modal:t}),!0}open(e){if(!this._modals.has(e))return this._debugPrint(`Modal with ID "${e}" not found`),!1;const t=this._modals.get(e);return this._activeModals.add(e),this._notify(io.OPEN,{modal:t,id:e}),!0}close(e){if(!this._modals.has(e)||!this._activeModals.has(e))return this._debugPrint(`Modal with ID "${e}" not found or not active`),!1;const t=this._modals.get(e);return this._activeModals.delete(e),this._notify(io.CLOSE,{id:e,modal:t}),!0}toggle(e){return this._modals.has(e)?this._activeModals.has(e)?this.close(e):this.open(e):(this._debugPrint(`Modal with ID "${e}" not found`),!1)}get hasActiveModals(){return this._activeModals.size>0}back(){if(0===this._activeModals.size)return this._debugPrint("No active modals to go back from"),!1;const e=Array.from(this._activeModals).pop();return this.close(e)}closeAll(){const e=this._activeModals.size;return this._activeModals.clear(),this._notify(io.CLOSE_ALL,{}),e}subscribe(e,t){return this._subscribers.has(e)||this._subscribers.set(e,new Set),this._subscribers.get(e)?.add(t),()=>this.unsubscribe(e,t)}unsubscribe(e,t){this._subscribers.has(e)&&this._subscribers.get(e)?.delete(t)}_notify(e,t){if(this._subscribers.has(e))for(const r of this._subscribers.get(e)??new Set)try{r(t)}catch(e){this._debugPrint("Error in modal subscriber:",e)}}destroy(){this.closeAll(),this._modals.clear(),this._subscribers.clear(),this._notify(io.DESTROY,{})}}function ao(e,t){const r=e.querySelectorAll("[data-testid]");if(0===r.length)return;const i=new WeakMap;for(const e of r){const t=e.getAttribute("data-testid");t&&i.set(e,t)}t.subConfigValue("testMode",e=>{if(!e){for(const e of r)e.removeAttribute("data-testid");return}const o=t.testId;for(const e of r){const t=i.get(e);t&&e.setAttribute("data-testid",`${o}--${t}`)}})}class no extends zt{static StateConsumerScope=null;static styleAttrs=[];requireCtxName=!1;activityType=null;init$={};l10n(e,t={}){if(!e)return"";let r=this.$[ji(e)]||e,i=function(e){const t=[];let r=e.indexOf(Ar);for(;-1!==r;){const i=e.indexOf(Er,r),o=e.substring(r+2,i);if(o.startsWith(Ir)){const a=e.substring(r+2,i).replace(Ir,""),n=a.substring(0,a.indexOf("(")),s=a.substring(a.indexOf("(")+1,a.indexOf(")"));t.push({variable:o,pluralKey:n,countVariable:s})}r=e.indexOf(Ar,i)}return t}(r);for(let e of i)t[e.variable]=this.pluralize(e.pluralKey,Number(t[e.countVariable]));return Sr(r,t)}pluralize(e,t){const r=this.l10n("locale-id")||"en",i=Cr(r,t);return this.l10n(`${e}__${i}`)}bindL10n(e,t){this.localeManager?.bindL10n(this,e,t)}constructor(){super(),this.l10nProcessorSubs=new Map,this.addTemplateProcessor(qi),this.addTemplateProcessor(ao)}emit(e,t,r){const i=this.has("*eventEmitter")&&this.$["*eventEmitter"];i&&i.emit(e,t,r)}hasBlockInCtx(e){for(let t of this.blocksRegistry)if(e(t))return!0;return!1}setOrAddState(e,t){this.add$({[e]:t},!0)}connectedCallback(){this.constructor.styleAttrs.forEach(e=>{this.setAttribute(e,"")}),this.hasAttribute("retpl")&&(this.constructor.template=null,this.processInnerHtml=!0),this.requireCtxName?(({element:e,attribute:t,onSuccess:r,onTimeout:i,timeout:o=300})=>{const a=e.getAttribute(t);if(null!==a)return void r(a);const n=new MutationObserver(e=>{const t=e[e.length-1];c(t)});n.observe(e,{attributes:!0,attributeFilter:[t]});const s=setTimeout(()=>{n.disconnect(),i()},o),c=i=>{const o=e.getAttribute(t);"attributes"===i.type&&i.attributeName===t&&null!==o&&(clearTimeout(s),n.disconnect(),r(o))}})({element:this,attribute:"ctx-name",onSuccess:()=>{super.connectedCallback()},onTimeout:()=>{console.error("Attribute `ctx-name` is required and it is not set.")}}):super.connectedCallback(),xr.registerClient(this)}disconnectedCallback(){super.disconnectedCallback(),xr.unregisterClient(this)}initCallback(){this.has("*blocksRegistry")||this.add("*blocksRegistry",new Set),this.$["*blocksRegistry"].add(this),this.has("*eventEmitter")||this.add("*eventEmitter",new wr(this.debugPrint.bind(this))),this.has("*localeManager")||this.add("*localeManager",new Hi(this)),this.has("*a11y")||this.add("*a11y",new ro),this.has("*modalManager")||this.add("*modalManager",new oo(this)),this.sub(ji("locale-id"),e=>{const t=(e=>{const t=new Intl.Locale(e);let r="ltr";return"function"==typeof t.getTextInfo&&t.getTextInfo().direction?r=t.getTextInfo().direction:"textInfo"in t&&t.textInfo?.direction&&(r=t.textInfo.direction),r})(e);this.style.direction="ltr"===t?"":t}),this.subConfigValue("testMode",e=>{e&&this.testId?this.setAttribute("data-testid",this.testId):this.removeAttribute("data-testid")})}get testId(){return window.customElements.getName(this.constructor)}get modalManager(){return this.has("*modalManager")&&this.$["*modalManager"]}get localeManager(){return this.has("*localeManager")?this.$["*localeManager"]:null}get a11y(){return this.has("*a11y")?this.$["*a11y"]:null}get blocksRegistry(){return this.$["*blocksRegistry"]}destroyCallback(){super.destroyCallback();let e=this.blocksRegistry;e?.delete(this),this.localeManager?.destroyL10nBindings(this),this.l10nProcessorSubs=new Map,wt.deleteCtx(this),0===e?.size&&setTimeout(()=>{this.destroyCtxCallback()},0)}destroyCtxCallback(){wt.deleteCtx(this.ctxName),this.localeManager?.destroy(),this.modalManager&&this.modalManager?.destroy()}async proxyUrl(e){if(this.cfg.secureDeliveryProxy&&this.cfg.secureDeliveryProxyUrlResolver&&console.warn("Both secureDeliveryProxy and secureDeliveryProxyUrlResolver are set. The secureDeliveryProxyUrlResolver will be used."),this.cfg.secureDeliveryProxyUrlResolver)try{return await this.cfg.secureDeliveryProxyUrlResolver(e,{uuid:Wt(e),cdnUrlModifiers:Xt(e),fileName:Gt(e)})}catch(t){return console.error("Failed to resolve secure delivery proxy URL. Falling back to the default URL.",t),e}return this.cfg.secureDeliveryProxy?Sr(this.cfg.secureDeliveryProxy,{previewUrl:e},{transform:e=>window.encodeURIComponent(e)}):e}get cfg(){if(!this.__cfgProxy){let e=Object.create(null);this.__cfgProxy=new Proxy(e,{set:(e,t,r)=>{if("string"!=typeof t)return!1;const i=Gi(t);return this.has(i)||this.add(i,vr[t]),this.$[i]=r,!0},get:(e,t)=>{const r=Gi(t);return this.has(r)||this.add(r,vr[t]),this.$[Gi(t)]}})}return this.__cfgProxy}subConfigValue(e,t){const r=Gi(e);this.has(r)||this.add(r,vr[e]),this.sub(r,t)}debugPrint(...e){if(!this.cfg.debug)return;let t=e;if("function"==typeof e?.[0]){t=(0,e[0])()}console.log(`[${this.ctxName}]`,...t)}static reg(e){e?e.startsWith("uc-")&&super.reg(e):super.reg()}}class so extends no{static styleAttrs=["uc-wgt-common"];requireCtxName=!0;init$=zi(this);_template=null;initCallback(){super.initCallback(),this.a11y?.registerBlock(this)}static set template(e){this._template="<svg width='0' height='0' style='position:absolute'><symbol viewBox='0 0 24 24' id='uc-icon-about' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.152 14.12v.1h1.523v-.1c.007-.409.053-.752.138-1.028.086-.277.22-.517.405-.72.188-.202.434-.397.735-.586.32-.191.593-.412.82-.66.232-.249.41-.531.533-.847.125-.32.187-.678.187-1.076 0-.579-.137-1.085-.41-1.518a2.717 2.717 0 0 0-1.14-1.018c-.49-.245-1.062-.367-1.715-.367-.597 0-1.142.114-1.636.34-.49.228-.884.564-1.182 1.008-.299.44-.46.98-.485 1.619h1.62c.024-.377.118-.684.282-.922a1.48 1.48 0 0 1 .617-.532c.25-.114.51-.17.784-.17.301 0 .575.063.82.191.248.124.447.302.597.533.149.23.223.504.223.82 0 .263-.05.502-.149.72a1.91 1.91 0 0 1-.405.574 3.48 3.48 0 0 1-.575.453 4.22 4.22 0 0 0-.847.66c-.234.242-.415.558-.543.949-.125.39-.19.916-.197 1.577Zm.053 3.03c.21.206.46.31.75.31.196 0 .374-.049.534-.144a1.1 1.1 0 0 0 .383-.384c.1-.163.15-.343.15-.538a1 1 0 0 0-.32-.746 1.019 1.019 0 0 0-.746-.314c-.291 0-.542.105-.751.314-.21.206-.314.455-.314.746 0 .295.104.547.314.756ZM24 12c0 6.627-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0s12 5.373 12 12Zm-1.5 0c0 5.799-4.701 10.5-10.5 10.5S1.5 17.799 1.5 12 6.201 1.5 12 1.5 22.5 6.201 22.5 12Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-add' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12.75 21a.75.75 0 0 1-1.5 0v-8.25H3a.75.75 0 0 1 0-1.5h8.25V3a.75.75 0 0 1 1.5 0v8.25H21a.75.75 0 0 1 0 1.5h-8.25V21Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-arrow-down' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.5 23.03a.75.75 0 0 0 .999 0l9.29-8.276a.75.75 0 0 0-.998-1.12l-8.042 7.164V1.53a.75.75 0 0 0-1.5 0v19.267l-8.04-7.163a.75.75 0 0 0-.998 1.12z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-back' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M20.251 12a.75.75 0 0 1-.75.75H6.067l5.72 5.85a.75.75 0 1 1-1.072 1.05L4.136 12.92a1.292 1.292 0 0 1 0-1.842l6.579-6.728a.75.75 0 1 1 1.072 1.048l-5.72 5.851H19.5a.75.75 0 0 1 .75.75Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-badge-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13.6 18.4a1.6 1.6 0 1 1-3.2 0 1.6 1.6 0 0 1 3.2 0zM12 4.5A1.5 1.5 0 0 1 13.5 6v7a1.5 1.5 0 0 1-3 0V6A1.5 1.5 0 0 1 12 4.5z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-badge-success' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m10.5 18.204 7.6-8.183a1.5 1.5 0 0 0-2.2-2.042l-5.4 5.817-2.4-2.586a1.5 1.5 0 1 0-2.2 2.041l4.6 4.953Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-box' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M1.01 4.148a.75.75 0 0 1 .75.75v4.348a4.437 4.437 0 0 1 2.988-1.153c1.734 0 3.23.992 3.978 2.438a4.478 4.478 0 0 1 3.978-2.438c2.49 0 4.488 2.044 4.488 4.543 0 2.5-1.999 4.544-4.488 4.544a4.478 4.478 0 0 1-3.978-2.438 4.478 4.478 0 0 1-3.978 2.438C2.26 17.18.26 15.135.26 12.636V4.898a.75.75 0 0 1 .75-.75Zm.75 8.488c0 1.692 1.348 3.044 2.988 3.044s2.989-1.352 2.989-3.044c0-1.691-1.349-3.043-2.989-3.043S1.76 10.945 1.76 12.636Zm10.944-3.043c-1.64 0-2.988 1.352-2.988 3.043 0 1.692 1.348 3.044 2.988 3.044s2.988-1.352 2.988-3.044c0-1.69-1.348-3.043-2.988-3.043Zm4.328-1.23a.75.75 0 0 1 1.052.128l2.333 2.983 2.333-2.983a.75.75 0 0 1 1.181.924l-2.562 3.277 2.562 3.276a.75.75 0 1 1-1.181.924l-2.333-2.983-2.333 2.983a.75.75 0 1 1-1.181-.924l2.562-3.276-2.562-3.277a.75.75 0 0 1 .129-1.052Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-camera' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M7.65 2.55a.75.75 0 0 1 .6-.3h7.5a.75.75 0 0 1 .6.3l2.025 2.7H21a3 3 0 0 1 3 3v10.5a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V8.25a3 3 0 0 1 3-3h2.625zm.975 1.2L6.6 6.45a.75.75 0 0 1-.6.3H3a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h18a1.5 1.5 0 0 0 1.5-1.5V8.25a1.5 1.5 0 0 0-1.5-1.5h-3a.75.75 0 0 1-.6-.3l-2.025-2.7zm3.375 6a3.375 3.375 0 1 0 0 6.75 3.375 3.375 0 0 0 0-6.75zm-4.875 3.375a4.875 4.875 0 1 1 9.75 0 4.875 4.875 0 0 1-9.75 0z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-camera-full' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' clip-rule='evenodd' d='M2 4.667a2 2 0 0 0-2 2V16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6.667a2 2 0 0 0-2-2h-2.667l-2-2.667H6.667l-2 2.667H2Zm8 10a3.667 3.667 0 1 0 0-7.334 3.667 3.667 0 0 0 0 7.334Z' fill='currentColor'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-close' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M4.604 4.604a.75.75 0 0 1 1.06 0L12 10.939l6.335-6.335a.75.75 0 1 1 1.061 1.06L13.061 12l6.335 6.335a.75.75 0 1 1-1.06 1.061L12 13.061l-6.335 6.335a.75.75 0 0 1-1.061-1.06L10.939 12 4.604 5.665a.75.75 0 0 1 0-1.061z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-collapse' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M3.116 12a.75.75 0 0 1 .75-.75h16.268a.75.75 0 0 1 0 1.5H3.866a.75.75 0 0 1-.75-.75Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-default' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.501.392a.75.75 0 0 1 .998 0l6.704 5.972a.75.75 0 0 1-.998 1.12l-5.455-4.86v13.439a.75.75 0 0 1-1.5 0V2.625l-5.454 4.86a.75.75 0 1 1-.998-1.12zM.857 16.73a.75.75 0 0 1 .75.75v4.914h20.786v-4.914a.75.75 0 0 1 1.5 0v5.664a.75.75 0 0 1-.75.75H.857a.75.75 0 0 1-.75-.75v-5.664a.75.75 0 0 1 .75-.75z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-dropbox' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.019 1.92a.75.75 0 0 1 .806 0L12 5.219l5.176-3.297a.75.75 0 0 1 .806 0l5.577 3.553a.75.75 0 0 1 0 1.265l-4.574 2.914 4.574 2.914a.75.75 0 0 1 0 1.265l-5.577 3.554a.75.75 0 0 1-.806 0L12 14.089l-5.175 3.297a.75.75 0 0 1-.806 0L.44 13.833a.75.75 0 0 1 0-1.266l4.575-2.914L.44 6.74a.75.75 0 0 1 0-1.265zm.403 8.616L2.24 13.2l4.182 2.664 4.181-2.664zm6.975 2.664 4.182 2.664L21.76 13.2l-4.181-2.664zm2.776-3.547L12 12.311 7.828 9.653 12 6.995zm1.406-.882 4.181-2.664-4.181-2.664-4.182 2.664zm-6.976-2.664L6.422 3.443 2.24 6.107 6.422 8.77zM5.791 18.544a.75.75 0 0 1 1.035-.23l5.175 3.297 5.175-3.297a.75.75 0 1 1 .806 1.265l-5.578 3.554a.75.75 0 0 1-.806 0L6.02 19.579a.75.75 0 0 1-.23-1.035z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M18.558 2.804a.78.78 0 0 0-.557.235l-.008.007-2.472 2.46 3.847 3.848 2.46-2.473.004-.003a.78.78 0 0 0 0-1.108l-.004-.003-2.712-2.728a.78.78 0 0 0-.558-.235Zm-.248 7.613-3.852-3.852-8.93 8.887-1.516 5.41 5.41-1.515 8.888-8.93Zm-.636-8.934a2.28 2.28 0 0 1 2.512.505l2.702 2.717.002.002a2.278 2.278 0 0 1 0 3.234l-.002.002-12.541 12.602a.75.75 0 0 1-.33.193l-6.884 1.928a.75.75 0 0 1-.925-.924l1.928-6.885a.75.75 0 0 1 .193-.33l12.603-12.54a2.28 2.28 0 0 1 .742-.504Z' clip-rule='evenodd'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13 13h-2V7h2m0 10h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-evernote' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M9.804 2.27v-.048c.055-.263.313-.562.85-.562h.44c.142 0 .325.014.526.033.066.009.124.023.267.06l.13.032h.002c.319.079.515.275.644.482a1.461 1.461 0 0 1 .16.356l.004.012a.75.75 0 0 0 .603.577l1.191.207a1988.512 1988.512 0 0 0 2.332.402c.512.083 1.1.178 1.665.442.64.3 1.19.795 1.376 1.77.548 2.931.657 5.829.621 8a39.233 39.233 0 0 1-.125 2.602 17.518 17.518 0 0 1-.092.849.735.735 0 0 0-.024.112c-.378 2.705-1.269 3.796-2.04 4.27-.746.457-1.53.451-2.217.447h-.192c-.46 0-1.073-.23-1.581-.635-.518-.412-.763-.87-.763-1.217 0-.45.188-.688.355-.786.161-.095.436-.137.796.087a.75.75 0 1 0 .792-1.274c-.766-.476-1.64-.52-2.345-.108-.7.409-1.098 1.188-1.098 2.08 0 .996.634 1.84 1.329 2.392.704.56 1.638.96 2.515.96l.185.002c.667.009 1.874.025 3.007-.67 1.283-.786 2.314-2.358 2.733-5.276a4.213 4.213 0 0 0 .056-.335c.023-.184.051-.445.079-.772.055-.655.111-1.585.13-2.704.037-2.234-.074-5.239-.647-8.301v-.002c-.294-1.544-1.233-2.391-2.215-2.85-.777-.363-1.623-.496-2.129-.576a8.872 8.872 0 0 1-.25-.041l-.006-.001-1.99-.345-.761-.132a2.93 2.93 0 0 0-.182-.338A2.532 2.532 0 0 0 12.379.329l-.091-.023a3.967 3.967 0 0 0-.493-.103L11.769.2a7.846 7.846 0 0 0-.675-.04h-.44c-.733 0-1.368.284-1.795.742L2.416 7.431c-.468.428-.751 1.071-.751 1.81 0 .02 0 .041.003.062l.003.034c.017.21.038.468.096.796.107.715.275 1.47.391 1.994.029.13.055.245.075.342l.002.008c.258 1.141.641 1.94.978 2.466.168.263.323.456.444.589a2.808 2.808 0 0 0 .192.194c1.536 1.562 3.713 2.196 5.731 2.08.13-.005.35-.032.537-.073a2.627 2.627 0 0 0 .652-.24c.425-.26.75-.661.992-1.046.184-.294.342-.61.473-.915a3.8 3.8 0 0 0 .627.493 5.022 5.022 0 0 0 1.97.709l.023.002.018.003.11.016c.088.014.205.035.325.058l.056.014c.088.022.164.04.235.061a1.736 1.736 0 0 1 .145.048l.03.014c.765.34 1.302 1.09 1.302 1.871a.75.75 0 0 0 1.5 0c0-1.456-.964-2.69-2.18-3.235a3.595 3.595 0 0 0-.679-.217l-.063-.015a10.616 10.616 0 0 0-.606-.105l-.02-.003-.03-.003h-.002a3.542 3.542 0 0 1-1.331-.485c-.471-.298-.788-.692-.828-1.234a.75.75 0 0 0-1.48-.106l-.001.003-.004.017a8.23 8.23 0 0 1-.092.352 9.963 9.963 0 0 1-.298.892c-.132.34-.29.68-.47.966-.174.276-.339.454-.478.549a1.178 1.178 0 0 1-.221.072 1.949 1.949 0 0 1-.241.036h-.013l-.032.002c-1.684.1-3.423-.437-4.604-1.65a.746.746 0 0 0-.053-.05L4.84 14.6a1.348 1.348 0 0 1-.07-.073 2.99 2.99 0 0 1-.293-.392c-.242-.379-.558-1.014-.778-1.985a54.1 54.1 0 0 0-.083-.376 27.494 27.494 0 0 1-.367-1.872l-.003-.02a6.791 6.791 0 0 1-.08-.67c.004-.277.086-.475.2-.609l.067-.067a.63.63 0 0 1 .292-.145h.05c.18 0 1.095.055 2.013.115l1.207.08.534.037a.747.747 0 0 0 .052.002c.782 0 1.349-.206 1.759-.585l.005-.005c.553-.52.622-1.225.622-1.76V6.24l-.026-.565A774.97 774.97 0 0 1 9.885 4.4c-.042-.961-.081-1.939-.081-2.13ZM4.995 6.953a251.126 251.126 0 0 1 2.102.137l.508.035c.48-.004.646-.122.715-.185.07-.068.146-.209.147-.649l-.024-.548a791.69 791.69 0 0 1-.095-2.187L4.995 6.953Zm16.122 9.996Zm-5.479-5.323a.75.75 0 0 0 1.014.31 2.04 2.04 0 0 1 .304-.089 1.84 1.84 0 0 1 .544-.039c.215.023.321.06.37.085.033.016.039.026.047.04a.75.75 0 0 0 1.289-.767c-.337-.567-.906-.783-1.552-.85a3.334 3.334 0 0 0-1.002.062c-.27.056-.531.14-.705.234a.75.75 0 0 0-.31 1.014Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-expand' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m12 8.337-8.47 8.47a.75.75 0 0 1-1.06-1.06l8.605-8.606a1.29 1.29 0 0 1 1.85 0l8.605 8.605a.75.75 0 1 1-1.06 1.06L12 8.338Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-external-source-placeholder' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.341 3.27a10.5 10.5 0 0 1 5.834-1.77.75.75 0 0 0 0-1.5 12 12 0 1 0 12 12 .75.75 0 0 0-1.5 0A10.5 10.5 0 1 1 6.34 3.27Zm14.145 1.48a.75.75 0 1 0-1.06-1.062L9.925 13.19V7.95a.75.75 0 1 0-1.5 0V15c0 .414.336.75.75.75h7.05a.75.75 0 0 0 0-1.5h-5.24l9.501-9.5Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-facebook' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12 1.5C6.201 1.5 1.5 6.201 1.5 12c0 4.943 3.416 9.089 8.016 10.204v-6.108H7.383a.75.75 0 0 1-.75-.75v-3.281a.75.75 0 0 1 .75-.75h2.133V9.393c0-.958.225-2.511 1.38-3.65 1.194-1.177 3.174-1.718 6.254-1.056a.75.75 0 0 1 .592.733v2.754a.75.75 0 0 1-.75.75c-.692 0-1.203.026-1.584.082-.387.057-.578.137-.675.202-.109.073-.237.205-.237 1.029v1.078h2.39a.75.75 0 0 1 .742.866l-.516 3.281a.75.75 0 0 1-.74.634h-1.876v6.106C19.09 21.082 22.5 16.939 22.5 12c0-5.799-4.701-10.5-10.5-10.5zM0 12C0 5.373 5.373 0 12 0s12 5.373 12 12c0 5.995-4.395 10.961-10.138 11.856a.75.75 0 0 1-.866-.74v-7.77a.75.75 0 0 1 .75-.75h1.984l.28-1.781h-2.264a.75.75 0 0 1-.75-.75v-1.828c0-.829.089-1.729.9-2.274.363-.244.807-.37 1.293-.441a9.623 9.623 0 0 1 1.053-.086V6.04c-2.41-.405-3.645.132-4.293.771-.737.728-.933 1.793-.933 2.582v2.672a.75.75 0 0 1-.75.75H8.133v1.78h2.133a.75.75 0 0 1 .75.75v7.772a.75.75 0 0 1-.865.741C4.4 22.968 0 18 0 12z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M2.895 1.201c0-.473.383-.857.857-.857h8.4c.227 0 .445.09.606.251l8.4 8.4c.16.16.25.379.25.606v13.2a.857.857 0 0 1-.856.857h-16.8a.857.857 0 0 1-.857-.857zm1.714.857v19.886h15.085V10.458h-7.542a.857.857 0 0 1-.858-.857V2.058zm8.4 1.213 5.473 5.473H13.01z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-flickr' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M5.959 7.926c-2.298 0-4.14 1.834-4.14 4.073 0 2.241 1.842 4.075 4.14 4.075 2.302 0 4.145-1.834 4.145-4.075 0-2.238-1.843-4.073-4.145-4.073Zm-5.64 4.073c0-3.086 2.533-5.573 5.64-5.573 3.11 0 5.645 2.486 5.645 5.573 0 3.089-2.535 5.575-5.645 5.575-3.107 0-5.64-2.487-5.64-5.575Zm18.07-4.073c-2.301 0-4.144 1.835-4.144 4.073 0 2.24 1.843 4.075 4.145 4.075 2.299 0 4.141-1.834 4.141-4.075 0-2.239-1.842-4.073-4.141-4.073Zm-5.644 4.073c0-3.087 2.535-5.573 5.645-5.573 3.108 0 5.641 2.487 5.641 5.573 0 3.088-2.533 5.575-5.641 5.575-3.11 0-5.645-2.486-5.645-5.575Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-gdrive' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M7.736 1.818a.75.75 0 0 1 .647-.37h7.587a.75.75 0 0 1 .655.383l7.233 12.946a.75.75 0 0 1-.003.737l-3.794 6.66a.75.75 0 0 1-.651.378H4.59a.75.75 0 0 1-.651-.378l-3.794-6.66a.75.75 0 0 1 .005-.75zm.64 1.876L1.663 15.148l2.93 5.145 6.655-11.581zm3.736 6.526-2.398 4.173H14.5zm4.116 4.173h5.697L15.53 2.947H9.677zm5.685 1.5H8.852l-2.966 5.16h13.088z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-gphotos' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12.51 0c-.702 0-1.272.57-1.272 1.273V7.35A6.381 6.381 0 0 0 0 11.489c0 .703.57 1.273 1.273 1.273H7.35A6.381 6.381 0 0 0 11.488 24c.704 0 1.274-.57 1.274-1.273V16.65A6.381 6.381 0 0 0 24 12.51c0-.703-.57-1.273-1.273-1.273H16.65A6.381 6.381 0 0 0 12.511 0Zm.252 11.232V1.53a4.857 4.857 0 0 1 0 9.702Zm-1.53.006H1.53a4.857 4.857 0 0 1 9.702 0Zm1.536 1.524a4.857 4.857 0 0 0 9.702 0h-9.702Zm-6.136 4.857c0-2.598 2.04-4.72 4.606-4.85v9.7a4.857 4.857 0 0 1-4.606-4.85Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-huddle' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.204 2.002c-.252.23-.357.486-.357.67V21.07c0 .15.084.505.313.812.208.28.499.477.929.477.519 0 .796-.174.956-.365.178-.212.286-.535.286-.924v-.013l.117-6.58c.004-1.725 1.419-3.883 3.867-3.883 1.33 0 2.332.581 2.987 1.364.637.762.95 1.717.95 2.526v6.47c0 .392.11.751.305.995.175.22.468.41 1.008.41.52 0 .816-.198 1.002-.437.207-.266.31-.633.31-.969V14.04c0-2.81-1.943-5.108-4.136-5.422a5.971 5.971 0 0 0-3.183.41c-.912.393-1.538.96-1.81 1.489a.75.75 0 0 1-1.417-.344v-7.5c0-.587-.47-1.031-1.242-1.031-.315 0-.638.136-.885.36ZM5.194.892A2.844 2.844 0 0 1 7.09.142c1.328 0 2.742.867 2.742 2.53v5.607a6.358 6.358 0 0 1 1.133-.629 7.47 7.47 0 0 1 3.989-.516c3.056.436 5.425 3.482 5.425 6.906v6.914c0 .602-.177 1.313-.627 1.89-.47.605-1.204 1.016-2.186 1.016-.96 0-1.698-.37-2.179-.973-.46-.575-.633-1.294-.633-1.933v-6.469c0-.456-.19-1.071-.602-1.563-.394-.471-.986-.827-1.836-.827-1.447 0-2.367 1.304-2.367 2.39v.014l-.117 6.58c-.001.64-.177 1.333-.637 1.881-.48.57-1.2.9-2.105.9-.995 0-1.7-.5-2.132-1.081-.41-.552-.61-1.217-.61-1.708V2.672c0-.707.366-1.341.847-1.78Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-info' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2v6Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-local' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M3 3.75a1.5 1.5 0 0 0-1.5 1.5v13.5a1.5 1.5 0 0 0 1.5 1.5h18a1.5 1.5 0 0 0 1.5-1.5V9A1.5 1.5 0 0 0 21 7.5h-9a.75.75 0 0 1-.643-.364L9.325 3.75zm-3 1.5a3 3 0 0 1 3-3h6.75a.75.75 0 0 1 .643.364L12.425 6H21a3 3 0 0 1 3 3v9.75a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-microphone' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' clip-rule='evenodd' d='M7.5 4.781a4.5 4.5 0 0 1 9 0v6.469a4.5 4.5 0 1 1-9 0V4.781Zm4.5-3a3 3 0 0 0-3 3v6.469a3 3 0 1 0 6 0V4.781a3 3 0 0 0-3-3Zm-8.156 8.11a.75.75 0 0 1 .75.75 7.406 7.406 0 1 0 14.812 0 .75.75 0 0 1 1.5 0 8.907 8.907 0 0 1-8.156 8.875v2.703h3.258a.75.75 0 1 1 0 1.5H7.992a.75.75 0 0 1 0-1.5h3.258v-2.703a8.907 8.907 0 0 1-8.156-8.875.75.75 0 0 1 .75-.75Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-microphone-mute' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' clip-rule='evenodd' d='M7.5 4.781a4.5 4.5 0 0 1 9 0V6l3.524-3.524a.75.75 0 1 1 1.061 1.06L5.036 19.585a.75.75 0 0 1-1.06-1.06l1.656-1.657a8.88 8.88 0 0 1-2.538-6.227.75.75 0 0 1 1.5 0c0 2.009.8 3.83 2.1 5.166l1.771-1.772A4.483 4.483 0 0 1 7.5 11.25V4.781Zm2.037 8.182L15 7.5V4.781a3 3 0 1 0-6 0v6.469c0 .637.198 1.227.537 1.713Zm10.62-3.072a.75.75 0 0 1 .75.75 8.907 8.907 0 0 1-8.157 8.875v2.703h3.258a.75.75 0 1 1 0 1.5H7.992a.75.75 0 0 1 0-1.5h3.258v-2.703a8.855 8.855 0 0 1-3.035-.811.75.75 0 1 1 .638-1.358 7.406 7.406 0 0 0 10.553-6.707.75.75 0 0 1 .75-.75ZM15 10.81a.75.75 0 0 1 1.5 0v.439a4.5 4.5 0 0 1-5 4.473.75.75 0 1 1 .166-1.491A3 3 0 0 0 15 11.25v-.44Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-mobile-photo-camera' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M7.65 2.55a.75.75 0 0 1 .6-.3h7.5a.75.75 0 0 1 .6.3l2.025 2.7H21a3 3 0 0 1 3 3v10.5a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V8.25a3 3 0 0 1 3-3h2.625zm.975 1.2L6.6 6.45a.75.75 0 0 1-.6.3H3a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h18a1.5 1.5 0 0 0 1.5-1.5V8.25a1.5 1.5 0 0 0-1.5-1.5h-3a.75.75 0 0 1-.6-.3l-2.025-2.7zm3.375 6a3.375 3.375 0 1 0 0 6.75 3.375 3.375 0 0 0 0-6.75zm-4.875 3.375a4.875 4.875 0 1 1 9.75 0 4.875 4.875 0 0 1-9.75 0z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-mobile-video-camera' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' clip-rule='evenodd' d='M0 6.75a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v1.078L22.873 5A.75.75 0 0 1 24 5.648v12.704a.75.75 0 0 1-1.123.65L18 16.207v1.043a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V6.75Zm18 7.728 4.5 2.58V6.95L18 9.562v4.916ZM16.5 6.75a1.5 1.5 0 0 0-1.5-1.5H3a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h12a1.5 1.5 0 0 0 1.5-1.5V6.75Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-ngdrive' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M7.736 1.818a.75.75 0 0 1 .647-.37h7.587a.75.75 0 0 1 .655.383l7.233 12.946a.75.75 0 0 1-.003.737l-3.794 6.66a.75.75 0 0 1-.651.378H4.59a.75.75 0 0 1-.651-.378l-3.794-6.66a.75.75 0 0 1 .005-.75zm.64 1.876L1.663 15.148l2.93 5.145 6.655-11.581zm3.736 6.526-2.398 4.173H14.5zm4.116 4.173h5.697L15.53 2.947H9.677zm5.685 1.5H8.852l-2.966 5.16h13.088z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-onedrive' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13.616 4.147a7.689 7.689 0 0 0-7.642 3.285A6.299 6.299 0 0 0 1.455 17.3c.684.894 2.473 2.658 5.17 2.658h12.141c.95 0 1.882-.256 2.697-.743.815-.486 1.514-1.247 1.964-2.083a5.26 5.26 0 0 0-3.713-7.612 7.69 7.69 0 0 0-6.098-5.373ZM3.34 17.15c.674.63 1.761 1.308 3.284 1.308h12.142a3.76 3.76 0 0 0 2.915-1.383l-7.494-4.489L3.34 17.15Zm10.875-6.25 2.47-1.038a5.239 5.239 0 0 1 1.427-.389 6.19 6.19 0 0 0-10.3-1.952 6.338 6.338 0 0 1 2.118.813l4.285 2.567Zm4.55.033c-.512 0-1.019.104-1.489.307l-.006.003-1.414.594 6.521 3.906a3.76 3.76 0 0 0-3.357-4.8l-.254-.01ZM4.097 9.617A4.799 4.799 0 0 1 6.558 8.9c.9 0 1.84.25 2.587.713l3.4 2.037-10.17 4.28a4.799 4.799 0 0 1 1.721-6.312Z'/></symbol><symbol fill='none' viewBox='0 0 10 10' id='uc-icon-pause' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' d='M1 0h2.5v10H1zM6.5 0H9v10H6.5z'/></symbol><symbol fill='none' viewBox='0 0 10 10' id='uc-icon-play' xmlns='http://www.w3.org/2000/svg'><path d='m1 0 9 5-9 5V0Z' fill='currentColor'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-remove-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.955 3.3A2.969 2.969 0 0 0 8.998 6h5.914a2.97 2.97 0 0 0-2.957-2.7zM16.416 6a4.47 4.47 0 0 0-8.922 0h-2.32a.755.755 0 0 0-.111.008H3.075a.75.75 0 1 0 0 1.5h1.35V19.35a2.85 2.85 0 0 0 2.85 2.85h9.45a2.85 2.85 0 0 0 2.85-2.85V7.508h1.35a.75.75 0 0 0 0-1.5h-1.989A.754.754 0 0 0 18.825 6zM5.925 7.508V19.35a1.35 1.35 0 0 0 1.35 1.35h9.45a1.35 1.35 0 0 0 1.35-1.35V7.508z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-select' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m7 10 5 5 5-5H7Z'/></symbol><symbol fill='none' viewBox='0 0 20 20' id='uc-icon-square' xmlns='http://www.w3.org/2000/svg'><rect width='20' height='20' rx='4' fill='#fff'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-upload' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.501.392a.75.75 0 0 1 .998 0l6.704 5.972a.75.75 0 0 1-.998 1.12l-5.455-4.86v13.439a.75.75 0 0 1-1.5 0V2.625l-5.454 4.86a.75.75 0 1 1-.998-1.12zM.857 16.73a.75.75 0 0 1 .75.75v4.914h20.786v-4.914a.75.75 0 0 1 1.5 0v5.664a.75.75 0 0 1-.75.75H.857a.75.75 0 0 1-.75-.75v-5.664a.75.75 0 0 1 .75-.75z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-upload-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13 13h-2V7h2m0 10h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-url' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M19.11 3.67c-1.71-1.709-4.578-1.682-6.408.148l-2.22 2.22a.75.75 0 0 1-1.062-1.06l2.222-2.221C14.018.381 17.836.276 20.17 2.61l1.22 1.22c2.335 2.334 2.23 6.153-.147 8.529l-2.22 2.22a.75.75 0 0 1-1.062-1.06l2.222-2.221c1.83-1.83 1.856-4.698.147-6.408zm-3.36 4.58a.75.75 0 0 1 0 1.06l-6.439 6.44a.75.75 0 0 1-1.06-1.06l6.439-6.44a.75.75 0 0 1 1.06 0zM6.04 9.42a.75.75 0 0 1 0 1.061l-2.222 2.222c-1.83 1.83-1.856 4.698-.147 6.407l1.22 1.22c1.71 1.71 4.578 1.683 6.408-.147l2.221-2.221a.75.75 0 1 1 1.06 1.06l-2.22 2.222c-2.377 2.376-6.195 2.481-8.53.147l-1.22-1.22c-2.334-2.334-2.228-6.153.148-8.53l2.221-2.22a.75.75 0 0 1 1.06 0z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-video-camera' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' clip-rule='evenodd' d='M0 6.75a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v1.078L22.873 5A.75.75 0 0 1 24 5.648v12.704a.75.75 0 0 1-1.123.65L18 16.207v1.043a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V6.75Zm18 7.728 4.5 2.58V6.95L18 9.562v4.916ZM16.5 6.75a1.5 1.5 0 0 0-1.5-1.5H3a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h12a1.5 1.5 0 0 0 1.5-1.5V6.75Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-video-camera-full' xmlns='http://www.w3.org/2000/svg'><path d='M2 3.333a2 2 0 0 0-2 2v9.334a2 2 0 0 0 2 2h10.938a2 2 0 0 0 2-2v-2.013L20 15.646V4.354l-5.063 3.03v-2.05a2 2 0 0 0-2-2H2Z' fill='currentColor'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-vk' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.341 3.27a10.5 10.5 0 0 1 5.834-1.77.75.75 0 0 0 0-1.5 12 12 0 1 0 12 12 .75.75 0 0 0-1.5 0A10.5 10.5 0 1 1 6.34 3.27Zm14.145 1.48a.75.75 0 1 0-1.06-1.062L9.925 13.19V7.95a.75.75 0 1 0-1.5 0V15c0 .414.336.75.75.75h7.05a.75.75 0 0 0 0-1.5h-5.24l9.501-9.5Z'/></symbol></svg>"+e+"<slot></slot>"}static get template(){return this._template}}const co="active",lo="___ACTIVITY_IS_ACTIVE___";class uo extends no{historyTracked=!1;init$=Pi(this);_debouncedHistoryFlush=_r(this._historyFlush.bind(this),10);_deactivate(){let e=uo._activityCallbacks.get(this);this[lo]=!1,this.removeAttribute(co),e?.deactivateCallback?.()}_activate(){let e=uo._activityCallbacks.get(this);this.$["*historyBack"]=this.historyBack.bind(this),this[lo]=!0,this.setAttribute(co,""),e?.activateCallback?.(),this._debouncedHistoryFlush(),this.emit(yr.ACTIVITY_CHANGE,{activity:this.activityType})}initCallback(){super.initCallback(),this.activityType&&(this.hasAttribute("activity")||this.setAttribute("activity",this.activityType),this.sub("*currentActivity",e=>{try{this.activityType!==e&&this[lo]?this._deactivate():this.activityType!==e||this[lo]||this._activate()}catch(e){console.error(`Error in activity "${this.activityType}". `,e),this.$["*currentActivity"]=this.$["*history"][this.$["*history"].length-1]??null}e||(this.$["*history"]=[])}))}_historyFlush(){let e=this.$["*history"];e&&(e.length>10&&(e=e.slice(e.length-11,e.length-1)),this.historyTracked&&e[e.length-1]!==this.activityType&&e.push(this.activityType),this.$["*history"]=e)}_isActivityRegistered(){return this.activityType&&uo._activityCallbacks.has(this)}static _activityCallbacks=new Map;get isActivityActive(){return this[lo]}get couldOpenActivity(){return!0}registerActivity(e,t={}){const{onActivate:r,onDeactivate:i}=t;uo._activityCallbacks.set(this,{activateCallback:r,deactivateCallback:i})}unregisterActivity(){this.isActivityActive&&this._deactivate(),uo._activityCallbacks.delete(this)}destroyCallback(){super.destroyCallback(),this._isActivityRegistered()&&this.unregisterActivity();const e=this.$["*currentActivity"];!![...this.blocksRegistry].find(t=>t instanceof uo&&t.activityType===e)||(this.$["*currentActivity"]=null,this.modalManager.closeAll())}get activityKey(){return this.ctxName+this.activityType}get activityParams(){return this.$["*currentActivityParams"]}get initActivity(){return this.getCssData("--cfg-init-activity")}get doneActivity(){return this.getCssData("--cfg-done-activity")}historyBack(){let e=this.$["*history"];if(e){let t=e.pop();for(;t===this.activityType;)t=e.pop();let r=!!t;if(t){const e=[...this.blocksRegistry].find(e=>e.activityType===t);r=e?.couldOpenActivity??!1}t=r?t:void 0,t&&this.modalManager.open(t),this.$["*currentActivity"]=t,this.$["*history"]=e,t||this.modalManager.closeAll()}}}uo.activities=Object.freeze({START_FROM:"start-from",CAMERA:"camera",DRAW:"draw",UPLOAD_LIST:"upload-list",URL:"url",CLOUD_IMG_EDIT:"cloud-image-edit",EXTERNAL:"external"});const ho=1.5,po=100/3;function go(e,t){for(let r in t)e.setAttributeNS(null,r,t[r].toString())}function mo(e,t={}){let r=document.createElementNS("http://www.w3.org/2000/svg",e);return go(r,t),r}function bo(e,t,r){let{x:i,y:o,width:a,height:n}=e,s=t.includes("w")?0:1,c=t.includes("n")?0:1,l=[-1,1][s],u=[-1,1][c],d=[i+s*a+ho*l,o+c*n+ho*u-24*r*u],h=[i+s*a+ho*l,o+c*n+ho*u],p=[i+s*a-24*r*l+ho*l,o+c*n+ho*u];return{d:`M ${d[0]} ${d[1]} L ${h[0]} ${h[1]} L ${p[0]} ${p[1]}`,center:h}}function fo(e,t,r){let i,o,{x:a,y:n,width:s,height:c}=e,l=["n","s"].includes(t)?.5:{w:0,e:1}[t],u=["w","e"].includes(t)?.5:{n:0,s:1}[t],d=[-1,1][l],h=[-1,1][u];return["n","s"].includes(t)?(i=[a+l*s-34*r/2,n+u*c+ho*h],o=[a+l*s+34*r/2,n+u*c+ho*h]):(i=[a+l*s+ho*d,n+u*c-34*r/2],o=[a+l*s+ho*d,n+u*c+34*r/2]),{d:`M ${i[0]} ${i[1]} L ${o[0]} ${o[1]}`,center:[o[0]-(o[0]-i[0])/2,o[1]-(o[1]-i[1])/2]}}function vo(e,t){let{x:r}=e,{y:i}=e;return e.x<t.x?r=t.x:e.x+e.width>t.x+t.width&&(r=t.x+t.width-e.width),e.y<t.y?i=t.y:e.y+e.height>t.y+t.height&&(i=t.y+t.height-e.height),{...e,x:r,y:i}}function yo({direction:e,...t}){switch(e){case"n":return function({rect:e,delta:t,aspectRatio:r,imageBox:i}){const[,o]=t;let{y:a,width:n,height:s}=e;a+=o,s-=o,r&&(n=s*r);let c=e.x+e.width/2-n/2;return a<=i.y&&(a=i.y,s=e.y+e.height-a,r&&(n=s*r,c=e.x+e.width/2-n/2)),c<=i.x&&(c=i.x,a=e.y+e.height-s),c+n>=i.x+i.width&&(c=Math.max(i.x,i.x+i.width-n),n=i.x+i.width-c,r&&(s=n/r),a=e.y+e.height-s),s<1&&(s=1,r&&(n=s*r,c=e.x+e.width/2-n/2),a=e.y+e.height-s),n<1&&(n=1,r&&(s=n/r,c=e.x+e.width/2-n/2),a=e.y+e.height-s),{x:c,y:a,width:n,height:s}}(t);case"w":return function({rect:e,delta:t,aspectRatio:r,imageBox:i}){const[o]=t;let{x:a,width:n,height:s}=e;a+=o,n-=o,r&&(s=n/r);let c=e.y+e.height/2-s/2;return a<=i.x&&(a=i.x,n=e.x+e.width-a,r&&(s=n/r,c=e.y+e.height/2-s/2)),c<=i.y&&(c=i.y,a=e.x+e.width-n),c+s>=i.y+i.height&&(c=Math.max(i.y,i.y+i.height-s),s=i.y+i.height-c,r&&(n=s*r),a=e.x+e.width-n),s<1&&(s=1,r&&(n=s*r),c=e.y+e.height/2-s/2,a=e.x+e.width-n),n<1&&(n=1,r&&(s=n/r),c=e.y+e.height/2-s/2,a=e.x+e.width-n),{x:a,y:c,width:n,height:s}}(t);case"s":return function({rect:e,delta:t,aspectRatio:r,imageBox:i}){const[,o]=t;let{y:a,width:n,height:s}=e;s+=o,r&&(n=s*r);let c=e.x+e.width/2-n/2;return a+s>=i.y+i.height&&(s=i.y+i.height-a,r&&(n=s*r),c=e.x+e.width/2-n/2),c<=i.x&&(c=i.x,a=e.y),c+n>=i.x+i.width&&(c=Math.max(i.x,i.x+i.width-n),n=i.x+i.width-c,r&&(s=n/r),a=e.y),s<1&&(s=1,r&&(n=s*r),c=e.x+e.width/2-n/2),n<1&&(n=1,r&&(s=n/r),c=e.x+e.width/2-n/2),{x:c,y:a,width:n,height:s}}(t);case"e":return function({rect:e,delta:t,aspectRatio:r,imageBox:i}){const[o]=t;let{x:a,width:n,height:s}=e;n+=o,r&&(s=n/r);let c=e.y+e.height/2-s/2;return a+n>=i.x+i.width&&(n=i.x+i.width-a,r&&(s=n/r),c=e.y+e.height/2-s/2),c<=i.y&&(c=i.y,a=e.x),c+s>=i.y+i.height&&(c=Math.max(i.y,i.y+i.height-s),s=i.y+i.height-c,r&&(n=s*r),a=e.x),s<1&&(s=1,r&&(n=s*r),c=e.y+e.height/2-s/2),n<1&&(n=1,r&&(s=n/r),c=e.y+e.height/2-s/2),{x:a,y:c,width:n,height:s}}(t);case"nw":return function({rect:e,delta:t,aspectRatio:r,imageBox:i}){let[o,a]=t,{x:n,y:s,width:c,height:l}=e;return n+o<i.x&&(o=i.x-n),s+a<i.y&&(a=i.y-s),n+=o,c-=o,s+=a,l-=a,r&&Math.abs(c/l)>r?(a=c/r-l,l+=a,s-=a,s<=i.y&&(l-=i.y-s,c=l*r,n=e.x+e.width-c,s=i.y)):r&&(o=l*r-c,c+=o,n-=o,n<=i.x&&(c-=i.x-n,l=c/r,n=i.x,s=e.y+e.height-l)),l<1&&(l=1,r&&(c=l*r),n=e.x+e.width-c,s=e.y+e.height-l),c<1&&(c=1,r&&(l=c/r),n=e.x+e.width-c,s=e.y+e.height-l),{x:n,y:s,width:c,height:l}}(t);case"ne":return function({rect:e,delta:t,aspectRatio:r,imageBox:i}){let[o,a]=t,{x:n,y:s,width:c,height:l}=e;return n+c+o>i.x+i.width&&(o=i.x+i.width-n-c),s+a<i.y&&(a=i.y-s),c+=o,s+=a,l-=a,r&&Math.abs(c/l)>r?(a=c/r-l,l+=a,s-=a,s<=i.y&&(l-=i.y-s,c=l*r,n=e.x,s=i.y)):r&&(o=l*r-c,c+=o,n+c>=i.x+i.width&&(c=i.x+i.width-n,l=c/r,n=i.x+i.width-c,s=e.y+e.height-l)),l<1&&(l=1,r&&(c=l*r),s=e.y+e.height-l),c<1&&(c=1,r&&(l=c/r),s=e.y+e.height-l),{x:n,y:s,width:c,height:l}}(t);case"sw":return function({rect:e,delta:t,aspectRatio:r,imageBox:i}){let[o,a]=t,{x:n,y:s,width:c,height:l}=e;return n+o<i.x&&(o=i.x-n),s+l+a>i.y+i.height&&(a=i.y+i.height-s-l),n+=o,c-=o,l+=a,r&&Math.abs(c/l)>r?(a=c/r-l,l+=a,s+l>=i.y+i.height&&(l=i.y+i.height-s,c=l*r,n=e.x+e.width-c,s=i.y+i.height-l)):r&&(o=l*r-c,c+=o,n-=o,n<=i.x&&(c-=i.x-n,l=c/r,n=i.x,s=e.y)),l<1&&(l=1,r&&(c=l*r),n=e.x+e.width-c),c<1&&(c=1,r&&(l=c/r),n=e.x+e.width-c),{x:n,y:s,width:c,height:l}}(t);case"se":return function({rect:e,delta:t,aspectRatio:r,imageBox:i}){let[o,a]=t,{x:n,y:s,width:c,height:l}=e;return n+c+o>i.x+i.width&&(o=i.x+i.width-n-c),s+l+a>i.y+i.height&&(a=i.y+i.height-s-l),c+=o,l+=a,r&&Math.abs(c/l)>r?(a=c/r-l,l+=a,s+l>=i.y+i.height&&(l=i.y+i.height-s,c=l*r,n=e.x,s=i.y+i.height-l)):r&&(o=l*r-c,c+=o,n+c>=i.x+i.width&&(c=i.x+i.width-n,l=c/r,n=i.x+i.width-c,s=e.y)),l<1&&(l=1,r&&(c=l*r)),c<1&&(c=1,r&&(l=c/r)),{x:n,y:s,width:c,height:l}}(t);default:return t.rect}}function wo({width:e,height:t},r){let i=r/90%2!=0;return{width:i?t:e,height:i?e:t}}function _o(e,t,r){let i,o;e/t>r?(i=Math.round(t*r),o=t):(i=e,o=Math.round(e/r));const a=Math.round((e-i)/2),n=Math.round((t-o)/2);return a+i>e&&(i=e-a),n+o>t&&(o=t-n),{x:a,y:n,width:i,height:o}}function ko(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function xo(e,t,r){return Math.min(Math.max(e,t),r)}const Co=e=>{if(!e)return[];const[t,r]=e.split(":").map(Number);if(!Number.isFinite(t)||!Number.isFinite(r))return void console.error(`Invalid crop preset: ${e}`);return[{type:"aspect-ratio",width:t,height:r}]},To="blocks",Ao="1.19.4";function Eo(e){return Or({...e,libraryName:To,libraryVersion:Ao})}const Io=e=>Math.floor(e/1e3);class So{_block;_secureToken=null;constructor(e){this._block=e}_debugPrint(...e){this._block.debugPrint("[secure-uploads]",...e)}async getSecureToken(){const{secureSignature:e,secureExpire:t,secureUploadsSignatureResolver:r}=this._block.cfg;if((e||t)&&r&&console.warn("Both secureSignature/secureExpire and secureUploadsSignatureResolver are set. secureUploadsSignatureResolver will be used."),r){if(!this._secureToken||((e,{threshold:t})=>{const{secureExpire:r}=e,i=Io(Date.now()),o=Number(r);return i+Io(t)>=o})(this._secureToken,{threshold:this._block.cfg.secureUploadsExpireThreshold})){this._secureToken?this._debugPrint("Secure signature is expired. Resolving a new one..."):this._debugPrint("Secure signature is not set yet.");try{const e=await r();e?e.secureSignature&&e.secureExpire?(this._debugPrint("Secure signature resolved:",e),this._debugPrint("Secure signature will expire in",new Date(1e3*Number(e.secureExpire)).toISOString()),this._secureToken=e):console.error("Secure signature resolver returned an invalid result:",e):(this._debugPrint("Secure signature resolver returned nothing."),this._secureToken=null)}catch(e){console.error("Secure signature resolving failed. Falling back to the previous one.",e)}}return this._secureToken}return e&&t?(this._debugPrint("Secure signature and expire are set. Using them...",{secureSignature:e,secureExpire:t}),{secureSignature:e,secureExpire:t}):null}}const Mo="[Typed State] Wrong property name: ";class $o{constructor(e,t){this.__typedSchema=e,this.__ctxId=t||xt.generate(),this.__schema=Object.keys(e).reduce((t,r)=>(t[r]=e[r].value,t),{}),this.__data=wt.registerCtx(this.__schema,this.__ctxId)}get uid(){return this.__ctxId}setValue(e,t){if(!this.__typedSchema.hasOwnProperty(e))return void console.warn(Mo+e);let r=this.__typedSchema[e],i=t?.constructor===r.type,o=t instanceof r.type,a=r.nullable&&null===t;i||o||a?this.__data.pub(e,t):console.warn("[Typed State] Wrong property type: "+e)}setMultipleValues(e){for(let[t,r]of Object.entries(e))this.setValue(t,r)}getValue(e){return this.__typedSchema.hasOwnProperty(e)||console.warn(Mo+e),this.__data.read(e)}subscribe(e,t){return this.__data.sub(e,t)}remove(){wt.deleteCtx(this.__ctxId)}}class Lo{constructor(e){this.__typedSchema=e.typedSchema,this.__ctxId=e.ctxName||xt.generate(),this.__data=wt.registerCtx({},this.__ctxId),this.__watchList=e.watchList||[],this.__subsMap=Object.create(null),this.__propertyObservers=new Set,this.__collectionObservers=new Set,this.__items=new Set,this.__removed=new Set,this.__added=new Set;let t=Object.create(null);this.__notifyObservers=(e,r)=>{this.__observeTimeout&&window.clearTimeout(this.__observeTimeout),t[e]||(t[e]=new Set),t[e].add(r),this.__observeTimeout=window.setTimeout(()=>{0!==Object.keys(t).length&&(this.__propertyObservers.forEach(e=>{e({...t})}),t=Object.create(null))})}}notify(){this.__notifyTimeout&&window.clearTimeout(this.__notifyTimeout),this.__notifyTimeout=window.setTimeout(()=>{let e=new Set(this.__added),t=new Set(this.__removed);this.__added.clear(),this.__removed.clear();for(const r of this.__collectionObservers)r?.([...this.__items],e,t)})}observeCollection(e){return this.__collectionObservers.add(e),this.__items.size>0&&this.notify(),()=>{this.unobserveCollection(e)}}unobserveCollection(e){this.__collectionObservers?.delete(e)}add(e){let t=new $o(this.__typedSchema);for(let[r,i]of Object.entries(e))t.setValue(r,i);return this.__items.add(t.uid),this.notify(),this.__data.add(t.uid,t),this.__added.add(t),this.__watchList.forEach(e=>{this.__subsMap[t.uid]||(this.__subsMap[t.uid]=[]),this.__subsMap[t.uid].push(t.subscribe(e,()=>{this.__notifyObservers(e,t.uid)}))}),t.uid}read(e){return this.__data.read(e)}readProp(e,t){let r=this.read(e);return r?r.getValue(t):(console.warn(`Item with id ${e} not found`),null)}publishProp(e,t,r){let i=this.read(e);i?i.setValue(t,r):console.warn(`Item with id ${e} not found`)}remove(e){let t=this.read(e);t&&this.__removed.add(t),this.__items.delete(e),this.notify(),this.__data.pub(e,null),delete this.__subsMap[e]}clearAll(){this.__items.forEach(e=>{this.remove(e)})}observeProperties(e){return this.__propertyObservers.add(e),()=>{this.unobserveProperties(e)}}unobserveProperties(e){this.__propertyObservers?.delete(e)}findItems(e){let t=[];return this.__items.forEach(r=>{let i=this.read(r);i&&e(i)&&t.push(r)}),t}items(){return[...this.__items]}get size(){return this.__items.size}destroy(){wt.deleteCtx(this.__ctxId),this.__propertyObservers=new Set,this.__collectionObservers=new Set;for(let e in this.__subsMap)this.__subsMap[e].forEach(e=>{e.remove()}),delete this.__subsMap[e]}}const Ro=Object.freeze({PHOTO:"photo",VIDEO:"video"}),Uo=Object.freeze({IDLE:"idle",SHOT:"shot",PLAY:"play",PAUSE:"pause",RESUME:"resume",STOP:"stop",RETAKE:"retake",ACCEPT:"accept"}),Oo=e=>({isVideoRecordingEnabled:mr(e.cameraModes).includes(Ro.VIDEO),isPhotoEnabled:mr(e.cameraModes).includes(Ro.PHOTO)}),Po=Object.freeze({FACEBOOK:"facebook",DROPBOX:"dropbox",GDRIVE:"gdrive",GPHOTOS:"gphotos",FLICKR:"flickr",VK:"vk",EVERNOTE:"evernote",BOX:"box",ONEDRIVE:"onedrive",HUDDLE:"huddle"}),zo=Object.freeze({MOBILE_VIDEO_CAMERA:"mobile-video-camera",MOBILE_PHOTO_CAMERA:"mobile-photo-camera"}),No=Object.freeze({LOCAL:"local",DROP_AREA:"drop-area",CAMERA:"camera",EXTERNAL:"external",API:"js-api",URL:"url",DRAW:"draw",...zo,...Po}),Do={safariDesktop:(()=>{const e=navigator.userAgent;return/Macintosh|Windows/.test(e)&&/Version\/[\d\.]+.*Safari/.test(e)&&!/Chrome|Chromium|Edg|OPR/.test(e)})()},Fo={htmlMediaCapture:"capture"in document.createElement("input")},Vo="image/*",Bo="video/*",jo=Do.safariDesktop?[Vo]:[Vo,...["image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/avif","image/avif-sequence",".heif",".heifs",".heic",".heics",".avif",".avifs"]],Ho=e=>e?e.filter(e=>"string"==typeof e).map(e=>tr(e)).flat():[],qo=(e,t)=>t.some(t=>t.endsWith("*")?(t=t.replace("*",""),e.startsWith(t)):e===t),Ko=e=>{let t=e?.type;return!!t&&qo(t,jo)},Go=new RegExp(`^/?(${/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/i.source})(?:/(-/(?:[^/]+/)+)?([^/]*))?$`,"i"),Wo=e=>{const t=new Map;return(...r)=>{const i=JSON.stringify(r);if(t.has(i))return t.get(i);const o=e(...r);return t.set(i,o),o}},Xo=new Set;function Zo(e){Xo.has(e)||(Xo.add(e),console.warn(e))}function Yo(e){const t={progress:()=>e.$["*commonProgress"],errors:()=>e.$["*collectionErrors"],group:()=>e.$["*groupInfo"],totalCount:()=>e.uploadCollection.size,failedCount:()=>r.failedEntries.length,successCount:()=>r.successEntries.length,uploadingCount:()=>r.uploadingEntries.length,status:()=>r.isFailed?"failed":r.isUploading?"uploading":r.isSuccess?"success":"idle",isSuccess:()=>r.allEntries.length>0&&0===r.errors.length&&r.successEntries.length===r.allEntries.length,isUploading:()=>r.allEntries.some(e=>"uploading"===e.status),isFailed:()=>r.errors.length>0||r.failedEntries.length>0,allEntries:()=>e.getOutputData(),successEntries:()=>r.allEntries.filter(e=>"success"===e.status),failedEntries:()=>r.allEntries.filter(e=>"failed"===e.status),uploadingEntries:()=>r.allEntries.filter(e=>"uploading"===e.status),idleEntries:()=>r.allEntries.filter(e=>"idle"===e.status)},r={},i=function(e){let t=!1;return setTimeout(()=>{t=!0},0),r=>(...i)=>(t&&Zo(e),r(...i))}("You're trying to access the OutputCollectionState asynchronously. In this case, the data you retrieve will be newer than it was when the OutputCollectionState was created or when the event was dispatched. If you want to retain the state at a specific moment in time, you should use the spread operator like this: `{...outputCollectionState}` or `{...e.detail}`");for(const[e,o]of Object.entries(t)){const t=e,a=Wo(i(o));Object.defineProperty(r,t,{get:a,enumerable:!0})}return r}class Jo{_ctx;constructor(e){this._ctx=e}get _uploadCollection(){return this._ctx.uploadCollection}get cfg(){return this._ctx.cfg}get l10n(){return this._ctx.l10n.bind(this._ctx)}addFileFromUrl=(e,{silent:t,fileName:r,source:i}={})=>{const o=this._uploadCollection.add({externalUrl:e,fileName:r??null,silent:t??!1,source:i??No.API});return this.getOutputItem(o)};addFileFromUuid=(e,{silent:t,fileName:r,source:i}={})=>{const o=this._uploadCollection.add({uuid:e,fileName:r??null,silent:t??!1,source:i??No.API});return this.getOutputItem(o)};addFileFromCdnUrl=(e,{silent:t,fileName:r,source:i}={})=>{const o=(({url:e,cdnBase:t})=>{const r=new URL(t),i=new URL(e);if(r.host!==i.host)return null;const[,o,a,n]=Go.exec(i.pathname);return{uuid:o,cdnUrlModifiers:a||"",filename:n||null}})({url:e,cdnBase:this.cfg.cdnCname});if(!o)throw new Error("Invalid CDN URL");const a=this._uploadCollection.add({uuid:o.uuid,cdnUrl:e,cdnUrlModifiers:o.cdnUrlModifiers,fileName:r??o.filename??null,silent:t??!1,source:i??No.API});return this.getOutputItem(a)};addFileFromObject=(e,{silent:t,fileName:r,source:i,fullPath:o}={})=>{const a=this._uploadCollection.add({file:e,isImage:Ko(e),mimeType:e.type,fileName:r??e.name,fileSize:e.size,silent:t??!1,source:i??No.API,fullPath:o??null});return this.getOutputItem(a)};removeFileByInternalId=e=>{if(!this._uploadCollection.read(e))throw new Error(`File with internalId ${e} not found`);this._uploadCollection.remove(e)};removeAllFiles(){this._uploadCollection.clearAll()}uploadAll=()=>{const e=this._uploadCollection.items().filter(e=>{const t=this._uploadCollection.read(e);return!!t&&(!t.getValue("isRemoved")&&!t.getValue("isUploading")&&!t.getValue("fileInfo"))});0!==e.length&&(this._ctx.$["*uploadTrigger"]=new Set(e),this._ctx.emit(yr.COMMON_UPLOAD_START,this.getOutputCollectionState()))};openSystemDialog=(e={})=>{const t=br(Ho([this.cfg.accept??"",...this.cfg.imgOnly?jo:[]])),r="uploadcare-file-input",i=document.createElement("input");if(i.setAttribute(r,""),Dt(i,{opacity:0,height:0,width:0,visibility:"hidden",position:"absolute",top:0,left:0}),i.type="file",i.multiple=this.cfg.multiple,e.captureCamera){i.capture=this.cfg.cameraCapture;const{isPhotoEnabled:t,isVideoRecordingEnabled:r}=Oo(this.cfg);e.modeCamera===Ro.PHOTO&&t?i.accept=Vo:e.modeCamera===Ro.VIDEO&&r?i.accept=Bo:i.accept=[Vo,r&&Bo].filter(Boolean).join(",")}else i.accept=t;i.addEventListener("change",()=>{i.files&&([...i.files].forEach(t=>this.addFileFromObject(t,{source:e.captureCamera?No.CAMERA:No.LOCAL})),this._ctx.modalManager.open(uo.activities.UPLOAD_LIST),this._ctx.$["*currentActivity"]=uo.activities.UPLOAD_LIST,i.remove())},{once:!0}),document.querySelectorAll(`[${r}]`).forEach(e=>e.remove()),document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click"))};getOutputItem(e){const t=wt.getCtx(e).store,r=t.fileInfo;let i=t.isRemoved?"removed":t.errors.length>0?"failed":t.fileInfo?"success":t.isUploading?"uploading":"idle";return{uuid:r?.uuid??t.uuid??null,internalId:e,name:r?.originalFilename??t.fileName,size:r?.size??t.fileSize,isImage:r?.isImage??t.isImage,mimeType:r?.mimeType??t.mimeType,file:t.file,externalUrl:t.externalUrl,cdnUrlModifiers:t.cdnUrlModifiers,cdnUrl:t.cdnUrl??r?.cdnUrl??null,fullPath:t.fullPath,uploadProgress:t.uploadProgress,fileInfo:r??null,metadata:t.metadata??r?.metadata??null,isSuccess:"success"===i,isUploading:"uploading"===i,isFailed:"failed"===i,isRemoved:"removed"===i,errors:t.errors,status:i,source:t?.source}}getOutputCollectionState(){return Yo(this._ctx)}initFlow=(e=!1)=>{if(this._uploadCollection.size>0&&!e)this._ctx.modalManager?.open(uo.activities.UPLOAD_LIST),this._ctx.set$({"*currentActivity":uo.activities.UPLOAD_LIST});else if(1===this._sourceList?.length){const e=this._sourceList[0];if("local"===e)return this._ctx.$["*currentActivity"]=uo.activities.UPLOAD_LIST,void this.openSystemDialog();if("camera"===e&&Fo.htmlMediaCapture){const{isPhotoEnabled:e,isVideoRecordingEnabled:t}=Oo(this.cfg);if(e&&t)return void this._ctx.set$({"*currentActivity":uo.activities.START_FROM});if(e||t)return void this.openSystemDialog({captureCamera:!0,modeCamera:e?Ro.PHOTO:Ro.VIDEO});this.openSystemDialog({captureCamera:!0,modeCamera:Ro.PHOTO})}const t=[...this._ctx.$["*blocksRegistry"]].find(t=>"type"in t&&t.type===e);t?.activate(),this._ctx.$["*currentActivity"]&&this._ctx.modalManager?.open(this._ctx.$["*currentActivity"])}else this._ctx.modalManager?.open(uo.activities.START_FROM),this._ctx.set$({"*currentActivity":uo.activities.START_FROM})};doneFlow=()=>{this._ctx.set$({"*currentActivity":this._ctx.doneActivity,"*history":this._ctx.doneActivity?[this._ctx.doneActivity]:[]}),this._ctx.$["*currentActivity"]||this._ctx.modalManager.closeAll()};setCurrentActivity=(e,t=void 0)=>{this._ctx.hasBlockInCtx(t=>t.activityType===e)?this._ctx.set$({"*currentActivityParams":t??{},"*currentActivity":e}):console.warn(`Activity type "${e}" not found in the context`)};getCurrentActivity=()=>this._ctx.$["*currentActivity"];setModalState=e=>{!e||this._ctx.$["*currentActivity"]?e?this._ctx.modalManager?.open(this._ctx.$["*currentActivity"]):(this._ctx.modalManager?.close(this._ctx.$["*currentActivity"]),this._ctx.$["*currentActivity"]=null):console.warn('Can\'t open modal without current activity. Please use "setCurrentActivity" method first.')};get _sourceList(){let e=[];return this.cfg.sourceList&&(e=tr(this.cfg.sourceList)),e}}const Qo=(e,t)=>{const r=t.cfg.imgOnly,i=e.isImage;if(r&&!i&&(e.fileInfo||!e.externalUrl)&&(e.fileInfo||e.mimeType))return{type:"NOT_AN_IMAGE",message:t.l10n("images-only-accepted"),payload:{entry:e}}},ea=(e,t)=>{const r=t.cfg.imgOnly,i=t.cfg.accept,o=Ho([...r?jo:[],i]);if(!o.length)return;const a=e.mimeType,n=e.name;if(!a||!n)return;const s=qo(a,o),c=((e,t)=>t.some(t=>!!t.startsWith(".")&&e.toLowerCase().endsWith(t.toLowerCase())))(n,o);return s||c?void 0:{type:"FORBIDDEN_FILE_TYPE",message:t.l10n("file-type-not-allowed"),payload:{entry:e}}},ta=1e3,ra=Object.freeze({AUTO:"auto",BYTE:"byte",KB:"kb",MB:"mb",GB:"gb",TB:"tb",PB:"pb"}),ia=e=>Math.ceil(100*e)/100,oa=(e,t=ra.AUTO)=>{const r=t===ra.AUTO;if(t===ra.BYTE||r&&e<1e3){return`${e} ${{one:"byte",other:"bytes"}[Cr("en-US",e)]}`}return t===ra.KB||r&&e<1e6?`${ia(e/1e3)} KB`:t===ra.MB||r&&e<ta**3?`${ia(e/1e6)} MB`:t===ra.GB||r&&e<ta**4?`${ia(e/ta**3)} GB`:t===ra.TB||r&&e<ta**5?`${ia(e/ta**4)} TB`:`${ia(e/ta**5)} PB`},aa=(e,t)=>{const r=t.cfg.maxLocalFileSizeBytes,i=e.size;if(r&&i&&i>r)return{type:"FILE_SIZE_EXCEEDED",message:t.l10n("files-max-size-limit-error",{maxFileSize:oa(r)}),payload:{entry:e}}},na=(e,t)=>{const{internalId:r}=e,i=t._uploadCollection.read(r),o=i?.getValue("uploadError");if(!o)return;if(o instanceof ei)return{type:"UPLOAD_ERROR",message:o.message,payload:{entry:e,error:o}};if(o instanceof Dr)return{type:"NETWORK_ERROR",message:o.message,payload:{entry:e,error:o}};const a=o instanceof Error?o:new Error("Unknown error",{cause:o});return{type:"UNKNOWN_ERROR",message:a.message,payload:{entry:e,error:a}}},sa=(e,t)=>{const r=e.totalCount,i=t.cfg.multiple?t.cfg.multipleMin:0,o=t.cfg.multiple?t.cfg.multipleMax:1;if(i&&r<i){return{type:"TOO_FEW_FILES",message:t.l10n("files-count-limit-error-too-few",{min:i,max:o,total:r}),payload:{total:r,min:i,max:o}}}if(o&&r>o){return{type:"TOO_MANY_FILES",message:t.l10n("files-count-limit-error-too-many",{min:i,max:o,total:r}),payload:{total:r,min:i,max:o}}}},ca=(e,t)=>{if(e.failedCount>0)return{type:"SOME_FILES_HAS_ERRORS",message:t.l10n("some-files-were-not-uploaded")}},la="File validator execution has failed",ua="Collection validator execution has failed",da="Missing message. We recommend adding message: value.";class ha{_blockInstance;_fileValidators=[Qo,ea,aa,na];_collectionValidators=[sa,ca];constructor(e){this._blockInstance=e,this._uploadCollection=this._blockInstance.uploadCollection;const t=()=>{this.runFileValidators(),this.runCollectionValidators()};this._blockInstance.subConfigValue("maxLocalFileSizeBytes",t),this._blockInstance.subConfigValue("multipleMin",t),this._blockInstance.subConfigValue("multipleMax",t),this._blockInstance.subConfigValue("multiple",t),this._blockInstance.subConfigValue("imgOnly",t),this._blockInstance.subConfigValue("accept",t)}runFileValidators(e){const t=e??this._uploadCollection.items();for(const e of t){const t=this._uploadCollection.read(e);t&&this._runFileValidatorsForEntry(t)}}runCollectionValidators(){const e=this._blockInstance.api.getOutputCollectionState(),t=[];for(const r of[...this._collectionValidators,...this._addCustomTypeToValidators(this._blockInstance.cfg.collectionValidators)])try{const i=r(e,this._blockInstance.api);if(!i)continue;i&&(t.push(i),i.message||console.warn(da))}catch(e){console.warn(ua,e)}this._blockInstance.$["*collectionErrors"]=t,t.length>0&&this._blockInstance.emit(yr.COMMON_UPLOAD_FAILED,()=>this._blockInstance.api.getOutputCollectionState(),{debounce:!0})}_runFileValidatorsForEntry(e){const t=this._blockInstance.api.getOutputItem(e.uid),r=[];for(const e of[...this._fileValidators,...this._addCustomTypeToValidators(this._blockInstance.cfg.fileValidators)])try{const i=e(t,this._blockInstance.api);if(!i)continue;i&&(r.push(i),i.message||console.warn(da))}catch(e){console.warn(la,e)}e.setValue("errors",r)}_addCustomTypeToValidators(e){return e.map(e=>(...t)=>{const r=e(...t);return r?{...r,type:"CUSTOM_ERROR"}:void 0})}}const pa=Object.freeze({file:Object.freeze({type:File,value:null,nullable:!0}),externalUrl:Object.freeze({type:String,value:null,nullable:!0}),fileName:Object.freeze({type:String,value:null,nullable:!0}),fileSize:Object.freeze({type:Number,value:null,nullable:!0}),lastModified:Object.freeze({type:Number,value:Date.now()}),uploadProgress:Object.freeze({type:Number,value:0}),uuid:Object.freeze({type:String,value:null,nullable:!0}),isImage:Object.freeze({type:Boolean,value:!1}),mimeType:Object.freeze({type:String,value:null,nullable:!0}),ctxName:Object.freeze({type:String,value:null,nullable:!0}),cdnUrl:Object.freeze({type:String,value:null,nullable:!0}),cdnUrlModifiers:Object.freeze({type:String,value:null,nullable:!0}),fileInfo:Object.freeze({type:vi,value:null,nullable:!0}),isUploading:Object.freeze({type:Boolean,value:!1}),abortController:Object.freeze({type:AbortController,value:null,nullable:!0}),thumbUrl:Object.freeze({type:String,value:null,nullable:!0}),silent:Object.freeze({type:Boolean,value:!1}),source:Object.freeze({type:String,value:null,nullable:!0}),fullPath:Object.freeze({type:String,value:null,nullable:!0}),metadata:Object.freeze({type:Object,value:null,nullable:!0}),errors:Object.freeze({type:Array,value:[]}),uploadError:Object.freeze({type:Error,value:null,nullable:!0}),isRemoved:Object.freeze({type:Boolean,value:!1}),isQueued:Object.freeze({type:Boolean,value:!1})});class ga extends uo{couldBeCtxOwner=!1;isCtxOwner=!1;init$=zi(this);get hasCtxOwner(){return this.hasBlockInCtx(e=>e instanceof ga&&(e.isCtxOwner&&e.isConnected&&e!==this))}initCallback(){if(super.initCallback(),!this.has("*uploadCollection")){let e=new Lo({typedSchema:pa,watchList:["uploadProgress","uploadError","fileInfo","errors","cdnUrl","isUploading"]});this.add("*uploadCollection",e)}this.has("*publicApi")||this.add("*publicApi",new Jo(this)),this.has("*validationManager")||this.add("*validationManager",new ha(this)),!this.hasCtxOwner&&this.couldBeCtxOwner&&this.initCtxOwner()}get validationManager(){if(!this.has("*validationManager"))throw new Error("Unexpected error: ValidationManager is not initialized");return this.$["*validationManager"]}get api(){if(!this.has("*publicApi"))throw new Error("Unexpected error: UploaderPublicApi is not initialized");return this.$["*publicApi"]}getAPI(){return this.api}get uploadCollection(){if(!this.has("*uploadCollection"))throw new Error("Unexpected error: TypedCollection is not initialized");return this.$["*uploadCollection"]}destroyCtxCallback(){this._unobserveCollectionProperties?.(),this._unobserveCollection?.(),this.uploadCollection.destroy(),this.$["*uploadCollection"]=null,super.destroyCtxCallback()}destroyCallback(){super.destroyCallback(),this._flushOutputItems.cancel()}initCtxOwner(){this.isCtxOwner=!0,this._unobserveCollection=this.uploadCollection.observeCollection(this._handleCollectionUpdate),this._unobserveCollectionProperties=this.uploadCollection.observeProperties(this._handleCollectionPropertiesUpdate),this.subConfigValue("maxConcurrentRequests",e=>{this.$["*uploadQueue"].concurrency=Number(e)||1}),this.$["*secureUploadsManager"]||(this.$["*secureUploadsManager"]=new So(this))}async _createGroup(e){const t=await this.getUploadClientOptions(),r=e.allEntries.map(e=>e.uuid+(e.cdnUrlModifiers?`/${e.cdnUrlModifiers}`:"")),i=new AbortController,o=await Ui(r,{...t,signal:i.signal});if(this.$["*collectionState"]!==e)return void i.abort();this.$["*groupInfo"]=o;const a=this.api.getOutputCollectionState();this.emit(yr.GROUP_CREATED,a),this.emit(yr.CHANGE,()=>this.api.getOutputCollectionState(),{debounce:!0}),this.$["*collectionState"]=a}_flushOutputItems=_r(async()=>{if(this.getOutputData().length!==this.uploadCollection.size)return;const e=this.api.getOutputCollectionState();this.$["*collectionState"]=e,this.emit(yr.CHANGE,()=>this.api.getOutputCollectionState(),{debounce:!0}),this.cfg.groupOutput&&e.totalCount>0&&"success"===e.status&&this._createGroup(e)},300);_handleCollectionUpdate=(e,t,r)=>{(t.size||r.size)&&(this.$["*groupInfo"]=null),this.validationManager.runFileValidators(),this.validationManager.runCollectionValidators();for(const e of t)e.getValue("silent")||this.emit(yr.FILE_ADDED,this.api.getOutputItem(e.uid));for(const e of r){this.$["*uploadTrigger"].delete(e.uid),e.getValue("abortController")?.abort(),e.setMultipleValues({isRemoved:!0,abortController:null,isUploading:!1,uploadProgress:0});const t=e?.getValue("thumbUrl");t&&URL.revokeObjectURL(t),this.emit(yr.FILE_REMOVED,this.api.getOutputItem(e.uid))}this.$["*uploadList"]=e.map(e=>({uid:e})),this._flushCommonUploadProgress(),this._flushOutputItems()};_handleCollectionPropertiesUpdate=e=>{this._flushOutputItems();const t=this.uploadCollection,r=[...new Set(Object.entries(e).filter(([e])=>["uploadError","fileInfo"].includes(e)).map(([,e])=>[...e]).flat())];if(r.length>0&&setTimeout(()=>{this.validationManager.runFileValidators(r)}),e.uploadProgress){for(const t of e.uploadProgress){const{isUploading:e,silent:r}=wt.getCtx(t).store;e&&!r&&this.emit(yr.FILE_UPLOAD_PROGRESS,this.api.getOutputItem(t))}this._flushCommonUploadProgress()}if(e.isUploading)for(const t of e.isUploading){const{isUploading:e,silent:r}=wt.getCtx(t).store;e&&!r&&this.emit(yr.FILE_UPLOAD_START,this.api.getOutputItem(t))}if(e.fileInfo){for(const t of e.fileInfo){const{fileInfo:e,silent:r}=wt.getCtx(t).store;e&&!r&&this.emit(yr.FILE_UPLOAD_SUCCESS,this.api.getOutputItem(t))}this.cfg.cropPreset&&this.setInitialCrop(),this.cfg.cloudImageEditorAutoOpen&&this.openCloudImageEditor()}if(e.errors){for(const t of e.errors){const{errors:e}=wt.getCtx(t).store;e.length>0&&(this.emit(yr.FILE_UPLOAD_FAILED,this.api.getOutputItem(t)),this.emit(yr.COMMON_UPLOAD_FAILED,()=>this.api.getOutputCollectionState(),{debounce:!0}))}const r=t.findItems(e=>!!e.getValue("fileInfo")),i=t.findItems(e=>e.getValue("errors").length>0);t.size>0&&0===i.length&&t.size===r.length&&0===this.$["*collectionErrors"].length&&this.emit(yr.COMMON_UPLOAD_SUCCESS,this.api.getOutputCollectionState())}if(e.cdnUrl){[...e.cdnUrl].filter(e=>!!this.uploadCollection.read(e)?.getValue("cdnUrl")).forEach(e=>{this.emit(yr.FILE_URL_CHANGED,this.api.getOutputItem(e))}),this.$["*groupInfo"]=null}};_flushCommonUploadProgress=()=>{let e=0;const t=[...this.$["*uploadTrigger"]].filter(e=>!!this.uploadCollection.read(e));t.forEach(t=>{const r=this.uploadCollection.readProp(t,"uploadProgress");"number"==typeof r&&(e+=r)});const r=t.length?Math.round(e/t.length):0;this.$["*commonProgress"]!==r&&(this.$["*commonProgress"]=r,this.emit(yr.COMMON_UPLOAD_PROGRESS,this.api.getOutputCollectionState()))};openCloudImageEditor(){const[e]=this.uploadCollection.findItems(e=>!!e.getValue("fileInfo")&&e.getValue("isImage")).map(e=>this.uploadCollection.read(e));e&&1===this.uploadCollection.size&&this.cfg.useCloudImageEditor&&this.hasBlockInCtx(e=>e.activityType===uo.activities.CLOUD_IMG_EDIT)&&(this.$["*currentActivityParams"]={internalId:e.uid},this.$["*currentActivity"]=uo.activities.CLOUD_IMG_EDIT,this.modalManager.open(uo.activities.CLOUD_IMG_EDIT))}setInitialCrop(){const e=Co(this.cfg.cropPreset);if(e){const[t]=e,r=this.uploadCollection.findItems(e=>!!e.getValue("fileInfo")&&e.getValue("isImage")&&!e.getValue("cdnUrlModifiers")?.includes("/crop/")).map(e=>this.uploadCollection.read(e)).filter(Boolean);for(const e of r){const r=e.getValue("fileInfo");if(!r||!r.imageInfo){console.warn("Failed to get image info for entry",e.uid);continue}const{width:i,height:o}=r.imageInfo,a=_o(i,o,t.width/t.height),n=Kt(`crop/${a.width}x${a.height}/${a.x},${a.y}`,"preview"),s=e.getValue("cdnUrl");s?(e.setMultipleValues({cdnUrlModifiers:n,cdnUrl:Qt(s,n)}),1===this.uploadCollection.size&&this.cfg.useCloudImageEditor&&this.hasBlockInCtx(e=>e.activityType===uo.activities.CLOUD_IMG_EDIT)&&(this.$["*currentActivityParams"]={internalId:e.uid},this.$["*currentActivity"]=uo.activities.CLOUD_IMG_EDIT,this.modalManager.open(uo.activities.CLOUD_IMG_EDIT))):console.warn("Failed to get cdnUrl for entry",e.uid)}}}async getMetadataFor(e){const t=this.cfg.metadata||void 0;if("function"==typeof t){const r=this.api.getOutputItem(e);return await t(r)}return t}async getUploadClientOptions(){const e=this.$["*secureUploadsManager"],t=await e.getSecureToken().catch(()=>null);return{store:this.cfg.store,publicKey:this.cfg.pubkey,baseCDN:this.cfg.cdnCname,baseURL:this.cfg.baseUrl,userAgent:Eo,integration:this.cfg.userAgentIntegration,secureSignature:t?.secureSignature,secureExpire:t?.secureExpire,retryThrottledRequestMaxTimes:this.cfg.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:this.cfg.retryNetworkErrorMaxTimes,multipartMinFileSize:this.cfg.multipartMinFileSize,multipartChunkSize:this.cfg.multipartChunkSize,maxConcurrentRequests:this.cfg.multipartMaxConcurrentRequests,multipartMaxAttempts:this.cfg.multipartMaxAttempts,checkForUrlDuplicates:!!this.cfg.checkForUrlDuplicates,saveUrlForRecurrentUploads:!!this.cfg.saveUrlForRecurrentUploads}}getOutputData(){return this.uploadCollection.items().map(e=>this.api.getOutputItem(e))}}ga.extSrcList=Object.freeze({...Po}),ga.sourceTypes=Object.freeze({...No});const ma=e=>e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g)?.map(e=>e.toLowerCase()).join("-"),ba=e=>String(e),fa=e=>{const t=Number(e);if(Number.isNaN(t))throw new Error(`Invalid number: "${e}"`);return t},va=e=>{if(null==e)return!1;if("boolean"==typeof e)return e;if("true"===e)return!0;if(""===e)return!0;if("false"===e)return!1;throw new Error(`Invalid boolean: "${e}"`)},ya=e=>{if("object"==typeof e)return e;throw new Error("Invalid value. Must be an object.")},wa=e=>{if("function"==typeof e)return e;throw new Error("Invalid value. Must be a function.")},_a=e=>{if(Array.isArray(e))return e;throw new Error("Must be an array.")},ka={pubkey:ba,multiple:va,multipleMin:fa,multipleMax:fa,confirmUpload:va,imgOnly:va,accept:ba,externalSourcesPreferredTypes:ba,externalSourcesEmbedCss:ba,store:e=>"auto"===e?e:va(e),cameraMirror:va,cameraCapture:e=>{const t=ba(e);if("user"!==t&&"environment"!==t&&""!==t)throw new Error(`Invalid value: "${t}"`);return t},sourceList:ba,topLevelOrigin:ba,maxLocalFileSizeBytes:fa,thumbSize:fa,showEmptyList:va,useLocalImageEditor:va,useCloudImageEditor:va,cloudImageEditorTabs:ba,removeCopyright:va,cropPreset:ba,imageShrink:ba,modalScrollLock:va,modalBackdropStrokes:va,sourceListWrap:va,remoteTabSessionKey:ba,cdnCname:ba,cdnCnamePrefixed:ba,baseUrl:ba,socialBaseUrl:ba,secureSignature:ba,secureExpire:ba,secureDeliveryProxy:ba,retryThrottledRequestMaxTimes:fa,retryNetworkErrorMaxTimes:fa,multipartMinFileSize:fa,multipartChunkSize:fa,maxConcurrentRequests:fa,multipartMaxConcurrentRequests:fa,multipartMaxAttempts:fa,checkForUrlDuplicates:va,saveUrlForRecurrentUploads:va,groupOutput:va,userAgentIntegration:ba,debug:va,localeName:ba,metadata:e=>{if("object"==typeof e&&!Array.isArray(e))return e;if("function"==typeof e)return e;throw new Error("Invalid metadata value. Must be an object or function.")},secureUploadsExpireThreshold:fa,localeDefinitionOverride:ya,secureUploadsSignatureResolver:wa,secureDeliveryProxyUrlResolver:wa,iconHrefResolver:wa,fileValidators:_a,collectionValidators:_a,cameraModes:e=>{const t=ba(e),r=mr(t);if(r.some(e=>!Object.values(Ro).includes(e)))throw new Error(`Invalid value: "${JSON.stringify(r)}"`);return t},defaultCameraMode:e=>{const t=ba(e);if(!Object.values(Ro).includes(t))throw new Error(`Invalid value: "${t}"`);return t},enableAudioRecording:va,enableVideoRecording:va,mediaRecorderOptions:ya,maxVideoRecordingDuration:fa,filesViewMode:e=>{const t=ba(e);if(["grid","list"].includes(t))return t;throw new Error(`Invalid value: "${t}"`)},gridShowFileNames:va,cloudImageEditorAutoOpen:va,cloudImageEditorMaskHref:ba,testMode:va},xa=[{test:e=>e.accept&&!!e.imgOnly,message:"There could be a mistake.\nBoth `accept` and `imgOnly` parameters are set.\nThe value of `accept` will be concatenated with the internal image mime types list."},{test:e=>null!==e.enableVideoRecording,message:"The `enableVideoRecording` parameter is deprecated and will be removed in the next major release.\nPlease use the `cameraModes` parameter instead."},{test:e=>null!==e.defaultCameraMode,message:"The `defaultCameraMode` parameter is deprecated and will be removed in the next major release.\nPlease use the `cameraModes` parameter instead."}],Ca=_r(e=>{for(const{test:t,message:r}of xa)t(e)&&Zo(r)},0),Ta=e=>{if(e<=0n)return"0";let t="";for(;e>0n;){t="0123456789abcdefghijklmnopqrstuvwxyz"[Number(e%36n)]+t,e/=36n}return t},Aa=async e=>{const t=await(async e=>{const t=(new TextEncoder).encode(e),r=await window.crypto.subtle.digest("SHA-256",t),i=Array.from(new Uint8Array(r)).map(e=>e.toString(16).padStart(2,"0")).join("");return BigInt(`0x${i}`)})(e);return Ta(t).slice(0,10)},Ea=async(e,t)=>((e,t)=>{const r=new URL(t);return r.hostname=`${e}.${r.hostname}`,r.toString().replace(/\/$/,"")})(await Aa(e),t),Ia=e=>e instanceof Promise||Boolean(e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then);const Sa=[{key:"cameraModes",deps:["enableVideoRecording"],fn:({cameraModes:e,enableVideoRecording:t})=>{if(null===t)return e;let r=mr(e);return t&&!r.includes("video")?r=r.concat("video"):t||(r=r.filter(e=>"video"!==e)),br(r)}},{key:"cameraModes",deps:["defaultCameraMode"],fn:({cameraModes:e,defaultCameraMode:t})=>{if(null===t)return e;let r=mr(e);return r=r.sort((e,r)=>e===t?-1:r===t?1:0),br(r)}},{key:"cdnCname",deps:["pubkey","cdnCnamePrefixed"],fn:({pubkey:e,cdnCname:t,cdnCnamePrefixed:r})=>e&&(t===fr||((e,t)=>{try{const r=new URL(e),i=new URL(t);return r.hostname.endsWith(i.hostname)}catch{return!1}})(t,r))?Ea(e,r):t}],Ma=({key:e,setValue:t,getValue:r})=>{for(const i of Sa)if(i.deps.includes(e)){const e={[i.key]:r(i.key),...i.deps.reduce((e,t)=>({...e,[t]:r(t)}),{})},o=i.fn(e);if(Ia(o)){const e=r(i.key);o.then(o=>{r(i.key)===e&&t(i.key,o)}).catch(e=>{console.error(`Failed to compute value for "${i.key}"`,e)})}else t(i.key,o)}},$a=[...new Set(["debug",...Object.keys(vr)])],La=["metadata","localeDefinitionOverride","secureUploadsSignatureResolver","secureDeliveryProxyUrlResolver","iconHrefResolver","fileValidators","collectionValidators","mediaRecorderOptions"],Ra=$a.filter(e=>!(e=>La.includes(e))(e)),Ua={...Object.fromEntries(Ra.map(e=>[ma(e),e])),...Object.fromEntries(Ra.map(e=>[e.toLowerCase(),e]))},Oa={...Object.fromEntries(Ra.map(e=>[ma(e),Gi(e)])),...Object.fromEntries(Ra.map(e=>[e.toLowerCase(),Gi(e)]))},Pa=e=>"__"+e;class za extends no{requireCtxName=!0;constructor(){super(),this.init$={...this.init$,...Object.fromEntries(Object.entries(vr).map(([e,t])=>[Gi(e),t]))}}_flushValueToAttribute(e,t){if(Ra.includes(e)){const r=[...new Set([ma(e),e.toLowerCase()])];for(const e of r)null==t?this.removeAttribute(e):this.getAttribute(e)!==t.toString()&&this.setAttribute(e,t.toString())}}_flushValueToState(e,t){this.$[Gi(e)]!==t&&(this.$[Gi(e)]=null==t?vr[e]:t)}_setValue(e,t){const r=this,i=((e,t)=>{if(null!=t)try{return ka[e](t)}catch(t){return console.error(`Invalid value for config key "${e}".`,t),vr[e]}})(e,t),o=Pa(e);r[o]!==i&&(this._assertSameValueDifferentReference(e,r[o],i),r[o]=i,this._flushValueToAttribute(e,i),this._flushValueToState(e,i),this.debugPrint(`[uc-config] "${e}"`,i),Ca(this.cfg),Ma({key:e,setValue:this._setValue.bind(this),getValue:this._getValue.bind(this)}))}_getValue(e){return this[Pa(e)]??this.$[Gi(e)]}_assertSameValueDifferentReference(e,t,r){this.cfg.debug&&r!==t&&"object"==typeof r&&"object"==typeof t&&JSON.stringify(r)===JSON.stringify(t)&&(console.warn(`[uc-config] Option "${e}" value is the same as the previous one but the reference is different`),console.warn("[uc-config] You should avoid changing the reference of the object to prevent unnecessary calculations"),console.warn(`[uc-config] "${e}" previous value:`,t),console.warn(`[uc-config] "${e}" new value:`,r))}initCallback(){super.initCallback();const e=this;for(const e of Ra)this.sub(Gi(e),t=>{this._setValue(e,t)},!1);for(const t of $a){const r=e[t]??this.$[Gi(t)];r!==vr[t]&&this._setValue(t,r),Object.defineProperty(this,t,{set:e=>{this._setValue(t,e)},get:()=>this._getValue(t)}),Ma({key:t,setValue:this._setValue.bind(this),getValue:this._getValue.bind(this)})}}attributeChangedCallback(e,t,r){if(t===r)return;this[Ua[e]]=r}}za.bindAttributes(Oa);for(const e of $a)za.prototype[e]=void 0;const Na=za;class Da extends no{constructor(){super(),this.init$={...this.init$,name:"",href:""}}initCallback(){super.initCallback(),this.sub("name",e=>{if(!e)return;let t=`#uc-icon-${e}`;this.subConfigValue("iconHrefResolver",r=>{if(r){const i=r(e);t=i??t}this.$.href=t})}),this.setAttribute("aria-hidden","true")}}Da.template='\n  <svg ref="svg" xmlns="http://www.w3.org/2000/svg">\n    <use set="@href: href;"></use>\n  </svg>\n',Da.bindAttributes({name:"name"});const Fa=Object.freeze({"dev-mode":{},pubkey:{},uuid:{},src:{},lazy:{default:1},intersection:{},breakpoints:{},"cdn-cname":{default:"https://ucarecdn.com"},"proxy-cname":{},"secure-delivery-proxy":{},"hi-res-support":{default:1},"ultra-res-support":{},format:{},"cdn-operations":{},progressive:{},quality:{},"is-background-for":{},"is-preview-blur":{default:1}}),Va="--uc-img-",Ba="unresolved",ja=!window.location.host.trim()||window.location.host.includes(":")||window.location.hostname.includes("localhost"),Ha=Object.freeze({PREVIEW:"PREVIEW",MAIN:"MAIN"}),qa=Object.create(null);for(let e in Fa)qa[Va+e]=Fa[e]?.default||"";class Ka extends zt{cssInit$=qa;$$(e){return this.$[Va+e]}set$$(e){for(let t in e)this.$[Va+t]=e[t]}sub$$(e,t){this.sub(Va+e,e=>{null!==e&&""!==e&&t(e)})}analyticsParams(){return`-/@clib/${To}/${Ao}/uc-img/`}initAttributes(e){[...this.attributes].forEach(t=>{Fa[t.name]||e.setAttribute(t.name,t.value)})}initIntersection(e,t){this._isnObserver=new IntersectionObserver(r=>{r.forEach(r=>{r.isIntersecting&&(t(),this._isnObserver.unobserve(e))})},{root:null,rootMargin:"0px"}),this._isnObserver.observe(e),this._observed||(this._observed=new Set),this._observed.add(e)}destroyCallback(){super.destroyCallback(),this._isnObserver&&(this._observed.forEach(e=>{this._isnObserver.unobserve(e)}),this._isnObserver=null),wt.deleteCtx(this)}static get observedAttributes(){return Object.keys(Fa)}attributeChangedCallback(e,t,r){window.setTimeout(()=>{this.$[Va+e]=r})}}class Ga extends Ka{_img=new Image;_imgPreview=new Image;_fmtAbs(e){return!e.includes("//")&&!ja&&(e=new URL(e,document.baseURI).href),e}_validateSize(e){if(""!==e?.trim()){let t=e.match(/\d+/)[0],r=e.match(/[a-zA-Z]+/)[0];const i=parseInt(t,10);if(Number(i)>5e3&&this.hasFormatJPG)return 5e3+r;if(Number(i)>3e3&&!this.hasFormatJPG)return 3e3+r}return e}_getCdnModifiers(e,t){const r={format:this.$$("format"),quality:this.$$("quality"),resize:this._validateSize(e),blur:t,"cdn-operations":this.$$("cdn-operations"),analytics:this.analyticsParams()};return Kt(...(e=>Object.entries(e).filter(([e,t])=>void 0!==t&&""!==t).map(([e,t])=>"cdn-operations"===e||"analytics"===e?t:`${e}/${t}`))(r))}_getUrlBase(e="",t=""){if(this.$$("src").startsWith("data:")||this.$$("src").startsWith("blob:"))return this.$$("src");if(ja&&this.$$("src")&&!this.$$("src").includes("//"))return this._proxyUrl(this.$$("src"));let r=this._getCdnModifiers(e,t);return this.$$("src").startsWith(this.$$("cdn-cname"))?Qt(this.$$("src"),r):this.$$("cdn-cname")&&this.$$("uuid")||this.$$("uuid")?this._proxyUrl(Qt(er(this.$$("cdn-cname"),this.$$("uuid")),r)):this.$$("proxy-cname")?this._proxyUrl(Qt(this.$$("proxy-cname"),r,this._fmtAbs(this.$$("src")))):this.$$("pubkey")?this._proxyUrl(Qt(`https://${this.$$("pubkey")}.ucr.io/`,r,this._fmtAbs(this.$$("src")))):void 0}_proxyUrl(e){return this.$$("secure-delivery-proxy")?Sr(this.$$("secure-delivery-proxy"),{previewUrl:e},{transform:e=>window.encodeURIComponent(e)}):e}_getElSize(e,t=1,r=!0){let i=e.getBoundingClientRect(),o=t*Math.round(i.width),a=r?"":t*Math.round(i.height);return o||a?`${o||""}x${a||""}`:null}_setupEventProxy(e){let t=e=>{e.stopPropagation();let t=new Event(e.type,e);this.dispatchEvent(t)},r=["load","error"];for(let i of r)e.addEventListener(i,t)}get img(){return this.hasPreviewImage||(this._setupConfigForImage({elNode:this._img}),this.appendChild(this._img)),this._img}get currentImg(){return this.hasPreviewImage?{type:Ha.PREVIEW,img:this._imgPreview}:{type:Ha.MAIN,img:this.img}}get hasPreviewImage(){return this.$$("is-preview-blur")}get bgSelector(){return this.$$("is-background-for")}get breakpoints(){if(this.$$("breakpoints")){const t=tr(this.$$("breakpoints"));return e=t.map(e=>parseInt(e,10)),[...new Set(e)]}return null;var e}get hasFormatJPG(){return"jpeg"===this.$$("format").toLowerCase()}renderBg(e){let t=new Set;t.add(`url("${this._getUrlBase(this._getElSize(e))}") 1x`),this.$$("hi-res-support")&&t.add(`url("${this._getUrlBase(this._getElSize(e,2))}") 2x`),this.$$("ultra-res-support")&&t.add(`url("${this._getUrlBase(this._getElSize(e,3))}") 3x`);let r=`image-set(${[...t].join(", ")})`;e.style.setProperty("background-image",r),e.style.setProperty("background-image","-webkit-"+r)}getSrcset(){let e=new Set;return this.breakpoints?this.breakpoints.forEach(t=>{e.add(this._getUrlBase(t+"x")+` ${this._validateSize(t+"w")}`),this.$$("hi-res-support")&&e.add(this._getUrlBase(2*t+"x")+` ${this._validateSize(2*t+"w")}`),this.$$("ultra-res-support")&&e.add(this._getUrlBase(3*t+"x")+` ${this._validateSize(3*t+"w")}`)}):(e.add(this._getUrlBase(this._getElSize(this.currentImg.img))+" 1x"),this.$$("hi-res-support")&&e.add(this._getUrlBase(this._getElSize(this.currentImg.img,2))+" 2x"),this.$$("ultra-res-support")&&e.add(this._getUrlBase(this._getElSize(this.currentImg.img,3))+" 3x")),[...e].join()}getSrc(){return this._getUrlBase()}get srcUrlPreview(){return this._getUrlBase("100x","100")}renderBackground(){[...document.querySelectorAll(this.bgSelector)].forEach(e=>{this.$$("intersection")?this.initIntersection(e,()=>{this.renderBg(e)}):this.renderBg(e)})}_appendURL({elNode:e,src:t,srcset:r}){t&&(e.src=t),r&&(e.srcset=r)}_setupConfigForImage({elNode:e}){this._setupEventProxy(e),this.initAttributes(e)}loaderImage({src:e,srcset:t,elNode:r}){return new Promise((i,o)=>{this._setupConfigForImage({elNode:r}),r.setAttribute(Ba,""),r.addEventListener("load",()=>{r.removeAttribute(Ba),i(r)}),r.addEventListener("error",()=>{o(!1)}),this._appendURL({elNode:r,src:e,srcset:t})})}async renderImage(){if(this.$$("intersection"))return this.hasPreviewImage&&(this._setupConfigForImage({elNode:this._imgPreview}),this.appendChild(this._imgPreview)),void this.initIntersection(this.currentImg.img,async()=>{this.hasPreviewImage&&(this._imgPreview.src=this.srcUrlPreview);try{await this.loaderImage({src:this.getSrc(),srcset:this.getSrcset(),elNode:this._img}),this.hasPreviewImage&&await this._imgPreview.remove(),this.appendChild(this._img)}catch(e){this.hasPreviewImage&&await(this._imgPreview?.remove()),this.appendChild(this._img)}});try{this.hasPreviewImage&&(await this.loaderImage({src:this.srcUrlPreview,elNode:this._imgPreview}),this.appendChild(this._imgPreview)),await this.loaderImage({src:this.getSrc(),srcset:this.getSrcset(),elNode:this._img}),this.hasPreviewImage&&await(this._imgPreview?.remove()),this.appendChild(this._img)}catch(e){this.hasPreviewImage&&await(this._imgPreview?.remove()),this.appendChild(this._img)}}init(){this.bgSelector?this.renderBackground():this.renderImage()}}class Wa extends Ga{initCallback(){super.initCallback(),this.sub$$("src",()=>{this.init()}),this.sub$$("uuid",()=>{this.init()}),this.sub$$("lazy",e=>{this.$$("is-background-for")||this.$$("is-preview-blur")||(this.img.loading=e?"lazy":"eager")})}}class Xa extends ga{static styleAttrs=[...super.styleAttrs,"uc-simple-btn"];couldBeCtxOwner=!0;constructor(){super(),this.init$={...this.init$,withDropZone:!0,onClick:()=>{this.api.initFlow()},"button-text":""}}initCallback(){super.initCallback(),this.defineAccessor("dropzone",e=>{void 0!==e&&(this.$.withDropZone=va(e))}),this.subConfigValue("multiple",e=>{this.$["button-text"]=e?"upload-files":"upload-file"})}}Xa.template='\n  <uc-drop-area set="@disabled: !withDropZone">\n    <button type="button" set="onclick: onClick">\n      <uc-icon name="upload"></uc-icon>\n      <span l10n="button-text"></span>\n      <slot></slot>\n      <div class="uc-visual-drop-area" l10n="drop-files-here"></div>\n    </button>\n  </uc-drop-area>\n',Xa.bindAttributes({dropzone:null});class Za extends uo{historyTracked=!0;activityType=uo.activities.START_FROM;initCallback(){super.initCallback(),this.registerActivity(this.activityType)}}function Ya(e){return new Promise(t=>{"function"!=typeof window.FileReader&&t(!1);try{let r=new FileReader;r.onerror=()=>{t(!0)};let i=e=>{"loadend"!==e.type&&r.abort(),t(!1)};r.onloadend=i,r.onprogress=i,r.readAsDataURL(e)}catch(e){t(!1)}})}function Ja(e,t){return new Promise(r=>{let i=0;const o=[],a=e=>{e||(console.warn("Unexpectedly received empty content entry",{scope:"drag-and-drop"}),r(null)),e.isFile?(i++,e.file(a=>{i--;const n=new File([a],a.name,{type:a.type||t});o.push({type:"file",file:n,fullPath:e.fullPath}),0===i&&r(o)})):e.isDirectory&&n(e.createReader())};let n=e=>{i++,e.readEntries(e=>{i--;for(let t of e)a(t);0===i&&r(o)})};a(e)})}Za.template=' <div class="uc-content"><slot></slot></div> ';const Qa={ACTIVE:0,INACTIVE:1,NEAR:2,OVER:3};let en=["focus"],tn=new Map;function rn(e){let t=0,r=document.body,i=new Set,o=Qa.INACTIVE,a=t=>{e.shouldIgnore()&&t!==Qa.INACTIVE||(o!==t&&i.forEach(e=>e(t)),o=t)},n=()=>t>0;var s;s=t=>e.onChange(t),i.add(s);let c=()=>{t=0,a(Qa.INACTIVE)},l=()=>{t+=1,o===Qa.INACTIVE&&a(Qa.ACTIVE)},u=()=>{t-=1,n()||a(Qa.INACTIVE)},d=e=>{e.preventDefault(),t=0,a(Qa.INACTIVE)},h=r=>{if(e.shouldIgnore())return;n()||(t+=1);let i=[r.x,r.y],o=e.element.getBoundingClientRect(),s=Math.floor(function(e,t){let r=Math.max(Math.min(e[0],t.x+t.width),t.x),i=Math.max(Math.min(e[1],t.y+t.height),t.y);return Math.sqrt((e[0]-r)*(e[0]-r)+(e[1]-i)*(e[1]-i))}(i,o)),c=s<100,l=r.composedPath().includes(e.element);tn.set(e.element,s);let u=Math.min(...tn.values())===s;l&&u?(r.preventDefault(),a(Qa.OVER)):a(c&&u?Qa.NEAR:Qa.ACTIVE)},p=async t=>{if(e.shouldIgnore())return;t.preventDefault();let r=await function(e){const t=[],r=[];for(let i=0;i<e.items.length;i++){let o=e.items[i];if(o)if("file"===o.kind){const e=o.type;if("function"==typeof o.webkitGetAsEntry||"function"==typeof o.getAsEntry){let i="function"==typeof o.webkitGetAsEntry?o.webkitGetAsEntry():o.getAsEntry();r.push(Ja(i,e).then(e=>{e&&t.push(...e)}));continue}const i=o.getAsFile();i&&r.push(Ya(i).then(e=>{e||t.push({type:"file",file:i})}))}else"string"===o.kind&&o.type.match("^text/uri-list")&&r.push(new Promise(e=>{o.getAsString(r=>{t.push({type:"url",url:r}),e(void 0)})}))}return Promise.all(r).then(()=>t)}(t.dataTransfer);e.onItems(r),a(Qa.INACTIVE)};return r.addEventListener("drop",d),r.addEventListener("dragleave",u),r.addEventListener("dragenter",l),r.addEventListener("dragover",h),e.element.addEventListener("drop",p),en.forEach(e=>{window.addEventListener(e,c)}),()=>{tn.delete(e.element),r.removeEventListener("drop",d),r.removeEventListener("dragleave",u),r.removeEventListener("dragenter",l),r.removeEventListener("dragover",h),e.element.removeEventListener("drop",p),en.forEach(e=>{window.removeEventListener(e,c)})}}const on="uc-drop-area",an=`${on}/registry`;class nn extends ga{static styleAttrs=[...super.styleAttrs,"uc-drop-area"];constructor(){super(),this.init$={...this.init$,state:Qa.INACTIVE,withIcon:!1,isClickable:!1,isFullscreen:!1,isEnabled:!0,isVisible:!0,isInitFlow:!1,text:"",[an]:null}}isActive(){if(!this.$.isEnabled)return!1;const e=this.getBoundingClientRect(),t=e.width>0&&e.height>0,r=e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth),i=window.getComputedStyle(this),o="hidden"!==i.visibility&&"none"!==i.display;return t&&o&&r}initCallback(){super.initCallback(),this.bindL10n("text",()=>this.l10n("drop-files-here")),this.$[an]||(this.$[an]=new Set),this.$[an].add(this),this.defineAccessor("disabled",e=>{this.set$({isEnabled:!va(e)})}),this.defineAccessor("clickable",e=>{this.set$({isClickable:va(e)})}),this.defineAccessor("initflow",e=>{this.set$({isInitFlow:va(e)})}),this.defineAccessor("with-icon",e=>{this.set$({withIcon:va(e)})}),this.defineAccessor("fullscreen",e=>{this.set$({isFullscreen:va(e)})}),this.defineAccessor("text",e=>{"string"==typeof e?this.bindL10n("text",()=>this.l10n(e)||e):this.bindL10n("text",()=>this.l10n("drop-files-here"))}),this._destroyDropzone=rn({element:this,shouldIgnore:()=>this._shouldIgnore(),onChange:e=>{this.$.state=e},onItems:e=>{e.length&&(e.forEach(e=>{"url"===e.type?this.api.addFileFromUrl(e.url,{source:No.DROP_AREA}):"file"===e.type&&this.api.addFileFromObject(e.file,{source:No.DROP_AREA,fullPath:e.fullPath})}),this.uploadCollection.size&&(this.modalManager.open(uo.activities.UPLOAD_LIST),this.set$({"*currentActivity":uo.activities.UPLOAD_LIST})))}});let e=this.ref["content-wrapper"];e&&(this._destroyContentWrapperDropzone=rn({element:e,onChange:t=>{const r=Object.entries(Qa).find(([,e])=>e===t)?.[0].toLowerCase();r&&e.setAttribute("drag-state",r)},onItems:()=>{},shouldIgnore:()=>this._shouldIgnore()})),this.sub("state",e=>{const t=Object.entries(Qa).find(([,t])=>t===e)?.[0].toLowerCase();t&&this.setAttribute("drag-state",t)}),this.subConfigValue("sourceList",e=>{const t=tr(e);this.$.isEnabled=t.includes(No.LOCAL),this.$.isVisible=this.$.isEnabled||!this.querySelector("[data-default-slot]")}),this.sub("isVisible",e=>{this.toggleAttribute("hidden",!e)}),this.sub("isClickable",e=>{this.toggleAttribute("clickable",e)}),this.$.isClickable&&(this._onAreaClicked=e=>{if("keydown"===e.type){if("Space"===e.code||"Enter"===e.code){if(this.$.isInitFlow)return void this.api.initFlow();this.api.openSystemDialog()}}else if("click"===e.type){if(this.$.isInitFlow)return void this.api.initFlow();this.api.openSystemDialog()}},this.addEventListener("keydown",this._onAreaClicked),this.addEventListener("click",this._onAreaClicked))}_shouldIgnore(){if(!this.$.isEnabled)return!0;if(!this._couldHandleFiles())return!0;if(!this.$.isFullscreen)return!1;return[...this.$[an]].filter(e=>e!==this).filter(e=>e.isActive()).length>0}_couldHandleFiles(){let e=this.cfg.multiple,t=this.cfg.multipleMax,r=this.uploadCollection.size;return!(e&&t&&r>=t)&&!(!e&&r>0)}destroyCallback(){super.destroyCallback();const e=this.$[an];e&&(e.delete(this),0===e.size&&wt.deleteCtx(on)),this._destroyDropzone?.(),this._destroyContentWrapperDropzone?.(),this._onAreaClicked&&(this.removeEventListener("keydown",this._onAreaClicked),this.removeEventListener("click",this._onAreaClicked))}}nn.template='\n  <slot>\n    <div data-default-slot hidden></div>\n    <div ref="content-wrapper" class="uc-content-wrapper" set="@hidden: !isVisible">\n      <div class="uc-icon-container" set="@hidden: !withIcon">\n        <uc-icon name="default"></uc-icon>\n        <uc-icon name="arrow-down"></uc-icon>\n      </div>\n      <span class="uc-text">{{text}}</span>\n    </div>\n  </slot>\n',nn.bindAttributes({"with-icon":null,clickable:null,text:null,fullscreen:null,disabled:null,initflow:null});class sn extends ga{couldBeCtxOwner=!0;type=void 0;_registeredTypes={};constructor(){super(),this.init$={...this.init$,iconName:"default","src-type":""}}initTypes(){this.registerType({type:No.LOCAL,activate:()=>(this.api.openSystemDialog(),!1)}),this.registerType({type:No.URL,activity:uo.activities.URL,textKey:"from-url"}),this.registerType({type:No.CAMERA,activity:uo.activities.CAMERA,activate:()=>{const e=Fo.htmlMediaCapture;return e&&this.api.openSystemDialog({captureCamera:!0}),!e}}),this.registerType({type:"draw",activity:uo.activities.DRAW,icon:"edit-draw"});for(let e of Object.values(zo))this.registerType({type:e,activity:uo.activities.CAMERA,activate:()=>{const t=Fo.htmlMediaCapture;return t&&this.api.openSystemDialog({captureCamera:!0,modeCamera:"mobile-photo-camera"===e?Ro.PHOTO:Ro.VIDEO}),!t}});for(let e of Object.values(Po))this.registerType({type:e,activity:uo.activities.EXTERNAL,activityParams:{externalSourceType:e}})}initCallback(){super.initCallback(),this.initTypes(),this.defineAccessor("type",e=>{e&&this.applyType(e)})}registerType(e){this._registeredTypes[e.type]=e}getType(e){return this._registeredTypes[e]}activate(){if(!this.type)return;const e=this._registeredTypes[this.type],{activity:t,activate:r,activityParams:i={}}=e;(r?r():!!t)&&(this.modalManager.open(t),this.set$({"*currentActivityParams":i,"*currentActivity":t}))}applyType(e){const t=this._registeredTypes[e];if(!t)return void console.warn("Unsupported source type: "+e);const{textKey:r=e,icon:i=e}=t;this.$["src-type"]=`src-type-${r}`,this.$.iconName=i,this.onclick=()=>{this.activate()}}}sn.template='\n  <button type="button">\n    <uc-icon set="@name: iconName"></uc-icon>\n    <div class="uc-txt" l10n="src-type"></div>\n  </button>\n',sn.bindAttributes({type:null});class cn extends no{initCallback(){super.initCallback(),this.subConfigValue("sourceList",e=>{let t=tr(e),r="";t.forEach(e=>{"instagram"!==e?"camera"===e&&Fo.htmlMediaCapture?this.subConfigValue("cameraModes",e=>{const t=mr(e);t.forEach(e=>{r+=`<uc-source-btn role="listitem" type="mobile-${e}-camera"></uc-source-btn>`}),0===t.length&&(r+='<uc-source-btn role="listitem" type="mobile-photo-camera"></uc-source-btn>')}):r+=`<uc-source-btn role="listitem" type="${e}"></uc-source-btn>`:console.error("Instagram source was removed because the Instagram Basic Display API hasn't been available since December 4, 2024. Official statement, see here:https://developers.facebook.com/blog/post/2024/09/04/update-on-instagram-basic-display-api/?locale=en_US")}),this.cfg.sourceListWrap?this.innerHTML=r:this.outerHTML=r})}}const ln=()=>{const e=[];return{stack:e,promiseReadJpegChunks:t=>new Promise((r,i)=>{let o=2;const a=(e,t)=>{const r=new FileReader;r.addEventListener("load",()=>{t(new DataView(r.result))}),r.addEventListener("error",e=>{i(`Reader error: ${e}`)}),r.readAsArrayBuffer(e)},n=()=>a(t.slice(o,o+128),e=>{let t,r,i;for(t=r=0,i=e.byteLength;i>=0?r<i:r>i;t=i>=0?++r:--r)if(255===e.getUint8(t)){o+=t;break}s()}),s=()=>{const s=o;return a(t.slice(o,o+=4),c=>{if(4!==c.byteLength||255!==c.getUint8(0))return void i("Corrupted");const l=c.getUint8(1);if(218===l)return void r(!0);const u=c.getUint16(2)-2;return a(t.slice(o,o+=u),t=>{t.byteLength===u?(e.push({startPos:s,length:u,marker:l,view:t}),n()):i("Corrupted")})})};FileReader&&DataView||i("Not Support"),a(t.slice(0,2),e=>{65496!==e.getUint16(0)&&i("Not jpeg"),n()})})}},un=async e=>{const t=[],{promiseReadJpegChunks:r,stack:i}=ln();return await r(e),i.forEach(({marker:e,view:r})=>{226===e&&1229144927===r.getUint32(0)&&1347571526===r.getUint32(4)&&1229735168===r.getUint32(8)&&t.push(r)}),t},dn=async(e,t,r)=>{{const i=[],o=[],{promiseReadJpegChunks:a,stack:n}=ln();await a(e),n.forEach(e=>{if(e.marker===t)return i.push(e.startPos),o.push(e.length)});const s=[e.slice(0,2)];for(const e of r){const r=new DataView(new ArrayBuffer(4));r.setUint16(0,65280+t),r.setUint16(2,e.byteLength+2),s.push(r.buffer),s.push(e)}let c=2;for(let t=0;t<i.length;t++)i[t]>c&&s.push(e.slice(c,i[t])),c=i[t]+o[t]+4;return s.push(e.slice(c,e.size)),new Blob(s,{type:e.type})}},hn=(e,t)=>dn(e,226,t.map(e=>e.buffer)),pn=()=>{const e=document.createElement("canvas"),t=e.getContext("2d");return{canvas:e,ctx:t}},gn=async e=>{let t=null;const{promiseReadJpegChunks:r,stack:i}=ln();return await r(e),i.forEach(({marker:e,view:r})=>{!t&&225===e&&r.byteLength>=14&&1165519206===r.getUint32(0)&&0===r.getUint16(4)&&(t=r)}),t};let mn;const bn=e=>((e,t)=>new Promise((r,i)=>{t&&(e.src=t),e.complete?r(e):(e.addEventListener("load",()=>{r(e)}),e.addEventListener("error",()=>{i(new Error("Failed to load image. Probably not an image."))}))}))(new Image,e),fn=[1,3],vn=[192,193,194,195,197,198,199,201,202,203,205,206,207],yn={squareSide:[Math.floor(Math.sqrt(5e6)),4096,8192,11180,10836,11402,14188,16384],dimension:[4096,8192,16384,32767,65535]},wn=(e,t)=>{const r={};return(...i)=>{const o=t(i,r);return o in r?r[o]:r[o]=e(...i)}},_n=(e,t)=>{const[r]=e,i=Object.keys(t).map(e=>parseInt(e,10)).sort((e,t)=>e-t);for(let e=0;e<i.length;e++){const o=i[e],a=!!t[o];if(o>r&&a)return o;if(o<r&&!a)return o}return r},kn=55,xn=110,Cn=165,Tn=255,An=`rgba(${kn}, ${xn}, ${Cn}, ${Tn/255})`,En=(e,t)=>{try{const r=[e-1,t-1,1,1],{canvas:i,ctx:o}=pn();i.width=1,i.height=1;const{canvas:a,ctx:n}=pn();a.width=e,a.height=t,n&&(n.fillStyle=An,n.fillRect(...r),o.drawImage(a,e-1,t-1,1,1,0,0,1,1));const s=o&&o.getImageData(0,0,1,1).data;let c=!1;return s&&(c=s[0]===kn&&s[1]===xn&&s[2]===Cn&&s[3]===Tn),a.width=a.height=1,c}catch(r){return console.error(`Failed to test for max canvas size of ${e}x${t}.`),!1}};function In(e){return(...t)=>new Promise(r=>{setTimeout(()=>{const i=e(...t);r(i)},0)})}const Sn=In(wn(En,_n)),Mn=In(wn(En,_n)),$n=async(e,t)=>{const r=yn.squareSide.find(r=>r*r>=e*t),i=yn.dimension.find(r=>r>=e&&r>=t);if(!r||!i)throw new Error("Not supported");const[o,a]=await Promise.all([Sn(r,r),Mn(i,1)]);if(o&&a)return!0;throw new Error("Not supported")},Ln=async(e,t,r)=>{try{const{ctx:i,canvas:o}=pn();return o.width=t,o.height=r,i.imageSmoothingQuality="high",i.drawImage(e,0,0,t,r),e instanceof HTMLImageElement&&(e.src="//:0"),e instanceof HTMLCanvasElement&&(e.width=e.height=1),o}catch(e){throw new Error("Canvas resize error",{cause:e})}},Rn=({img:e,sourceW:t,targetW:r,targetH:i,step:o})=>{const a=function({sourceW:e,targetW:t,targetH:r,step:i}){const o=[];let a=t,n=r;do{o.push([a,n]),a=Math.round(a/i),n=Math.round(n/i)}while(a<e*i);return o.reverse()}({sourceW:t,targetW:r,targetH:i,step:o});return a.reduce((e,[t,r],i)=>e.then(e=>$n(t,r).then(()=>Ln(e,t,r)).catch(()=>{if(i===a.length-1)throw new Error("Not supported");return e})),Promise.resolve(e))},Un=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform),On=.71,Pn=(e,t)=>{if(e.width*On*e.height*On<t.size)throw new Error("Not required");const r=e.width,i=e.height,o=r/i,a=Math.floor(Math.sqrt(t.size*o)),n=Math.floor(t.size/Math.sqrt(t.size*o));return $n(a,n).then(()=>{const{ctx:t}=pn();return"imageSmoothingQuality"in t&&!(/iPad|iPhone|iPod/.test(navigator.platform)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform))&&!Un?(({img:e,targetW:t,targetH:r})=>Ln(e,t,r))({img:e,targetW:a,targetH:n}):Rn({img:e,sourceW:r,targetW:a,targetH:n,step:On})}).catch(()=>Promise.reject("Not supported"))},zn=async(e,t)=>{try{if(await(async e=>{let t=!1;const{promiseReadJpegChunks:r,stack:i}=ln();return await r(e).then(()=>(i.forEach(({marker:e,view:r})=>{if(!t&&vn.indexOf(e)>=0){const e=r.getUint8(5);fn.indexOf(e)<0&&(t=!0)}}),t)).catch(()=>t)})(e))throw new Error("Should skipped");const r=await Promise.allSettled([gn(e),new Promise(e=>{if(void 0!==mn)e(mn);else{const t=new Image;t.addEventListener("load",()=>{mn=t.naturalWidth<t.naturalHeight,t.src="//:0",e(mn)}),t.src="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k="}}),un(e)]),i=!r.some(e=>"rejected"===e.status),[o,a,n]=r,s=await(async e=>{try{return await hn(e,[])}catch(e){throw new Error(`Failed to strip ICC profile: ${e}`)}})(e).catch(()=>e),c=await bn(URL.createObjectURL(s));URL.revokeObjectURL(c.src);const l=await Pn(c,t);let u="image/jpeg",d=t?.quality||.8;!i&&(e=>{const{ctx:t,canvas:r}=pn();r.width=r.height=50,t.drawImage(e,0,0,50,50);const i=t.getImageData(0,0,50,50).data;r.width=r.height=1;for(let e=3;e<i.length;e+=4)if(i[e]<254)return!0;return!1})(l)&&(u="image/png",d=void 0);let h=await((e,t,r)=>new Promise((i,o)=>{e.toBlob(e=>{e?i(e):o("Failed to convert canvas to blob")},t,r),e.width=e.height=1}))(l,u,d);if(i&&"fulfilled"===o.status&&o.value){const e=o.value,t="fulfilled"===a.status&&a.value;h=await(async(e,t,r)=>(r&&((e,t)=>{((e,t)=>{let r,i,o,a;if(e&&!(e.byteLength<14)&&1165519206===e.getUint32(0)&&0===e.getUint16(4)){if(18761===e.getUint16(6))i=!0;else{if(19789!==e.getUint16(6))return;i=!1}if(42===e.getUint16(8,i))for(o=8+e.getUint32(10,i),r=0,a=e.getUint16(o-2,i);a>=0?r<a:r>a;a>=0?++r:--r){if(e.byteLength<o+10)return;274===e.getUint16(o,i)&&t(o+8,i),o+=12}}})(e,(r,i)=>e.setUint16(r,t,i))})(t,1),dn(e,225,[t.buffer])))(h,e,t)}return i&&"fulfilled"===n.status&&n.value.length>0&&(h=await hn(h,n.value)),h}catch(e){let t;throw e instanceof Error&&(t=e.message),"string"==typeof e&&(t=e),new Error("Failed to shrink image. "+(t?`Message: "${t}".`:""),{cause:e})}},Nn=/^([0-9]+)x([0-9]+)(?:\s+(\d{1,2}|100)%)?$/i,Dn=(e,t)=>{let r,i,o;const a=(...a)=>{r?(clearTimeout(i),i=setTimeout(()=>{Date.now()-o>=t&&(e(...a),o=Date.now())},Math.max(t-(Date.now()-o),0))):(e(...a),o=Date.now(),r=!0)};return Object.defineProperty(a,"cancel",{configurable:!1,writable:!1,enumerable:!1,value:()=>{clearTimeout(i)}}),a};class Fn extends ga{_entrySubs=new Set;_entry=null;_withEntry(e){return(...t)=>{const r=this._entry;if(r)return e(r,...t);console.warn("No entry found")}}_subEntry(e,t){return this._withEntry((e,t,r)=>{let i=e.subscribe(t,e=>{this.isConnected&&r(e)});this._entrySubs.add(i)})(e,t)}_reset(){for(let e of this._entrySubs)e.remove();this._entrySubs=new Set,this._entry=null}disconnectedCallback(){super.disconnectedCallback(),this._entrySubs=new Set}}const Vn=Object.freeze({FINISHED:Symbol("FINISHED"),FAILED:Symbol("FAILED"),UPLOADING:Symbol("UPLOADING"),IDLE:Symbol("IDLE")});class Bn extends Fn{couldBeCtxOwner=!0;pauseRender=!0;_renderedOnce=!1;constructor(){super(),this.init$={...this.init$,uid:"",itemName:"",errorText:"",hint:"",thumbUrl:"",progressValue:0,progressVisible:!1,badgeIcon:"",isFinished:!1,isFailed:!1,isUploading:!1,isFocused:!1,isEditable:!1,showFileNames:!1,state:Vn.IDLE,ariaLabelStatusFile:"",onEdit:this._withEntry(e=>{this.$["*currentActivityParams"]={internalId:e.uid},this.modalManager.open(uo.activities.CLOUD_IMG_EDIT),this.$["*currentActivity"]=uo.activities.CLOUD_IMG_EDIT}),onRemove:()=>{this.uploadCollection.remove(this.$.uid)},onUpload:()=>{this.upload()}}}_reset(){super._reset(),this._debouncedCalculateState.cancel()}_observerCallback(e){let[t]=e;this._isIntersecting=t.isIntersecting,this._thumbRect=t.boundingClientRect,t.isIntersecting&&!this._renderedOnce&&(this.render(),this._renderedOnce=!0)}_calculateState=this._withEntry(e=>{let t=Vn.IDLE;e.getValue("errors").length>0?t=Vn.FAILED:e.getValue("isUploading")?t=Vn.UPLOADING:e.getValue("fileInfo")&&(t=Vn.FINISHED),this.$.state=t});_debouncedCalculateState=_r(this._calculateState.bind(this),100);_updateHint=this._withEntry(Dn(e=>{const t=e.getValue("source"),r=e.getValue("externalUrl"),i=0===e.getValue("errors").length,o=0===this.$.progressValue,a=this.$.state===Vn.UPLOADING,n=e.getValue("isQueued");if(i&&a&&o){if(n){const e=this.l10n("queued");return void(this.$.hint=e)}if(r&&t&&Object.values(Po).includes(t)){const e=this.l10n("waiting-for",{source:this.l10n(`src-type-${t}`)});return void(this.$.hint=e)}this.$.hint=""}else this.$.hint=""},100));_handleEntryId(e){this._reset();let t=this.uploadCollection?.read(e);this._entry=t,t&&(this._subEntry("uploadProgress",e=>{this.$.progressValue=e,this._updateHint()}),this._subEntry("isQueued",()=>{this._updateHint()}),this._subEntry("fileName",e=>{this.$.itemName=e||t.getValue("externalUrl")||this.l10n("file-no-name"),this._debouncedCalculateState()}),this._subEntry("externalUrl",e=>{this.$.itemName=t.getValue("fileName")||e||this.l10n("file-no-name")}),this._subEntry("fileInfo",()=>{this._debouncedCalculateState()}),this._subEntry("errors",()=>this._debouncedCalculateState()),this._subEntry("isUploading",()=>this._debouncedCalculateState()),this._subEntry("fileSize",()=>this._debouncedCalculateState()),this._subEntry("mimeType",()=>this._debouncedCalculateState()),this._subEntry("isImage",()=>this._debouncedCalculateState()))}_updateShowFileNames(e){"list"===this.cfg.filesViewMode?this.$.showFileNames=!0:this.$.showFileNames=e}initCallback(){super.initCallback(),this.sub("uid",e=>{this._handleEntryId(e)}),this.sub("state",e=>{this._handleState(e)}),this.subConfigValue("useCloudImageEditor",()=>this._debouncedCalculateState()),this.subConfigValue("filesViewMode",e=>{this._updateShowFileNames(this.cfg.gridShowFileNames),this.setAttribute("mode",e)}),this.subConfigValue("gridShowFileNames",e=>{this._updateShowFileNames(e)}),this.onclick=()=>{Bn.activeInstances.forEach(e=>{e===this?e.setAttribute("focused",""):e.removeAttribute("focused")})},this.sub("*uploadTrigger",e=>{this._entry&&!e.has(this._entry.uid)||setTimeout(()=>this.isConnected&&this.upload())}),Bn.activeInstances.add(this)}_handleState=this._withEntry((e,t)=>{t===Vn.FAILED?this.$.badgeIcon="badge-error":t===Vn.FINISHED&&(this.$.badgeIcon="badge-success"),t===Vn.UPLOADING&&(this.$.isFocused=!1);const r=e.getValue("fileName");this.set$({isFailed:t===Vn.FAILED,isUploading:t===Vn.UPLOADING,isFinished:t===Vn.FINISHED,progressVisible:t===Vn.UPLOADING,isEditable:this.cfg.useCloudImageEditor&&this._entry?.getValue("isImage")&&this._entry?.getValue("cdnUrl"),errorText:e.getValue("errors")?.[0]?.message,ariaLabelStatusFile:r&&this.l10n("a11y-file-item-status",{fileName:r,status:this.l10n(t?.description?.toLocaleLowerCase()??"").toLocaleLowerCase()})}),this._updateHint()});destroyCallback(){super.destroyCallback(),Bn.activeInstances.delete(this),this._reset()}connectedCallback(){super.connectedCallback(),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:[0,1]}),this._observer.observe(this)}disconnectedCallback(){super.disconnectedCallback(),this._observer?.disconnect()}_settingsOfShrink(){return(e=>{const t=Nn.exec(e?.toLocaleLowerCase())||[];if(!t.length)return!1;const r=t[1]*t[2];return r>268435456?(console.warn(`Shrinked size can not be larger than ${Math.floor(268.435456)}MP. You have set ${t[1]}x${t[2]} (`+Math.ceil(r/1e3/100)/10+"MP)."),!1):{quality:t[3]?t[3]/100:void 0,size:r}})(this.cfg.imageShrink)}_processShrink(e){return zn(e,this._settingsOfShrink())}upload=this._withEntry(async e=>{if(!this.uploadCollection.read(e.uid))return;if(e.getValue("fileInfo")||e.getValue("isUploading")||e.getValue("errors").length>0)return;const t=this.cfg.multiple?this.cfg.multipleMax:1;if(!(t&&this.uploadCollection.size>t)){this._debouncedCalculateState(),e.setMultipleValues({isUploading:!0,errors:[],isQueued:!0});try{let t=new AbortController;e.setValue("abortController",t);const r=async()=>{e.setValue("isQueued",!1);let r=e.getValue("file");r&&this.cfg.imageShrink&&(r=await this._processShrink(r).catch(()=>r));const i=r||e.getValue("externalUrl")||e.getValue("uuid");if(!i)throw new Error("No file input");const o={...await this.getUploadClientOptions(),fileName:e.getValue("fileName")??void 0,source:e.getValue("source")??void 0,onProgress:t=>{if(t.isComputable){let r=100*t.value;e.setValue("uploadProgress",r)}},signal:t.signal,metadata:await this.getMetadataFor(e.uid)};return this.debugPrint("upload options",i,o),Li(i,o)};let i=await this.$["*uploadQueue"].add(r);e.setMultipleValues({fileInfo:i,isQueued:!1,isUploading:!1,fileName:i.originalFilename,fileSize:i.size,isImage:i.isImage??!1,mimeType:i.contentInfo?.mime?.mime??i.mimeType,uuid:i.uuid,cdnUrl:e.getValue("cdnUrl")??i.cdnUrl,cdnUrlModifiers:e.getValue("cdnUrlModifiers")??"",uploadProgress:100,source:e.getValue("source")??null}),e===this._entry&&this._debouncedCalculateState()}catch(t){t instanceof Vr&&t.isCancel?e.setMultipleValues({isUploading:!1,uploadProgress:0}):t instanceof Nr?e.setMultipleValues({isUploading:!1,uploadProgress:0,uploadError:t}):(console.error("Unknown upload error",t),e.setMultipleValues({isUploading:!1,uploadProgress:0,uploadError:new Error("Something went wrong",{cause:t})})),e===this._entry&&this._debouncedCalculateState()}}})}Bn.template='\n  <div class="uc-inner" set="@finished: isFinished; @uploading: isUploading; @failed: isFailed; @focused: isFocused">\n    <uc-thumb set="uid:uid;badgeIcon:badgeIcon"></uc-thumb>\n\n    <div aria-atomic="true" aria-live="polite" class="uc-file-name-wrapper" set="@aria-label:ariaLabelStatusFile;">\n      <span class="uc-file-name" set="@hidden: !showFileNames">{{itemName}}</span>\n      <span class="uc-file-error" set="@hidden: !errorText;">{{errorText}}</span>\n      <span class="uc-file-hint" set="@hidden: !hint">{{hint}}</span>\n    </div>\n    <div class="uc-file-actions">\n      <button\n        type="button"\n        l10n="@title:file-item-edit-button;@aria-label:file-item-edit-button"\n        class="uc-edit-btn uc-mini-btn"\n        set="onclick: onEdit; @hidden: !isEditable"\n      >\n        <uc-icon name="edit-file"></uc-icon>\n      </button>\n      <button\n        type="button"\n        l10n="@title:file-item-remove-button;@aria-label:file-item-remove-button"\n        class="uc-remove-btn uc-mini-btn"\n        set="onclick: onRemove;"\n      >\n        <uc-icon name="remove-file"></uc-icon>\n      </button>\n      <button type="button" class="uc-upload-btn uc-mini-btn" set="onclick: onUpload;">\n        <uc-icon name="upload"></uc-icon>\n      </button>\n    </div>\n    <uc-progress-bar\n      class="uc-progress-bar"\n      set="value: progressValue; visible: progressVisible; @hasFileName: showFileNames;"\n    >\n    </uc-progress-bar>\n  </div>\n',Bn.activeInstances=new Set;let jn=null;class Hn extends no{static styleAttrs=[...super.styleAttrs,"uc-modal"];static StateConsumerScope="modal";constructor(){super(),this.init$={...this.init$,closeClicked:this._handleDialogClose}}_handleBackdropClick=()=>{this._closeDialog()};_closeDialog=()=>{this.modalManager?.close(this.id),this.modalManager.hasActiveModals||(document.body.style.overflow="")};_handleDialogClose=()=>{this._closeDialog()};_handleDialogMouseDown=e=>{this._mouseDownTarget=e.target};_handleDialogMouseUp=e=>{e.target===this.ref.dialog&&e.target===this._mouseDownTarget&&this._closeDialog()};show(){this.ref.dialog.showModal?(this.setAttribute("aria-modal","true"),this.ref.dialog.showModal()):this.ref.dialog.setAttribute("open",""),this.cfg.modalScrollLock&&(document.body.style.overflow="hidden")}hide(){this.ref.dialog.close?(this.setAttribute("aria-modal","false"),this.ref.dialog.close()):this.ref.dialog.removeAttribute("open")}_handleModalOpen({id:e}){e===this.id?(jn=e,this.show()):this.hide(),this.emit(yr.MODAL_OPEN,{modalId:e},{debounce:!0})}_handleModalClose({id:e}){e===this.id&&this.hide(),this.emit(yr.MODAL_CLOSE,{modalId:e,hasActiveModals:this.modalManager.hasActiveModals},{debounce:!0})}_handleModalCloseAll(){this.hide(),jn===this.id&&this.emit(yr.MODAL_CLOSE,{modalId:jn,hasActiveModals:this.modalManager.hasActiveModals},{debounce:!0})}initCallback(){super.initCallback(),this.modalManager?.registerModal(this.id,this),this.ref.dialog.addEventListener("close",this._handleDialogClose),this.ref.dialog.addEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.addEventListener("mouseup",this._handleDialogMouseUp),this.subConfigValue("modalBackdropStrokes",e=>{e?this.setAttribute("strokes",""):this.removeAttribute("strokes")}),this.handleModalOpen=this._handleModalOpen.bind(this),this.handleModalClose=this._handleModalClose.bind(this),this.handleModalCloseAll=this._handleModalCloseAll.bind(this),this.modalManager.subscribe(io.OPEN,this.handleModalOpen),this.modalManager.subscribe(io.CLOSE,this.handleModalClose),this.modalManager.subscribe(io.CLOSE_ALL,this.handleModalCloseAll)}destroyCallback(){super.destroyCallback(),document.body.style.overflow="",this._mouseDownTarget=void 0,this.ref.dialog.removeEventListener("close",this._handleDialogClose),this.ref.dialog.removeEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.removeEventListener("mouseup",this._handleDialogMouseUp),this.modalManager.unsubscribe(io.OPEN,this.handleModalOpen),this.modalManager.unsubscribe(io.CLOSE,this.handleModalClose),this.modalManager.unsubscribe(io.CLOSE_ALL,this.handleModalCloseAll)}}Hn.template='\n  <dialog ref="dialog">\n    <slot></slot>\n  </dialog>\n';class qn extends ga{couldBeCtxOwner=!0;historyTracked=!0;activityType=uo.activities.UPLOAD_LIST;constructor(){super(),this.init$={...this.init$,doneBtnVisible:!1,doneBtnEnabled:!1,uploadBtnVisible:!1,addMoreBtnVisible:!1,addMoreBtnEnabled:!1,headerText:"",commonErrorMessage:"",hasFiles:!1,onAdd:()=>{this.api.initFlow(!0)},onUpload:()=>{this.emit(yr.UPLOAD_CLICK),this.api.uploadAll(),this._throttledHandleCollectionUpdate()},onDone:()=>{this.emit(yr.DONE_CLICK,this.api.getOutputCollectionState()),this.api.doneFlow()},onCancel:()=>{this.uploadCollection.clearAll()}}}_throttledHandleCollectionUpdate=Dn(()=>{this.isConnected&&(this._updateUploadsState(),this.couldOpenActivity||this.$["*currentActivity"]!==this.activityType||this.historyBack())},300);_updateUploadsState(){const e=this.api.getOutputCollectionState(),t={total:e.totalCount,succeed:e.successCount,uploading:e.uploadingCount,failed:e.failedCount},r=!e.errors.some(e=>"TOO_MANY_FILES"===e.type||"TOO_FEW_FILES"===e.type),i=e.errors.some(e=>"TOO_MANY_FILES"===e.type),o=e.totalCount===(this.cfg.multiple?this.cfg.multipleMax:1),a=0===t.failed&&0===e.errors.length;let n=!1,s=!1,c=!1;if(t.total-t.succeed-t.uploading-t.failed>0&&r)n=!0;else{s=!0;const i=!this.cfg.groupOutput||!!e.group;c=t.total===t.succeed&&r&&a&&i}this.set$({doneBtnVisible:s,doneBtnEnabled:c,uploadBtnVisible:n,addMoreBtnEnabled:0===t.total||!i&&!o,addMoreBtnVisible:!o||this.cfg.multiple}),this.bindL10n("headerText",()=>this._getHeaderText(t))}_getHeaderText(e){const t=t=>{const r=e[t];return this.l10n(`header-${t}`,{count:r})};return e.uploading>0?t("uploading"):e.failed>0?t("failed"):e.succeed>0?t("succeed"):t("total")}get couldOpenActivity(){return this.cfg.showEmptyList||this.uploadCollection.size>0}initCallback(){super.initCallback(),this.registerActivity(this.activityType),this.subConfigValue("multiple",this._throttledHandleCollectionUpdate),this.subConfigValue("multipleMin",this._throttledHandleCollectionUpdate),this.subConfigValue("multipleMax",this._throttledHandleCollectionUpdate),this.sub("*groupInfo",e=>{e&&this._throttledHandleCollectionUpdate()}),this.subConfigValue("filesViewMode",e=>{this.setAttribute("mode",e)}),this.sub("*currentActivity",e=>{this.couldOpenActivity||e!==this.activityType||(this.$["*currentActivity"]=this.initActivity)}),this.uploadCollection.observeProperties(this._throttledHandleCollectionUpdate),this.sub("*uploadList",e=>{this._throttledHandleCollectionUpdate(),this.set$({hasFiles:e.length>0}),this.cfg.confirmUpload||this.api.uploadAll()},!1),this.sub("*collectionErrors",e=>{const t=e.filter(e=>"SOME_FILES_HAS_ERRORS"!==e.type)[0];t?this.set$({commonErrorMessage:t.message}):this.set$({commonErrorMessage:null})})}destroyCallback(){super.destroyCallback(),this.uploadCollection.unobserveProperties(this._throttledHandleCollectionUpdate)}}qn.template='\n  <uc-activity-header>\n    <span aria-live="polite" class="uc-header-text">{{headerText}}</span>\n    <button\n      type="button"\n      class="uc-mini-btn uc-close-btn"\n      set="onclick: *closeModal"\n      l10n="@title:a11y-activity-header-button-close;@aria-label:a11y-activity-header-button-close"\n    >\n      <uc-icon name="close"></uc-icon>\n    </button>\n  </uc-activity-header>\n\n  <div class="uc-no-files" set="@hidden: hasFiles">\n    <slot name="empty"><span l10n="no-files"></span></slot>\n  </div>\n\n  <div class="uc-files">\n    <div class="uc-files-wrapper" repeat="*uploadList" repeat-item-tag="uc-file-item"></div>\n    <button\n      type="button"\n      class="uc-add-more-btn uc-secondary-btn"\n      set="onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible"\n    >\n      <uc-icon name="add"></uc-icon><span l10n="add-more"></span>\n    </button>\n  </div>\n\n  <div class="uc-common-error" set="@hidden: !commonErrorMessage; textContent: commonErrorMessage;"></div>\n\n  <div class="uc-toolbar">\n    <button type="button" class="uc-cancel-btn uc-secondary-btn" set="onclick: onCancel;" l10n="clear"></button>\n    <div class="uc-toolbar-spacer"></div>\n    <button\n      type="button"\n      class="uc-add-more-btn uc-secondary-btn"\n      set="onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible"\n    >\n      <uc-icon name="add"></uc-icon><span l10n="add-more"></span>\n    </button>\n    <button\n      type="button"\n      class="uc-upload-btn uc-primary-btn"\n      set="@hidden: !uploadBtnVisible; onclick: onUpload;"\n      l10n="upload"\n    ></button>\n    <button\n      type="button"\n      class="uc-done-btn uc-primary-btn"\n      set="@hidden: !doneBtnVisible; onclick: onDone;  @disabled: !doneBtnEnabled"\n      l10n="done"\n    ></button>\n  </div>\n\n  <uc-drop-area ghost></uc-drop-area>\n';class Kn extends ga{couldBeCtxOwner=!0;activityType=uo.activities.URL;init$={...this.init$,importDisabled:!0,onUpload:e=>{e.preventDefault();let t=this.ref.input.value;this.api.addFileFromUrl(t,{source:No.URL}),this.modalManager.open(uo.activities.UPLOAD_LIST),this.$["*currentActivity"]=uo.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()},onInput:e=>{let t=e.target.value;this.set$({importDisabled:!t})}};initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{this.ref.input.value="",this.ref.input.focus()}})}}Kn.template='\n  <uc-activity-header>\n    <button type="button" class="uc-mini-btn" set="onclick: *historyBack" l10n="@title:back;@aria-label:back">\n      <uc-icon name="back"></uc-icon>\n    </button>\n    <div>\n      <uc-icon name="url"></uc-icon>\n      <span l10n="caption-from-url"></span>\n    </div>\n    <button\n      type="button"\n      class="uc-mini-btn uc-close-btn"\n      set="onclick: *closeModal"\n      l10n="@title:a11y-activity-header-button-close;@aria-label:a11y-activity-header-button-close"\n    >\n      <uc-icon name="close"></uc-icon>\n    </button>\n  </uc-activity-header>\n  <form class="uc-content">\n    <label>\n      <input placeholder="https://" class="uc-url-input" type="text" ref="input" set="oninput: onInput" />\n    </label>\n    <button\n      type="submit"\n      class="uc-url-upload-btn uc-primary-btn"\n      set="onclick: onUpload; @disabled: importDisabled"\n      l10n="upload-url"\n    ></button>\n  </form>\n';const Gn={width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},Wn=["camera","microphone"];function Xn(e){return`${Math.floor(e/60).toString().padStart(2,"0")}:${Math.floor(e%60).toString().padStart(2,"0")}`}const Zn="image/jpeg",Yn="video/webm";class Jn extends ga{couldBeCtxOwner=!0;activityType=uo.activities.CAMERA;_unsubPermissions=null;_chunks=[];_mediaRecorder=null;_stream=null;_selectedAudioId=null;_selectedCameraId=null;constructor(){super(),this.init$={...this.init$,video:null,videoTransformCss:null,videoHidden:!0,messageHidden:!0,requestBtnHidden:void 0!==navigator.permissions,cameraSelectOptions:null,cameraSelectHidden:!0,l10nMessage:"",switcher:null,panels:null,timer:null,timerHidden:!0,cameraHidden:!0,cameraActionsHidden:!0,audioSelectOptions:null,audioSelectHidden:!0,audioSelectDisabled:!0,audioToggleMicrophoneHidden:!0,tabCameraHidden:!0,tabVideoHidden:!0,currentIcon:"camera-full",currentTimelineIcon:"play",toggleMicrophoneIcon:"microphone",_startTime:0,_elapsedTime:0,_animationFrameId:null,mutableClassButton:"uc-shot-btn uc-camera-action",onCameraSelectChange:e=>{this._selectedCameraId=e.target.value,this._capture()},onAudioSelectChange:e=>{this._selectedAudioId=e.target.value,this._capture()},onCancel:()=>{this.historyBack()},onShot:()=>this._shot(),onRequestPermissions:()=>this._capture(),onStartCamera:()=>this._chooseActionWithCamera(),onStartRecording:()=>this._startRecording(),onStopRecording:()=>this._stopRecording(),onToggleRecording:()=>this._toggleRecording(),onToggleAudio:()=>this._toggleEnableAudio(),onRetake:()=>this._retake(),onAccept:()=>this._accept(),onClickTab:e=>{const t=e.currentTarget.getAttribute("data-id");t&&this._handleActiveTab(t)}}}_chooseActionWithCamera=()=>{if(this._activeTab===Ro.PHOTO&&this._shot(),this._activeTab===Ro.VIDEO){if("recording"===this._mediaRecorder?.state)return void this._stopRecording();this._startRecording()}};_updateTimer=()=>{const e=Math.floor((performance.now()-this.$._startTime+this.$._elapsedTime)/1e3);if("number"==typeof this.cfg.maxVideoRecordingDuration&&this.cfg.maxVideoRecordingDuration>0){const t=this.cfg.maxVideoRecordingDuration-e;if(t<=0)return this.ref.timer.textContent=Xn(t),void this._stopRecording();this.ref.timer.textContent=Xn(t)}else this.ref.timer.textContent=Xn(e);this._animationFrameId=requestAnimationFrame(this._updateTimer)};_startTimer=()=>{this.$._startTime=performance.now(),this.$._elapsedTime=0,this._updateTimer()};_stopTimer=()=>{this._animationFrameId&&cancelAnimationFrame(this._animationFrameId)};_startTimeline=()=>{const e=this.ref.video.currentTime,t=this.ref.video.duration;this.ref.line.style.transform=`scaleX(${e/t})`,this.ref.timer.textContent=Xn(e),this._animationFrameId=requestAnimationFrame(this._startTimeline)};_stopTimeline=()=>{this._animationFrameId&&cancelAnimationFrame(this._animationFrameId)};_startRecording=()=>{try{this._chunks=[],this._options={...this.cfg.mediaRecorderOptions};const{mimeType:e}=this.cfg.mediaRecorderOptions||{};e&&MediaRecorder.isTypeSupported(e)?this._options.mimeType=e:MediaRecorder.isTypeSupported(Yn)?this._options.mimeType=Yn:this._options.mimeType="video/mp4",this._stream&&(this._mediaRecorder=new MediaRecorder(this._stream,this._options),this._mediaRecorder.start(),this._mediaRecorder.addEventListener("dataavailable",e=>{this._chunks.push(e.data)}),this._startTimer(),this.classList.add("uc-recording"),this._setCameraState(Uo.PLAY))}catch(e){console.error("Failed to start recording",e)}};_stopRecording=()=>{this._mediaRecorder?.addEventListener("stop",()=>{this._previewVideo(),this._stopTimer(),this._setCameraState(Uo.STOP)}),this._mediaRecorder?.stop(),this.classList.remove("uc-recording")};_toggleRecording=()=>{"recording"!==this._mediaRecorder?.state&&(!this.ref.video.paused&&!this.ref.video.ended&&this.ref.video.readyState>2?this.ref.video.pause():this.ref.video.paused&&this.ref.video.play())};_toggleEnableAudio=()=>{this._stream?.getAudioTracks().forEach(e=>{e.enabled=!e.enabled,this.$.toggleMicrophoneIcon=e.enabled?"microphone":"microphone-mute",this.$.audioSelectDisabled=!e.enabled})};_previewVideo=()=>{try{const e=new Blob(this._chunks,{type:this._mediaRecorder?.mimeType}),t=URL.createObjectURL(e);this.ref.video.muted=!1,this.ref.video.volume=1,this.$.video=null,this.ref.video.src=t,this.ref.video.addEventListener("play",()=>{this._startTimeline(),this.set$({currentTimelineIcon:"pause"})}),this.ref.video.addEventListener("pause",()=>{this.set$({currentTimelineIcon:"play"}),this._stopTimeline()})}catch(e){console.error("Failed to preview video",e)}};_retake=()=>{this._setCameraState(Uo.RETAKE),this._activeTab===Ro.VIDEO&&(this.$.video=this._stream,this.ref.video.muted=!0),this.ref.video.play()};_accept=()=>{if(this._setCameraState(Uo.ACCEPT),this._activeTab===Ro.PHOTO)return void this._canvas?.toBlob(e=>{const t=this._createFile("camera","jpeg",Zn,e);this._toSend(t)},Zn);const e=new Blob(this._chunks,{type:this._mediaRecorder?.mimeType}),t=this._guessExtensionByMime(this._mediaRecorder?.mimeType),r=this._createFile("video",t,`video/${t}`,e);this._toSend(r),this._chunks=[]};_handlePhoto=e=>{e===Uo.SHOT&&this.set$({tabVideoHidden:!0,cameraHidden:!0,tabCameraHidden:!0,cameraActionsHidden:!1,cameraSelectHidden:!0}),e!==Uo.RETAKE&&e!==Uo.ACCEPT||this.set$({tabVideoHidden:!this._cameraModes.includes(Ro.VIDEO),tabCameraHidden:!this._cameraModes.includes(Ro.PHOTO),cameraHidden:!1,cameraActionsHidden:!0,cameraSelectHidden:this._cameraDevices.length<=1})};_handleVideo=e=>{e===Uo.PLAY&&this.set$({timerHidden:!1,tabCameraHidden:!0,cameraSelectHidden:!0,audioSelectHidden:!0,currentTimelineIcon:"pause",currentIcon:"square",mutableClassButton:"uc-shot-btn uc-camera-action uc-stop-record"}),e===Uo.STOP&&this.set$({timerHidden:!1,cameraHidden:!0,audioToggleMicrophoneHidden:!0,cameraActionsHidden:!1}),e!==Uo.RETAKE&&e!==Uo.ACCEPT||this.set$({timerHidden:!0,tabVideoHidden:!this._cameraModes.includes(Ro.VIDEO),tabCameraHidden:!this._cameraModes.includes(Ro.PHOTO),cameraHidden:!1,cameraActionsHidden:!0,audioToggleMicrophoneHidden:!this.cfg.enableAudioRecording,currentIcon:"video-camera-full",mutableClassButton:"uc-shot-btn uc-camera-action",audioSelectHidden:!this.cfg.enableAudioRecording||this._audioDevices.length<=1,cameraSelectHidden:this._cameraDevices.length<=1})};_setCameraState=e=>{this._activeTab!==Ro.PHOTO||"shot"!==e&&"retake"!==e&&"accept"!==e||this._handlePhoto(e),this._activeTab!==Ro.VIDEO||"play"!==e&&"stop"!==e&&"retake"!==e&&"accept"!==e&&"pause"!==e&&"resume"!==e||this._handleVideo(e)};_shot(){if(this._setCameraState("shot"),this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d"),!this._ctx)throw new Error("Failed to get canvas context");this._canvas.height=this.ref.video.videoHeight,this._canvas.width=this.ref.video.videoWidth,this.cfg.cameraMirror&&(this._ctx.translate(this._canvas.width,0),this._ctx.scale(-1,1)),this._ctx.drawImage(this.ref.video,0,0),this.ref.video.pause()}_handleActiveTab=e=>{this.ref.switcher.querySelectorAll("button").forEach(t=>{t.classList.toggle("uc-active",t.getAttribute("data-id")===e)}),e===Ro.PHOTO&&this.set$({currentIcon:"camera-full",audioSelectHidden:!0,audioToggleMicrophoneHidden:!0}),e===Ro.VIDEO&&this.set$({currentTimelineIcon:"play",currentIcon:"video-camera-full",audioSelectHidden:!this.cfg.enableAudioRecording||this._audioDevices.length<=1,audioToggleMicrophoneHidden:!this.cfg.enableAudioRecording}),this._activeTab=e};_createFile=(e,t,r,i)=>{const o=Date.now();return new File([i],`${e}-${o}.${t}`,{lastModified:o,type:r})};_guessExtensionByMime(e){const t={mp4:"mp4",ogg:"ogg",webm:"webm",quicktime:"mov","x-matroska":"mkv"};if(""===e)return"webm";if(e&&(e=e.split("/"),"video"===e?.[0])){e=e.slice(1).join("/");const r=e?.split(";")[0];if(t[r])return t[r]}return"avi"}_toSend=e=>{this.api.addFileFromObject(e,{source:No.CAMERA}),this.set$({"*currentActivity":uo.activities.UPLOAD_LIST}),this.modalManager.open(uo.activities.UPLOAD_LIST)};get _cameraModes(){return tr(this.cfg.cameraModes)}_setPermissionsState=_r(e=>{this.classList.toggle("uc-initialized","granted"===e);const t=this._activeTab===Ro.VIDEO&&this.cfg.enableAudioRecording,r=this._activeTab===Ro.PHOTO?"camera-full":"video-camera-full";"granted"===e?this.set$({videoHidden:!1,cameraHidden:!1,tabCameraHidden:!this._cameraModes.includes(Ro.PHOTO),tabVideoHidden:!this._cameraModes.includes(Ro.VIDEO),messageHidden:!0,timerHidden:!0,currentIcon:r,audioToggleMicrophoneHidden:!t,audioSelectHidden:!t}):"prompt"===e?(this.$.l10nMessage="camera-permissions-prompt",this.set$({videoHidden:!0,cameraHidden:!0,tabCameraHidden:!0,messageHidden:!1}),this._stopCapture()):(this.$.l10nMessage="camera-permissions-denied",this.set$({videoHidden:!0,messageHidden:!1,tabCameraHidden:!this._cameraModes.includes(Ro.PHOTO),tabVideoHidden:!this._cameraModes.includes(Ro.VIDEO),cameraActionsHidden:!0,mutableClassButton:"uc-shot-btn uc-camera-action"}),this._stopCapture())},300);_makeStreamInactive=()=>{if(!this._stream)return!1;const e=this._stream?.getAudioTracks(),t=this._stream?.getVideoTracks();e.forEach(e=>e.stop()),t.forEach(e=>e.stop())};_stopCapture=()=>{this._capturing&&(this.ref.video.volume=0,this.$.video?.getTracks()[0].stop(),this.$.video=null,this._makeStreamInactive(),this._stopTimer(),this._capturing=!1)};_capture=async()=>{const e={video:Gn,audio:!!this.cfg.enableAudioRecording&&{}};this._selectedCameraId&&(e.video={deviceId:{exact:this._selectedCameraId}}),this._selectedAudioId&&this.cfg.enableAudioRecording&&(e.audio={deviceId:{exact:this._selectedAudioId}}),this.ref.video.volume=0;try{this._setPermissionsState("prompt"),this._stream=await navigator.mediaDevices.getUserMedia(e),this._stream.addEventListener("inactive",()=>{this._setPermissionsState("denied")}),this.$.video=this._stream,this._capturing=!0,this._setPermissionsState("granted")}catch(e){this._setPermissionsState("denied"),console.log("Failed to capture camera",e)}};_handlePermissionsChange=()=>{this._capture()};_permissionAccess=async()=>{try{for(const e of Wn)this[`${e}Response`]=await navigator.permissions.query({name:e}),this[`${e}Response`].addEventListener("change",this._handlePermissionsChange)}catch(e){console.log("Failed to use permissions API. Fallback to manual request mode.",e),this._capture()}};_getPermission=()=>{};_requestDeviceAccess=async()=>{try{await navigator.mediaDevices.getUserMedia({video:!0,audio:this.cfg.enableAudioRecording}),await this._getDevices(),navigator.mediaDevices.addEventListener("devicechange",this._getDevices)}catch(e){console.log("Failed to get user media",e)}};_getDevices=async()=>{try{const e=await navigator.mediaDevices.enumerateDevices();this._cameraDevices=e.filter(e=>"videoinput"===e.kind).map((e,t)=>({text:e.label.trim()||`${this.l10n("caption-camera")} ${t+1}`,value:e.deviceId})),this._audioDevices=this.cfg.enableAudioRecording&&e.filter(e=>"audioinput"===e.kind).map(e=>({text:e.label.trim(),value:e.deviceId})),this._cameraDevices.length>1&&this.set$({cameraSelectOptions:this._cameraDevices,cameraSelectHidden:!1}),this._selectedCameraId=this._cameraDevices[0]?.value,this._audioDevices.length>1&&this.set$({audioSelectOptions:this._audioDevices,audioSelectHidden:!1}),this._selectedAudioId=this._audioDevices[0]?.value}catch(e){console.log("Failed to get devices",e)}};_onActivate=async()=>{await this._permissionAccess(),await this._requestDeviceAccess(),await this._capture(),this._handleCameraModes(this._cameraModes)};_onDeactivate=async()=>{this._unsubPermissions&&this._unsubPermissions();!!window.chrome||this._setPermissionsState("denied"),this._stopCapture()};_handleCameraModes=e=>{this.$.tabVideoHidden=!e.includes(Ro.VIDEO),this.$.tabCameraHidden=!e.includes(Ro.PHOTO);const t=e[0];this._activeTab&&e.includes(this._activeTab)||this._handleActiveTab(t)};initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:this._onActivate,onDeactivate:this._onDeactivate}),this.subConfigValue("cameraMirror",e=>{this.$.videoTransformCss=e?"scaleX(-1)":null}),this.subConfigValue("enableAudioRecording",e=>{this.$.audioToggleMicrophoneHidden=!e,this.$.audioSelectDisabled=!e}),this.subConfigValue("cameraModes",e=>{if(!this.isActivityActive)return;const t=mr(e);this._handleCameraModes(t)})}_destroy(){for(const e of Wn)this[`${e}Response`]?.removeEventListener("change",this._handlePermissionsChange);navigator.mediaDevices?.removeEventListener("devicechange",this._getDevices)}async destroyCallback(){super.destroyCallback(),this._destroy()}}Jn.template='\n  <uc-activity-header>\n    <button type="button" class="uc-mini-btn" set="onclick: *historyBack" l10n="@title:back">\n      <uc-icon name="back"></uc-icon>\n    </button>\n    <div set="@hidden: !cameraSelectHidden">\n      <uc-icon name="camera"></uc-icon>\n      <span l10n="caption-camera"></span>\n    </div>\n    <uc-select\n      class="uc-camera-select"\n      set="$.options: cameraSelectOptions; @hidden: cameraSelectHidden; onchange: onCameraSelectChange"\n    >\n    </uc-select>\n    <button\n      type="button"\n      class="uc-mini-btn uc-close-btn"\n      set="onclick: *closeModal"\n      l10n="@title:a11y-activity-header-button-close;@aria-label:a11y-activity-header-button-close"\n    >\n      <uc-icon name="close"></uc-icon>\n    </button>\n  </uc-activity-header>\n  <div class="uc-content">\n    <video\n      muted\n      autoplay\n      playsinline\n      set="srcObject: video; style.transform: videoTransformCss; @hidden: videoHidden"\n      ref="video"\n    ></video>\n    <div class="uc-message-box" set="@hidden: messageHidden">\n      <span l10n="l10nMessage"></span>\n      <button\n        type="button"\n        set="onclick: onRequestPermissions; @hidden: requestBtnHidden"\n        l10n="camera-permissions-request"\n      ></button>\n    </div>\n  </div>\n\n  <div class="uc-controls">\n    <div ref="switcher" class="uc-switcher" set="@hidden:!timerHidden">\n      <button\n        data-id="photo"\n        type="button"\n        class="uc-switch uc-mini-btn"\n        set="onclick: onClickTab;  @hidden: tabCameraHidden"\n      >\n        <uc-icon name="camera"></uc-icon>\n      </button>\n      <button\n        data-id="video"\n        type="button"\n        class="uc-switch uc-mini-btn"\n        set="onclick: onClickTab; @hidden: tabVideoHidden"\n      >\n        <uc-icon name="video-camera"></uc-icon>\n      </button>\n    </div>\n\n    <button class="uc-secondary-btn uc-recording-timer" set="@hidden:timerHidden; onclick: onToggleRecording">\n      <uc-icon set="@name: currentTimelineIcon"></uc-icon>\n      <span ref="timer"> 00:00 </span>\n      <span ref="line" class="uc-line"></span>\n    </button>\n\n    <div class="uc-camera-actions uc-camera-action" set="@hidden: cameraActionsHidden">\n      <button type="button" class="uc-secondary-btn" set="onclick: onRetake">Retake</button>\n      <button type="button" class="uc-primary-btn" set="onclick: onAccept" data-testid="accept">Accept</button>\n    </div>\n\n    <button\n      type="button"\n      class="uc-shot-btn uc-camera-action"\n      data-testid="shot"\n      set="onclick: onStartCamera; @class: mutableClassButton; @hidden: cameraHidden;"\n    >\n      <uc-icon set="@name: currentIcon"></uc-icon>\n    </button>\n\n    <div class="uc-select">\n      <button class="uc-mini-btn uc-btn-microphone" set="onclick: onToggleAudio; @hidden: audioToggleMicrophoneHidden;">\n        <uc-icon set="@name:toggleMicrophoneIcon"></uc-icon>\n      </button>\n\n      <uc-select\n        class="uc-audio-select"\n        set="$.options: audioSelectOptions; onchange: onAudioSelectChange; @hidden: audioSelectHidden; @disabled: audioSelectDisabled"\n      >\n      </uc-select>\n    </div>\n  </div>\n';class Qn extends ga{static styleAttrs=["uc-wgt-common"];requireCtxName=!0;initCallback(){super.initCallback(),this.$["*eventEmitter"].bindTarget(this)}destroyCallback(){super.destroyCallback(),this.$["*eventEmitter"].unbindTarget(this)}}Qn.EventType=yr;const es=Qn;class ts extends ga{init$={...this.init$,visible:!1,value:0,"*commonProgress":0};initCallback(){super.initCallback(),this._unobserveCollection=this.uploadCollection.observeProperties(()=>{let e=this.uploadCollection.items().some(e=>this.uploadCollection.read(e).getValue("isUploading"));this.$.visible=e}),this.sub("visible",e=>{e?this.setAttribute("active",""):this.removeAttribute("active")}),this.sub("*commonProgress",e=>{this.$.value=e})}destroyCallback(){super.destroyCallback(),this._unobserveCollection?.()}}ts.template=' <uc-progress-bar set="visible: visible; value: value"></uc-progress-bar> ';class rs extends no{_value=0;_prevValue=0;_visible=!0;constructor(){super(),this.init$={...this.init$,width:0,opacity:0}}initCallback(){super.initCallback();this.ref.fakeProgressLine.addEventListener("animationiteration",()=>{const e=this.ref.fakeProgressLine;this._visible?this._value>0&&e.classList.add("uc-fake-progress--hidden"):e.classList.add("uc-fake-progress--hidden")}),this.defineAccessor("value",e=>{null!=e&&(this._prevValue=this._value,this._value=e,this._visible&&this.style.setProperty("--l-progress-value",this._value.toString()))}),this.defineAccessor("visible",e=>{this._visible=e,this.classList.toggle("uc-progress-bar--hidden",!e)})}}rs.template='\n  <div ref="fakeProgressLine" class="uc-fake-progress"></div>\n  <div ref="realProgressLine" class="uc-progress"></div>\n';const is="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";function os(...e){return e.reduce((e,t)=>{if("string"==typeof t)return e[t]=!0,e;for(let r of Object.keys(t))e[r]=t[r];return e},{})}function as(...e){let t=os(...e);return Object.keys(t).reduce((e,r)=>(t[r]&&e.push(r),e),[]).join(" ")}const ns=`\n  <svg width='0' height='0' style='position:absolute'><symbol viewBox='0 0 20 20' id='uc-icon-brightness' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M15 10a5 5 0 0 1-5 5m5-5a5 5 0 0 0-5-5m5 5h-5m0 5a5 5 0 0 1 0-10m0 10V5m0 15v-3M2.93 2.929 5.05 5.05M0 10h3m-.07 7.071 2.12-2.121M10 0v3m7.07 14.071-2.12-2.121M20 10h-3m.07-7.071L14.95 5.05m-.626 2.45H10m4.324 5H10'/></symbol><symbol fill='currentColor' viewBox='0 0 20 20' id='uc-icon-closeMax' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' d='M8.232 10 3.585 5.353l1.768-1.768L10 8.232l4.648-4.647 1.767 1.768L11.768 10l4.647 4.648-1.767 1.767L10 11.768l-4.647 4.647-1.768-1.767L8.232 10Z' clip-rule='evenodd'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-contrast' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M2 10a8 8 0 1 0 16 0 8 8 0 1 0-16 0m8-8v16m8-8h-8m7.598 2.5H10m6.24 2.5H10m7.6-7.5H10M16.242 5H10'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-crop' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M20 14H7.005C6.45 14 6 13.55 6 12.995V0M0 6h13.067c.515 0 .933.418.933.933V20M14.5.4 13 2l1.5 1.6M13 2h2a3 3 0 0 1 3 3v2M5.5 19.6 7 18l-1.5-1.6M7 18H5a3 3 0 0 1-3-3v-2'/></symbol><symbol fill='currentColor' viewBox='0 0 20 20' id='uc-icon-done' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' d='m18.057 6.333-9.365 9.125a1.25 1.25 0 0 1-1.768-.023L1.92 10.296l1.791-1.744 4.132 4.243 8.47-8.253 1.744 1.79Z' clip-rule='evenodd'/></symbol><symbol fill='currentColor' viewBox='0 0 25 24' id='uc-icon-edit-file' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' d='M18.558 2.804a.78.78 0 0 0-.557.235l-.008.007-2.472 2.46 3.847 3.848 2.46-2.473.004-.003a.78.78 0 0 0 0-1.108l-.004-.003-2.712-2.728a.78.78 0 0 0-.558-.235Zm-.248 7.613-3.852-3.852-8.93 8.887-1.516 5.41 5.41-1.515 8.888-8.93Zm-.636-8.934a2.28 2.28 0 0 1 2.512.505l2.702 2.717.002.002a2.278 2.278 0 0 1 0 3.234l-.002.002-12.541 12.602a.75.75 0 0 1-.33.193l-6.884 1.928a.75.75 0 0 1-.925-.924l1.928-6.885a.75.75 0 0 1 .193-.33l12.603-12.54a2.28 2.28 0 0 1 .742-.504Z' clip-rule='evenodd'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-enhance' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M19 13h-2m0 0a4 4 0 0 1-4-4m4 4a4 4 0 0 0-4 4m0-8V7m0 2a4 4 0 0 1-4 4m-2 0h2m0 0a4 4 0 0 1 4 4m0 0v2M8 8.5H6.5m0 0a2 2 0 0 1-2-2m2 2a2 2 0 0 0-2 2m0-4V5m0 1.5a2 2 0 0 1-2 2M1 8.5h1.5m0 0a2 2 0 0 1 2 2m0 0V12M12 3h-1m0 0a1 1 0 0 1-1-1m1 1a1 1 0 0 0-1 1m0-2V1m0 1a1 1 0 0 1-1 1M8 3h1m0 0a1 1 0 0 1 1 1m0 0v1'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-exposure' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M10 20v-3M2.93 2.929 5.05 5.05M0 10h3m-.07 7.071 2.12-2.121M10 0v3m7.07 14.071-2.12-2.121M20 10h-3m.07-7.071L14.95 5.05M5 10a5 5 0 1 0 10 0 5 5 0 1 0-10 0'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-filters' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M4.5 6.5a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0m-3.5 6a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0m7 0a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-flip' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M19.6 5 18 3.5 16.4 5m3.2 10L18 16.5 16.4 15M18 3.523v12.954M3.3 8.5h10.654c.301 0 .415-.395.159-.554L3.459 1.286A.3.3 0 0 0 3 1.542V8.2a.3.3 0 0 0 .3.3zm0 3h10.654c.301 0 .415.395.159.554l-10.654 6.66A.3.3 0 0 1 3 18.458v-6.66a.3.3 0 0 1 .3-.3z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-gamma' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M17 3C9 6 2.5 11.5 2.5 17.5m0 0h1m-1 0v-1m14 1h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3-14v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-mirror' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M5 .4 3.5 2 5 3.6M15 .4 16.5 2 15 3.6M3.52 2h12.957M8.5 16.7V6.046c0-.301-.394-.415-.554-.159L1.287 16.541a.3.3 0 0 0 .255.459H8.2a.3.3 0 0 0 .3-.3zm3 0V6.046c0-.301.395-.415.555-.159l6.659 10.654a.3.3 0 0 1-.255.459H11.8a.3.3 0 0 1-.3-.3z'/></symbol><symbol viewBox='0 0 40 40' id='uc-icon-original' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.5' d='M0 40 40 0'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-rotate' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M13.5.4 12 2l1.5 1.6M12.023 2H14.4A3.6 3.6 0 0 1 18 5.6V8M4 17h9a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-sad' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M2 17c4.418-4 11.582-4 16 0M16.5 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-11 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-saturation' xmlns='http://www.w3.org/2000/svg'><defs><linearGradient id='puc-icon-id__a' x1='10.001' y1='1' x2='10.001' y2='19' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient></defs><circle cx='10.001' cy='10' r='9' transform='rotate(90 10 10)' fill='url(#puc-icon-id__a)'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-slider' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M0 10h11m0 0a2 2 0 1 0 4 0m-4 0a2 2 0 1 1 4 0m0 0h5'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-tuning' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M8 10h11M1 10h4M1 4.5h11m3 0h4m-18 11h11m3 0h4m-7-11a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m7 5.5a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-vibrance' xmlns='http://www.w3.org/2000/svg'><path d='M2.125 5.64A8.96 8.96 0 0 0 1.001 10a8.96 8.96 0 0 0 1.124 4.36V5.64z' fill='url(#suc-icon-id__a)'/><path d='M2.875 15.499V4.502a9.053 9.053 0 0 1 1.75-1.72v14.437a9.05 9.05 0 0 1-1.75-1.72z' fill='url(#suc-icon-id__b)'/><path d='M5.375 17.722c.548.33 1.134.601 1.75.809V1.469a8.956 8.956 0 0 0-1.75.81v15.443z' fill='url(#suc-icon-id__c)'/><path d='M7.875 1.253v17.495c.564.136 1.15.22 1.75.244V1.008a9 9 0 0 0-1.75.245z' fill='url(#suc-icon-id__d)'/><path d='M10.375 1.008v17.984a9 9 0 0 0 1.75-.244V1.252a9 9 0 0 0-1.75-.244z' fill='url(#suc-icon-id__e)'/><path d='M12.875 1.469V18.53a8.957 8.957 0 0 0 1.75-.808V2.277a8.957 8.957 0 0 0-1.75-.808z' fill='url(#suc-icon-id__f)'/><path d='M15.375 2.78v14.44a9.053 9.053 0 0 0 1.75-1.72v-11a9.054 9.054 0 0 0-1.75-1.72z' fill='url(#suc-icon-id__g)'/><path d='M17.875 5.638v8.724A8.959 8.959 0 0 0 19.001 10a8.96 8.96 0 0 0-1.126-4.362z' fill='url(#suc-icon-id__h)'/><defs><linearGradient id='suc-icon-id__a' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__b' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__c' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__d' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__e' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__f' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__g' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='suc-icon-id__h' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient></defs></symbol><symbol viewBox='0 0 20 20' id='uc-icon-warmth' xmlns='http://www.w3.org/2000/svg'><path d='m7.5 13.05.429.42.171-.175v-.244h-.6zm5 0h-.6v.245l.172.175.428-.42zM8.1 3.5c0-1.05.85-1.9 1.9-1.9V.4a3.1 3.1 0 0 0-3.1 3.1h1.2zm0 9.55V3.5H6.9v9.55h1.2zm-1 2.45c0-.79.315-1.506.829-2.03l-.858-.84A4.088 4.088 0 0 0 5.9 15.5h1.2zm2.9 2.9a2.9 2.9 0 0 1-2.9-2.9H5.9a4.1 4.1 0 0 0 4.1 4.1v-1.2zm2.9-2.9a2.9 2.9 0 0 1-2.9 2.9v1.2a4.1 4.1 0 0 0 4.1-4.1h-1.2zm-.829-2.03c.514.524.829 1.24.829 2.03h1.2c0-1.117-.447-2.13-1.171-2.87l-.858.84zM11.9 3.5v9.55h1.2V3.5h-1.2zM10 1.6c1.05 0 1.9.85 1.9 1.9h1.2A3.1 3.1 0 0 0 10 .4v1.2z' fill='currentColor'/><path d='M10 14V8' stroke='currentColor' stroke-width='1.2' stroke-linecap='round'/><path d='M14 3h3m-3 3h3m-3 3h3m-8 6.5a1 1 0 1 0 2 0 1 1 0 1 0-2 0' stroke='currentColor' stroke-width='1.2'/></symbol></svg>\n  <div class="uc-wrapper uc-wrapper_desktop">\n    <uc-presence-toggle class="uc-network_problems_splash" set="visible: presence.networkProblems;">\n      <div class="uc-network_problems_content">\n        <div class="uc-network_problems_icon">\n          <uc-icon name="sad"></uc-icon>\n        </div>\n        <div class="uc-network_problems_text">Network error</div>\n      </div>\n      <div class="uc-network_problems_footer">\n        <uc-btn-ui theme="primary" text="Retry" set="onclick: *on.retryNetwork"></uc-btn-ui>\n      </div>\n    </uc-presence-toggle>\n    <div class="uc-viewport">\n      <div class="uc-file_type_outer">\n        <div class="uc-file_type">{{fileType}}</div>\n      </div>\n      <div class="uc-image_container" ref="img-container-el">\n        <img src="${is}" class="uc-image uc-image_visible_from_editor" ref="img-el" />\n        <uc-editor-image-cropper ref="cropper-el"></uc-editor-image-cropper>\n        <uc-editor-image-fader ref="fader-el"></uc-editor-image-fader>\n      </div>\n      <div class="uc-info_pan">{{msg}}</div>\n    </div>\n    <div class="uc-toolbar">\n      <uc-line-loader-ui set="active: showLoader"></uc-line-loader-ui>\n      <div class="uc-toolbar_content uc-toolbar_content__editor">\n        <uc-editor-toolbar></uc-editor-toolbar>\n      </div>\n    </div>\n  </div>\n`;class ss extends no{ctxOwner=!0;static styleAttrs=["uc-cloud-image-editor"];constructor(){var e;super(),this.init$={...this.init$,...(e=this,{"*originalUrl":null,"*faderEl":null,"*cropperEl":null,"*imgEl":null,"*imgContainerEl":null,"*networkProblems":!1,"*imageSize":null,"*editorTransformations":{},"*cropPresetList":[],"*tabList":ur,"*tabId":lr.CROP,entry:null,extension:null,editorMode:!1,modalCaption:"",isImage:!1,msg:"",src:is,fileType:"",showLoader:!1,uuid:null,cdnUrl:null,cropPreset:"",tabs:br(ur),"presence.networkProblems":!1,"presence.modalCaption":!0,"presence.editorToolbar":!1,"presence.viewerToolbar":!0,"*on.retryNetwork":()=>{let t=e.querySelectorAll("img");for(let e of t){let t=e.src;e.src=is,e.src=t}e.$["*networkProblems"]=!1},"*on.apply":t=>{if(!t)return;let r=e.$["*originalUrl"],i=Kt(or(t),"preview"),o={originalUrl:r,cdnUrlModifiers:i,cdnUrl:Qt(r,i),transformations:t};e.dispatchEvent(new CustomEvent("apply",{detail:o,bubbles:!0,composed:!0})),e.remove()},"*on.cancel":()=>{e.remove(),e.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0}))}})}}_debouncedShowLoader=_r(this._showLoader.bind(this),300);_showLoader(e){this.$.showLoader=e}_waitForSize(){return new Promise((e,t)=>{const r=setTimeout(()=>{t(new Error("[cloud-image-editor] timeout waiting for non-zero container size"))},3e3),i=new ResizeObserver(([t])=>{t.contentRect.width>0&&t.contentRect.height>0&&(e(),clearTimeout(r),i.disconnect())});i.observe(this)})}initCallback(){super.initCallback(),this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}async updateImage(){if(this.isConnected){if(await this._waitForSize(),this.$.cdnUrl){const e=Wt(this.$.cdnUrl),t=er(this.$.cdnUrl,e);if(t===this.$["*originalUrl"])return;this.$["*originalUrl"]=t;const r=function(e){const t={};for(const r of e){const[e,...i]=r.split("/");if(!ir.includes(e))continue;const o=e,a=cr[o];try{const e=a(i);t[o]=e}catch(e){console.warn([`Failed to parse URL operation "${r}". It will be ignored.`,e instanceof Error?`Error message: "${e.message}"`:e,"If you need this functionality, please feel free to open an issue at https://github.com/uploadcare/blocks/issues/new"].join("\n"))}}return t}(Xt(this.$.cdnUrl).split("/-/").filter(Boolean).map(e=>Ht(e)));this.$["*editorTransformations"]=r}else{if(!this.$.uuid)throw new Error("No UUID nor CDN URL provided");{const e=er(this.cfg.cdnCname,this.$.uuid);if(e===this.$["*originalUrl"])return;this.$["*originalUrl"]=e,this.$["*editorTransformations"]={}}}this.$["*tabId"]===lr.CROP?this.$["*cropperEl"].deactivate({reset:!0}):this.$["*faderEl"].deactivate();try{const e=await this.proxyUrl(Qt(this.$["*originalUrl"],Kt("json"))),t=await fetch(e).then(e=>e.json()),{width:r,height:i}=t;this.$["*imageSize"]={width:r,height:i},this.$["*tabId"]===lr.CROP?this.$["*cropperEl"].activate(this.$["*imageSize"]):this.$["*faderEl"].activate({url:this.$["*originalUrl"]})}catch(e){e&&console.error("Failed to load image info",e)}}}async initEditor(){try{await this._waitForSize()}catch(e){return void(this.isConnected&&console.error(e.message))}this.ref["img-el"].addEventListener("load",()=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$.src!==is&&(this.$["*networkProblems"]=!1)}),this.ref["img-el"].addEventListener("error",()=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$["*networkProblems"]=!0}),this.sub("src",e=>{let t=this.ref["img-el"];t.src!==e&&(this._imgLoading=!0,t.src=e||is)}),this.sub("cropPreset",e=>{this.$["*cropPresetList"]=Co(e)}),this.sub("tabs",e=>{this.$["*tabList"]=(e=>{if(!e)return ur;const t=mr(e).filter(e=>ur.includes(e));return 0===t.length?ur:t})(e)}),this.sub("*tabId",e=>{this.ref["img-el"].className=as("uc-image",{"uc-image_hidden_to_cropper":e===lr.CROP,"uc-image_hidden_effects":e!==lr.CROP})}),this.classList.add("uc-editor_ON"),this.sub("*networkProblems",e=>{this.$["presence.networkProblems"]=e,this.$["presence.modalCaption"]=!e}),this.sub("*editorTransformations",e=>{if(0===Object.keys(e).length)return;let t=this.$["*originalUrl"],r=Kt(or(e),"preview"),i={originalUrl:t,cdnUrlModifiers:r,cdnUrl:Qt(t,r),transformations:e};this.dispatchEvent(new CustomEvent("change",{detail:i,bubbles:!0,composed:!0}))},!1),this.sub("uuid",e=>e&&this.updateImage()),this.sub("cdnUrl",e=>e&&this.updateImage())}}ss.template=ns,ss.bindAttributes({uuid:"uuid","cdn-url":"cdnUrl","crop-preset":"cropPreset",tabs:"tabs"});class cs extends no{constructor(){super(),this.init$={...this.init$,dragging:!1},this._handlePointerUp=this._handlePointerUp_.bind(this),this._handlePointerMove=this._handlePointerMove_.bind(this),this._handleSvgPointerMove=this._handleSvgPointerMove_.bind(this)}_shouldThumbBeDisabled(e){let t=this.$["*imageBox"];if(!t)return;if(""===e&&t.height<=1&&t.width<=1)return!0;let r=t.height<=1&&(e.includes("n")||e.includes("s")),i=t.width<=1&&(e.includes("e")||e.includes("w"));return r||i}_createBackdrop(){let e=this.$["*cropBox"];if(!e)return;let{x:t,y:r,width:i,height:o}=e,a=this.ref["svg-el"],n=mo("mask",{id:"backdrop-mask"}),s=mo("rect",{x:0,y:0,width:"100%",height:"100%",fill:"white"}),c=mo("rect",{x:t,y:r,width:i,height:o,fill:"black"});n.appendChild(s),n.appendChild(c);let l=mo("rect",{x:0,y:0,width:"100%",height:"100%",fill:"var(--color-image-background)","fill-opacity":.85,mask:"url(#backdrop-mask)"});a.appendChild(l),a.appendChild(n),this._backdropMask=n,this._backdropMaskInner=c}_resizeBackdrop(){this._backdropMask&&(this._backdropMask.style.display="none",window.requestAnimationFrame(()=>{this._backdropMask&&(this._backdropMask.style.display="block")}))}_updateBackdrop(){let e=this.$["*cropBox"];if(!e)return;let{x:t,y:r,width:i,height:o}=e;this._backdropMaskInner&&go(this._backdropMaskInner,{x:t,y:r,width:i,height:o})}_updateFrame(){let e=this.$["*cropBox"];if(e&&this._frameGuides&&this._frameThumbs){for(let t of Object.values(this._frameThumbs)){let{direction:r,pathNode:i,interactionNode:o,groupNode:a}=t,n=""===r,s=2===r.length,{x:c,y:l,width:u,height:d}=e;if(n){go(o,{x:c,y:l,width:u,height:d})}else{const t=xo(Math.min(u,d)/82/2,0,1);let{d:a,center:n}=s?bo(e,r,t):fo(e,r,t);const c=Math.max(24*xo(Math.min(u,d)/24/3,0,1),6);go(o,{x:n[0]-c,y:n[1]-c,width:2*c,height:2*c}),go(i,{d:a})}let h=this._shouldThumbBeDisabled(r);a.setAttribute("class",as("uc-thumb",{"uc-thumb--hidden":h,"uc-thumb--visible":!h}))}go(this._frameGuides,{x:e.x-.5,y:e.y-.5,width:e.width+1,height:e.height+1})}}_createThumb(e,t){let r=mo("g");r.classList.add("uc-thumb"),r.setAttribute("with-effects","");let i=mo("rect",{fill:"transparent"}),o=mo("path",{stroke:"currentColor",fill:"none","stroke-width":3});r.appendChild(o),r.appendChild(i),e[t]={direction:t,pathNode:o,interactionNode:i,groupNode:r},""===t&&(r.style.cursor="move"),i.addEventListener("pointerdown",this._handlePointerDown.bind(this,t))}_createThumbs(){const e={};for(let t=0;t<3;t++)for(let r=0;r<3;r++){let i=`${["n","","s"][t]}${["w","","e"][r]}`;""!==i&&this._createThumb(e,i)}return this._createThumb(e,""),e}_createGuides(){let e=mo("svg"),t=mo("rect",{x:0,y:0,width:"100%",height:"100%",fill:"none",stroke:"currentColor","stroke-width":1,"stroke-opacity":.5});e.appendChild(t);for(let t=1;t<=2;t++){let r=mo("line",{x1:po*t+"%",y1:"0%",x2:po*t+"%",y2:"100%",stroke:"currentColor","stroke-width":1,"stroke-opacity":.3});e.appendChild(r)}for(let t=1;t<=2;t++){let r=mo("line",{x1:"0%",y1:po*t+"%",x2:"100%",y2:po*t+"%",stroke:"currentColor","stroke-width":1,"stroke-opacity":.3});e.appendChild(r)}return e.classList.add("uc-guides","uc-guides--semi-hidden"),e}_createFrame(){let e=this.ref["svg-el"],t=document.createDocumentFragment(),r=this._createGuides();t.appendChild(r);let i=this._createThumbs();for(let{groupNode:e}of Object.values(i))t.appendChild(e);e.appendChild(t),this._frameThumbs=i,this._frameGuides=r}_handlePointerDown(e,t){if(!this._frameThumbs)return;let r=this._frameThumbs[e];if(this._shouldThumbBeDisabled(e))return;let i=this.$["*cropBox"],{x:o,y:a}=this.ref["svg-el"].getBoundingClientRect(),n=t.x-o,s=t.y-a;this.$.dragging=!0,this._draggingThumb=r,this._dragStartPoint=[n,s],this._dragStartCrop={...i}}_handlePointerUp_(e){this._updateCursor(),this.$.dragging&&(e.stopPropagation(),e.preventDefault(),this.$.dragging=!1)}_handlePointerMove_(e){if(!this.$.dragging||!this._dragStartPoint||!this._draggingThumb)return;e.stopPropagation(),e.preventDefault();let t=this.ref["svg-el"],{x:r,y:i}=t.getBoundingClientRect(),o=e.x-r,a=e.y-i,n=o-this._dragStartPoint[0],s=a-this._dragStartPoint[1],{direction:c}=this._draggingThumb;const l=this._calcCropBox(c,[n,s]);l&&(this.$["*cropBox"]=l)}_calcCropBox(e,t){const[r,i]=t;let o=this.$["*imageBox"],a=this._dragStartCrop??this.$["*cropBox"];const n=this.$["*cropPresetList"]?.[0],s=n?n.width/n.height:void 0;if(a=""===e?function({rect:e,delta:[t,r],imageBox:i}){return vo({...e,x:e.x+t,y:e.y+r},i)}({rect:a,delta:[r,i],imageBox:o}):yo({rect:a,delta:[r,i],direction:e,aspectRatio:s,imageBox:o}),Object.values(a).every(e=>Number.isFinite(e)&&e>=0))return vo(ko(a),this.$["*imageBox"]);console.error("CropFrame is trying to create invalid rectangle",{payload:a})}_handleSvgPointerMove_(e){if(!this._frameThumbs)return;let t=Object.values(this._frameThumbs).find(t=>{if(this._shouldThumbBeDisabled(t.direction))return!1;let r=t.interactionNode.getBoundingClientRect(),i=function(e,[t,r]){return e.x<=t&&t<=e.x+e.width&&e.y<=r&&r<=e.y+e.height}({x:r.x,y:r.y,width:r.width,height:r.height},[e.x,e.y]);return i});this._hoverThumb=t,this._updateCursor()}_updateCursor(){let e=this._hoverThumb;var t;this.ref["svg-el"].style.cursor=e?""===(t=e.direction)?"move":["e","w"].includes(t)?"ew-resize":["n","s"].includes(t)?"ns-resize":["nw","se"].includes(t)?"nwse-resize":"nesw-resize":"initial"}_createMask(e){if(this._frameImage)return void this._frameImage.setAttribute("href",e);let t=this.ref["svg-el"],r=document.createDocumentFragment(),i=mo("image",{href:e});i.setAttribute("class","uc-cloud-mask"),r.appendChild(i),t.appendChild(r),this._frameImage=i}_updateMask(){let e=this.$["*cropBox"];if(!e||!this._frameImage)return;let{x:t,y:r,width:i,height:o}=e;go(this._frameImage,{x:t,y:r,height:o,width:i})}_render(){this._updateBackdrop(),this._updateFrame(),this._updateMask()}toggleThumbs(e){this._frameThumbs&&Object.values(this._frameThumbs).map(({groupNode:e})=>e).forEach(t=>{t.setAttribute("class",as("uc-thumb",{"uc-thumb--hidden":!e,"uc-thumb--visible":e}))})}initCallback(){super.initCallback(),this._createBackdrop(),this._createFrame(),this.sub("*imageBox",()=>{this._resizeBackdrop(),window.requestAnimationFrame(()=>{this._render()})}),this.sub("*cropBox",e=>{e&&(this._guidesHidden=e.height<=1||e.width<=1,window.requestAnimationFrame(()=>{this._render()}))}),this.subConfigValue("cloudImageEditorMaskHref",e=>{e&&this._createMask(e)}),this.sub("dragging",e=>{this._frameGuides&&this._frameGuides.setAttribute("class",as({"uc-guides--hidden":this._guidesHidden,"uc-guides--visible":!this._guidesHidden&&e,"uc-guides--semi-hidden":!this._guidesHidden&&!e}))}),this.ref["svg-el"].addEventListener("pointermove",this._handleSvgPointerMove,!0),document.addEventListener("pointermove",this._handlePointerMove,!0),document.addEventListener("pointerup",this._handlePointerUp,!0)}destroyCallback(){super.destroyCallback(),document.removeEventListener("pointermove",this._handlePointerMove),document.removeEventListener("pointerup",this._handlePointerUp)}}cs.template=' <svg class="uc-svg" ref="svg-el" xmlns="http://www.w3.org/2000/svg"></svg> ';class ls extends no{init$={...this.init$,active:!1,title:"",icon:"","on.click":null,"title-prop":""};initCallback(){super.initCallback(),this._titleEl=this.ref["title-el"],this._iconEl=this.ref["icon-el"],this.sub("title",e=>{this._titleEl&&(this._titleEl.style.display=e?"block":"none")}),this.sub("active",e=>{this.className=as({"uc-active":e,"uc-not_active":!e})}),this.sub("on.click",e=>{this.onclick=e})}}ls.template='\n  <button role="option" type="button" set="@aria-label:title-prop;" l10n="@title:title-prop;">\n    <uc-icon set="@name: icon;"></uc-icon>\n    <div class="uc-title" ref="title-el">{{title}}</div>\n  </button>\n';class us extends ls{initCallback(){super.initCallback(),this.defineAccessor("operation",e=>{e&&(this._operation=e,this.$.icon=e,this.bindL10n("title-prop",()=>this.l10n("a11y-cloud-editor-apply-crop",{name:this.l10n(e).toLowerCase()})))}),this.$["on.click"]=()=>{let e=this.$["*cropperEl"].getValue(this._operation),t=function(e,t){return"rotate"===e?function(e){let t=e+90;return t=t>=360?0:t,t}(t):["mirror","flip"].includes(e)?!t:null}(this._operation,e);this.$["*cropperEl"].setValue(this._operation,t)}}}const ds="filter",hs="color_operation",ps="original";class gs extends no{init$={...this.init$,disabled:!1,min:0,max:100,value:0,defaultValue:0,zero:0,"on.input":e=>{this.$["*faderEl"].set(e),this.$.value=e}};setOperation(e,t){this._controlType="filter"===e?ds:hs,this._operation=e,this._iconName=e,this._title=e.toUpperCase(),this._filter=t,this._initializeValues(),this.$["*faderEl"].activate({url:this.$["*originalUrl"],operation:this._operation,value:this._filter===ps?void 0:this.$.value,filter:this._filter===ps?void 0:this._filter,fromViewer:!1})}_initializeValues(){let{range:e,zero:t}=gr[this._operation],[r,i]=e;this.$.min=r,this.$.max=i,this.$.zero=t;let o=this.$["*editorTransformations"][this._operation];if(this._controlType===ds){let e=i;if(o){let{name:t,amount:r}=o;e=t===this._filter?r:i}this.$.value=e,this.$.defaultValue=e}if(this._controlType===hs){let e=void 0!==o?o:t;this.$.value=e,this.$.defaultValue=e}}apply(){let e;e=this._controlType===ds?this._filter===ps?null:{name:this._filter,amount:this.$.value}:this.$.value;let t={...this.$["*editorTransformations"],[this._operation]:e};this.$["*editorTransformations"]=t}cancel(){this.$["*faderEl"].deactivate({hide:!1})}initCallback(){super.initCallback(),this.sub("*originalUrl",e=>{this._originalUrl=e}),this.sub("value",e=>{let t=`${this._filter||this._operation} ${e}`;this.$["*operationTooltip"]=t})}}function ms(e){let t=new Image;return{promise:new Promise((r,i)=>{t.src=e,t.onload=r,t.onerror=i}),image:t,cancel:()=>{0===t.naturalWidth&&(t.src=is)}}}function bs(e){let t=[];for(let r of e){let e=ms(r);t.push(e)}let r=t.map(e=>e.image);return{promise:Promise.allSettled(t.map(e=>e.promise)),images:r,cancel:()=>{t.forEach(e=>{e.cancel()})}}}gs.template='\n  <uc-slider-ui\n    ref="slider-el"\n    set="disabled: disabled; min: min; max: max; defaultValue: defaultValue; zero: zero; onInput: on.input;"\n  ></uc-slider-ui>\n';class fs extends ls{constructor(){super(),this.init$={...this.init$,active:!1,title:"",icon:"",isOriginal:!1,iconSize:"20","on.click":null}}_previewSrc(){let e=parseInt(window.getComputedStyle(this).getPropertyValue("--l-base-min-width"),10),t=window.devicePixelRatio,r=Math.ceil(t*e),i=t>=2?"lightest":"normal",o={...this.$["*editorTransformations"]};return o[this._operation]=this._filter!==ps?{name:this._filter,amount:100}:void 0,Qt(this._originalUrl,Kt(ar,or(o),`quality/${i}`,`scale_crop/${r}x${r}/center`))}async _observerCallback(e,t){if(e[0].isIntersecting){let e=await this.proxyUrl(this._previewSrc()),r=this.ref["preview-el"],{promise:i,cancel:o}=ms(e);this._cancelPreload=o,i.catch(e=>{this.$["*networkProblems"]=!0,console.error("Failed to load image",{error:e})}).finally(()=>{r.style.backgroundImage=`url(${e})`,r.setAttribute("loaded",""),t.unobserve(this)})}else this._cancelPreload?.()}initCallback(){super.initCallback(),this.$["on.click"]=()=>{this.$.active?this.$.isOriginal||(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*showSlider"]=!0):(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*sliderEl"].apply()),this.$["*currentFilter"]=this._filter},this.defineAccessor("filter",e=>{this._operation="filter",this._filter=e,this.$.isOriginal=e===ps,this.$.icon=this.$.isOriginal?"original":"slider",this.bindL10n("title-prop",()=>this.l10n("a11y-cloud-editor-apply-filter",{name:e.toLowerCase()}))}),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:[0,1]});let e=this.$["*originalUrl"];this._originalUrl=e,this.$.isOriginal?this.ref["icon-el"].classList.add("uc-original-icon"):this._observer.observe(this),this.sub("*currentFilter",e=>{this.$.active=e&&e===this._filter}),this.sub("isOriginal",e=>{this.$.iconSize=e?40:20}),this.sub("active",e=>{if(this.$.isOriginal)return;this.ref["icon-el"].style.opacity=e?"1":"0";let t=this.ref["preview-el"];e?t.style.opacity="0":t.style.backgroundImage&&(t.style.opacity="1")}),this.sub("*networkProblems",async e=>{if(!e){let e=await this.proxyUrl(this._previewSrc()),t=this.ref["preview-el"];t.style.backgroundImage&&(t.style.backgroundImage="none",t.style.backgroundImage=`url(${e})`)}})}destroyCallback(){super.destroyCallback(),this._observer?.disconnect(),this._cancelPreload?.()}}fs.template='\n  <button type="button" role="option" l10n="@title:title-prop;@aria-label:title-prop">\n    <div class="uc-preview" ref="preview-el"></div>\n    <uc-icon ref="icon-el" set="@name: icon; @size: iconSize;"></uc-icon>\n  </button>\n';class vs extends ls{_operation="";initCallback(){super.initCallback(),this.$["on.click"]=e=>{this.$["*sliderEl"].setOperation(this._operation),this.$["*showSlider"]=!0,this.$["*currentOperation"]=this._operation},this.defineAccessor("operation",e=>{e&&(this._operation=e,this.$.icon=e,this.bindL10n("title-prop",()=>this.l10n("a11y-cloud-editor-apply-tuning",{name:this.l10n(e).toLowerCase()})),this.bindL10n("title",()=>this.l10n(e)))}),this.sub("*editorTransformations",e=>{if(!this._operation)return;let{zero:t}=gr[this._operation],r=e[this._operation],i=void 0!==r&&r!==t;this.$.active=i})}}function ys(e,t,r){let i=window.devicePixelRatio,o=Math.min(Math.ceil(t*i),3e3),a=i>=2?"lightest":"normal";return Qt(e,Kt(ar,or(r),`quality/${a}`,`stretch/off/-/resize/${o}x`,`@clib/${To}/${Ao}/uc-cloud-image-editor/`))}class ws extends no{ctxOwner=!0;constructor(){super(),this.init$={...this.init$,image:null,"*padding":20,"*operations":{rotate:0,mirror:!1,flip:!1},"*imageBox":{x:0,y:0,width:0,height:0},"*cropBox":{x:0,y:0,width:0,height:0}},this._commitDebounced=_r(this._commit.bind(this),300),this._handleResizeThrottled=Dn(this._handleResize.bind(this),100),this._imageSize={width:0,height:0}}_handleResize(){this.isConnected&&this._isActive&&(this._initCanvas(),this._syncTransformations(),this._alignImage(),this._alignCrop(),this._draw())}_syncTransformations(){let e=function(e,t){let r={};for(let i of t){let t=e[i];(e.hasOwnProperty(i)||void 0!==t)&&(r[i]=t)}return r}(this.$["*editorTransformations"],Object.keys(this.$["*operations"])),t={...this.$["*operations"],...e};this.$["*operations"]=t}_initCanvas(){let e=this.ref["canvas-el"],t=e.getContext("2d"),r=this.offsetWidth,i=this.offsetHeight,o=window.devicePixelRatio;e.style.width=`${r}px`,e.style.height=`${i}px`,e.width=r*o,e.height=i*o,t?.scale(o,o),this._canvas=e,this._ctx=t}_alignImage(){if(!this._isActive||!this.$.image)return;let e,t=this.$.image,r=this.$["*padding"],i=this.$["*operations"],{rotate:o}=i,a=this.offsetWidth,n=this.offsetHeight,s=wo({width:t.naturalWidth,height:t.naturalHeight},o);if(s.width>a-2*r||s.height>n-2*r){let t=s.width/s.height;if(t>a/n){let i=a-2*r,o=i/t;e={x:0+r,y:r+(n-2*r)/2-o/2,width:i,height:o}}else{let i=n-2*r,o=i*t;e={x:r+(a-2*r)/2-o/2,y:0+r,width:o,height:i}}}else{let{width:t,height:i}=s;e={x:r+(a-2*r)/2-t/2,y:r+(n-2*r)/2-i/2,width:t,height:i}}this.$["*imageBox"]=ko(e)}_alignCrop(){let e=this.$["*cropBox"],t=this.$["*imageBox"],r=this.$["*operations"],{rotate:i}=r,o=this.$["*editorTransformations"].crop,{width:a,x:n,y:s}=this.$["*imageBox"];if(o){let{dimensions:[t,r],coords:[c,l]}=o,{width:u}=wo(this._imageSize,i),d=a/u;e=vo(ko({x:n+c*d,y:s+l*d,width:t*d,height:r*d}),this.$["*imageBox"])}const c=this.$["*cropPresetList"]?.[0],l=c?c.width/c.height:void 0;if(p=t,!((h=e).x>=p.x&&h.y>=p.y&&h.x+h.width<=p.x+p.width&&h.y+h.height<=p.y+p.height)||l&&(u=e,d=l,!(Math.abs(u.width/u.height-d)<.1))){const r=t.width/t.height;let i=t.width,o=t.height;l&&(r>l?i=Math.min(t.height*l,t.width):o=Math.min(t.width/l,t.height)),e={x:t.x+t.width/2-i/2,y:t.y+t.height/2-o/2,width:i,height:o}}var u,d,h,p;this.$["*cropBox"]=vo(ko(e),this.$["*imageBox"])}_drawImage(){let e=this._ctx;if(!e)return;let t=this.$.image,r=this.$["*imageBox"],i=this.$["*operations"],{mirror:o,flip:a,rotate:n}=i,s=wo({width:r.width,height:r.height},n);e.save(),e.translate(r.x+r.width/2,r.y+r.height/2),e.rotate(n*Math.PI*-1/180),e.scale(o?-1:1,a?-1:1),e.drawImage(t,-s.width/2,-s.height/2,s.width,s.height),e.restore()}_draw(){if(!(this._isActive&&this.$.image&&this._canvas&&this._ctx))return;let e=this._canvas;this._ctx.clearRect(0,0,e.width,e.height),this._drawImage()}_animateIn({fromViewer:e}){this.$.image&&(this.ref["frame-el"].toggleThumbs(!0),this._transitionToImage(),setTimeout(()=>{this.className=as({"uc-active_from_viewer":e,"uc-active_from_editor":!e,"uc-inactive_to_editor":!1})}))}_getCropDimensions(){let e=this.$["*cropBox"],t=this.$["*imageBox"],r=this.$["*operations"],{rotate:i}=r,{width:o,height:a}=t,{width:n,height:s}=wo(this._imageSize,i),{width:c,height:l}=e,u=o/n,d=a/s;return[xo(Math.round(c/u),1,n),xo(Math.round(l/d),1,s)]}_getCropTransformation(){let e=this.$["*cropBox"],t=this.$["*imageBox"],r=this.$["*operations"],{rotate:i}=r,{width:o,height:a,x:n,y:s}=t,{width:c,height:l}=wo(this._imageSize,i),{x:u,y:d}=e,h=o/c,p=a/l,g=this._getCropDimensions(),m={dimensions:g,coords:[xo(Math.round((u-n)/h),0,c-g[0]),xo(Math.round((d-s)/p),0,l-g[1])]};if(function(e){if(!e)return!0;let t=[({dimensions:e,coords:t})=>[...e,...t].every(e=>Number.isInteger(e)&&Number.isFinite(e)),({dimensions:e,coords:t})=>e.every(e=>e>0)&&t.every(e=>e>=0)];return t.every(t=>t(e))}(m)){if(g[0]!==c||g[1]!==l)return m}else console.error("Cropper is trying to create invalid crop object",{payload:m})}_commit(){if(!this.isConnected||!this._imageSize)return;let e=this.$["*operations"],{rotate:t,mirror:r,flip:i}=e,o=this._getCropTransformation(),a={...this.$["*editorTransformations"],crop:o,rotate:t,mirror:r,flip:i};this.$["*editorTransformations"]=a}setValue(e,t){this.$["*operations"]={...this.$["*operations"],[e]:t},this._isActive&&(this._alignImage(),this._alignCrop(),this._draw())}getValue(e){return this.$["*operations"][e]}async activate(e,{fromViewer:t}={}){if(!this._isActive){this._isActive=!0,this._imageSize=e,this.removeEventListener("transitionend",this._reset);try{this.$.image=await this._waitForImage(this.$["*originalUrl"],this.$["*editorTransformations"]),this._syncTransformations(),this._animateIn({fromViewer:t})}catch(e){console.error("Failed to activate cropper",{error:e})}this._observer=new ResizeObserver(([e])=>{e.contentRect.width>0&&e.contentRect.height>0&&this._isActive&&this.$.image&&this._handleResizeThrottled()}),this._observer.observe(this)}}deactivate({reset:e=!1}={}){this._isActive&&(!e&&this._commit(),this._isActive=!1,this._transitionToCrop(),this.className=as({"uc-active_from_viewer":!1,"uc-active_from_editor":!1,"uc-inactive_to_editor":!0}),this.ref["frame-el"].toggleThumbs(!1),this.addEventListener("transitionend",this._reset,{once:!0}),this._observer?.disconnect())}_transitionToCrop(){let e=this._getCropDimensions(),t=Math.min(this.offsetWidth,e[0])/this.$["*cropBox"].width,r=Math.min(this.offsetHeight,e[1])/this.$["*cropBox"].height,i=Math.min(t,r),o=this.$["*cropBox"].x+this.$["*cropBox"].width/2,a=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform=`scale(${i}) translate(${(this.offsetWidth/2-o)/i}px, ${(this.offsetHeight/2-a)/i}px)`,this.style.transformOrigin=`${o}px ${a}px`}_transitionToImage(){let e=this.$["*cropBox"].x+this.$["*cropBox"].width/2,t=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform="scale(1)",this.style.transformOrigin=`${e}px ${t}px`}_reset(){this._isActive||(this.$.image=null)}async _waitForImage(e,t){let r=this.offsetWidth;t={...t,crop:void 0,rotate:void 0,flip:void 0,mirror:void 0};let i=await this.proxyUrl(ys(e,r,t)),{promise:o,cancel:a,image:n}=ms(i),s=this._handleImageLoading(i);return n.addEventListener("load",s,{once:!0}),n.addEventListener("error",s,{once:!0}),this._cancelPreload?.(),this._cancelPreload=a,o.then(()=>n).catch(e=>(console.error("Failed to load image",{error:e}),this.$["*networkProblems"]=!0,Promise.resolve(n)))}_handleImageLoading(e){let t="crop",r=this.$["*loadingOperations"];return r.get(t)||r.set(t,new Map),r.get(t).get(e)||(r.set(t,r.get(t).set(e,!0)),this.$["*loadingOperations"]=r),()=>{r?.get(t)?.has(e)&&(r.get(t).delete(e),this.$["*loadingOperations"]=r)}}initCallback(){super.initCallback(),this.sub("*imageBox",()=>{this._draw()}),this.sub("*cropBox",()=>{this.$.image&&this._commitDebounced()}),this.sub("*cropPresetList",()=>{this._alignCrop()}),setTimeout(()=>{this.sub("*networkProblems",e=>{e||this._isActive&&this.activate(this._imageSize,{fromViewer:!1})})},0)}destroyCallback(){super.destroyCallback(),this._observer?.disconnect()}}function _s(e,t,r){let i=Array(r);for(let o=--r;o>=0;o--)i[o]=Math.ceil((o*t+(r-o)*e)/r);return i}function ks(e,t){let r=gr[e].keypointsNumber,{range:i,zero:o}=gr[e];return[...new Set([..._s(i[0],o,r+1),..._s(o,i[1],r+1),o,t])].sort((e,t)=>e-t)}ws.template='\n  <canvas class="uc-canvas" ref="canvas-el"></canvas>\n  <uc-crop-frame ref="frame-el"></uc-crop-frame>\n';class xs extends no{constructor(){super(),this._isActive=!1,this._hidden=!0,this._addKeypointDebounced=_r(this._addKeypoint.bind(this),600),this.classList.add("uc-inactive_to_cropper")}_handleImageLoading(e){let t=this._operation,r=this.$["*loadingOperations"];return r.get(t)||r.set(t,new Map),r.get(t).get(e)||(r.set(t,r.get(t).set(e,!0)),this.$["*loadingOperations"]=r),()=>{r?.get(t)?.has(e)&&(r.get(t).delete(e),this.$["*loadingOperations"]=r)}}_flush(){window.cancelAnimationFrame(this._raf),this._raf=window.requestAnimationFrame(()=>{for(let e of this._keypoints){let{image:t}=e;t&&(t.style.opacity=e.opacity.toString(),t.style.zIndex=e.zIndex.toString())}})}async _imageSrc({url:e=this._url,filter:t=this._filter,operation:r,value:i}={}){let o={...this._transformations};r&&(o[r]=t?{name:t,amount:i}:i);let a=this.offsetWidth;return await this.proxyUrl(ys(e,a,o))}async _constructKeypoint(e,t){return{src:await this._imageSrc({operation:e,value:t}),image:null,opacity:0,zIndex:0,value:t}}_isSame(e,t){return this._operation===e&&this._filter===t}async _addKeypoint(e,t,r){let i=()=>!this._isSame(e,t)||this._value!==r||!!this._keypoints.find(e=>e.value===r);if(i())return;let o=await this._constructKeypoint(e,r),a=new Image;a.src=o.src;let n=this._handleImageLoading(o.src);a.addEventListener("load",n,{once:!0}),a.addEventListener("error",n,{once:!0}),o.image=a,a.classList.add("uc-fader-image"),a.addEventListener("load",()=>{if(i())return;let t=this._keypoints,n=t.findIndex(e=>e.value>r),s=n<t.length?t[n].image:null;!this._container||s&&!this._container.contains(s)||(t.splice(n,0,o),this._container.insertBefore(a,s),this._update(e,r))},{once:!0}),a.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}set(e){e="string"==typeof e?parseInt(e,10):e,this._update(this._operation,e),this._addKeypointDebounced(this._operation,this._filter,e)}_update(e,t){this._operation=e,this._value=t;let{zero:r}=gr[e],i=this._keypoints.map(e=>e.value),o=function(e,t,r){let i=(o=e,o.reduce((e,t,r)=>r<o.length-1?[...e,[t,o[r+1]]]:e,[])).find(([e,r])=>e<=t&&t<=r);var o;return e.map(e=>{let o=Math.abs(i[0]-i[1]),a=Math.abs(t-i[0])/o;return i[0]===e?t>r?1:1-a:i[1]===e?t>=r?a:1:0})}(i,t,r),a=function(e,t){return e.map((r,i)=>r<t?e.length-i:i)}(i,r);for(let[e,t]of Object.entries(this._keypoints))t.opacity=o[e],t.zIndex=a[e];this._flush()}_createPreviewImage(){let e=new Image;return e.classList.add("uc-fader-image","uc-fader-image--preview"),e.style.opacity="0",e}async _initNodes(){let e=document.createDocumentFragment();this._previewImage=this._previewImage||this._createPreviewImage(),!this.contains(this._previewImage)&&e.appendChild(this._previewImage);let t=document.createElement("div");e.appendChild(t);let r=this._keypoints.map(e=>e.src),{images:i,promise:o,cancel:a}=bs(r);i.forEach(e=>{let t=this._handleImageLoading(e.src);e.addEventListener("load",t),e.addEventListener("error",t)}),this._cancelLastImages=()=>{a(),this._cancelLastImages=void 0};let n=this._operation,s=this._filter;await o,this._isActive&&this._isSame(n,s)&&(this._container&&this._container.remove(),this._container=t,this._keypoints.forEach((e,t)=>{let r=i[t];r.classList.add("uc-fader-image"),e.image=r,this._container.appendChild(r)}),this.appendChild(e),this._flush())}async setTransformations(e){if(this._transformations=e,this._previewImage){let e=await this._imageSrc(),t=this._handleImageLoading(e);this._previewImage.src=e,this._previewImage.addEventListener("load",t,{once:!0}),this._previewImage.addEventListener("error",t,{once:!0}),this._previewImage.style.opacity="1",this._previewImage.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}}async preload({url:e,filter:t,operation:r,value:i}){this._cancelBatchPreload&&this._cancelBatchPreload();let o=ks(r,i),a=await Promise.all(o.map(i=>this._imageSrc({url:e,filter:t,operation:r,value:i}))),{cancel:n}=bs(a);this._cancelBatchPreload=n}_setOriginalSrc(e){let t=this._previewImage||this._createPreviewImage();if(!this.contains(t)&&this.appendChild(t),this._previewImage=t,t.src===e)return t.style.opacity="1",t.style.transform="scale(1)",void(this.className=as({"uc-active_from_viewer":this._fromViewer,"uc-active_from_cropper":!this._fromViewer,"uc-inactive_to_cropper":!1}));t.style.opacity="0";let r=this._handleImageLoading(e);t.addEventListener("error",r,{once:!0}),t.src=e,t.addEventListener("load",()=>{r(),t&&(t.style.opacity="1",t.style.transform="scale(1)",this.className=as({"uc-active_from_viewer":this._fromViewer,"uc-active_from_cropper":!this._fromViewer,"uc-inactive_to_cropper":!1}))},{once:!0}),t.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}async activate({url:e,operation:t,value:r,filter:i,fromViewer:o}){if(this._isActive=!0,this._hidden=!1,this._url=e,this._operation=t||"initial",this._value=r,this._filter=i,this._fromViewer=o,"number"!=typeof r&&!i){let e=await this._imageSrc({operation:t,value:r});return this._setOriginalSrc(e),void(this._container&&this._container.remove())}this._keypoints=await Promise.all(ks(t,r).map(e=>this._constructKeypoint(t,e))),this._update(t,r),this._initNodes()}deactivate({hide:e=!0}={}){this._isActive=!1,this._cancelLastImages&&this._cancelLastImages(),this._cancelBatchPreload&&this._cancelBatchPreload(),e&&!this._hidden?(this._hidden=!0,this._previewImage&&(this._previewImage.style.transform="scale(1)"),this.className=as({"uc-active_from_viewer":!1,"uc-active_from_cropper":!1,"uc-inactive_to_cropper":!0}),this.addEventListener("transitionend",()=>{this._container&&this._container.remove()},{once:!0})):this._container&&this._container.remove()}}class Cs extends no{initCallback(){super.initCallback(),this.addEventListener("wheel",e=>{e.preventDefault();let{deltaY:t,deltaX:r}=e;Math.abs(r)>1?this.scrollLeft+=r:this.scrollLeft+=t},{passive:!1}),this.addEventListener("scroll",()=>{},{passive:!0})}}Cs.template=" <slot></slot> ";class Ts extends no{constructor(){super(),this.init$={...this.init$,"*sliderEl":null,"*loadingOperations":new Map,"*showSlider":!1,"*currentFilter":ps,"*currentOperation":null,showLoader:!1,filters:hr,colorOperations:dr,cropOperations:pr,"*operationTooltip":null,"presence.mainToolbar":!0,"presence.subToolbar":!1,"presence.tabToggles":!0,"presence.tabContent.crop":!1,"presence.tabContent.tuning":!1,"presence.tabContent.filters":!1,"presence.tabToggle.crop":!0,"presence.tabToggle.tuning":!0,"presence.tabToggle.filters":!0,"presence.subTopToolbarStyles":{hidden:"uc-sub-toolbar--top-hidden",visible:"uc-sub-toolbar--visible"},"presence.subBottomToolbarStyles":{hidden:"uc-sub-toolbar--bottom-hidden",visible:"uc-sub-toolbar--visible"},"presence.tabContentStyles":{hidden:"uc-tab-content--hidden",visible:"uc-tab-content--visible"},"presence.tabToggleStyles":{hidden:"uc-tab-toggle--hidden",visible:"uc-tab-toggle--visible"},"presence.tabTogglesStyles":{hidden:"uc-tab-toggles--hidden",visible:"uc-tab-toggles--visible"},"on.cancel":()=>{this._cancelPreload?.(),this.$["*on.cancel"]()},"on.apply":()=>{this.$["*on.apply"](this.$["*editorTransformations"])},"on.applySlider":()=>{this.ref["slider-el"].apply(),this._onSliderClose()},"on.cancelSlider":()=>{this.ref["slider-el"].cancel(),this._onSliderClose()},"on.clickTab":e=>{const t=e.currentTarget.getAttribute("data-id");t&&this._activateTab(t,{fromViewer:!1})},tab_role:"tab",[`tab_${lr.TUNING}`]:`tab_${lr.TUNING}`,[`tab_${lr.CROP}`]:`tab_${lr.CROP}`,[`tab_${lr.FILTERS}`]:`tab_${lr.FILTERS}`,cancel:"cancel",apply:"apply","a11y-editor-tab-filters":"a11y-editor-tab-filters","a11y-editor-tab-tuning":"a11y-editor-tab-tuning","a11y-editor-tab-crop":"a11y-editor-tab-crop"},this._debouncedShowLoader=_r(this._showLoader.bind(this),500)}_onSliderClose(){this.$["*showSlider"]=!1,this.$["*tabId"]===lr.TUNING&&this.ref["tooltip-el"].classList.toggle("uc-info-tooltip_visible",!1)}_createOperationControl(e){let t=new vs;return t.operation=e,t}_createFilterControl(e){let t=new fs;return t.filter=e,t}_createToggleControl(e){let t=new us;return t.operation=e,t}_renderControlsList(e){let t=this.ref[`controls-list-${e}`],r=document.createDocumentFragment();e===lr.CROP?this.$.cropOperations.forEach(e=>{let t=this._createToggleControl(e);r.appendChild(t)}):e===lr.FILTERS?[ps,...this.$.filters].forEach(e=>{let t=this._createFilterControl(e);r.appendChild(t)}):e===lr.TUNING&&this.$.colorOperations.forEach(e=>{let t=this._createOperationControl(e);r.appendChild(t)}),[...r.children].forEach((e,t)=>{t===r.childNodes.length-1&&e.classList.add("uc-controls-list_last-item")}),t.innerHTML="",t.appendChild(r)}_activateTab(e,{fromViewer:t}){this.$["*tabId"]=e,e===lr.CROP?(this.$["*faderEl"].deactivate(),this.$["*cropperEl"].activate(this.$["*imageSize"],{fromViewer:t})):(this.$["*faderEl"].activate({url:this.$["*originalUrl"],fromViewer:t}),this.$["*cropperEl"].deactivate());for(let t of ur){let r=t===e;this.ref[`tab-toggle-${t}`].active=r,r?(this._renderControlsList(e),this._syncTabIndicator()):this._unmountTabControls(t),this.$[`presence.tabContent.${t}`]=r}}_unmountTabControls(e){let t=this.ref[`controls-list-${e}`];t&&(t.innerHTML="")}_syncTabIndicator(){let e=this.ref[`tab-toggle-${this.$["*tabId"]}`];this.ref["tabs-indicator"].style.transform=`translateX(${e.offsetLeft}px)`}async _preloadEditedImage(){if(this.$["*imgContainerEl"]&&this.$["*originalUrl"]){let e=this.$["*imgContainerEl"].offsetWidth,t=await this.proxyUrl(ys(this.$["*originalUrl"],e,this.$["*editorTransformations"]));this._cancelPreload?.();let{cancel:r}=bs([t]);this._cancelPreload=()=>{r(),this._cancelPreload=void 0}}}_showLoader(e){this.$.showLoader=e}_updateInfoTooltip=_r(()=>{const e=this.$["*editorTransformations"],t=this.$["*currentOperation"];let r="",i=!1;if(this.$["*tabId"]===lr.FILTERS)if(i=!0,this.$["*currentFilter"]&&e?.filter?.name===this.$["*currentFilter"]){let t=e?.filter?.amount||100;r=this.$["*currentFilter"]+" "+t}else r=this.l10n(ps);else if(this.$["*tabId"]===lr.TUNING&&t){i=!0;let o=e?.[t]||gr[t].zero;r=this.l10n(t)+" "+o}i&&(this.$["*operationTooltip"]=r),this.ref["tooltip-el"].classList.toggle("uc-info-tooltip_visible",i)},0);initCallback(){super.initCallback(),this.$["*sliderEl"]=this.ref["slider-el"],this.sub("*imageSize",e=>{e&&setTimeout(()=>{this._activateTab(this.$["*tabId"],{fromViewer:!0})},0)}),this.sub("*editorTransformations",e=>{let t=e?.filter?.name;this.$["*currentFilter"]!==t&&(this.$["*currentFilter"]=t)}),this.sub("*currentFilter",()=>{this._updateInfoTooltip()}),this.sub("*currentOperation",()=>{this._updateInfoTooltip()}),this.sub("*tabId",()=>{this._updateInfoTooltip()}),this.sub("*originalUrl",()=>{this.$["*faderEl"]&&this.$["*faderEl"].deactivate()}),this.sub("*editorTransformations",e=>{this._preloadEditedImage(),this.$["*faderEl"]&&this.$["*faderEl"].setTransformations(e)}),this.sub("*loadingOperations",e=>{let t=!1;for(let[,r]of e.entries()){if(t)break;for(let[,e]of r.entries())if(e){t=!0;break}}this._debouncedShowLoader(t)}),this.sub("*showSlider",e=>{this.$["presence.subToolbar"]=e,this.$["presence.mainToolbar"]=!e}),this.sub("*tabList",e=>{this.$["presence.tabToggles"]=e.length>1;for(const t of ur){this.$[`presence.tabToggle.${t}`]=e.includes(t);this.ref[`tab-toggle-${t}`].style.gridColumn=e.indexOf(t)+1}e.includes(this.$["*tabId"])||this._activateTab(e[0],{fromViewer:!1})}),this._updateInfoTooltip()}destroyCallback(){this.$["*showSlider"]=!1}}Ts.template=`\n  <uc-line-loader-ui set="active: showLoader"></uc-line-loader-ui>\n  <div class="uc-info-tooltip_container">\n    <div class="uc-info-tooltip_wrapper">\n      <div ref="tooltip-el" class="uc-info-tooltip uc-info-tooltip_hidden">{{*operationTooltip}}</div>\n    </div>\n  </div>\n  <div class="uc-toolbar-container">\n    <uc-presence-toggle\n      role="tablist"\n      class="uc-sub-toolbar"\n      set="visible: presence.mainToolbar; styles: presence.subTopToolbarStyles"\n    >\n      <div class="uc-tab-content-row">${ur.map(function(e){return`\n    <uc-presence-toggle\n      id="tab_${e}"\n      class="uc-tab-content"\n      set="visible: presence.tabContent.${e}; styles: presence.tabContentStyles"\n    >\n      <uc-editor-scroller hidden-scrollbar>\n        <div class="uc-controls-list_align">\n          <div\n            role="listbox"\n            aria-orientation="horizontal"\n            class="uc-controls-list_inner"\n            ref="controls-list-${e}"\n          ></div>\n        </div>\n      </uc-editor-scroller>\n    </uc-presence-toggle>\n  `}).join("")}</div>\n      <div class="uc-controls-row">\n        <uc-presence-toggle\n          class="uc-tab-toggles"\n          set="visible: presence.tabToggles; styles: presence.tabTogglesStyles"\n        >\n          <div ref="tabs-indicator" class="uc-tab-toggles_indicator"></div>\n          ${ur.map(function(e){return`\n    <uc-presence-toggle\n      class="uc-tab-toggle"\n      set="visible: presence.tabToggle.${e}; styles: presence.tabToggleStyles;"\n    >\n      <uc-btn-ui\n        theme="tab"\n        ref="tab-toggle-${e}"\n        data-id="${e}"\n        icon="${e}"\n        set="onclick: on.clickTab; aria-role:tab_role; aria-controls:tab_${e}; title-prop: a11y-editor-tab-${e}"\n      >\n      </uc-btn-ui>\n    </uc-presence-toggle>\n  `}).join("")}\n        </uc-presence-toggle>\n        <uc-btn-ui style="order: -1" theme="secondary-icon" icon="closeMax" set="onclick: on.cancel; title-prop:cancel">\n        </uc-btn-ui>\n        <uc-btn-ui theme="primary-icon" icon="done" set="onclick: on.apply; title-prop:apply"> </uc-btn-ui>\n      </div>\n    </uc-presence-toggle>\n    <uc-presence-toggle\n      class="uc-sub-toolbar"\n      set="visible: presence.subToolbar; styles: presence.subBottomToolbarStyles"\n    >\n      <div class="uc-slider">\n        <uc-editor-slider ref="slider-el"></uc-editor-slider>\n      </div>\n      <div class="uc-controls-row">\n        <uc-btn-ui theme="secondary" set="onclick: on.cancelSlider" l10n="@text:cancel"> </uc-btn-ui>\n        <uc-btn-ui theme="primary" set="onclick: on.applySlider" l10n="@text:apply"> </uc-btn-ui>\n      </div>\n    </uc-presence-toggle>\n  </div>\n`;class As extends no{constructor(){super(),this._iconReversed=!1,this._iconSingle=!1,this._iconHidden=!1,this.init$={...this.init$,text:"",icon:"",iconCss:this._iconCss(),theme:null,"aria-role":"","aria-controls":"","title-prop":""},this.defineAccessor("active",e=>{e?this.setAttribute("active",""):this.removeAttribute("active")})}_iconCss(){return as("uc-icon",{"uc-icon_left":!this._iconReversed,"uc-icon_right":this._iconReversed,"uc-icon_hidden":this._iconHidden,"uc-icon_single":this._iconSingle})}initCallback(){super.initCallback(),this.sub("icon",e=>{this._iconSingle=!this.$.text,this._iconHidden=!e,this.$.iconCss=this._iconCss()}),this.sub("theme",e=>{"custom"!==e&&(this.className=`uc-${e}`)}),this.sub("text",e=>{this._iconSingle=!1}),this.hasAttribute("theme")||this.setAttribute("theme","default"),this.defineAccessor("aria-role",e=>{this.$["aria-role"]=e||""}),this.defineAccessor("aria-controls",e=>{this.$["aria-controls"]=e||""}),this.defineAccessor("title-prop",e=>{this.$["title-prop"]=e||""})}set reverse(e){this.hasAttribute("reverse")?(this.style.flexDirection="row-reverse",this._iconReversed=!0):(this._iconReversed=!1,this.style.flexDirection=null)}}As.bindAttributes({text:"text",icon:"icon",reverse:"reverse",theme:"theme"}),As.template='\n  <button\n    type="button"\n    set="@role:aria-role; @aria-controls: aria-controls; @aria-label:title-prop"\n    l10n="@title:title-prop;"\n  >\n    <uc-icon set="className: iconCss; @name: icon; @hidden: !icon"></uc-icon>\n    <div class="uc-text">{{text}}</div>\n  </button>\n';class Es extends no{constructor(){super(),this._active=!1,this._handleTransitionEndRight=()=>{let e=this.ref["line-el"];e.style.transition="initial",e.style.opacity="0",e.style.transform="translateX(-101%)",this._active&&this._start()}}initCallback(){super.initCallback(),this.defineAccessor("active",e=>{"boolean"==typeof e&&(e?this._start():this._stop())})}_start(){this._active=!0;let{width:e}=this.getBoundingClientRect(),t=this.ref["line-el"];t.style.transition="transform 1s",t.style.opacity="1",t.style.transform=`translateX(${e}px)`,t.addEventListener("transitionend",this._handleTransitionEndRight,{once:!0})}_stop(){this._active=!1}}Es.template='\n  <div class="uc-inner">\n    <div class="uc-line" ref="line-el"></div>\n  </div>\n';const Is="uc-transition",Ss="uc-visible",Ms="uc-hidden";class $s extends no{constructor(){super(),this._visible=!1,this._visibleStyle=Ss,this._hiddenStyle=Ms,this._externalTransitions=!1,this.defineAccessor("styles",e=>{e&&(this._externalTransitions=!0,this._visibleStyle=e.visible,this._hiddenStyle=e.hidden)}),this.defineAccessor("visible",e=>{"boolean"==typeof e&&(this._visible=e,this._handleVisible())})}_handleVisible(){this.style.visibility=this._visible?"inherit":"hidden",function(e,...t){let r=os(...t);for(let t of Object.keys(r))e.classList.toggle(t,r[t])}(this,{[Is]:!this._externalTransitions,[this._visibleStyle]:this._visible,[this._hiddenStyle]:!this._visible}),this.setAttribute("aria-hidden",this._visible?"false":"true")}initCallback(){super.initCallback(),this.classList.toggle("uc-initial",!0),this._externalTransitions||this.classList.add(Is),this._handleVisible(),setTimeout(()=>{this.classList.toggle("uc-initial",!1)},0)}}$s.template="<slot></slot> ";class Ls extends no{init$={...this.init$,disabled:!1,min:0,max:100,onInput:null,onChange:null,defaultValue:null,"on.sliderInput":()=>{let e=parseInt(this.ref["input-el"].value,10);this._updateValue(e),this.$.onInput&&this.$.onInput(e)},"on.sliderChange":()=>{let e=parseInt(this.ref["input-el"].value,10);this.$.onChange&&this.$.onChange(e)}};constructor(){super(),this.setAttribute("with-effects","")}initCallback(){super.initCallback(),this.defineAccessor("disabled",e=>{this.$.disabled=e}),this.defineAccessor("min",e=>{this.$.min=e}),this.defineAccessor("max",e=>{this.$.max=e}),this.defineAccessor("defaultValue",e=>{this.$.defaultValue=e,this.ref["input-el"].value=e,this._updateValue(e)}),this.defineAccessor("zero",e=>{this._zero=e}),this.defineAccessor("onInput",e=>{e&&(this.$.onInput=e)}),this.defineAccessor("onChange",e=>{e&&(this.$.onChange=e)}),this._updateSteps(),this._observer=new ResizeObserver(()=>{this._updateSteps();let e=parseInt(this.ref["input-el"].value,10);this._updateValue(e)}),this._observer.observe(this),this._thumbSize=parseInt(window.getComputedStyle(this).getPropertyValue("--l-thumb-size"),10),setTimeout(()=>{let e=parseInt(this.ref["input-el"].value,10);this._updateValue(e)},0),this.sub("disabled",e=>{let t=this.ref["input-el"];e?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled")});let e=this.ref["input-el"];e.addEventListener("focus",()=>{this.style.setProperty("--color-effect","var(--hover-color-rgb)")}),e.addEventListener("blur",()=>{this.style.setProperty("--color-effect","var(--idle-color-rgb)")})}_updateValue(e){this._updateZeroDot(e);let{width:t}=this.getBoundingClientRect(),r=100/(this.$.max-this.$.min)*(e-this.$.min)*(t-this._thumbSize)/100;window.requestAnimationFrame(()=>{this.ref["thumb-el"].style.transform=`translateX(${r}px)`})}_updateZeroDot(e){if(!this._zeroDotEl)return;e===this._zero?this._zeroDotEl.style.opacity="0":this._zeroDotEl.style.opacity="1";let{width:t}=this.getBoundingClientRect(),r=100/(this.$.max-this.$.min)*(this._zero-this.$.min)*(t-this._thumbSize)/100;window.requestAnimationFrame(()=>{this._zeroDotEl.style.transform=`translateX(${r}px)`})}_updateSteps(){let e=this.ref["steps-el"],{width:t}=e.getBoundingClientRect(),r=Math.ceil(t/2),i=Math.ceil(r/15)-2;if(this._stepsCount===i)return;let o=document.createDocumentFragment(),a=document.createElement("div"),n=document.createElement("div");a.className="uc-minor-step",n.className="uc-border-step",o.appendChild(n);for(let e=0;e<i;e++)o.appendChild(a.cloneNode());o.appendChild(n.cloneNode());for(let e=0;e<i;e++)o.appendChild(a.cloneNode());o.appendChild(n.cloneNode());let s=document.createElement("div");s.className="uc-zero-dot",o.appendChild(s),this._zeroDotEl=s,e.innerHTML="",e.appendChild(o),this._stepsCount=i}destroyCallback(){super.destroyCallback(),this._observer?.disconnect()}}Ls.template='\n  <div class="uc-steps" ref="steps-el"></div>\n  <div ref="thumb-el" class="uc-thumb"></div>\n  <input\n    class="uc-input"\n    type="range"\n    ref="input-el"\n    set="oninput: on.sliderInput; onchange: on.sliderChange; @min: min; @max: max; @value: defaultValue;"\n  />\n';class Rs extends ga{couldBeCtxOwner=!0;activityType=uo.activities.CLOUD_IMG_EDIT;_entry;_instance;get activityParams(){const e=super.activityParams;if("internalId"in e)return e;throw new Error("Cloud Image Editor activity params not found")}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>this.mountEditor(),onDeactivate:()=>this.unmountEditor()}),this.subConfigValue("cropPreset",e=>{this._instance&&this._instance.getAttribute("crop-preset")!==e&&this._instance.setAttribute("crop-preset",e)}),this.subConfigValue("cloudImageEditorTabs",e=>{this._instance&&this._instance.getAttribute("tabs")!==e&&this._instance.setAttribute("tabs",e)})}handleApply(e){if(!this._entry)return;let t=e.detail;this._entry.setMultipleValues({cdnUrl:t.cdnUrl,cdnUrlModifiers:t.cdnUrlModifiers}),this.modalManager.close(uo.activities.CLOUD_IMG_EDIT),this.historyBack()}handleCancel(){this.modalManager.close(uo.activities.CLOUD_IMG_EDIT),this.historyBack()}mountEditor(){const{internalId:e}=this.activityParams,t=this.uploadCollection.read(e);if(!t)throw new Error(`Entry with internalId "${e}" not found`);this._entry=t;const r=this._entry.getValue("cdnUrl");if(!r)throw new Error(`Entry with internalId "${e}" hasn't uploaded yet`);const i=new ss,o=this.cfg.cropPreset,a=this.cfg.cloudImageEditorTabs;i.setAttribute("ctx-name",this.ctxName),i.setAttribute("cdn-url",r),o&&i.setAttribute("crop-preset",o),a&&i.setAttribute("tabs",a),i.addEventListener("apply",e=>{const t=e;this.handleApply(t),this.debugPrint('editor event "apply"',t.detail)}),i.addEventListener("cancel",e=>{const t=e;this.handleCancel(),this.debugPrint('editor event "cancel"',t.detail)}),i.addEventListener("change",e=>{const t=e;this.debugPrint('editor event "change"',t.detail)}),this.innerHTML="",this.appendChild(i),this._instance=i}unmountEditor(){this._instance=void 0,this._entry=void 0,this.innerHTML=""}}const Us=function(e){return e.replace(/[\\-\\[]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},Os=function(e,t="i"){const r=e.split("*").map(Us);return new RegExp("^"+r.join(".+")+"$",t)};const Ps=["--uc-font-family","--uc-font-size","--uc-line-height","--uc-button-size","--uc-preview-size","--uc-input-size","--uc-padding","--uc-radius","--uc-transition","--uc-background","--uc-foreground","--uc-primary","--uc-primary-hover","--uc-primary-transparent","--uc-primary-foreground","--uc-secondary","--uc-secondary-hover","--uc-secondary-foreground","--uc-muted","--uc-muted-foreground","--uc-destructive","--uc-destructive-foreground","--uc-border"];function zs(e){return Ps.reduce((t,r)=>{const i=function(e,t){return window.getComputedStyle(e).getPropertyValue(t).trim()}(e,r);return i&&(t[r]=i),t},{})}const Ns=["selected-files-change","toolbar-state-change"];class Ds{_handlerMap=new Map;_context;constructor(e){this._context=e,window.addEventListener("message",this._handleMessage)}_handleMessage=e=>{if(e.source!==this._context)return;const t=e.data;if(!(e=>!!e&&"object"==typeof e&&"type"in e&&Ns.includes(e.type))(t))return;const r=this._handlerMap.get(t.type);if(r)for(const e of r)e(t)};on(e,t){const r=this._handlerMap.get(e)??new Set;this._handlerMap.has(e)||this._handlerMap.set(e,r),r.add(t)}send(e){this._context.postMessage(e,"*")}destroy(){window.removeEventListener("message",this._handleMessage)}}const Fs=()=>{const e=globalThis.top??globalThis.parent??globalThis.self;try{return e.location.origin}catch(e){return console.warn("Unable to access top-level window location:",e),globalThis.location.origin}},Vs={[Po.GDRIVE]:"ngdrive"};class Bs extends ga{couldBeCtxOwner=!0;activityType=uo.activities.EXTERNAL;constructor(){super(),this.init$={...this.init$,activityIcon:"",activityCaption:"",selectedList:[],total:0,isSelectionReady:!1,isDoneBtnEnabled:!1,couldSelectAll:!1,couldDeselectAll:!1,showSelectionStatus:!1,counterText:"",doneBtnTextClass:"uc-hidden",toolbarVisible:!0,onDone:()=>{for(const e of this.$.selectedList){const t=this.extractUrlFromSelectedFile(e),{filename:r}=e,{externalSourceType:i}=this.activityParams;this.api.addFileFromUrl(t,{fileName:r,source:i})}this.$["*currentActivity"]=uo.activities.UPLOAD_LIST,this.modalManager.open(uo.activities.UPLOAD_LIST)},onCancel:()=>{this.historyBack()},onSelectAll:()=>{this._messageBridge?.send({type:"select-all"})},onDeselectAll:()=>{this._messageBridge?.send({type:"deselect-all"})}}}get activityParams(){const e=super.activityParams;if("externalSourceType"in e)return e;throw new Error("External Source activity params not found")}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{let{externalSourceType:e}=this.activityParams;if(!e)return this.modalManager.close(this.$["*currentActivity"]),this.$["*currentActivity"]=null,void console.error(`Param "externalSourceType" is required for activity "${this.activityType}"`);this.set$({activityCaption:`${e?.[0].toUpperCase()}${e?.slice(1)}`,activityIcon:e}),this.mountIframe()}}),this.sub("*currentActivityParams",e=>{this.isActivityActive&&(this.unmountIframe(),this.mountIframe())}),this.sub("*currentActivity",e=>{e!==this.activityType&&this.unmountIframe()}),this.subConfigValue("multiple",e=>{this.$.showSelectionStatus=e}),this.subConfigValue("localeName",e=>{this.setupL10n()}),this.subConfigValue("externalSourcesEmbedCss",e=>{this.applyEmbedCss(e)})}extractUrlFromSelectedFile(e){if(e.alternatives){const t=tr(this.cfg.externalSourcesPreferredTypes);for(const r of t){const t=Os(r);for(const[r,i]of Object.entries(e.alternatives))if(t.test(r))return i}}return e.url}handleToolbarStateChange(e){this.set$({toolbarVisible:e.isVisible})}async handleSelectedFilesChange(e){this.cfg.multiple===e.isMultipleMode?(this.bindL10n("counterText",()=>this.l10n("selected-count",{count:e.selectedCount,total:e.total})),this.set$({doneBtnTextClass:e.isReady?"":"uc-hidden",isSelectionReady:e.isReady,isDoneBtnEnabled:e.isReady&&e.selectedFiles.length>0,showSelectionStatus:e.isMultipleMode&&e.total>0,couldSelectAll:e.selectedCount<e.total,couldDeselectAll:e.selectedCount===e.total,selectedList:e.selectedFiles})):console.error("Multiple mode mismatch")}handleIframeLoad(){this.applyEmbedCss(this.cfg.externalSourcesEmbedCss),this.applyTheme(),this.setupL10n()}applyTheme(){this._messageBridge?.send({type:"set-theme-definition",theme:zs(this)})}applyEmbedCss(e){this._messageBridge?.send({type:"set-embed-css",css:e})}setupL10n(){this._messageBridge?.send({type:"set-locale-definition",localeDefinition:this.cfg.localeName})}remoteUrl(){const{pubkey:e,remoteTabSessionKey:t,socialBaseUrl:r,multiple:i}=this.cfg,{externalSourceType:o}=this.activityParams,a=Vs[o]??o,n={lang:this.l10n("social-source-lang")?.split("-")?.[0]||"en",public_key:e,images_only:(!1).toString(),session_key:t,wait_for_theme:!0,multiple:i.toString(),origin:this.cfg.topLevelOrigin||Fs(),debug:this.cfg.debug},s=new URL(`/window4/${a}`,r);return s.search=function(e){let t=[];for(let[r,i]of Object.entries(e))null==i||"string"==typeof i&&0===i.length||t.push(`${r}=${encodeURIComponent(i)}`);return t.join("&")}(n),s.toString()}mountIframe(){let e=Ft({tag:"iframe",attributes:{src:this.remoteUrl(),marginheight:0,marginwidth:0,frameborder:0,allowTransparency:!0}});e.addEventListener("load",this.handleIframeLoad.bind(this)),this.ref.iframeWrapper.innerHTML="",this.ref.iframeWrapper.appendChild(e),e.contentWindow&&(this._messageBridge?.destroy(),this._messageBridge=new Ds(e.contentWindow),this._messageBridge.on("selected-files-change",this.handleSelectedFilesChange.bind(this)),this._messageBridge.on("toolbar-state-change",this.handleToolbarStateChange.bind(this)),this.resetSelectionStatus())}unmountIframe(){this._messageBridge?.destroy(),this._messageBridge=void 0,this.ref.iframeWrapper.innerHTML="",this.resetSelectionStatus()}resetSelectionStatus(){this.set$({selectedList:[],total:0,isDoneBtnEnabled:!1,couldSelectAll:!1,couldDeselectAll:!1,showSelectionStatus:!1})}}Bs.template='\n  <uc-activity-header>\n    <button\n      type="button"\n      class="uc-mini-btn uc-close-btn"\n      set="onclick: *historyBack"\n      l10n="@title:a11y-activity-header-button-close;@aria-label:a11y-activity-header-button-close"\n    >\n      <uc-icon name="close"></uc-icon>\n    </button>\n  </uc-activity-header>\n  <div class="uc-content">\n    <div ref="iframeWrapper" class="uc-iframe-wrapper"></div>\n    <div class="uc-toolbar" set="@hidden: !toolbarVisible">\n      <button type="button" class="uc-cancel-btn uc-secondary-btn" set="onclick: onCancel" l10n="cancel"></button>\n      <div set="@hidden: !showSelectionStatus" class="uc-selection-status-box">\n        <span>{{counterText}}</span>\n        <button type="button" set="onclick: onSelectAll; @hidden: !couldSelectAll" l10n="select-all"></button>\n        <button type="button" set="onclick: onDeselectAll; @hidden: !couldDeselectAll" l10n="deselect-all"></button>\n      </div>\n      <button type="button" class="uc-done-btn uc-primary-btn" set="onclick: onDone; @disabled: !isDoneBtnEnabled;">\n        <uc-spinner set="@hidden: isSelectionReady"></uc-spinner>\n        <span l10n="done" set="@class: doneBtnTextClass"></span>\n      </button>\n    </div>\n  </div>\n';class js extends ga{requireCtxName=!0;_createValidationInput(){const e=document.createElement("input");return e.type="text",e.name=this.ctxName,e.required=this.cfg.multipleMin>0,e.tabIndex=-1,Dt(e,{opacity:0,height:0,width:0}),e}initCallback(){super.initCallback(),this._validationInputElement=this._createValidationInput(),this.appendChild(this._validationInputElement),this.sub("*collectionState",e=>{{if(this._dynamicInputsContainer||(this._dynamicInputsContainer=document.createElement("div"),this.appendChild(this._dynamicInputsContainer)),!this._validationInputElement){const e=this._createValidationInput();this.appendChild(e),this._validationInputElement=e}if(this._dynamicInputsContainer.innerHTML="","uploading"===e.status||"idle"===e.status)return this._validationInputElement.value="",void this._validationInputElement.setCustomValidity("");if("failed"===e.status){const t=e.errors[0]?.message;return this._validationInputElement.value="",void this._validationInputElement.setCustomValidity(t)}const t=e.group?e.group:null;if(t)return this._validationInputElement.value=t.cdnUrl,void this._validationInputElement.setCustomValidity("");const r=e.allEntries.map(e=>e.cdnUrl);if(!this.cfg.multiple&&1===r.length)return this._validationInputElement.value=r[0],void this._validationInputElement.setCustomValidity("");this._validationInputElement.remove(),this._validationInputElement=null;const i=new DocumentFragment;for(let e of r){const t=document.createElement("input");t.type="hidden",t.name=`${this.ctxName}[]`,t.value=e,i.appendChild(t)}this._dynamicInputsContainer.replaceChildren(i)}},!1)}}class Hs extends uo{}class qs extends no{init$={...this.init$,currentText:"",options:[],selectHtml:"",onSelect:e=>{e.preventDefault(),e.stopPropagation(),this.value=this.ref.select.value,this.$.currentText=this.$.options.find(e=>e.value==this.value)?.text||"",this.dispatchEvent(new Event("change"))}};initCallback(){super.initCallback(),this.sub("options",e=>{this.$.currentText=e?.[0]?.text||"";let t="";e?.forEach(e=>{t+=`<option value="${e.value}">${e.text}</option>`}),this.$.selectHtml=t})}}qs.template=' <select ref="select" set="innerHTML: selectHtml; onchange: onSelect"></select> ';class Ks extends no{initCallback(){super.initCallback(),this.subConfigValue("removeCopyright",e=>{this.toggleAttribute("hidden",!!e)})}static template='\n    <a\n      href="https://uploadcare.com/?utm_source=copyright&utm_medium=referral&utm_campaign=v4"\n      target="_blank noopener"\n      class="uc-credits"\n      >Powered by Uploadcare</a\n    >\n  '}class Gs extends zt{}function Ws(e){let t=new Blob([e],{type:"image/svg+xml"});return URL.createObjectURL(t)}function Xs(e="hsl(209, 21%, 65%)",t=32,r=32){return Ws(`\n  <svg width="${t}" height="${r}" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" fill="${e}" d="M9.68848 8.70068C9.68848 8.42454 9.91233 8.20068 10.1885 8.20068H15.0885C15.2211 8.20068 15.3483 8.25336 15.442 8.34713L20.342 13.2471C20.4358 13.3409 20.4885 13.4681 20.4885 13.6007V21.3007C20.4885 21.5768 20.2646 21.8007 19.9885 21.8007H10.1885C9.91233 21.8007 9.68848 21.5768 9.68848 21.3007V8.70068ZM10.6885 9.20068V20.8007H19.4885V14.1007L15.0885 14.1007C14.8123 14.1007 14.5885 13.8768 14.5885 13.6007L14.5885 9.20068H10.6885ZM15.5885 9.90779L18.7814 13.1007L15.5885 13.1007L15.5885 9.90779Z"/>\n  </svg>\n  `)}function Zs(e,t=40){if("image/svg+xml"===e.type)return URL.createObjectURL(e);let r=document.createElement("canvas"),i=r.getContext("2d"),o=new Image,a=new Promise((e,a)=>{o.onload=()=>{let n=o.height/o.width;n>1?(r.width=t,r.height=t*n):(r.height=t,r.width=t/n),i.fillStyle="rgb(240, 240, 240)",i.fillRect(0,0,r.width,r.height),i.drawImage(o,0,0,r.width,r.height),r.toBlob(t=>{if(!t)return void a();let r=URL.createObjectURL(t);e(r)})},o.onerror=e=>{a(e)}});return o.src=URL.createObjectURL(e),a}Gs.template=' <div class="uc-spinner"></div> ';class Ys extends Fn{_renderedGridOnce=!1;_thumbRect=null;_isIntersecting=!1;_firstViewMode=this.cfg.filesViewMode;constructor(){super(),this.init$={...this.init$,thumbUrl:"",badgeIcon:"",uid:""}}_calculateThumbSize(e=!1){e&&(this._thumbRect=this.getBoundingClientRect());let t=Math.max(parseInt(String(this?._thumbRect?.height||0)),parseInt(String(this?._thumbRect?.width||0)),this.cfg.thumbSize);return window.devicePixelRatio>1&&(t*=window.devicePixelRatio),Math.min(t,3e3)}_generateThumbnail=this._withEntry(async(e,t=!1)=>{const r=e.getValue("fileInfo"),i=e.getValue("isImage"),o=e.getValue("uuid"),a=e.getValue("thumbUrl");let n=this._calculateThumbSize(t);if(r&&i&&o){let t=await this.proxyUrl(Qt(er(this.cfg.cdnCname,o),Kt(e.getValue("cdnUrlModifiers"),"stretch/off",`scale_crop/${n}x${n}/center`)));if(a===t)return;const{promise:r}=ms(t);return void r.then(()=>{e.setValue("thumbUrl",t),a?.startsWith("blob:")&&URL.revokeObjectURL(a)}).catch(async()=>{if(!a?.startsWith("blob:"))try{const t=e.getValue("file");if(!t)return;const r=await Zs(t,n);e.setValue("thumbUrl",r)}catch(t){const r=window.getComputedStyle(this).getPropertyValue("--uc-muted-foreground");e.setValue("thumbUrl",Xs(r))}})}if(e.getValue("thumbUrl"))return;const s=e.getValue("file");if(s?.type.includes("image"))try{let t=await Zs(s,n);e.setValue("thumbUrl",t)}catch(t){let r=window.getComputedStyle(this).getPropertyValue("--uc-muted-foreground");e.setValue("thumbUrl",Xs(r))}else{let t=window.getComputedStyle(this).getPropertyValue("--uc-muted-foreground");e.setValue("thumbUrl",Xs(t))}});_debouncedGenerateThumb=_r(this._generateThumbnail.bind(this),100);_observerCallback(e){const[t]=e;this._isIntersecting=t.isIntersecting,t.isIntersecting&&(this._thumbRect=t.boundingClientRect,this._debouncedGenerateThumb(),this._observer?.disconnect()),0===t.intersectionRatio&&this._debouncedGenerateThumb.cancel()}_reset(){super._reset(),this._debouncedGenerateThumb.cancel()}_handleEntryId(e){this._reset();let t=this.uploadCollection?.read(e);this._entry=t,t&&(this._subEntry("fileInfo",e=>{e?.isImage&&this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("thumbUrl",e=>{this.$.thumbUrl=e?`url(${e})`:""}),this._subEntry("cdnUrlModifiers",()=>{this._isIntersecting&&this._debouncedGenerateThumb()}),this._isIntersecting&&this._debouncedGenerateThumb())}initCallback(){super.initCallback(),this.defineAccessor("badgeIcon",e=>this.$.badgeIcon=e),this.defineAccessor("uid",e=>{this.set$({uid:e})}),this.sub("uid",e=>{this._handleEntryId(e)}),this.subConfigValue("filesViewMode",e=>{"grid"!==e||this._renderedGridOnce||("list"===this._firstViewMode&&this._debouncedGenerateThumb(!0),this._renderedGridOnce=!0)}),this.setAttribute("role","img")}connectedCallback(){super.connectedCallback(),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:.1}),this._observer.observe(this)}disconnectedCallback(){super.disconnectedCallback(),this._entrySubs=new Set,this._debouncedGenerateThumb.cancel(),this._observer?.disconnect()}}Ys.template='\n  <div class="uc-thumb" set="style.backgroundImage: thumbUrl">\n    <div class="uc-badge">\n      <uc-icon set="@name: badgeIcon"></uc-icon>\n    </div>\n  </div>\n',Ys.bindAttributes({badgeIcon:null,uid:null});class Js extends so{static styleAttrs=[...super.styleAttrs,"uc-file-uploader-regular"];constructor(){super(),this.init$={...this.init$,isHidden:!1}}initCallback(){super.initCallback(),this.defineAccessor("headless",e=>{this.set$({isHidden:va(e)})})}}Js.template='\n  <uc-simple-btn set="@hidden: isHidden"></uc-simple-btn>\n\n  <uc-modal id="start-from" strokes block-body-scrolling>\n    <uc-start-from>\n      <uc-drop-area with-icon clickable></uc-drop-area>\n      <uc-source-list role="list" wrap></uc-source-list>\n      <button type="button" l10n="start-from-cancel" class="uc-secondary-btn" set="onclick: *historyBack"></button>\n      <uc-copyright></uc-copyright>\n    </uc-start-from>\n  </uc-modal>\n\n  <uc-modal id="upload-list" strokes block-body-scrolling>\n    <uc-upload-list></uc-upload-list>\n  </uc-modal>\n\n  <uc-modal id="camera" strokes block-body-scrolling>\n    <uc-camera-source></uc-camera-source>\n  </uc-modal>\n\n  <uc-modal id="url" strokes block-body-scrolling>\n    <uc-url-source></uc-url-source>\n  </uc-modal>\n\n  <uc-modal id="external" strokes block-body-scrolling>\n    <uc-external-source></uc-external-source>\n  </uc-modal>\n\n  <uc-modal id="cloud-image-edit" strokes block-body-scrolling>\n    <uc-cloud-image-editor-activity></uc-cloud-image-editor-activity>\n  </uc-modal>\n',Js.bindAttributes({headless:null});const Qs="active";class ec extends so{static styleAttrs=[...super.styleAttrs,"uc-file-uploader-minimal"];constructor(){super(),this.init$={...this.init$,singleUpload:!1,isHiddenStartFrom:!1,classUploadList:"",classStartFrom:""}}_handleModalOpen(e){e.id===uo.activities.CLOUD_IMG_EDIT&&this.set$({classUploadList:Qs}),this.$["*currentActivity"]===uo.activities.UPLOAD_LIST&&this.set$({classUploadList:Qs,isHiddenStartFrom:!0}),this.$["*uploadList"]?.length<=0&&this.set$({classStartFrom:Qs})}_handleModalClose(e){e.id===this.$["*currentActivity"]&&(this.$["*currentActivity"]=uo.activities.UPLOAD_LIST,this.set$({isHiddenStartFrom:!1})),e.id===uo.activities.CLOUD_IMG_EDIT&&(this.$["*currentActivity"]=uo.activities.UPLOAD_LIST)}initCallback(){super.initCallback();const e=this.ref.uBlock;this.sub("*currentActivity",t=>{t===uo.activities.UPLOAD_LIST&&this.modalManager.closeAll(),t||(this.$["*currentActivity"]=e.initActivity||uo.activities.START_FROM)}),this.sub("*uploadList",t=>{t?.length>0?(this.$["*currentActivity"]=uo.activities.UPLOAD_LIST,this.set$({classStartFrom:""})):(this.set$({classUploadList:"",isHiddenStartFrom:!1}),this.$["*currentActivity"]=e.initActivity||uo.activities.START_FROM)}),this.subConfigValue("confirmUpload",e=>{!1!==e&&(this.cfg.confirmUpload=!1)}),this.subConfigValue("filesViewMode",e=>{this.setAttribute("mode",e),this.subConfigValue("multiple",t=>{"grid"===e?(t?this.style.removeProperty("--uc-grid-col"):this.style.setProperty("--uc-grid-col","1"),this.$.singleUpload=!t):(this.style.removeProperty("--uc-grid-col"),this.$.singleUpload=!1)})}),this.handleModalOpen=this._handleModalOpen.bind(this),this.handleModalClose=this._handleModalClose.bind(this),this.modalManager.subscribe(io.OPEN,this.handleModalOpen),this.modalManager.subscribe(io.CLOSE,this.handleModalClose)}destroyCallback(){super.destroyCallback(),this.modalManager.unsubscribe(io.OPEN,this.handleModalOpen),this.modalManager.unsubscribe(io.CLOSE,this.handleModalClose)}}ec.template='\n  <uc-start-from set="@hidden: isHiddenStartFrom; @class:classStartFrom">\n    <uc-drop-area set="@single:singleUpload;" initflow clickable tabindex="0" l10n="choose-file"></uc-drop-area>\n    <uc-copyright></uc-copyright>\n  </uc-start-from>\n  <uc-upload-list set="@class:classUploadList" ref="uBlock"></uc-upload-list>\n\n  <uc-modal id="start-from" strokes block-body-scrolling>\n    <uc-start-from>\n      <uc-drop-area with-icon clickable></uc-drop-area>\n      <uc-source-list role="list" wrap></uc-source-list>\n      <button type="button" l10n="start-from-cancel" class="uc-secondary-btn" set="onclick: *historyBack"></button>\n    </uc-start-from>\n  </uc-modal>\n\n  <uc-modal id="camera" strokes block-body-scrolling>\n    <uc-camera-source></uc-camera-source>\n  </uc-modal>\n\n  <uc-modal id="url" strokes block-body-scrolling>\n    <uc-url-source></uc-url-source>\n  </uc-modal>\n\n  <uc-modal id="external" strokes block-body-scrolling>\n    <uc-external-source></uc-external-source>\n  </uc-modal>\n\n  <uc-modal id="cloud-image-edit" strokes block-body-scrolling>\n    <uc-cloud-image-editor-activity></uc-cloud-image-editor-activity>\n  </uc-modal>\n';class tc extends so{static styleAttrs=[...super.styleAttrs,"uc-file-uploader-inline"];constructor(){super(),this.init$={...this.init$,couldCancel:!1,cancel:()=>{this.couldHistoryBack?this.$["*historyBack"]():this.couldShowList&&(this.$["*currentActivity"]=uo.activities.UPLOAD_LIST)}}}get couldHistoryBack(){const e=this.$["*history"];return e.length>1&&e[e.length-1]!==uo.activities.START_FROM}get couldShowList(){return this.cfg.showEmptyList||this.$["*uploadList"].length>0}initCallback(){super.initCallback();const e=this.ref.uBlock;this.sub("*currentActivity",t=>{t||(this.$["*currentActivity"]=e.initActivity||uo.activities.START_FROM)}),this.sub("*uploadList",t=>{t?.length>0&&this.$["*currentActivity"]===(e.initActivity||uo.activities.START_FROM)&&(this.$["*currentActivity"]=uo.activities.UPLOAD_LIST)}),this.sub("*history",()=>{this.$.couldCancel=this.couldHistoryBack||this.couldShowList})}}tc.template='\n  <uc-start-from>\n    <uc-drop-area with-icon clickable></uc-drop-area>\n    <uc-source-list role="list" wrap></uc-source-list>\n    <button\n      type="button"\n      l10n="start-from-cancel"\n      class="uc-cancel-btn uc-secondary-btn"\n      set="onclick: cancel; @hidden: !couldCancel"\n    ></button>\n    <uc-copyright></uc-copyright>\n  </uc-start-from>\n  <uc-upload-list ref="uBlock"></uc-upload-list>\n  <uc-camera-source></uc-camera-source>\n  <uc-url-source></uc-url-source>\n  <uc-external-source></uc-external-source>\n  <uc-cloud-image-editor-activity></uc-cloud-image-editor-activity>\n';class rc extends ss{static styleAttrs=[...super.styleAttrs,"uc-wgt-common"];initCallback(){super.initCallback(),this.a11y?.registerBlock(this)}}function ic(e){for(let t in e){let r=[...t].reduce((e,t)=>(t.toUpperCase()===t&&(t="-"+t.toLowerCase()),e+t),"");r.startsWith("-")&&(r=r.replace("-","")),r.startsWith("uc-")||(r="uc-"+r),e[t].reg&&e[t].reg(r)}}const oc="UC";async function ac(e,t=!1){return new Promise((r,i)=>{if("object"!=typeof document)return void r(null);if("object"==typeof window&&window[oc])return void r(window[oc]);let o=document.createElement("script");o.async=!0,o.src=e,o.onerror=()=>{i()},o.onload=()=>{let e=window[oc];t&&ic(e),r(e)},document.head.appendChild(o)})}var nc=sc;function sc(e,t){var r=lc();return(sc=function(e,t){return r[e-=215]})(e,t)}!function(e){for(var t=sc,r=e();;)try{if(197540===-parseInt(t(222))/1*(-parseInt(t(228))/2)+parseInt(t(224))/3+parseInt(t(223))/4*(parseInt(t(230))/5)+parseInt(t(229))/6+-parseInt(t(216))/7+-parseInt(t(234))/8*(-parseInt(t(220))/9)+-parseInt(t(225))/10*(parseInt(t(235))/11))break;r.push(r.shift())}catch(e){r.push(r.shift())}}(lc);class cc extends n.Plugin{static get[nc(226)](){return[ft,$]}static get[nc(236)](){return nc(217)}static get[nc(219)](){return!0}static get[nc(231)](){return!0}constructor(r){var i=nc;super(r),r[i(232)][i(218)](i(233),[t[i(221)],t[i(215)]]),e[i(227)](e)}}function lc(){var e=["defineComponents","12gjsEXn","180300MFQLIL","645520bnVUum","isPremiumPlugin","config","uploadcare.uploader.sourceList","121304Okebah","7546759XhZBHr","pluginName","URL","2183657GPLUNm","Uploadcare","define","isOfficialPlugin","216NSolgZ","Local","34509szahnz","8TTPDyc","1009008dejqEf","10keHUBb","requires"];return(lc=function(){return e})()}class uc extends c.View{constructor(e){super(e);const t=e.t,r=this.bindTemplate,i=new c.SpinnerView;i.isVisible=!0,this.setTemplate({tag:"div",attributes:{class:["ck-uploadcare-form__loading"],tabindex:"-1"},children:[{tag:"div",attributes:{class:["ck-uploadcare-form__loading-spinner"]},children:[i,{text:r.to("imageUploadProgress",e=>t("Loading image...")+" ("+(e||0)+"%)")}]},{tag:"div",attributes:{class:["ck-uploadcare-form__skeleton"]},children:[{tag:"div",children:[{tag:"span"},{tag:"span"},{tag:"span"}]},{tag:"div",children:[{tag:"span"},{tag:"span"},{tag:"span"},{tag:"span"},{tag:"span"}]}]}]})}}class dc extends c.View{constructor(e){super(e);const t=e.t;this.set("errorType",null);const r=new c.ButtonView(e);r.label=t({id:"Try again (Uploadcare)",string:"Try again"}),r.withText=!0,r.class="ck-button-action",r.on("execute",()=>{this.fire("retry")}),r.bind("isVisible").to(this,"errorType",e=>"NotFound"!==e);const i=new c.IconView;i.content=s.IconError,i.extendTemplate({attributes:{style:{width:"50px",height:"50px"}}});const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck-uploadcare-form__error"],tabindex:"-1"},children:[{tag:"div",attributes:{class:["ck-uploadcare-form__error-contents"]},children:[i,{tag:"h3",attributes:{style:{fontWeight:"bold"}},children:[{text:t("Unable to load")}]},{text:o.to("errorType",e=>t("NotFound"!==e?"We were unable to load the image due to network connection issues.":"The image was not found. Its source may have been removed."))},r]},{tag:"div",attributes:{class:["ck-uploadcare-form__skeleton"]},children:[{tag:"div",children:[{tag:"span"},{tag:"span"},{tag:"span"}]},{tag:"div",children:[{tag:"span"},{tag:"span"},{tag:"span"},{tag:"span"},{tag:"span"}]}]}]})}}function hc(e,t){const r=gc();return(hc=function(e,t){return r[e-=280]})(e,t)}!function(e){const t=hc,r=e();for(;;)try{if(736156===-parseInt(t(283))/1*(parseInt(t(287))/2)+-parseInt(t(295))/3*(-parseInt(t(281))/4)+-parseInt(t(292))/5*(parseInt(t(299))/6)+parseInt(t(294))/7+-parseInt(t(297))/8*(parseInt(t(288))/9)+-parseInt(t(298))/10*(-parseInt(t(290))/11)+-parseInt(t(284))/12*(-parseInt(t(291))/13))break;r.push(r.shift())}catch(e){r.push(r.shift())}}(gc);class pc extends c.View{constructor(e,t){const r=hc;super(e);const i=this[r(296)];this[r(280)](r(285),""),this[r(300)]({tag:r(293),attributes:{...t,class:[r(289),r(282)],"ctx-name":r(286),"cdn-url":i.to(r(285))}})}}function gc(){const e=["7716NJYRVu","ck-uploadcare-theme","1zuveJl","107724UduDny","imageSrc","image-edit","2451692hrHSOa","144IYEBAG","uc-light","517451hHmbIm","1651WhujUL","15hbiFRJ","uc-cloud-image-editor","1982596iurxvg","1779unBAEC","bindTemplate","106256akSsjR","70qgNkYW","1443954zpNWzL","setTemplate","set"];return(gc=function(){return e})()}const mc=bc;function bc(e,t){const r=fc();return(bc=function(e,t){return r[e-=120]})(e,t)}function fc(){const e=["_waitForImageEditorComponent","1722SGhZMT","_addErrorViewListeners","52fETLIe","uc-cloud-image-editor","1963260DeZLHr","669tCVGyc","264BnnKyA","error","addMany","_focusableView","detail","_editingView","fire","_loadingView","clear","_errorView","querySelector","236724vCMmGk","change:status","target","_addUploadcareImageEditorListeners","addEventListener","status","filter","element","length","ck-uploadcare-form","focus","ready","once","createCollection","10gwUPmh","div","_items","apply","render","cdnUrl","getFocusableElement","142605COqfTJ","5560RiSoWA","4oCukrY","disconnect","ck-reset_all-excluded","add","setTemplate","nodeName","set","_setView","cancel","observe","1217096olVgHy","7332yUIQbH","addedNodes","15087116gexgyM","toLowerCase","uploading","retry"];return(fc=function(){return e})()}!function(e){const t=bc,r=e();for(;;)try{if(714767===parseInt(t(165))/1+-parseInt(t(154))/2*(-parseInt(t(120))/3)+-parseInt(t(155))/4*(-parseInt(t(177))/5)+parseInt(t(166))/6*(parseInt(t(173))/7)+-parseInt(t(121))/8*(parseInt(t(153))/9)+parseInt(t(146))/10*(-parseInt(t(168))/11)+-parseInt(t(132))/12*(-parseInt(t(175))/13))break;r.push(r.shift())}catch(e){r.push(r.shift())}}(fc);class vc extends N{[mc(148)];[mc(128)];[mc(130)];[mc(126)];[mc(124)];constructor(e,t,r){const i=mc;super(e),this[i(148)]=this[i(145)](),this[i(128)]=new uc(e),this[i(130)]=new dc(e),this[i(126)]=new pc(e,r),this[i(124)]=new c.View(e),this[i(124)][i(159)](this[i(152)]()),this[i(161)](i(137),t),this[i(159)]({tag:i(147),attributes:{class:["ck",i(157),i(141)],tabindex:"-1"},children:this[i(148)]}),this[i(162)](),this[i(144)](i(150),()=>{const e=i;this[e(172)](this[e(139)],t=>{this[e(135)](t)})}),this.on(i(133),()=>{this[i(162)]()}),this[i(174)]()}[mc(142)](){const e=mc;this[e(139)][e(142)]()}[mc(162)](){const e=mc;switch(this[e(148)][e(129)](),this[e(137)]){case e(170):this[e(148)][e(158)](this[e(128)]);break;case e(122):this[e(148)][e(158)](this[e(130)]);break;case e(143):this[e(148)][e(123)]([this[e(126)],this[e(124)]])}}[mc(172)](e,t){const r=mc,i=r(176),o=e[r(131)](i);if(o)return t(o);const a=new MutationObserver(o=>{const n=r,s=o[n(138)](t=>t[n(134)]===e&&t[n(167)][n(140)]>0&&t[n(167)][0][n(160)][n(169)]()===i);s[n(140)]&&(a[n(156)](),t(s[0][n(167)][0]))});a[r(164)](e,{childList:!0,subtree:!0})}[mc(135)](e){const t=mc;e[t(136)](t(149),e=>{const r=t;this[r(127)](r(149),{imageSrc:e[r(125)][r(151)]})}),e[t(136)](t(163),()=>{const e=t;this[e(127)](e(163))})}[mc(174)](){const e=mc;this[e(130)].on(e(171),()=>{const t=e;this[t(127)](t(171))})}}class yc extends((0,L.ObservableMixin)()){_editor;_dialog;_imageElement;_imageCache;_controller;_attributes;constructor(e,t,r){super(),this._editor=e,this._dialog=t,this._imageElement=r,this._imageCache=this._editor.plugins.get("UploadcareImageEditUI").imageCache,this._attributes=this._editor.config.get("uploadcare.editor")||{},this.set({isActive:!0,imageStatus:"ready",imageErrorType:null,imageId:null,imageSrc:null,imageDimension:null,imageUploadProgress:null}),this._prepareImage(),this._showDialog()}destroy(){this.isActive=!1,this.stopListening(),this.stopDelegating(),"uploading"===this.imageStatus&&this._controller&&this._controller.abort()}async _prepareImage(){const e=this._imageElement,t=e.getAttribute("uploadcareImageId"),r=e.getAttribute("src");if(t)await this._loadImageInfo(t,r);else if(this._imageCache.has(r)){const e=this._imageCache.get(r);this.imageStatus="ready",this.imageErrorType=null,this.imageSrc=e.url,this.imageDimension=e.dimension,this.imageId=e.id}else this.imageStatus="uploading",this.imageUploadProgress=0,this._controller=new AbortController,await this._uploadImage(this._imageElement,this._controller)}_showDialog(){const{locale:e}=this._editor,t=e.t,r=new vc(e,this.imageStatus,this._attributes);r.bind("status").to(this,"imageStatus"),r._loadingView.bind("imageUploadProgress").to(this,"imageUploadProgress"),r._editingView.bind("imageSrc").to(this,"imageSrc"),r._errorView.bind("errorType").to(this,"imageErrorType"),this._addEditViewListeners(r,this._imageElement),this._dialog.show({id:"uploadcareImageEdit",icon:s.IconUploadcareImageEdit,title:t({id:"Edit Image (Uploadcare)",string:"Edit image"}),content:r,position:c.DialogViewPosition.EDITOR_TOP_CENTER,isModal:!0,onShow:()=>{r.focus()},onHide:()=>{r.destroy(),this.destroy()},keystrokeHandlerOptions:{filter:e=>!Y(e,r.element)}})}_loadImageInfo(e,t){return dt.getInfo(e,{publicKey:this._editor.config.get("uploadcare.pubkey"),baseURL:this._editor.config.get("uploadcare.uploader.baseUrl")}).then(r=>{const{width:i,height:o}=r.imageInfo;this.imageStatus="ready",this.imageErrorType=null,this.imageSrc=t,this.imageDimension={width:i,height:o},this.imageId=e}).catch(e=>{this.imageStatus="error",this.imageErrorType="FileNotFoundError"===e.code?"NotFound":"Network",this.imageSrc=null,this.imageDimension=null,this.imageId=null,this.imageUploadProgress=null})}_uploadImage(e,t){return this._getImageAsFile(e).then(e=>dt.upload({publicKey:this._editor.config.get("uploadcare.pubkey"),baseURL:this._editor.config.get("uploadcare.uploader.baseUrl"),baseCDN:this._editor.config.get("uploadcare.uploader.cdnCname"),signal:t.signal,file:e,onProgress:e=>{e&&e.isComputable&&(this.imageUploadProgress=Math.ceil(100*e.value))}})).then(t=>{const{width:r,height:i}=t.imageInfo;this.imageStatus="ready",this.imageErrorType=null,this.imageSrc=t.cdnUrl,this.imageDimension={width:r,height:i},this.imageId=t.uuid,this.imageUploadProgress=null;const o=e.getAttribute("src");this._imageCache.set(o,{id:t.uuid,url:t.cdnUrl,dimension:this.imageDimension})}).catch(e=>{this.imageStatus="error",this.imageErrorType="FileNotFoundError"===e.code?"NotFound":"Network",this.imageSrc=null,this.imageDimension=null,this.imageId=null,this.imageUploadProgress=null})}_addEditViewListeners(e,t){e.on("apply",(e,r)=>{this._replaceImage(t,r.imageSrc,this.imageId),this._dialog.hide()}),e.on("retry",()=>{this.imageStatus="uploading",this.imageUploadProgress=0,this._controller=new AbortController,this._uploadImage(this._imageElement,this._controller)}),e.on("cancel",()=>{this._dialog.hide()})}_replaceImage(e,t,r){const i=this._editor,{width:o,height:a}=q(t,this.imageDimension.width,this.imageDimension.height),{imageFallbackUrl:n,imageSources:s}=H(t,o);i.model.change(t=>{if("$graveyard"===e.root.rootName){i.execute("insertImage",{imageType:e.is("element","imageInline")?"imageInline":null,source:{...Object.fromEntries(e.getAttributes()),uploadcareImageId:r,src:n,sources:s,width:o,height:a}});const c=e.getChildren();e=i.model.document.selection.getSelectedElement();for(const r of c)t.append(t.cloneElement(r),e)}else t.setSelection(e,"on"),i.execute("uploadcareImageReplace",{...Object.fromEntries(e.getAttributes()),uploadcareImageId:r,src:n,sources:s,width:o,height:a},e);t.setSelection(e,"on")})}async _getImageAsFile(e){const t=L.global.window,r=L.global.document.location.href,i=new t.URL(e.getAttribute("src"),r);if("data:"===i.protocol){const e=i.href.split(","),r=e[0].match(/:(.*?);/)[1],o=r.split("/")[1],a=t.atob(e[e.length-1]);let n=a.length;const s=new t.Uint8Array(n);for(;n--;)s[n]=a.charCodeAt(n);return new t.File([s],"image."+o,{type:r})}const o=i.href.split("/"),a=o[o.length-1],n=a.split(".")[1];return t.fetch(i.href).then(e=>e.clone().blob()).then(e=>new t.File([e],a,{type:"image/"+n}))}}const wc=kc;function _c(){const e=["selection","4jeapeA","requires","plugins","imageBlock","model","unbind","596WazQyG","45920MGABki","element","_isEditable","editor","imageInline","execute","refresh","150zbAlcI","10cpDsKC","getSelectedElement","get","imageEditController","set","14996844XbbXsd","bind","346216DJGSLF","1014oAsroW","isEnabled","config","1452339xeDIag","uploadcare.allowExternalImagesEditing","isActive","39133270aYvMBL","document","266495RDHwlk"];return(_c=function(){return e})()}function kc(e,t){const r=_c();return(kc=function(e,t){return r[e-=449]})(e,t)}!function(e){const t=kc,r=e();for(;;)try{if(865181===parseInt(t(461))/1*(parseInt(t(468))/2)+-parseInt(t(451))/3*(-parseInt(t(467))/4)+parseInt(t(459))/5*(-parseInt(t(475))/6)+parseInt(t(454))/7+-parseInt(t(450))/8+parseInt(t(481))/9*(-parseInt(t(476))/10)+parseInt(t(457))/11)break;r.push(r.shift())}catch(e){r.push(r.shift())}}(_c);class xc extends n.Command{[wc(479)];static get[wc(462)](){return[c.Dialog]}[wc(470)];constructor(e){const t=wc;super(e),this[t(479)]=void 0,this[t(470)]=function(e){const t=j,r=W(e);return e=>!(!e||!e.is(t(470),t(435))&&!e.is(t(470),t(474)))&&(!!e[t(428)](t(468))||!!e[t(428)](t(439))&&r(e[t(422)](t(439))))}(e[t(453)][t(478)](t(455))||[]),this[t(480)]({isActive:!1})}[wc(474)](){const e=wc,t=this[e(471)][e(465)][e(458)][e(460)][e(477)]();this[e(452)]=this[e(470)](t)}[wc(473)](){const e=wc;this[e(479)]&&(this[e(466)](e(456)),this[e(479)]=void 0);const t=this[e(471)][e(465)][e(458)][e(460)][e(477)]();t&&(t.is(e(469),e(464))||t.is(e(469),e(472)))&&(this[e(479)]=new yc(this[e(471)],this[e(471)][e(463)][e(478)](c.Dialog),t),this[e(449)](e(456)).to(this[e(479)],e(456)))}}function Cc(){const e=["298319TYlEeb","removeAttribute","33875040WuAIkN","79911sHvMGA","1061305DaJRbB","isEnabled","2502730FEWMVc","getSelectedElement","editor","change","74TIobBH","imageInline","srcset","document","refresh","selection","element","sizes","62547NADKkm","setAttributes","model","execute","33VfOcAU","20qkdNEY","1960884FAQVww","16JoHZBr","6UfhOIl","imageBlock"];return(Cc=function(){return e})()}const Tc=Ac;function Ac(e,t){const r=Cc();return(Ac=function(e,t){return r[e-=390]})(e,t)}!function(e){const t=Ac,r=e();for(;;)try{if(566143===parseInt(t(403))/1+parseInt(t(395))/2*(-parseInt(t(416))/3)+-parseInt(t(408))/4*(parseInt(t(417))/5)+-parseInt(t(411))/6*(-parseInt(t(413))/7)+-parseInt(t(410))/8*(-parseInt(t(409))/9)+-parseInt(t(391))/10*(parseInt(t(407))/11)+parseInt(t(415))/12)break;r.push(r.shift())}catch(e){r.push(r.shift())}}(Cc);class Ec extends n.Command{[Tc(399)](){const e=Tc,t=this[e(393)][e(405)][e(398)][e(400)][e(392)]();this[e(390)]=Boolean(t&&(t.is(e(401),e(412))||t.is(e(401),e(396))))}[Tc(406)](e){const t=Tc,r=this[t(393)][t(405)][t(398)][t(400)][t(392)]();this[t(393)][t(405)][t(394)](i=>{const o=t;i[o(404)](e,r),i[o(414)](o(397),r),i[o(414)](o(402),r)})}}function Ic(){const e=["1142120iPQBjO","11740yjmGJN","765vuCURY","isOfficialPlugin","ImageUtils","ImageEditing","UploadcareImageEditEditing","3BljCVJ","222116TInGXs","286lnXynB","10zwGqIa","uploadcareImageEdit","3177216FlkwAa","18QlAGhS","requires","102529oQZoPK","pluginName","add","isPremiumPlugin","commands","1497060heREMs","2625362tuBKWq","init","uploadcareImageReplace"];return(Ic=function(){return e})()}const Sc=Mc;function Mc(e,t){const r=Ic();return(Mc=function(e,t){return r[e-=432]})(e,t)}!function(e){const t=Mc,r=e();for(;;)try{if(807930===-parseInt(t(440))/1+-parseInt(t(453))/2*(parseInt(t(439))/3)+-parseInt(t(433))/4*(parseInt(t(434))/5)+parseInt(t(445))/6*(parseInt(t(447))/7)+-parseInt(t(432))/8+parseInt(t(444))/9*(-parseInt(t(442))/10)+-parseInt(t(441))/11*(-parseInt(t(452))/12))break;r.push(r.shift())}catch(e){r.push(r.shift())}}(Ic);class $c extends n.Plugin{static get[Sc(448)](){return Sc(438)}static get[Sc(446)](){const e=Sc;return[ft,c.Notification,e(436),e(437)]}static get[Sc(435)](){return!0}static get[Sc(450)](){return!0}[Sc(454)](){const e=Sc,{editor:t}=this;t[e(451)][e(449)](e(443),new xc(t)),t[e(451)][e(449)](e(455),new Ec(t))}}var Lc=r(70),Rc={attributes:{"data-cke":!0}};Rc.setAttributes=y(),Rc.insert=f().bind(null,"head"),Rc.domAPI=m(),Rc.insertStyleElement=_();p()(Lc.A,Rc);Lc.A&&Lc.A.locals&&Lc.A.locals;class Uc extends n.Plugin{_imageCache=new Map;static get pluginName(){return"UploadcareImageEditUI"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}get imageCache(){return this._imageCache}init(){const e=this.editor;e.ui.componentFactory.add("uploadcareImageEdit",t=>{const r=e.commands.get("uploadcareImageEdit"),i=new c.ButtonView(t),o=t.t;return i.set({icon:s.IconUploadcareImageEdit,tooltip:!0,label:o({id:"Edit Image (Uploadcare)",string:"Edit image"})}),i.bind("isEnabled").to(r),i.bind("isOn").to(r,"isActive"),this.listenTo(i,"execute",()=>{e.execute("uploadcareImageEdit"),e.editing.view.focus()}),i}),this._initConfig()}_initConfig(){const e=(0,L.createElement)(document,"uc-config",{"ctx-name":"image-edit",removeCopyright:"true",localeName:this.editor.locale.contentLanguage});document.body.appendChild(e),this.listenTo(this.editor,"destroy",()=>{e.remove()})}}var Oc=zc;function Pc(){var e=["5183reAUZK","isOfficialPlugin","4DvyclK","801714nLDCMv","73606UjpPta","6600307EkdTFF","8JdTdjT","2122318FIhsgn","UploadcareImageEdit","6ZYOVCJ","4704YlUTYu","8109rjhZnQ","14664wLaZwU","isPremiumPlugin","requires","30IWyfBw","pluginName","1792845niNBdt"];return(Pc=function(){return e})()}function zc(e,t){var r=Pc();return(zc=function(e,t){return r[e-=397]})(e,t)}!function(e){for(var t=zc,r=e();;)try{if(841681===-parseInt(t(402))/1*(parseInt(t(408))/2)+parseInt(t(405))/3*(parseInt(t(404))/4)+-parseInt(t(401))/5+parseInt(t(411))/6*(parseInt(t(407))/7)+parseInt(t(414))/8*(parseInt(t(413))/9)+-parseInt(t(399))/10*(-parseInt(t(409))/11)+parseInt(t(412))/12*(-parseInt(t(406))/13))break;r.push(r.shift())}catch(e){r.push(r.shift())}}(Pc);class Nc extends n.Plugin{static get[Oc(400)](){return Oc(410)}static get[Oc(398)](){return[$c,Uc]}static get[Oc(403)](){return!0}static get[Oc(397)](){return!0}}function Dc(e,t){var r=Fc();return(Dc=function(e,t){return r[e-=149]})(e,t)}function Fc(){var e=["24mgZAWj","1668OXbWBd","1260bGKMGq","155379EFTLsb","1999197hptERi","1uOtpIO","42200eQkugt","181226YPrsfw","1030ksXzFH","9042oUQqeD","558727cdGZyj","84dCshGa","15xurqPK","10OeIPZd"];return(Fc=function(){return e})()}!function(e){for(var t=Dc,r=e();;)try{if(116487===-parseInt(t(151))/1*(parseInt(t(153))/2)+parseInt(t(158))/3*(-parseInt(t(152))/4)+parseInt(t(154))/5*(parseInt(t(162))/6)+-parseInt(t(149))/7*(-parseInt(t(160))/8)+-parseInt(t(150))/9*(parseInt(t(159))/10)+parseInt(t(155))/11*(parseInt(t(161))/12)+-parseInt(t(156))/13*(-parseInt(t(157))/14))break;r.push(r.shift())}catch(e){r.push(r.shift())}}(Fc)})(),(window.CKEditor5=window.CKEditor5||{}).uploadcare=i})();