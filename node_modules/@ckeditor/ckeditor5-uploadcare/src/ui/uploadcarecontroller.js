/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
function _0x5873(){const _0x12c8e8=['4unlVug','369XAEsPq','execute','source-list','image','isOpen','952878ZxeWje','removeSelectionAttribute','focus','editing','imageInline','_type','imageInfo','7RJaxQH','initFlow','setAttribute','get','stopListening','setCurrentActivity','stopDelegating','_dialog','insertImage','allEntries','change','view','382112VtbqeB','getOutputCollectionState','Local','uploadCare','EDITOR_TOP_CENTER','model','selection','configElement','imageBlock','getSelectedElement','_insertAsset','_editor','828BEvjou','_formView','destroy','document','303222EcnkaB','length','element','_editing','idle','removeAllFiles','width','uuid','setSelection','text','ucContextId','89750hHeTfy','plugins','_api','attributes','160270POBNhI','getLastPosition','linkHref','Insert','status','addEventListener','212168CkKkZQ','getAPI','_initListeners','doneFlow','_initDialog','show','_insertImage','detail','hide','ctxElement','Replace','done-click'];_0x5873=function(){return _0x12c8e8;};return _0x5873();}const _0xfdffcc=_0x1af1;(function(_0x18bf2f,_0x163bf6){const _0x268686=_0x1af1,_0x5b4246=_0x18bf2f();while(!![]){try{const _0x3f129b=parseInt(_0x268686(0xf7))/0x1+-parseInt(_0x268686(0x103))/0x2*(-parseInt(_0x268686(0xe2))/0x3)+parseInt(_0x268686(0xde))/0x4+-parseInt(_0x268686(0xf1))/0x5+parseInt(_0x268686(0x109))/0x6+parseInt(_0x268686(0x110))/0x7*(-parseInt(_0x268686(0x11c))/0x8)+parseInt(_0x268686(0x104))/0x9*(-parseInt(_0x268686(0xed))/0xa);if(_0x3f129b===_0x163bf6)break;else _0x5b4246['push'](_0x5b4246['shift']());}catch(_0x267220){_0x5b4246['push'](_0x5b4246['shift']());}}}(_0x5873,0x1ea67));import{IconUploadcareImageUpload as _0x4da5ed}from'ckeditor5/src/icons.js';import{ObservableMixin as _0x1e34e1}from'ckeditor5/src/utils.js';import{Dialog as _0x307bb2,DialogViewPosition as _0x2d29d4}from'ckeditor5/src/ui.js';import{UploadcareFormView as _0x4342a9}from'./uploadcareformview.js';import{UploadcareSource as _0xfa9c5a}from'../uploadcareconfig.js';import{getTranslation as _0x3a73b0}from'../utils/common-translations.js';import{getImageUrls as _0x49d4bb,getImageDimension as _0x120b62}from'../utils/editingutils.js';import{isAncestor as _0x3721b}from'../utils/isancestor.js';function _0x1af1(_0x3e4915,_0x13ee1d){const _0x58731b=_0x5873();return _0x1af1=function(_0x1af1e5,_0x20c919){_0x1af1e5=_0x1af1e5-0xda;let _0x45546c=_0x58731b[_0x1af1e5];return _0x45546c;},_0x1af1(_0x3e4915,_0x13ee1d);}export class UploadcareController extends/* #__PURE__ -- @preserve */
_0x1e34e1(){[_0xfdffcc(0xdd)];[_0xfdffcc(0x117)];[_0xfdffcc(0xe5)];[_0xfdffcc(0xef)];[_0xfdffcc(0x10e)]=null;[_0xfdffcc(0xdf)]=null;constructor(_0x2bba2e,_0xcc8489,_0x7c1d32){const _0x23d2cb=_0xfdffcc;super(),this[_0x23d2cb(0xdd)]=_0x2bba2e,this[_0x23d2cb(0xe5)]=_0xcc8489,this[_0x23d2cb(0x117)]=_0x2bba2e[_0x23d2cb(0xee)][_0x23d2cb(0x113)](_0x307bb2),this[_0x23d2cb(0xef)]=_0xcc8489[_0x23d2cb(0x100)][_0x23d2cb(0xf8)](),this[_0x23d2cb(0x10e)]=_0x7c1d32,this[_0x23d2cb(0xe5)][_0x23d2cb(0x123)][_0x23d2cb(0x112)](_0x23d2cb(0x106),this[_0x23d2cb(0x10e)]),this[_0x23d2cb(0xfb)](),this[_0x23d2cb(0xf9)](),this[_0x23d2cb(0xef)][_0x23d2cb(0x111)]();}[_0xfdffcc(0xe0)](){const _0x5dc316=_0xfdffcc;this[_0x5dc316(0xdf)]&&(this[_0x5dc316(0xdf)][_0x5dc316(0xe0)](),this[_0x5dc316(0xdf)]=null),this[_0x5dc316(0xef)]&&this[_0x5dc316(0xef)][_0x5dc316(0xfa)](),this[_0x5dc316(0x114)](),this[_0x5dc316(0x116)]();}[_0xfdffcc(0xfb)](){const _0x22066d=_0xfdffcc,{locale:_0x1b7182,model:_0x46b886}=this[_0x22066d(0xdd)],_0x340d20=_0x46b886[_0x22066d(0xe1)][_0x22066d(0x122)][_0x22066d(0xdb)](),_0x3db7fe=_0x340d20&&(_0x340d20['is'](_0x22066d(0xe4),_0x22066d(0xda))||_0x340d20['is'](_0x22066d(0xe4),_0x22066d(0x10d)));this[_0x22066d(0xdf)]=new _0x4342a9(_0x1b7182,this[_0x22066d(0xe5)][_0x22066d(0xec)]),this[_0x22066d(0x117)][_0x22066d(0xfc)]({'id':_0x22066d(0x11f),'icon':_0x4da5ed,'title':_0x3a73b0(_0x1b7182,this[_0x22066d(0x10e)],_0x3db7fe?_0x22066d(0x101):_0x22066d(0xf4))[_0x22066d(0xeb)],'content':this[_0x22066d(0xdf)],'position':_0x2d29d4[_0x22066d(0x120)],'isModal':!0x0,'onShow':()=>{const _0x29fc28=_0x22066d;this[_0x29fc28(0xdf)][_0x29fc28(0x10b)]();},'onHide':()=>{const _0x2c28ba=_0x22066d;this[_0x2c28ba(0xef)][_0x2c28ba(0xe7)](),this[_0x2c28ba(0xdd)][_0x2c28ba(0x10c)][_0x2c28ba(0x11b)][_0x2c28ba(0x10b)](),this[_0x2c28ba(0xe0)]();},'keystrokeHandlerOptions':{'filter':_0x3ab1db=>!_0x3721b(_0x3ab1db,this[_0x22066d(0xdf)][_0x22066d(0xe4)])}});}[_0xfdffcc(0xf9)](){const _0x30040c=_0xfdffcc;this[_0x30040c(0xe5)][_0x30040c(0x100)][_0x30040c(0xf6)](_0x30040c(0x102),()=>{const _0xbf831b=_0x30040c,{allEntries:_0x7b085}=this[_0xbf831b(0xef)][_0xbf831b(0x11d)]();this[_0xbf831b(0xdd)][_0xbf831b(0x121)][_0xbf831b(0x11a)](_0x2ae864=>{const _0x4cfcb7=_0xbf831b,_0x4ff75a=_0x7b085[_0x4cfcb7(0xe3)];for(const _0x3d841b of _0x7b085){const _0x52a514=_0x3d841b===_0x7b085[_0x4ff75a-0x1],{cdnUrl:_0xa17e72,fileInfo:_0x505e71}=_0x3d841b;if(!_0xa17e72||!_0x505e71)continue;const {width:_0x354f2e,height:_0x517bfc}=_0x505e71[_0x4cfcb7(0x10f)],_0x482c9e=_0x120b62(_0xa17e72,_0x354f2e,_0x517bfc),_0xd17a0d=_0x49d4bb(_0xa17e72,_0x482c9e[_0x4cfcb7(0xe8)]),_0x214f84={'id':_0x505e71[_0x4cfcb7(0xe9)],'type':_0x4cfcb7(0x107),'attributes':{'imageDimension':_0x482c9e,..._0xd17a0d}};this[_0x4cfcb7(0xdc)](_0x214f84,_0x52a514,_0x2ae864);}}),this[_0xbf831b(0x117)][_0xbf831b(0xff)]();}),this[_0x30040c(0xe5)][_0x30040c(0x100)][_0x30040c(0xf6)](_0x30040c(0x11a),_0x579730=>{const _0x44c36a=_0x30040c;_0x44c36a(0xe6)===_0x579730[_0x44c36a(0xfe)][_0x44c36a(0xf5)]&&!_0x579730[_0x44c36a(0xfe)][_0x44c36a(0x119)][_0x44c36a(0xe3)]&&this[_0x44c36a(0x117)][_0x44c36a(0x108)]&&(this[_0x44c36a(0x10e)]===_0xfa9c5a[_0x44c36a(0x11e)]?this[_0x44c36a(0xef)][_0x44c36a(0x115)](_0xfa9c5a[_0x44c36a(0x11e)]):this[_0x44c36a(0xef)][_0x44c36a(0x111)]());});}[_0xfdffcc(0xdc)](_0x534289,_0xdeaf3,_0x1e2d6e){const _0x3d167c=_0xfdffcc,_0x1e9747=this[_0x3d167c(0xdd)][_0x3d167c(0x121)][_0x3d167c(0xe1)][_0x3d167c(0x122)],_0x50f5ea=_0x1e9747[_0x3d167c(0xdb)](),_0x481925=!(!_0x50f5ea||!_0x50f5ea['is'](_0x3d167c(0xe4),_0x3d167c(0x10d)));_0x1e2d6e[_0x3d167c(0x10a)](_0x3d167c(0xf3)),this[_0x3d167c(0xfd)](_0x534289,_0x481925),_0xdeaf3||_0x1e2d6e[_0x3d167c(0xea)](_0x1e9747[_0x3d167c(0xf2)]());}[_0xfdffcc(0xfd)](_0x20af76,_0x4be1d4){const _0x59cc44=_0xfdffcc,_0x39d9e7=this[_0x59cc44(0xdd)],{imageDimension:_0x194a04,imageFallbackUrl:_0x4a6822,imageSources:_0x209827}=_0x20af76[_0x59cc44(0xf0)];_0x39d9e7[_0x59cc44(0x105)](_0x59cc44(0x118),{'imageType':_0x4be1d4?_0x59cc44(0x10d):null,'source':{'uploadcareImageId':_0x20af76['id'],'src':_0x4a6822,'sources':_0x209827,..._0x194a04}});}}