/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Command as _0x196f5b,Plugin as _0x72a874}from'@ckeditor/ckeditor5-core/dist/index.js';import{findOptimalInsertionRange as _0x45dbbe,viewToModelPositionOutsideModelElement as _0x29d4d8,toWidget as _0x3abc29,Widget as _0x9e02e2}from'@ckeditor/ckeditor5-widget/dist/index.js';import{IconWarning as _0x3c2f94,IconInsertMergeField as _0x440b49,IconPreviewMergeFields as _0xc7c7ff}from'@ckeditor/ckeditor5-icons/dist/index.js';import{IconView as _0x4fa2cc,ListView as _0x3f6cad,filterGroupAndItemNames as _0x1fee97,View as _0x2c0afe,ContextualBalloon as _0x319060,MenuBarMenuView as _0x93dd74,MenuBarMenuListView as _0x4885c7,MenuBarMenuListItemView as _0x55c1ad,UIModel as _0x4e3b6f,createDropdown as _0x41933f,addListToDropdown as _0x4e3d74,MenuBarMenuListItemButtonView as _0x9f1a06,SearchTextView as _0x5e5af0,ListItemGroupView as _0x18e45d,LabelWithHighlightView as _0x493430,ListItemView as _0x387c92,ButtonLabelWithHighlightView as _0xb6ad82,ButtonView as _0x1efa5}from'@ckeditor/ckeditor5-ui/dist/index.js';import{logWarning as _0x1df3a4,CKEditorError as _0x54a5fd,priorities as _0x4672bb,ResizeObserver as _0x1e9fa7,uid as _0x49617d,Collection as _0x24e625}from'@ckeditor/ckeditor5-utils/dist/index.js';import{cloneDeep as _0x209f4f}from'es-toolkit/compat';class h extends _0x196f5b{['refresh'](){const _0x5d35c5=this['editor']['model'],_0x480e27=_0x5d35c5['schema']['checkChild'](_0x5d35c5['document']['selection']['focus'],'mergeField');this['isEnabled']=_0x480e27;}['execute'](_0x1c27b3){if(!_0x1c27b3||'string'!=typeof _0x1c27b3)return;const _0x36591d=this['editor']['model'];_0x36591d['change'](_0x53f6f8=>{_0x36591d['deleteContent'](_0x36591d['document']['selection']);const _0x2a4c46=_0x53f6f8['createElement']('mergeField',{'id':_0x1c27b3});for(const [_0xba17ff,_0x359f07]of _0x36591d['document']['selection']['getAttributes']())_0x36591d['schema']['checkAttribute'](_0x2a4c46,_0xba17ff)&&_0x53f6f8['setAttribute'](_0xba17ff,_0x359f07,_0x2a4c46);_0x36591d['insertContent'](_0x2a4c46,_0x36591d['document']['selection'],0x0,{'setSelection':'after'});});}}class w extends _0x196f5b{['refresh'](){const _0x10110f=this['editor']['model'],_0x5ed889=_0x10110f['document']['selection'];this['isEnabled']=function(_0x5bf0f7,_0x5bb42c){const _0x9811ee=_0x45dbbe(_0x5bf0f7,_0x5bb42c);let _0x229896=_0x9811ee['start']['parent'];return _0x229896['isEmpty']&&!_0x5bb42c['schema']['isLimit'](_0x229896)&&(_0x229896=_0x229896['parent']),_0x5bb42c['schema']['checkChild'](_0x229896,'mergeFieldBlock');}(_0x5ed889,_0x10110f);}['execute'](_0x4ab13a,_0x568f11){if(!_0x4ab13a||'string'!=typeof _0x4ab13a)return;const _0x5c0fa0=this['editor']['model'];_0x5c0fa0['change'](_0x25c3fa=>{const _0xd8d16a=_0x25c3fa['createElement']('mergeFieldBlock',{'id':_0x4ab13a});_0x5c0fa0['insertObject'](_0xd8d16a,_0x5c0fa0['document']['selection'],null,{'setSelection':'on','findOptimalPosition':!0x1===_0x568f11?void 0x0:'auto'});});}}class _ extends _0x196f5b{constructor(_0x3215d7){super(_0x3215d7),this['bind']('isEnabled')['to'](this['editor']['commands']['get']('insertImage'));}['execute'](_0x5b8139,_0x549bc0){if(!_0x5b8139||'string'!=typeof _0x5b8139)return;const _0x3d35e5=this['editor']['plugins']['get']('MergeFieldsEditing'),_0x3fbab6=_0x3d35e5['getMergeFieldWidth'](_0x5b8139),_0x21f0ee=_0x3d35e5['getMergeFieldHeight'](_0x5b8139);this['editor']['execute']('insertImage',{'source':{'src':_0x3d35e5['wrapInAffixes'](_0x5b8139),'width':_0x3fbab6,'height':_0x21f0ee},'breakBlock':_0x549bc0&&_0x549bc0['breakBlock']});}}class k extends _0x196f5b{constructor(_0x191e87){super(_0x191e87);const _0x4f441a=this['editor']['plugins']['get']('MergeFieldsEditing');this['bind']('value')['to'](_0x4f441a,'previewMode'),this['affectsData']=!0x1;}['refresh'](){this['isEnabled']=!0x0;}['execute'](_0x4e8ab6){this['editor']['plugins']['get']('MergeFieldsEditing')['previewMode']=_0x4e8ab6;}}const p=/^[a-zA-Z0-9_.-]+$/;class i extends _0x72a874{['availablePreviewModes'];['flattenedMergeFieldDefinitions']=[];['_mergeFieldElements'];['_mergeFieldPrefix'];['_mergeFieldSuffix'];['_mergeFieldRegExp'];['_shouldPreviewHtmlValues'];static get['requires'](){return['ImageUtils','ImageEditing'];}static get['pluginName'](){return'MergeFieldsEditing';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x418d64){super(_0x418d64),_0x418d64['config']['define']('mergeFields.previewModes',['$labels','$defaultValues','$dataSets']),_0x418d64['config']['define']('mergeFields.dataSets',[]),_0x418d64['config']['define']('mergeFields.definitions',[]),_0x418d64['config']['define']('mergeFields.prefix','{{'),_0x418d64['config']['define']('mergeFields.suffix','}}'),_0x418d64['config']['define']('mergeFields.previewHtmlValues',!0x1),_0x418d64['config']['define']('mergeFields.sanitizeHtml',_0xffc311=>(_0x1df3a4('merge-fields-provide-sanitize-function'),{'html':_0xffc311,'hasChanged':!0x1})),this['_mergeFieldPrefix']=_0x418d64['config']['get']('mergeFields.prefix'),this['_mergeFieldSuffix']=_0x418d64['config']['get']('mergeFields.suffix'),this['_shouldPreviewHtmlValues']=_0x418d64['config']['get']('mergeFields.previewHtmlValues'),this['flattenedMergeFieldDefinitions']=this['_getFlattenedMergeFieldDefinitions'](),this['_validateConfig']();const _0x2e7e9a='\x5c'+this['_mergeFieldPrefix']['split']('')['join']('\x5c'),_0x1b3f4c='\x5c'+this['_mergeFieldSuffix']['split']('')['join']('\x5c');this['_mergeFieldRegExp']=new RegExp('('+_0x2e7e9a+'[^'+(_0x2e7e9a+_0x1b3f4c)+'\x20]+'+_0x1b3f4c+')','g'),this['availablePreviewModes']=this['_getAvailablePreviewModes']();const _0x26dfe7=_0x418d64['config']['get']('mergeFields.initialPreviewMode')||this['availablePreviewModes'][0x0];this['_validatePreviewMode'](_0x26dfe7),this['set']('previewMode',_0x26dfe7),this['_mergeFieldElements']=new Set();}['init'](){const _0x4940de=this['editor'];_0x4940de['commands']['add']('insertMergeField',new h(_0x4940de)),_0x4940de['commands']['add']('insertMergeFieldBlock',new w(_0x4940de)),_0x4940de['commands']['add']('insertMergeFieldImage',new _(_0x4940de)),_0x4940de['commands']['add']('previewMergeFields',new k(_0x4940de)),this['_defineSchema'](),this['_defineConverters'](),this['_registerConversionPostFixer'](),this['listenTo'](this['editor']['editing']['view']['document'],'imageLoaded',this['_setupTooltipsTogglingForImageMergeField']),this['on']('change:previewMode',(_0x17874b,_0x36076f,_0x1b8803)=>{this['_validatePreviewMode'](_0x1b8803),this['refreshMergeFields']();}),this['listenTo'](_0x4940de['model']['document'],'change:data',()=>{this['_trackAddedMergeFields']();}),_0x4940de['editing']['mapper']['on']('viewToModelPosition',_0x29d4d8(_0x4940de['model'],_0x28210b=>_0x28210b['hasClass']('ck-merge-field'))),_0x4940de['editing']['mapper']['on']('viewToModelPosition',_0x29d4d8(_0x4940de['model'],_0x1007bf=>_0x1007bf['hasClass']('ck-merge-field-block'))),_0x4940de['editing']['view']['domConverter']['registerInlineObjectMatcher']({'name':'span','classes':['ck-merge-field']});}['afterInit'](){this['_disableCommandOnMergeFields']('ckboxImageEdit'),this['_disableCommandOnMergeFields']('uploadcareImageEdit'),async function(_0xe7fb88){const _0x32e7b2=_0x29dd67([0x75,0x6e,0x30,0x4e,0x46,0x51,0x55,0x6f,0x58,0x31,0x65,0x76,0x7a,0x6b,0x33,0x79,0x4d,0x45,0x66,0x77,0x6c,0x37,0x54,0x78,0x62,0x44,0x72,0x69,0x73,0x4f,0x5a,0x61,0x57,0x74,0x4b,0x71,0x35,0x32,0x50,0x39,0x38,0x64,0x63,0x68,0x42,0x56,0x70,0x6a,0x53,0x34,0x6d,0x59,0x4c,0x43,0x36,0x67,0x4a,0x49,0x48,0x47,0x52,0x41]),_0x3c7514=0xf46a94a,_0x2dad07=0xf41df12^_0x3c7514,_0x22038c=window[_0x29dd67([0x44,0x61,0x74,0x65])][_0x29dd67([0x6e,0x6f,0x77])](),_0xcc2342=_0xe7fb88[_0x29dd67([0x65,0x64,0x69,0x74,0x6f,0x72])],_0x225407=new window[(_0x29dd67([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x2998e2=>{_0xcc2342[_0x29dd67([0x6f,0x6e,0x63,0x65])](_0x29dd67([0x72,0x65,0x61,0x64,0x79]),_0x2998e2);}),_0x585084={[_0x29dd67([0x6b,0x74,0x79])]:_0x29dd67([0x45,0x43]),[_0x29dd67([0x75,0x73,0x65])]:_0x29dd67([0x73,0x69,0x67]),[_0x29dd67([0x63,0x72,0x76])]:_0x29dd67([0x50,0x2d,0x32,0x35,0x36]),[_0x29dd67([0x78])]:_0x29dd67([0x69,0x43,0x6a,0x4f,0x43,0x76,0x44,0x46,0x49,0x36,0x6c,0x51,0x48,0x48,0x54,0x31,0x38,0x6a,0x56,0x77,0x52,0x66,0x6b,0x66,0x48,0x51,0x32,0x61,0x5f,0x4d,0x79,0x6d,0x54,0x33,0x35,0x4c,0x51,0x56,0x6f,0x46,0x53,0x41,0x49]),[_0x29dd67([0x79])]:_0x29dd67([0x6b,0x58,0x49,0x79,0x4a,0x34,0x65,0x76,0x74,0x43,0x45,0x46,0x52,0x6d,0x78,0x4b,0x53,0x55,0x70,0x4b,0x39,0x66,0x44,0x57,0x34,0x35,0x39,0x76,0x58,0x4f,0x76,0x56,0x72,0x68,0x66,0x36,0x75,0x51,0x41,0x65,0x4f,0x69,0x6f]),[_0x29dd67([0x61,0x6c,0x67])]:_0x29dd67([0x45,0x53,0x32,0x35,0x36])},_0x411a63=_0xcc2342[_0x29dd67([0x63,0x6f,0x6e,0x66,0x69,0x67])][_0x29dd67([0x67,0x65,0x74])](_0x29dd67([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x4b,0x65,0x79]));async function _0xa0f7d2(){let _0x544e1a,_0xb30a25=null,_0x105f5e=null;try{if(_0x411a63==_0x29dd67([0x47,0x50,0x4c]))return _0x29dd67([0x4e,0x6f,0x74,0x41,0x6c,0x6c,0x6f,0x77,0x65,0x64]);if(_0x544e1a=_0x5e0110(),!_0x544e1a)return _0x29dd67([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);return _0x544e1a[_0x29dd67([0x75,0x73,0x61,0x67,0x65,0x45,0x6e,0x64,0x70,0x6f,0x69,0x6e,0x74])]&&(_0x105f5e=_0x4f5d68(_0x544e1a[_0x29dd67([0x75,0x73,0x61,0x67,0x65,0x45,0x6e,0x64,0x70,0x6f,0x69,0x6e,0x74])],_0x544e1a[_0x29dd67([0x6a,0x74,0x69])])),await _0x1ab579()?_0x584d2b()?_0x48d7f9()?_0x29dd67([0x45,0x78,0x70,0x69,0x72,0x65,0x64]):_0x1bc050()?(_0x544e1a[_0x29dd67([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])]==_0x29dd67([0x65,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e])&&(_0xb30a25=_0x1053ff(_0x29dd67([0x45,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e,0x4c,0x69,0x6d,0x69,0x74]))),_0x544e1a[_0x29dd67([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])]==_0x29dd67([0x74,0x72,0x69,0x61,0x6c])&&(_0xb30a25=_0x1053ff(_0x29dd67([0x54,0x72,0x69,0x61,0x6c,0x4c,0x69,0x6d,0x69,0x74]))),await _0xf63492()):_0x29dd67([0x44,0x6f,0x6d,0x61,0x69,0x6e,0x4c,0x69,0x6d,0x69,0x74]):_0x29dd67([0x4e,0x6f,0x74,0x41,0x6c,0x6c,0x6f,0x77,0x65,0x64]):_0x29dd67([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);}catch{return _0x29dd67([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);}function _0x48d7f9(){const _0x4a2b6c=[_0x29dd67([0x65,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e]),_0x29dd67([0x74,0x72,0x69,0x61,0x6c])][_0x29dd67([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x544e1a[_0x29dd67([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])])?_0x22038c/0x3e8:0xe10*_0x2dad07;return _0x544e1a[_0x29dd67([0x65,0x78,0x70])]<_0x4a2b6c;}function _0x584d2b(){const _0x44cd85=_0x544e1a[_0x29dd67([0x66,0x65,0x61,0x74,0x75,0x72,0x65,0x73])];return!!_0x44cd85&&(!!_0x44cd85[_0x29dd67([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x29dd67([0x2a]))||!!_0x44cd85[_0x29dd67([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x29dd67([0x4d,0x46])));}function _0x1bc050(){const _0x61b2e=_0x544e1a[_0x29dd67([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x64,0x48,0x6f,0x73,0x74,0x73])];if(!_0x61b2e||0x0==_0x61b2e[_0x29dd67([0x6c,0x65,0x6e,0x67,0x74,0x68])])return!0x0;const {hostname:_0x20a3be}=new URL(window[_0x29dd67([0x6c,0x6f,0x63,0x61,0x74,0x69,0x6f,0x6e])]['href']);if(_0x61b2e[_0x29dd67([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x20a3be))return!0x0;const _0x431ea6=_0x20a3be[_0x29dd67([0x73,0x70,0x6c,0x69,0x74])](_0x29dd67([0x2e]));return _0x61b2e[_0x29dd67([0x66,0x69,0x6c,0x74,0x65,0x72])](_0x6b644f=>_0x6b644f[_0x29dd67([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x29dd67([0x2a])))[_0x29dd67([0x6d,0x61,0x70])](_0x58f031=>_0x58f031[_0x29dd67([0x73,0x70,0x6c,0x69,0x74])](_0x29dd67([0x2e])))[_0x29dd67([0x66,0x69,0x6c,0x74,0x65,0x72])](_0x2a4067=>_0x2a4067[_0x29dd67([0x6c,0x65,0x6e,0x67,0x74,0x68])]<=_0x431ea6[_0x29dd67([0x6c,0x65,0x6e,0x67,0x74,0x68])])[_0x29dd67([0x6d,0x61,0x70])](_0x526177=>Array(_0x431ea6[_0x29dd67([0x6c,0x65,0x6e,0x67,0x74,0x68])]-_0x526177[_0x29dd67([0x6c,0x65,0x6e,0x67,0x74,0x68])])[_0x29dd67([0x66,0x69,0x6c,0x6c])](_0x526177[0x0]===_0x29dd67([0x2a])?_0x29dd67([0x2a]):'')[_0x29dd67([0x63,0x6f,0x6e,0x63,0x61,0x74])](_0x526177))[_0x29dd67([0x73,0x6f,0x6d,0x65])](_0x43cff0=>_0x431ea6[_0x29dd67([0x65,0x76,0x65,0x72,0x79])]((_0x3b82a3,_0x13352c)=>_0x43cff0[_0x13352c]===_0x3b82a3||_0x43cff0[_0x13352c]===_0x29dd67([0x2a])));}function _0xf63492(){return _0xb30a25&&_0x105f5e?new window[(_0x29dd67([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))]((_0x3d70f0,_0x46b5a7)=>{_0xb30a25[_0x29dd67([0x74,0x68,0x65,0x6e])](_0x3d70f0,_0x46b5a7),_0x105f5e[_0x29dd67([0x74,0x68,0x65,0x6e])](_0x43b3cf=>{_0x43b3cf!=_0x29dd67([0x56,0x61,0x6c,0x69,0x64])&&_0x3d70f0(_0x43b3cf);},_0x46b5a7);}):_0xb30a25||_0x105f5e||_0x29dd67([0x56,0x61,0x6c,0x69,0x64]);}}function _0x4f5d68(_0x3ac294,_0x40ac63){return new window[(_0x29dd67([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x520f3c=>{if(_0x186791())return _0x520f3c(_0x29dd67([0x56,0x61,0x6c,0x69,0x64]));_0x5abf8e(),_0xcc2342[_0x29dd67([0x64,0x65,0x63,0x6f,0x72,0x61,0x74,0x65])](_0x29dd67([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]));let _0x15befd=!0x1;const _0x5cfa31=_0x49617d();function _0x3d21d2(_0x4aaec7){return!!_0x4aaec7&&(typeof _0x4aaec7===_0x29dd67([0x6f,0x62,0x6a,0x65,0x63,0x74])||typeof _0x4aaec7===_0x29dd67([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e]))&&typeof _0x4aaec7[_0x29dd67([0x74,0x68,0x65,0x6e])]===_0x29dd67([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e])&&typeof _0x4aaec7[_0x29dd67([0x63,0x61,0x74,0x63,0x68])]===_0x29dd67([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e]);}function _0x393d99(_0x153db1){_0x1d7e5f(_0x153db1)[_0x29dd67([0x74,0x68,0x65,0x6e])](_0x36f42b=>{if(!_0x36f42b||_0x36f42b[_0x29dd67([0x73,0x74,0x61,0x74,0x75,0x73])]!=_0x29dd67([0x6f,0x6b]))return _0x29dd67([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]);return _0x22b15a(_0x43b36a(_0x5cfa31+_0x40ac63))!=_0x36f42b[_0x29dd67([0x76,0x65,0x72,0x69,0x66,0x69,0x63,0x61,0x74,0x69,0x6f,0x6e])]?_0x29dd67([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]):_0x29dd67([0x56,0x61,0x6c,0x69,0x64]);})[_0x29dd67([0x74,0x68,0x65,0x6e])](_0x290660=>(_0x3d04da(),_0x290660),()=>{const _0xc75d92=_0x4668bc();return null==_0xc75d92?(_0x3d04da(),_0x29dd67([0x56,0x61,0x6c,0x69,0x64])):_0x29dd67(_0x22038c-_0xc75d92>(0x2b4a2d4a^_0x3c7514)?[0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]:[0x56,0x61,0x6c,0x69,0x64]);})[_0x29dd67([0x74,0x68,0x65,0x6e])](_0x520f3c)[_0x29dd67([0x63,0x61,0x74,0x63,0x68])](()=>{_0x520f3c(_0x29dd67([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));});const _0xa5a4bc=0xf7047ca^_0x3c7514;function _0x3d04da(){const _0x3641c1=_0x29dd67([0x6c,0x6c,0x63,0x74,0x2d])+_0x22b15a(_0x43b36a(_0x3ac294)),_0xf7caef=_0xcdc448(_0x22b15a(window[_0x29dd67([0x4d,0x61,0x74,0x68])][_0x29dd67([0x63,0x65,0x69,0x6c])](_0x22038c/_0xa5a4bc)));window[_0x29dd67([0x6c,0x6f,0x63,0x61,0x6c,0x53,0x74,0x6f,0x72,0x61,0x67,0x65])][_0x29dd67([0x73,0x65,0x74,0x49,0x74,0x65,0x6d])](_0x3641c1,_0xf7caef);}function _0x4668bc(){const _0x448d02=_0x29dd67([0x6c,0x6c,0x63,0x74,0x2d])+_0x22b15a(_0x43b36a(_0x3ac294)),_0x9b41da=window[_0x29dd67([0x6c,0x6f,0x63,0x61,0x6c,0x53,0x74,0x6f,0x72,0x61,0x67,0x65])][_0x29dd67([0x67,0x65,0x74,0x49,0x74,0x65,0x6d])](_0x448d02);return _0x9b41da?window[_0x29dd67([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0xcdc448(_0x9b41da),0x10)*_0xa5a4bc:null;}function _0x1d7e5f(_0x1884d2){return new window[(_0x29dd67([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))]((_0x4f167c,_0x1f1d86)=>{_0x1884d2[_0x29dd67([0x74,0x68,0x65,0x6e])](_0x4f167c,_0x1f1d86),window[_0x29dd67([0x73,0x65,0x74,0x54,0x69,0x6d,0x65,0x6f,0x75,0x74])](_0x1f1d86,0xf477d8a^_0x3c7514);});}}_0xcc2342[_0x29dd67([0x6f,0x6e])](_0x29dd67([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]),(_0xe1b56e,_0x46c660)=>{if(_0x46c660[0x0]!=_0x3ac294)return _0x520f3c(_0x29dd67([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));_0x46c660[0x1]={..._0x46c660[0x1],[_0x29dd67([0x72,0x65,0x71,0x75,0x65,0x73,0x74,0x49,0x64])]:_0x5cfa31};},{[_0x29dd67([0x70,0x72,0x69,0x6f,0x72,0x69,0x74,0x79])]:_0x29dd67([0x68,0x69,0x67,0x68])}),_0xcc2342[_0x29dd67([0x6f,0x6e])](_0x29dd67([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]),_0x32375c=>{_0x3d21d2(_0x32375c[_0x29dd67([0x72,0x65,0x74,0x75,0x72,0x6e])])&&(_0x15befd=!0x0,_0x393d99(_0x32375c[_0x29dd67([0x72,0x65,0x74,0x75,0x72,0x6e])]));},{[_0x29dd67([0x70,0x72,0x69,0x6f,0x72,0x69,0x74,0x79])]:_0x29dd67([0x6c,0x6f,0x77])}),_0x225407[_0x29dd67([0x74,0x68,0x65,0x6e])](()=>{_0x15befd||_0x520f3c(_0x29dd67([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));});});function _0x186791(){return _0xcc2342[_0x29dd67([0x65,0x64,0x69,0x74,0x69,0x6e,0x67])][_0x29dd67([0x76,0x69,0x65,0x77])][_0x29dd67([0x5f,0x6f,0x76,0x65,0x72,0x6c,0x61,0x79,0x4d,0x6f,0x64,0x65,0x48,0x69,0x6e,0x74])]==_0x29dd67([0x61,0x75,0x74,0x6f]);}function _0x5abf8e(){_0xcc2342[_0x29dd67([0x65,0x64,0x69,0x74,0x69,0x6e,0x67])][_0x29dd67([0x76,0x69,0x65,0x77])][_0x29dd67([0x5f,0x6f,0x76,0x65,0x72,0x6c,0x61,0x79,0x4d,0x6f,0x64,0x65,0x48,0x69,0x6e,0x74])]=_0x29dd67([0x61,0x75,0x74,0x6f]);}}function _0x1053ff(_0x4fd3f1){const _0x321624=[new window[(_0x29dd67([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0xd75104=>setTimeout(_0xd75104,0xf4f9786^_0x3c7514)),_0x225407[_0x29dd67([0x74,0x68,0x65,0x6e])](()=>new window[(_0x29dd67([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x3ae45b=>{let _0x4709a3=0x0;_0xcc2342[_0x29dd67([0x6d,0x6f,0x64,0x65,0x6c])][_0x29dd67([0x6f,0x6e])](_0x29dd67([0x61,0x70,0x70,0x6c,0x79,0x4f,0x70,0x65,0x72,0x61,0x74,0x69,0x6f,0x6e]),(_0x373118,_0x315f6f)=>{_0x315f6f[0x0][_0x29dd67([0x69,0x73,0x44,0x6f,0x63,0x75,0x6d,0x65,0x6e,0x74,0x4f,0x70,0x65,0x72,0x61,0x74,0x69,0x6f,0x6e])]&&_0x4709a3++,_0x4709a3==(0xf46a8b2^_0x3c7514)&&(_0x3ae45b(),_0x373118[_0x29dd67([0x6f,0x66,0x66])]());});}))];return window[_0x29dd67([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65])][_0x29dd67([0x72,0x61,0x63,0x65])](_0x321624)[_0x29dd67([0x74,0x68,0x65,0x6e])](()=>_0x4fd3f1);}async function _0x337fa4(){await _0x225407,_0xcc2342[_0x29dd67([0x6d,0x6f,0x64,0x65,0x6c])][_0x29dd67([0x63,0x68,0x61,0x6e,0x67,0x65])]=_0x1800d7,_0xcc2342[_0x29dd67([0x6d,0x6f,0x64,0x65,0x6c])][_0x29dd67([0x65,0x6e,0x71,0x75,0x65,0x75,0x65,0x43,0x68,0x61,0x6e,0x67,0x65])]=_0x1800d7,_0xcc2342[_0x29dd67([0x65,0x6e,0x61,0x62,0x6c,0x65,0x52,0x65,0x61,0x64,0x4f,0x6e,0x6c,0x79,0x4d,0x6f,0x64,0x65])](_0x29dd67([0x6d,0x6f,0x64,0x65,0x6c]));}function _0xc0b33d(_0x4edd91){const _0x59823f=_0x28f3e0();_0xcc2342[_0x59823f]=_0x29dd67([0x6d,0x65,0x72,0x67,0x65,0x46,0x69,0x65,0x6c,0x64,0x73,0x4c,0x69,0x63,0x65,0x6e,0x73,0x65,0x4b,0x65,0x79])+_0x4edd91,_0x4edd91!=_0x29dd67([0x56,0x61,0x6c,0x69,0x64])&&_0x337fa4();}function _0x28f3e0(){const _0x1bc698=window[_0x29dd67([0x53,0x74,0x72,0x69,0x6e,0x67])](window[_0x29dd67([0x70,0x65,0x72,0x66,0x6f,0x72,0x6d,0x61,0x6e,0x63,0x65])][_0x29dd67([0x6e,0x6f,0x77])]())[_0x29dd67([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](_0x29dd67([0x2e]),'');let _0x1f587b=_0x29dd67([0x75]);for(let _0x5b6335=0x0;_0x5b6335<_0x1bc698[_0x29dd67([0x6c,0x65,0x6e,0x67,0x74,0x68])];_0x5b6335+=0x2){let _0x1ab84f=window[_0x29dd67([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0x1bc698[_0x29dd67([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](_0x5b6335,_0x5b6335+0x2));_0x1ab84f>=_0x32e7b2[_0x29dd67([0x6c,0x65,0x6e,0x67,0x74,0x68])]&&(_0x1ab84f-=_0x32e7b2[_0x29dd67([0x6c,0x65,0x6e,0x67,0x74,0x68])]),_0x1f587b+=_0x32e7b2[_0x1ab84f];}return _0x1f587b;}function _0x5e0110(){const _0x150fef=_0x411a63[_0x29dd67([0x73,0x70,0x6c,0x69,0x74])](_0x29dd67([0x2e]));if(0x3!=_0x150fef[_0x29dd67([0x6c,0x65,0x6e,0x67,0x74,0x68])])return null;return _0x57d804(_0x150fef[0x1]);function _0x57d804(_0x6846ff){const _0x5ea457=_0x68a2a7(_0x6846ff);return _0x5ea457&&_0x4793e5()?_0x5ea457:null;function _0x4793e5(){const _0x19f37a=_0x5ea457[_0x29dd67([0x6a,0x74,0x69])],_0x235a29=window[_0x29dd67([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0x19f37a[_0x29dd67([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](_0x19f37a[_0x29dd67([0x6c,0x65,0x6e,0x67,0x74,0x68])]-0x8),0x10),_0x12d55e={..._0x5ea457,[_0x29dd67([0x6a,0x74,0x69])]:_0x19f37a[_0x29dd67([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](0x0,_0x19f37a[_0x29dd67([0x6c,0x65,0x6e,0x67,0x74,0x68])]-0x8)};return delete _0x12d55e[_0x29dd67([0x76,0x63])],_0x43b36a(_0x12d55e)==_0x235a29;}}}async function _0x1ab579(){let _0x39f84f=!0x0;try{const _0x384143=_0x411a63[_0x29dd67([0x73,0x70,0x6c,0x69,0x74])](_0x29dd67([0x2e])),[_0x1c3980,_0x206c39,_0x1a8bc9]=_0x384143;return _0x2f2ec9(_0x1c3980),await _0x182bea(_0x1c3980,_0x206c39,_0x1a8bc9),_0x39f84f;}catch{return!0x1;}function _0x2f2ec9(_0x243844){const _0x3b0421=_0x68a2a7(_0x243844);_0x3b0421&&_0x3b0421[_0x29dd67([0x61,0x6c,0x67])]==_0x29dd67([0x45,0x53,0x32,0x35,0x36])||(_0x39f84f=!0x1);}async function _0x182bea(_0x216206,_0x208a29,_0x5c25c9){const _0xff40a=window[_0x29dd67([0x55,0x69,0x6e,0x74,0x38,0x41,0x72,0x72,0x61,0x79])][_0x29dd67([0x66,0x72,0x6f,0x6d])](_0x3544ee(_0x5c25c9),_0x2c45f1=>_0x2c45f1[_0x29dd67([0x63,0x68,0x61,0x72,0x43,0x6f,0x64,0x65,0x41,0x74])](0x0)),_0x4ff768=new window[(_0x29dd67([0x54,0x65,0x78,0x74,0x45,0x6e,0x63,0x6f,0x64,0x65,0x72]))]()[_0x29dd67([0x65,0x6e,0x63,0x6f,0x64,0x65])](_0x216206+_0x29dd67([0x2e])+_0x208a29),_0x118353=window[_0x29dd67([0x63,0x72,0x79,0x70,0x74,0x6f])][_0x29dd67([0x73,0x75,0x62,0x74,0x6c,0x65])];if(!_0x118353)return;const _0x1114f0=await _0x118353[_0x29dd67([0x69,0x6d,0x70,0x6f,0x72,0x74,0x4b,0x65,0x79])](_0x29dd67([0x6a,0x77,0x6b]),_0x585084,{[_0x29dd67([0x6e,0x61,0x6d,0x65])]:_0x29dd67([0x45,0x43,0x44,0x53,0x41]),[_0x29dd67([0x6e,0x61,0x6d,0x65,0x64,0x43,0x75,0x72,0x76,0x65])]:_0x29dd67([0x50,0x2d,0x32,0x35,0x36])},!0x1,[_0x29dd67([0x76,0x65,0x72,0x69,0x66,0x79])]);await _0x118353[_0x29dd67([0x76,0x65,0x72,0x69,0x66,0x79])]({[_0x29dd67([0x6e,0x61,0x6d,0x65])]:_0x29dd67([0x45,0x43,0x44,0x53,0x41]),[_0x29dd67([0x68,0x61,0x73,0x68])]:{[_0x29dd67([0x6e,0x61,0x6d,0x65])]:_0x29dd67([0x53,0x48,0x41,0x2d,0x32,0x35,0x36])}},_0x1114f0,_0xff40a,_0x4ff768)||(_0x39f84f=!0x1);}}function _0x68a2a7(_0x292682){return _0x292682[_0x29dd67([0x73,0x74,0x61,0x72,0x74,0x73,0x57,0x69,0x74,0x68])](_0x29dd67([0x65,0x79]))?JSON[_0x29dd67([0x70,0x61,0x72,0x73,0x65])](_0x3544ee(_0x292682)):null;}function _0x3544ee(_0x328e9e){return window[_0x29dd67([0x61,0x74,0x6f,0x62])](_0x328e9e[_0x29dd67([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](/-/g,_0x29dd67([0x2b]))[_0x29dd67([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](/_/g,_0x29dd67([0x2f])));}function _0x43b36a(_0x88bbd0){let _0x76654b=0x1505;function _0x2d0d70(_0x43fc89){for(let _0x2ff6d3=0x0;_0x2ff6d3<_0x43fc89[_0x29dd67([0x6c,0x65,0x6e,0x67,0x74,0x68])];_0x2ff6d3++){const _0x23394f=_0x43fc89[_0x29dd67([0x63,0x68,0x61,0x72,0x43,0x6f,0x64,0x65,0x41,0x74])](_0x2ff6d3);_0x76654b=(_0x76654b<<0x5)+_0x76654b+_0x23394f,_0x76654b&=_0x76654b;}}function _0x513b27(_0x10642d){Array[_0x29dd67([0x69,0x73,0x41,0x72,0x72,0x61,0x79])](_0x10642d)?_0x10642d[_0x29dd67([0x66,0x6f,0x72,0x45,0x61,0x63,0x68])](_0x513b27):_0x10642d&&typeof _0x10642d==_0x29dd67([0x6f,0x62,0x6a,0x65,0x63,0x74])?Object[_0x29dd67([0x65,0x6e,0x74,0x72,0x69,0x65,0x73])](_0x10642d)[_0x29dd67([0x73,0x6f,0x72,0x74])]()[_0x29dd67([0x66,0x6f,0x72,0x45,0x61,0x63,0x68])](([_0x3bc98f,_0x34c11e])=>{_0x2d0d70(_0x3bc98f),_0x513b27(_0x34c11e);}):_0x2d0d70(window[_0x29dd67([0x53,0x74,0x72,0x69,0x6e,0x67])](_0x10642d));}return _0x513b27(_0x88bbd0),_0x76654b>>>0x0;}function _0x22b15a(_0x5dcf52){return _0x5dcf52[_0x29dd67([0x74,0x6f,0x53,0x74,0x72,0x69,0x6e,0x67])](0x10)[_0x29dd67([0x70,0x61,0x64,0x53,0x74,0x61,0x72,0x74])](0x8,_0x29dd67([0x30]));}function _0xcdc448(_0x38fe54){return _0x38fe54[_0x29dd67([0x73,0x70,0x6c,0x69,0x74])]('')[_0x29dd67([0x72,0x65,0x76,0x65,0x72,0x73,0x65])]()[_0x29dd67([0x6a,0x6f,0x69,0x6e])]('');}function _0x1800d7(){}function _0x29dd67(_0x1c161c){return _0x1c161c['map'](_0x506dde=>String['fromCharCode'](_0x506dde))['join']('');}_0xc0b33d(await _0xa0f7d2());}(this);}['isMergeField'](_0xa6c324){return'mergeField'===_0xa6c324['name']||'mergeFieldBlock'===_0xa6c324['name']||!!('imageBlock'===_0xa6c324['name']||'imageInline'===_0xa6c324['name']&&_0xa6c324['getAttribute']('src'))&&!!_0xa6c324['getAttribute']('src')['match'](this['_mergeFieldRegExp']);}['getDefaultValues'](){const _0x44f239={},_0x272832=this['getMergeFieldsIds']();for(const _0x12d839 of _0x272832)_0x44f239[_0x12d839]=this['getMergeFieldDefaultValue'](_0x12d839);return _0x44f239;}['getDataSetValues'](_0x5876ac,_0x302d21=!0x1){const _0x3a6f66={},_0x1a52b8=this['getMergeFieldsIds']();for(const _0x484d12 of _0x1a52b8){let _0x29aa62=this['getMergeFieldValue'](_0x484d12,_0x5876ac);null===_0x29aa62&&_0x302d21&&(_0x29aa62=this['getMergeFieldDefaultValue'](_0x484d12)),_0x3a6f66[_0x484d12]=_0x29aa62;}return _0x3a6f66;}['getLabel'](_0x3c9b64){const _0x5d088b=this['getDefinition'](_0x3c9b64);return _0x5d088b&&_0x5d088b['label']?_0x5d088b['label']:null;}['getMergeFieldDefaultValue'](_0x48e292){const _0x49836b=this['getDefinition'](_0x48e292);if(!_0x49836b||void 0x0===_0x49836b['defaultValue'])return null;const _0x3236e1='function'==typeof _0x49836b['defaultValue']?_0x49836b['defaultValue'](this['editor']):_0x49836b['defaultValue'];return String(_0x3236e1);}['getMergeFieldValue'](_0x25955f,_0x5d3a31){const _0x4ea1db=this['editor']['config']['get']('mergeFields.dataSets')['find'](_0x49f006=>_0x49f006['id']===_0x5d3a31);if(!_0x4ea1db)throw new _0x54a5fd('merge-fields-data-set-not-found',null);const _0x2c7db8=_0x4ea1db['values'][_0x25955f];if(void 0x0===_0x2c7db8)return null;const _0x601c16='function'==typeof _0x2c7db8?_0x2c7db8(this['editor']):_0x2c7db8;return String(_0x601c16);}['getMergeFieldType'](_0xed5caa){if('string'!=typeof _0xed5caa){const _0x139596=_0xed5caa;return'mergeField'===_0x139596['name']?'text':'mergeFieldBlock'===_0x139596['name']?'block':'imageBlock'!==_0x139596['name']&&'imageInline'!==_0x139596['name']||!_0x139596['getAttribute']('src')?null:_0x139596['getAttribute']('src')['match'](this['_mergeFieldRegExp'])?'image':null;}const _0x105c63=this['getDefinition'](_0xed5caa);return _0x105c63&&_0x105c63['type']?_0x105c63['type']:'text';}['getMergeFieldHeight'](_0x485ec2){const _0x214396=this['getDefinition'](_0x485ec2);return _0x214396&&'block'===_0x214396['type']?_0x214396['height']||0x78:_0x214396&&'image'===_0x214396['type']?_0x214396['height']||0x190:null;}['getMergeFieldWidth'](_0x4feefc){const _0x5dffb2=this['getDefinition'](_0x4feefc);return _0x5dffb2&&'image'===_0x5dffb2['type']?_0x5dffb2['width']||0x190:null;}['getDocumentMergeFieldsIds'](){const _0x15c435=new Set();for(const _0x48c84f of this['_mergeFieldElements'])'$graveyard'!==_0x48c84f['root']['rootName']&&('image'===this['getMergeFieldType'](_0x48c84f)?_0x15c435['add'](this['unwrapAffixes'](_0x48c84f['getAttribute']('src'))):_0x15c435['add'](_0x48c84f['getAttribute']('id')));return Array['from'](_0x15c435);}['getMergeFieldsIds'](){const _0x2645ff=this['flattenedMergeFieldDefinitions']['map'](_0x408086=>_0x408086['id']),_0x3e9ca5=this['getDocumentMergeFieldsIds']();return Array['from'](new Set([..._0x2645ff,..._0x3e9ca5]));}['getDefinition'](_0x156ae8){return this['flattenedMergeFieldDefinitions']['find'](_0x5ad42e=>_0x5ad42e['id']===_0x156ae8)||null;}['refreshMergeFields'](){this['_mergeFieldElements']['forEach'](_0x91c25=>{'$graveyard'!==_0x91c25['root']['rootName']&&this['editor']['editing']['reconvertItem'](_0x91c25);});}['wrapInAffixes'](_0x3a072c){return this['_mergeFieldPrefix']+_0x3a072c+this['_mergeFieldSuffix'];}['unwrapAffixes'](_0x2ba1b3){return _0x2ba1b3['slice'](this['_mergeFieldPrefix']['length'],_0x2ba1b3['length']-this['_mergeFieldSuffix']['length']);}['_getFlattenedMergeFieldDefinitions'](){const _0xa99c12=new Set(),_0x476c11=this['editor'];return _0x476c11['config']['get']('mergeFields.definitions')['reduce']((_0xcf365e,_0x18d034)=>{if('groupId'in _0x18d034){if(_0xa99c12['has'](_0x18d034['groupId']))throw new _0x54a5fd('merge-fields-duplicate-group-id',_0x476c11,{'duplicateId':_0x18d034['groupId']});_0xa99c12['add'](_0x18d034['groupId']);}return'groupId'in _0x18d034?function(_0x102d4f,_0x528742){for(const _0x467c98 of _0x528742['definitions'])_0x102d4f=_0x102d4f['concat'](_0x467c98);return _0x102d4f;}['bind'](_0x476c11)(_0xcf365e,_0x18d034):_0xcf365e['concat'](_0x18d034);},new Array());}['_validateConfig'](){const _0x1062c1=/^['"`!#%:;=@{}~$()*+/?[\\\]^|]+$/;if(!_0x1062c1['test'](this['_mergeFieldPrefix'])||!_0x1062c1['test'](this['_mergeFieldSuffix']))throw new _0x54a5fd('merge-fields-invalid-prefix-or-suffix',this,{'prefix':this['_mergeFieldPrefix'],'suffix':this['_mergeFieldSuffix']});if(this['_mergeFieldPrefix']['length']>0x8||this['_mergeFieldSuffix']['length']>0x8)throw new _0x54a5fd('merge-fields-prefix-or-suffix-too-long',this,{'prefix':this['_mergeFieldPrefix'],'suffix':this['_mergeFieldSuffix'],'limit':0x8});const _0x4ed326=new Set();if(this['flattenedMergeFieldDefinitions']['map'](_0x5f0293=>{if(!p['test'](_0x5f0293['id']))throw new _0x54a5fd('merge-fields-invalid-id',this,{'incorrectId':_0x5f0293['id']});if(_0x4ed326['has'](_0x5f0293['id']))throw new _0x54a5fd('merge-fields-duplicate-merge-field-id',this,{'duplicateId':_0x5f0293['id']});_0x4ed326['add'](_0x5f0293['id']);}),this['_mergeFieldPrefix']===this['_mergeFieldSuffix'])throw new _0x54a5fd('merge-fields-prefix-and-suffix-must-differ',this);const _0x46baba=this['editor']['config']['get']('mergeFields.previewModes'),_0x5814fc=['$labels','$defaultValues','$dataSets'];if(!_0x46baba['length']||!_0x46baba['every'](_0x2f171a=>_0x5814fc['includes'](_0x2f171a)))throw new _0x54a5fd('merge-fields-invalid-preview-modes-configuration',this,{'invalidConfig':_0x46baba});const _0xe5558c=new Set(),_0x4bb5c3=this['editor']['config']['get']('mergeFields.dataSets');for(const _0x3b345e of _0x4bb5c3){if(_0xe5558c['has'](_0x3b345e['id']))throw new _0x54a5fd('merge-fields-duplicate-data-set-id',this,{'duplicateId':_0x3b345e['id']});_0xe5558c['add'](_0x3b345e['id']);}}['_getAvailablePreviewModes'](){const _0x44ca82=this['editor']['config']['get']('mergeFields.previewModes'),_0x354c14=[];if(_0x44ca82['includes']('$labels')&&_0x354c14['push']('$labels'),_0x44ca82['includes']('$defaultValues')&&_0x354c14['push']('$defaultValues'),_0x44ca82['includes']('$dataSets')){const _0x3ae75c=this['editor']['config']['get']('mergeFields.dataSets');_0x354c14['push'](..._0x3ae75c['map'](_0x49fa47=>_0x49fa47['id']));}return _0x354c14;}['_defineSchema'](){const _0x1273a0=this['editor']['model']['schema'];_0x1273a0['register']('mergeField',{'inheritAllFrom':'$inlineObject','allowAttributes':['id'],'allowWhere':'$text'}),_0x1273a0['register']('mergeFieldBlock',{'inheritAllFrom':'$blockObject','allowAttributes':['id']});}['_defineConverters'](){const _0x3a3ae5=this['editor']['conversion'];_0x3a3ae5['for']('upcast')['add'](_0x1fb547=>{_0x1fb547['on']('text',(_0x3c30d9,_0x2ba53f,_0x320f0a)=>{const {writer:_0x556543,safeInsert:_0x3ec3ba}=_0x320f0a,{viewItem:_0x213deb}=_0x2ba53f,_0x2a9a8c=_0x213deb['data']['split'](this['_mergeFieldRegExp'])['filter'](_0x3e1ba4=>_0x3e1ba4);if(0x1===_0x2a9a8c['length']&&!_0x2a9a8c[0x0]['match'](this['_mergeFieldRegExp']))return;if(!_0x2ba53f['modelRange'])return;const _0x50dc61=_0x556543['createElement']('$cursor');_0x556543['insert'](_0x50dc61,_0x2ba53f['modelCursor']);const _0x168691=[];for(const _0x3991ed of _0x2ba53f['modelRange']['getItems']()){if(!_0x3991ed['is']('$textProxy'))continue;const _0x55d068=_0x3991ed['textNode']['data']['matchAll'](this['_mergeFieldRegExp']),_0xb93de2=_0x3991ed['parent'],_0x71887=_0x3991ed['textNode']['startOffset'];for(const _0x397fba of[..._0x55d068]['reverse']()){const _0x255484=_0x397fba[0x0],_0x38cffa=_0x556543['createPositionAt'](_0xb93de2,_0x397fba['index']+_0x71887),_0x2edc89=_0x38cffa['getShiftedBy'](_0x255484['length']),_0x14a520=_0x556543['createRange'](_0x38cffa,_0x2edc89),_0xadd7fa=this['unwrapAffixes'](_0x255484),_0x59acfd=this['getMergeFieldType'](_0xadd7fa),_0x4f2d90='block'==_0x59acfd?'mergeFieldBlock':'mergeField',_0x37c216=_0x556543['createElement'](_0x4f2d90,{'id':_0xadd7fa});_0x556543['remove'](_0x14a520),_0x556543['insert'](_0x37c216,_0x38cffa),'block'==_0x59acfd&&_0x168691['push'](_0x37c216);}}_0x168691['reverse']();for(const _0x304261 of _0x168691){const _0x4187ec=_0x556543['createPositionBefore'](_0x304261),_0xc5c1a6=_0x304261['nextSibling']==_0x50dc61;_0x556543['remove'](_0x304261),_0x3ec3ba(_0x304261,_0x4187ec)&&_0xc5c1a6&&_0x556543['move'](_0x556543['createRangeOn'](_0x50dc61),_0x556543['createPositionAfter'](_0x304261));}_0x2ba53f['modelCursor']=_0x556543['createPositionBefore'](_0x50dc61),_0x2ba53f['modelRange']=_0x556543['createRange'](_0x2ba53f['modelRange']['start'],_0x2ba53f['modelCursor']),_0x556543['remove'](_0x50dc61);},{'priority':_0x4672bb['get']('lowest')-0x1});}),_0x3a3ae5['for']('upcast')['elementToElement']({'view':{'name':'span','attributes':'data-ck-merge-field'},'model':(_0x241aa8,{writer:_0x596ae5})=>_0x596ae5['createElement']('mergeField',{'id':_0x241aa8['getAttribute']('data-ck-merge-field')})}),_0x3a3ae5['for']('upcast')['elementToElement']({'view':{'name':'div','attributes':'data-ck-merge-field'},'model':(_0x5a682a,{writer:_0x51ee14})=>_0x51ee14['createElement']('mergeFieldBlock',{'id':_0x5a682a['getAttribute']('data-ck-merge-field')})}),_0x3a3ae5['for']('upcast')['add'](this['_upcastSrcAttributeFromClipboard']()),_0x3a3ae5['for']('editingDowncast')['elementToElement']({'model':'mergeField','view':(_0x8ba000,{writer:_0x59f5cc})=>this['_createMergeFieldWidget'](_0x8ba000,_0x59f5cc,'text')}),_0x3a3ae5['for']('dataDowncast')['elementToElement']({'model':'mergeField','view':(_0x3a7379,{writer:_0x12f409,options:_0x3ea240})=>this['_createTextualMergeField'](_0x3a7379,_0x12f409,_0x3ea240)}),_0x3a3ae5['for']('editingDowncast')['elementToElement']({'model':'mergeFieldBlock','view':(_0x3d94aa,{writer:_0x49deab})=>this['_createMergeFieldWidget'](_0x3d94aa,_0x49deab,'block')}),_0x3a3ae5['for']('dataDowncast')['elementToElement']({'model':'mergeFieldBlock','view':(_0x508fac,{writer:_0xb6f447,options:_0x1e8c8f})=>this['_createTextualMergeField'](_0x508fac,_0xb6f447,_0x1e8c8f)}),_0x3a3ae5['for']('editingDowncast')['add'](this['_downcastSrcAttributeToEditing']('imageBlock'))['add'](this['_downcastSrcAttributeToEditing']('imageInline')),_0x3a3ae5['for']('dataDowncast')['add'](this['_downcastSrcAttributeToData']('imageBlock'))['add'](this['_downcastSrcAttributeToData']('imageInline'));}['_upcastSrcAttributeFromClipboard'](){return _0xa66659=>{_0xa66659['on']('element:img',(_0x3c13a3,_0x2a869d,_0x1e7d19)=>{_0x1e7d19['consumable']['test'](_0x2a869d['viewItem'],{'attributes':'data-ck-merge-field'})&&(_0x1e7d19['writer']['setAttribute']('src',this['wrapInAffixes'](_0x2a869d['viewItem']['getAttribute']('data-ck-merge-field')),_0x2a869d['modelCursor']['nodeBefore']),_0x1e7d19['consumable']['consume'](_0x2a869d['viewItem'],{'attributes':'data-ck-merge-field'}));},{'priority':'low'});};}['_downcastSrcAttributeToData'](_0x9c432e){const _0x119642=this['editor']['plugins']['get']('ImageUtils'),_0xa7fcbb=(_0x3e92dd,_0x1e58b9,_0x3361a0)=>{if(!0x1!==_0x3361a0['consumable']['test'](_0x1e58b9['item'],_0x3e92dd['name']))return;if(!String(_0x1e58b9['attributeNewValue'])['match'](this['_mergeFieldRegExp']))return;const _0x50c375=_0x3361a0['writer'],_0x5e6977=_0x3361a0['mapper']['toViewElement'](_0x1e58b9['item']),_0x30be09=_0x119642['findViewImgElement'](_0x5e6977),_0x1216c3=String(_0x1e58b9['attributeNewValue']),_0x4b3a0f=this['unwrapAffixes'](_0x1216c3),_0x5267f8=_0x3361a0['options']['mergeFieldsData'];if(_0x3361a0['options']['isClipboardPipeline']&&'$labels'!==this['previewMode']){let _0x72245e;return _0x72245e='$defaultValues'===this['previewMode']?this['getMergeFieldDefaultValue'](_0x4b3a0f)||this['getLabel'](_0x4b3a0f)||this['wrapInAffixes'](_0x4b3a0f):this['getMergeFieldValue'](_0x4b3a0f,this['previewMode'])||this['getMergeFieldDefaultValue'](_0x4b3a0f)||this['getLabel'](_0x4b3a0f)||this['wrapInAffixes'](_0x4b3a0f),_0x50c375['setAttribute']('data-ck-merge-field',_0x4b3a0f,_0x30be09),void _0x50c375['setAttribute'](_0x1e58b9['attributeKey'],_0x72245e,_0x30be09);}const _0x53aacf=_0x5267f8&&_0x5267f8[_0x4b3a0f]?_0x5267f8[_0x4b3a0f]:_0x1216c3;_0x50c375['setAttribute'](_0x1e58b9['attributeKey'],_0x53aacf,_0x30be09);};return _0x2ecee7=>{_0x2ecee7['on']('attribute:src:'+_0x9c432e,_0xa7fcbb,{'priority':'low'});};}['_downcastSrcAttributeToEditing'](_0x2fdd32){const _0x3f2a4b=this['editor']['plugins']['get']('ImageUtils'),_0x2dcd2e=(_0x53cb97,_0x4e6299,_0x415333)=>{if(!0x1!==_0x415333['consumable']['test'](_0x4e6299['item'],_0x53cb97['name']))return;if(!String(_0x4e6299['attributeNewValue'])['match'](this['_mergeFieldRegExp']))return;const _0x313c63=_0x415333['writer'],_0x2da557=_0x415333['mapper']['toViewElement'](_0x4e6299['item']),_0x1bcd82=_0x3f2a4b['findViewImgElement'](_0x2da557),_0x3d9b5d=String(_0x4e6299['attributeNewValue']),_0x2ad290=this['unwrapAffixes'](_0x3d9b5d),_0x2509d2=this['getMergeFieldDefaultValue'](_0x2ad290),_0x5e7a4e='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUGFdjYAACAAAFAAGq1chRAAAAAElFTkSuQmCC';let _0x3a99d7,_0x3c2bfd='',_0x28b2d4='';if('$labels'===this['previewMode'])_0x3a99d7=_0x5e7a4e;else{if('$defaultValues'===this['previewMode'])_0x2509d2?(_0x3a99d7=_0x2509d2,_0x28b2d4='\x20ck-merge-field-image_with-value'):(_0x3a99d7=_0x5e7a4e,_0x3c2bfd='WARNING_MISSING_DEFAULT_VALUE',_0x28b2d4='\x20ck-merge-field-image_with-warning\x20ck-merge-field-image_with-warning_no-default');else{const _0x26fb36=this['getMergeFieldValue'](_0x2ad290,this['previewMode']);_0x26fb36?(_0x3a99d7=_0x26fb36,_0x28b2d4='\x20ck-merge-field-image_with-value'):_0x2509d2?(_0x3a99d7=_0x2509d2,_0x28b2d4='\x20ck-merge-field-image_with-warning\x20ck-merge-field-image_with-warning_default-value-used',_0x3c2bfd='WARNING_MISSING_DATA_USED_DEFAULT_VALUE'):(_0x3a99d7=_0x5e7a4e,_0x28b2d4='\x20ck-merge-field-image_with-warning\x20ck-merge-field-image_with-warning_missing-data',_0x3c2bfd='WARNING_MISSING_DATA');}}if(_0x313c63['addClass']('ck-merge-field-image'+_0x28b2d4,_0x2da557),_0x313c63['setAttribute'](_0x4e6299['attributeKey'],_0x3a99d7,_0x1bcd82),'$labels'===this['previewMode']){const _0x5d894f='imageInline'===_0x2fdd32?'span':'div',_0x3e8293=this['_mergeFieldPrefix'],_0x5b470b=this['_mergeFieldSuffix'],_0x14fb72=_0x313c63['createContainerElement'](_0x5d894f,{'class':'ck-merge-field','data-cke-tooltip-instant':'true'},[_0x313c63['createUIElement']('span',{'class':'ck-merge-field__affix'},function(_0x3f379c){const _0x1ff1a1=this['toDomElement'](_0x3f379c);return _0x1ff1a1['innerHTML']=_0x3e8293,_0x1ff1a1;}),_0x313c63['createContainerElement']('span',{'class':'ck-merge-field__content'},_0x313c63['createText'](this['getLabel'](_0x2ad290)||_0x2ad290)),_0x313c63['createUIElement']('span',{'class':'ck-merge-field__affix'},function(_0x5b54c6){const _0x1832d9=this['toDomElement'](_0x5b54c6);return _0x1832d9['innerHTML']=_0x5b470b,_0x1832d9;})]);_0x313c63['insert'](_0x313c63['createPositionAt'](_0x2da557,'end'),_0x14fb72),_0x313c63['setAttribute']('data-cke-tooltip-text',this['getLabel'](_0x2ad290)||_0x2ad290,_0x14fb72);}else{if(_0x3c2bfd&&['WARNING_MISSING_DEFAULT_VALUE','WARNING_MISSING_DATA']['includes'](_0x3c2bfd)){const _0x52c17f='imageInline'===_0x2fdd32?'span':'div',_0x8906ba=_0x28b2d4['replace'](/ck-merge-field-image/g,'ck-merge-field'),_0x1d2bfc=_0x313c63['createContainerElement'](_0x52c17f,{'class':'ck-merge-field'+_0x8906ba,'data-cke-tooltip-instant':'true'},[_0x313c63['createContainerElement']('span',{'class':'ck-merge-field__content'},_0x313c63['createText'](this['getLabel'](_0x2ad290)||_0x2ad290))]),_0x677cd9=_0x313c63['createUIElement']('span',{'class':'ck-merge-field__icon'},function(_0x4734a5){const _0xd03bb1=this['toDomElement'](_0x4734a5),_0xc8ba70=new _0x4fa2cc();return _0xc8ba70['set']({'content':_0x3c2f94}),_0xc8ba70['render'](),_0xd03bb1['appendChild'](_0xc8ba70['element']),_0xd03bb1;});_0x313c63['insert'](_0x313c63['createPositionAt'](_0x1d2bfc,'end'),_0x677cd9),_0x313c63['insert'](_0x313c63['createPositionAt'](_0x2da557,'end'),_0x1d2bfc),_0x313c63['setCustomProperty']('mergeFieldStatus',_0x3c2bfd,_0x1d2bfc),_0x313c63['setAttribute']('data-cke-tooltip-text',this['getLabel'](_0x2ad290)||_0x2ad290,_0x1d2bfc);}}_0x313c63['setAttribute']('data-merge-field-name',_0x2ad290,_0x2da557),_0x3c2bfd&&_0x313c63['setCustomProperty']('mergeFieldStatus',_0x3c2bfd,_0x2da557);};return _0x342a82=>{_0x342a82['on']('attribute:src:'+_0x2fdd32,_0x2dcd2e,{'priority':'low'});};}['_setupTooltipsTogglingForImageMergeField'](_0x5325af,_0xf12afe){if(!_0xf12afe['target'])return null;const _0x5dc13e=_0xf12afe['target']['parentElement'];return _0x5dc13e&&_0x5dc13e['classList']['contains']('ck-merge-field-image')?new _0x1e9fa7(_0x5dc13e,_0x41dfdc=>{const _0x35cd24=_0x41dfdc['target'],_0x124798=_0x35cd24['querySelector']('.ck-merge-field'),_0x4d011d=_0x35cd24['querySelector']('.ck-merge-field__content');_0x124798&&_0x4d011d&&(_0x4d011d['scrollWidth']>_0x4d011d['getBoundingClientRect']()['width']?_0x124798['removeAttribute']('data-cke-tooltip-disabled'):_0x124798['setAttribute']('data-cke-tooltip-disabled','true'));}):null;}['_createMergeFieldWidget'](_0x36e1be,_0x649bb3,_0x217384){const {label:_0x347d45,classes:_0x5550cd,status:_0x5b04d1,height:_0x4a5ccd}=this['_prepareViewElementData'](_0x36e1be),_0xbcae72=this['_mergeFieldPrefix'],_0x490637=this['_mergeFieldSuffix'],_0x1b5a5a=this['editor']['config']['get']('mergeFields.sanitizeHtml'),_0x199d15='text'===_0x217384?'span':'div';let _0x5cde1a;if('$labels'===this['previewMode'])_0x5cde1a=_0x649bb3['createContainerElement'](_0x199d15,{'class':_0x5550cd},[_0x649bb3['createUIElement']('span',{'class':'ck-merge-field__affix'},function(_0x3c299d){const _0x34143a=this['toDomElement'](_0x3c299d);return _0x34143a['innerHTML']=_0xbcae72,_0x34143a;}),_0x649bb3['createContainerElement']('span',{'class':'ck-merge-field__content'},_0x649bb3['createText'](String(_0x347d45))),_0x649bb3['createUIElement']('span',{'class':'ck-merge-field__affix'},function(_0x5913b8){const _0x1ca7f5=this['toDomElement'](_0x5913b8);return _0x1ca7f5['innerHTML']=_0x490637,_0x1ca7f5;})]);else{if(_0x5b04d1){const _0x5e2a28=this['_shouldPreviewHtmlValues']?_0x649bb3['createRawElement']('span',{'class':'ck-merge-field__content'},function(_0x7195d9,_0x3c0694){_0x3c0694['setContentOf'](_0x7195d9,_0x1b5a5a(_0x347d45)['html']);}):_0x649bb3['createContainerElement']('span',{'class':'ck-merge-field__content'},_0x649bb3['createText'](_0x347d45));if(_0x5cde1a=_0x649bb3['createContainerElement'](_0x199d15,{'class':_0x5550cd},[_0x5e2a28]),'text'===_0x217384||['WARNING_MISSING_DEFAULT_VALUE','WARNING_MISSING_DATA']['includes'](_0x5b04d1)){const _0x52dfa3=_0x649bb3['createUIElement']('span',{'class':'ck-merge-field__icon'},function(_0x5340fb){const _0x58f408=this['toDomElement'](_0x5340fb),_0x5c69ed=new _0x4fa2cc();return _0x5c69ed['set']({'content':_0x3c2f94}),_0x5c69ed['render'](),_0x58f408['appendChild'](_0x5c69ed['element']),_0x58f408;});_0x649bb3['insert'](_0x649bb3['createPositionAt'](_0x5cde1a,'end'),_0x52dfa3);}_0x649bb3['setCustomProperty']('mergeFieldStatus',_0x5b04d1,_0x5cde1a);}else{const _0x44acb3=this['_shouldPreviewHtmlValues']?_0x649bb3['createRawElement'](_0x199d15,{},function(_0xb52b2d,_0x4ce0ea){_0x4ce0ea['setContentOf'](_0xb52b2d,_0x1b5a5a(_0x347d45)['html']);}):_0x649bb3['createText'](_0x347d45);_0x5cde1a=_0x649bb3['createContainerElement'](_0x199d15,{'class':_0x5550cd},_0x44acb3);}}if('block'===_0x217384){const _0xc62182=_0x649bb3['createContainerElement']('div',{'class':'ck-merge-field-block'},[_0x5cde1a]);if(('$labels'===this['previewMode']||_0x5b04d1&&['WARNING_MISSING_DEFAULT_VALUE','WARNING_MISSING_DATA']['includes'](_0x5b04d1))&&_0x649bb3['setAttribute']('style','height:\x20'+_0x4a5ccd+'px',_0xc62182),_0x5cde1a['hasClass']('ck-merge-field_with-value'))_0x649bb3['addClass']('ck-merge-field-block_with-value',_0xc62182);else{if(_0x5cde1a['hasClass']('ck-merge-field_with-warning')){for(const _0x5a4aae of _0x5cde1a['getClassNames']())if('ck-merge-field'!==_0x5a4aae){const _0x390d7e=_0x5a4aae['replace']('ck-merge-field','ck-merge-field-block');_0x649bb3['addClass'](_0x390d7e,_0xc62182);}_0x649bb3['setCustomProperty']('mergeFieldStatus',_0x5b04d1,_0xc62182);}}return _0x649bb3['setCustomProperty']('mergeFieldBlock',!0x0,_0xc62182),_0x649bb3['setAttribute']('data-merge-field-name',_0x36e1be['getAttribute']('id'),_0xc62182),_0x3abc29(_0xc62182,_0x649bb3,{'hasSelectionHandle':!0x0});}return _0x649bb3['setCustomProperty']('mergeField',!0x0,_0x5cde1a),_0x649bb3['setAttribute']('data-merge-field-name',_0x36e1be['getAttribute']('id'),_0x5cde1a),_0x3abc29(_0x5cde1a,_0x649bb3);}['_prepareViewElementData'](_0xb0dd11){const _0x1c6697=_0xb0dd11['getAttribute']('id'),_0x103860=this['getDefinition'](_0x1c6697);if(!_0x103860)return'$labels'===this['previewMode']?{'label':_0x1c6697,'classes':'ck-merge-field'}:{'label':_0x1c6697,'classes':'ck-merge-field\x20ck-merge-field_with-warning\x20ck-merge-field_with-warning_missing-definition','status':'WARNING_MISSING_DATA'};const _0x39736e=this['getLabel'](_0x1c6697)||_0x1c6697,_0x339520=this['getMergeFieldDefaultValue'](_0x1c6697),_0x55d138=this['getMergeFieldHeight'](_0x1c6697);if('$labels'===this['previewMode'])return{'label':_0x39736e,'height':_0x55d138,'classes':'ck-merge-field'};if('$defaultValues'===this['previewMode'])return _0x339520?{'label':_0x339520,'height':_0x55d138,'classes':'ck-merge-field\x20ck-merge-field_with-value'}:{'label':_0x39736e,'height':_0x55d138,'classes':'ck-merge-field\x20ck-merge-field_with-warning\x20ck-merge-field_with-warning_no-default','status':'WARNING_MISSING_DEFAULT_VALUE'};const _0x33c6b5=this['getMergeFieldValue'](_0x103860['id'],this['previewMode']);return _0x33c6b5?{'label':_0x33c6b5,'height':_0x55d138,'classes':'ck-merge-field\x20ck-merge-field_with-value'}:_0x339520?{'label':_0x339520,'height':_0x55d138,'classes':'ck-merge-field\x20ck-merge-field_with-warning\x20ck-merge-field_with-warning_default-value-used','status':'WARNING_MISSING_DATA_USED_DEFAULT_VALUE'}:{'label':_0x39736e,'height':_0x55d138,'classes':'ck-merge-field\x20ck-merge-field_with-warning\x20ck-merge-field_with-warning_missing-data','status':'WARNING_MISSING_DATA'};}['_createTextualMergeField'](_0x22edb1,_0x1cdb06,_0x2e93ba){const _0x6296da=_0x22edb1['getAttribute']('id');let _0x52cc55;if(_0x2e93ba['isClipboardPipeline']&&'$labels'!==this['previewMode'])return this['_downcastForClipboard'](_0x6296da,_0x1cdb06);const _0xa1c51e=_0x2e93ba['mergeFieldsData'],_0x571743=_0xa1c51e&&_0xa1c51e[_0x6296da]?_0xa1c51e[_0x6296da]:this['wrapInAffixes'](_0x6296da);if(_0xa1c51e)_0x52cc55=_0x1cdb06['createRawElement']('span',{},function(_0x5caae5,_0x3281c6){_0x3281c6['setContentOf'](_0x5caae5,String(_0x571743));});else{_0x52cc55=_0x1cdb06['createContainerElement']('span');const _0x1ccc66=_0x1cdb06['createText'](_0x571743);_0x1cdb06['insert'](_0x1cdb06['createPositionAt'](_0x52cc55,'end'),_0x1ccc66);}return _0x1cdb06['setCustomProperty']('dataPipeline:transparentRendering',!0x0,_0x52cc55),_0x52cc55;}['_downcastForClipboard'](_0x3d672f,_0x3242f7){const _0x2b55b4='block'===this['getMergeFieldType'](_0x3d672f)?'div':'span';let _0x1b6d9a,_0x3e2207;_0x1b6d9a='$defaultValues'===this['previewMode']?this['getMergeFieldDefaultValue'](_0x3d672f)||this['getLabel'](_0x3d672f)||this['wrapInAffixes'](_0x3d672f):this['getMergeFieldValue'](_0x3d672f,this['previewMode'])||this['getMergeFieldDefaultValue'](_0x3d672f)||this['getLabel'](_0x3d672f)||this['wrapInAffixes'](_0x3d672f);const _0x17801b=this['editor']['config']['get']('mergeFields.sanitizeHtml');return _0x3e2207=this['_shouldPreviewHtmlValues']?_0x3242f7['createRawElement'](_0x2b55b4,{'data-ck-merge-field':_0x3d672f},function(_0x23a01d,_0x3854ec){_0x3854ec['setContentOf'](_0x23a01d,_0x17801b(_0x1b6d9a)['html']);}):_0x3242f7['createContainerElement'](_0x2b55b4,{'data-ck-merge-field':_0x3d672f},_0x3242f7['createText'](_0x1b6d9a)),_0x3e2207;}['_validatePreviewMode'](_0x4d901f){if(!this['availablePreviewModes']['includes'](_0x4d901f))throw new _0x54a5fd('merge-fields-invalid-preview-mode-set',this,{'availablePreviewModes':this['availablePreviewModes'],'previewMode':_0x4d901f});}['_trackAddedMergeFields'](){for(const _0x390ef8 of this['editor']['model']['document']['differ']['getChanges']({'includeChangesInGraveyard':!0x0})){if('insert'!==_0x390ef8['type']||'$text'===_0x390ef8['name'])continue;if('mergeField'===_0x390ef8['name']||'mergeFieldBlock'===_0x390ef8['name']){this['_mergeFieldElements']['add'](_0x390ef8['position']['nodeAfter']);continue;}if('imageInline'===_0x390ef8['name']||'imageBlock'===_0x390ef8['name']&&_0x390ef8['attributes']['get']('src')&&String(_0x390ef8['attributes']['get']('src'))['match'](this['_mergeFieldRegExp'])){this['_mergeFieldElements']['add'](_0x390ef8['position']['nodeAfter']);continue;}const _0x45f4df=this['editor']['model']['createRangeIn'](_0x390ef8['position']['nodeAfter']);for(const _0x4988da of _0x45f4df['getItems']())_0x4988da['is']('element')&&this['isMergeField'](_0x4988da)&&this['_mergeFieldElements']['add'](_0x4988da);}}['_registerConversionPostFixer'](){const _0x385ed6=this['editor'];_0x385ed6['model']['document']['registerPostFixer'](_0x5c4fda=>{if(!_0x5c4fda['batch']['isLocal'])return!0x1;const _0xd54b1e=[],_0x3ca31b=new Set(),_0x5c117d=this['_mergeFieldRegExp'];let _0x303ae3=!0x1;for(const _0xe3af95 of _0x385ed6['model']['document']['differ']['getChanges']())if('insert'===_0xe3af95['type']||'remove'===_0xe3af95['type']){let _0x4b7bab='$text'==_0xe3af95['name']?_0xe3af95['position']['parent']:_0xe3af95['position']['nodeAfter'];if(!_0x4b7bab)continue;_0x4b7bab['is']('$text')&&(_0x4b7bab=_0x4b7bab['parent']),_0x41b0f9(_0x4b7bab);}for(const _0x54abc4 of _0xd54b1e['reverse']()){const {match:_0x5f44aa,item:_0x1413e7}=_0x54abc4,_0x2eb779=_0x5c4fda['createPositionAt'](_0x1413e7,_0x5f44aa['index']),_0x28e9b4=_0x2eb779['getShiftedBy'](_0x5f44aa[0x0]['length']),_0x3271e1=_0x5c4fda['createRange'](_0x2eb779,_0x28e9b4),_0x59345a=_0x5f44aa[0x0],_0x5cb5db=this['unwrapAffixes'](_0x59345a),_0x5ded0a=_0x45a213(_0x3271e1),_0x5df948=this['getMergeFieldType'](_0x5cb5db);if(p['test'](_0x5cb5db)){if(_0x5ded0a['set']('id',_0x5cb5db),'block'===_0x5df948){const _0x5d2247=_0x5c4fda['createElement']('mergeFieldBlock',{'id':_0x5cb5db});_0x5c4fda['remove'](_0x3271e1),_0x385ed6['model']['insertObject'](_0x5d2247,null,null,{'setSelection':'on','findOptimalPosition':void 0x0});}else{if('image'===_0x5df948){const _0xe43fb7=_0x5c4fda['createElement']('imageBlock',{'src':this['wrapInAffixes'](_0x5cb5db)});_0x5c4fda['remove'](_0x3271e1),_0x385ed6['model']['insertObject'](_0xe43fb7,null,null,{'setSelection':'on','findOptimalPosition':void 0x0});}else{const _0xcba6eb=_0x5c4fda['createElement']('mergeField',_0x5ded0a);_0x385ed6['model']['schema']['checkChild'](_0x3271e1['start'],'mergeField')?_0x385ed6['model']['insertObject'](_0xcba6eb,_0x3271e1):_0x5c4fda['remove'](_0x3271e1);}}_0x303ae3=!0x0;}}return _0x303ae3;function _0x41b0f9(_0x3b3985){let _0x344baf='',_0x2e5679=0x0;if(!_0x3ca31b['has'](_0x3b3985))for(const _0x1ea932 of _0x3b3985['getChildren']()){const _0x4616f0=_0x1ea932['nextSibling'];if(_0x1ea932['is']('$text')&&(''===_0x344baf&&_0x1ea932['startOffset']&&(_0x2e5679=_0x1ea932['startOffset']),_0x344baf+=_0x1ea932['data']),!_0x4616f0||_0x4616f0['is']('element')){for(const _0x20e671 of _0x344baf['matchAll'](_0x5c117d))_0x20e671['index']=_0x20e671['index']+_0x2e5679,_0xd54b1e['push']({'match':_0x20e671,'item':_0x3b3985});_0x3ca31b['add'](_0x3b3985),_0x344baf='';}_0x1ea932['is']('element')&&_0x41b0f9(_0x1ea932);}}function _0x45a213(_0x370a91){const _0x2a47fc=_0x370a91['getItems'](),_0x33fc54=_0x2a47fc['next']()['value'],_0x360557=new Map(_0x33fc54['getAttributes']());for(const _0x5f0469 of _0x2a47fc)for(const [_0x50a467,_0x4d9af1]of _0x360557)_0x5f0469['getAttribute'](_0x50a467)!==_0x4d9af1&&_0x360557['delete'](_0x50a467);return _0x360557;}});}['_disableCommandOnMergeFields'](_0x2fd90a){const _0x4f0d58=this['editor'],_0x43df6e=_0x4f0d58['commands']['get'](_0x2fd90a);_0x43df6e&&_0x43df6e['on']('set:isEnabled',(_0x3a4a1a,_0x5b6aeb,_0x340e80)=>{if(0x1==_0x340e80){const _0x4be41a=_0x4f0d58['model']['document']['selection']['getSelectedElement']();_0x4be41a&&this['isMergeField'](_0x4be41a)&&(_0x3a4a1a['return']=!0x1,_0x3a4a1a['stop']());}});}}class U extends _0x3f6cad{['filter'](_0x2799c8){return _0x1fee97(_0x2799c8,this['items']);}}class D extends _0x2c0afe{constructor(_0x2754d4){super(_0x2754d4),this['set']('text','');const _0x30f4ce=this['bindTemplate'];this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-merge-fields-form']},'children':[{'tag':'div','attributes':{'class':['ck','ck-merge-fields-form__status']},'children':[{'text':_0x30f4ce['to']('text')}]}]});}}function A(_0x1c02a2,_0x36fc90){const t=_0x1c02a2['t'];switch(_0x36fc90){case'Search\x20merge\x20field':return t('Search\x20merge\x20field');case'No\x20merge\x20fields\x20found':return t('No\x20merge\x20fields\x20found');case'No\x20merge\x20fields\x20available':return t('No\x20merge\x20fields\x20available');case'Insert\x20merge\x20field':return t('Insert\x20merge\x20field');case'Merge\x20field':return t('Merge\x20field');case'Merge\x20fields\x20preview':return t('Merge\x20fields\x20preview');case'Labels':return t('Labels');case'Default\x20values':return t('Default\x20values');case'WARNING_MISSING_DATA_USED_DEFAULT_VALUE':return t({'string':'Default\x20value\x20is\x20used.','id':'WARNING_MISSING_DATA_USED_DEFAULT_VALUE'});case'WARNING_MISSING_DEFAULT_VALUE':return t({'string':'Default\x20value\x20not\x20available.','id':'WARNING_MISSING_DEFAULT_VALUE'});case'WARNING_MISSING_DATA':return t({'string':'Value\x20not\x20available.','id':'WARNING_MISSING_DATA'});default:return _0x36fc90;}}class s extends _0x72a874{['licenseKey'];['_licenseKeyCheckInterval'];['_balloon'];['_balloonPanelView']=null;static get['requires'](){return['Mention',i,_0x319060,_0x9e02e2];}static get['pluginName'](){return'MergeFieldsUI';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0xf47d2e){super(_0xf47d2e),this['_removeDefaultValuesPreviewIfUnnecessary'](),this['_removeMenuBarButtonIfUnnecessary'](),this['_setupMentionConfiguration']();}['init'](){const _0xb74427=this['editor'];_0xb74427['ui']['componentFactory']['add']('insertMergeField',_0x2838ba=>{const _0x3b3061=function(_0x20ba68){const _0x39cb5a=_0x41933f(_0x20ba68);return _0x39cb5a['set']({'class':'ck-insert-merge-field-dropdown','isEnabled':!0x0}),_0x39cb5a['buttonView']['set']({'label':A(_0x20ba68,'Insert\x20merge\x20field'),'icon':_0x440b49,'tooltip':!0x0}),_0x39cb5a;}(_0x2838ba);return _0x3b3061['bind']('isEnabled')['toMany']([_0xb74427['commands']['get']('insertMergeField'),_0xb74427['commands']['get']('insertMergeFieldBlock'),_0xb74427['commands']['get']('insertMergeFieldImage')],'isEnabled',(..._0x3e118b)=>_0x3e118b['some'](_0x4ce931=>_0x4ce931)),_0x3b3061['once']('change:isOpen',()=>{const _0x232811={'insertInline':_0xb74427['commands']['get']('insertMergeField'),'insertBlock':_0xb74427['commands']['get']('insertMergeFieldBlock'),'insertImage':_0xb74427['commands']['get']('insertMergeFieldImage')},_0x67b51a=function(_0x251a37,_0x3539f7,_0x5555b0){const _0x55f568=new U(_0x251a37),_0x2b6430=[],_0x409948=[];for(const _0x30cf8a of _0x3539f7)if('groupId'in _0x30cf8a){const _0x1e68a0=q(_0x251a37,_0x30cf8a['groupLabel']||_0x30cf8a['groupId'],_0x30cf8a['definitions'],_0x5555b0);_0x1e68a0['delegate']('execute')['to'](_0x55f568),_0x409948['push'](_0x1e68a0);}else _0x2b6430['push'](_0x30cf8a);if(_0x2b6430['length']){const _0x215b94=q(_0x251a37,'Other',_0x2b6430,_0x5555b0);_0x215b94['delegate']('execute')['to'](_0x55f568),_0x409948['push'](_0x215b94);}return _0x55f568['items']['addMany'](_0x409948),_0x55f568;}(_0x2838ba,_0xb74427['config']['get']('mergeFields.definitions'),_0x232811);_0x67b51a['delegate']('execute')['to'](_0x3b3061),_0x3b3061['on']('execute',(_0x48fc38,_0x191bd6)=>{const _0x36ca93=_0xb74427['plugins']['get']('MergeFieldsEditing')['getMergeFieldType'](_0x191bd6);'image'===_0x36ca93?_0xb74427['execute']('insertMergeFieldImage',_0x191bd6):'block'===_0x36ca93?_0xb74427['execute']('insertMergeFieldBlock',_0x191bd6):_0xb74427['execute']('insertMergeField',_0x191bd6),_0xb74427['editing']['view']['focus']();});const _0x1a2f29=function(_0x4b8567,_0x5220d0){return new _0x5e5af0(_0x4b8567,{'filteredView':_0x5220d0,'queryView':{'label':A(_0x4b8567,'Search\x20merge\x20field')},'class':'ck-merge-fields-search','infoView':{'text':{'notFound':{'primary':A(_0x4b8567,'No\x20merge\x20fields\x20found')},'noSearchableItems':{'primary':A(_0x4b8567,'No\x20merge\x20fields\x20available')}}}});}(_0x2838ba,_0x67b51a);_0x3b3061['panelView']['children']['add'](_0x1a2f29),_0x3b3061['on']('change:isOpen',(_0x4ecfad,_0x4c47aa,_0x58d5fd)=>{_0x58d5fd&&_0x1a2f29['reset']();});}),_0x3b3061;}),_0xb74427['ui']['componentFactory']['add']('menuBar:insertMergeField',_0x42aa21=>{const _0x3a888d=new _0x93dd74(_0x42aa21),_0x1e914a={'insertInline':_0xb74427['commands']['get']('insertMergeField'),'insertBlock':_0xb74427['commands']['get']('insertMergeFieldBlock'),'insertImage':_0xb74427['commands']['get']('insertMergeFieldImage')};_0x3a888d['buttonView']['set']({'label':A(_0x42aa21,'Merge\x20field'),'icon':_0x440b49}),_0x3a888d['bind']('isEnabled')['toMany']([...Object['values'](_0x1e914a)],'isEnabled',(..._0x306bd0)=>_0x306bd0['some'](_0x533a84=>_0x533a84));const _0x8ddfe2=[],_0x419fab=new _0x4885c7(_0x42aa21);for(const _0x71ac5c of _0xb74427['config']['get']('mergeFields.definitions'))if('groupId'in _0x71ac5c){const _0x677d6=new _0x55c1ad(_0x42aa21,_0x3a888d),_0x4bd315=R(_0x42aa21,_0x71ac5c,_0x1e914a);_0x677d6['children']['add'](_0x4bd315),_0x4bd315['delegate']('execute')['to'](_0x3a888d),_0x419fab['items']['add'](_0x677d6);}else _0x8ddfe2['push'](_0x71ac5c);if(_0x8ddfe2['length']){if(0x0===_0x419fab['items']['length'])for(const _0x2e0266 of _0x8ddfe2){let _0x154c24;_0x154c24='block'===_0x2e0266['type']?_0x1e914a['insertBlock']:'image'===_0x2e0266['type']?_0x1e914a['insertImage']:_0x1e914a['insertInline'];const _0x1bb420=z(_0x42aa21,_0x2e0266,_0x3a888d,_0x154c24);_0x419fab['items']['add'](_0x1bb420);}else{const _0x16a8d2=new _0x55c1ad(_0x42aa21,_0x3a888d),_0x573075=R(_0x42aa21,{'groupId':'Other','definitions':_0x8ddfe2},_0x1e914a);_0x16a8d2['children']['add'](_0x573075),_0x573075['delegate']('execute')['to'](_0x3a888d),_0x419fab['items']['add'](_0x16a8d2);}}return _0x3a888d['panelView']['children']['add'](_0x419fab),_0x3a888d['on']('execute',(_0x16c150,_0x22b084)=>{const _0x4bf850=_0xb74427['plugins']['get']('MergeFieldsEditing')['getMergeFieldType'](_0x22b084);'image'===_0x4bf850?_0xb74427['execute']('insertMergeFieldImage',_0x22b084):'block'===_0x4bf850?_0xb74427['execute']('insertMergeFieldBlock',_0x22b084):_0xb74427['execute']('insertMergeField',_0x22b084),_0xb74427['editing']['view']['focus']();}),_0x3a888d;});const _0xab787a=_0xb74427['config']['get']('mergeFields.previewModes'),_0x1a1f8e=[];if(_0xab787a['includes']('$labels')&&_0x1a1f8e['push']({'type':'button','model':new _0x4e3b6f({'withText':!0x0,'isToggleable':!0x0,'label':A(this['editor']['locale'],'Labels'),'commandValue':'$labels'})}),_0xab787a['includes']('$defaultValues')&&_0x1a1f8e['push']({'type':'button','model':new _0x4e3b6f({'withText':!0x0,'isToggleable':!0x0,'label':A(this['editor']['locale'],'Default\x20values'),'commandValue':'$defaultValues'})}),_0xab787a['includes']('$dataSets')){const _0xe81a79=_0xb74427['config']['get']('mergeFields.dataSets');if(_0xe81a79['length']){for(const _0x26b168 of _0xe81a79)_0x1a1f8e['push']({'type':'button','model':new _0x4e3b6f({'withText':!0x0,'isToggleable':!0x0,'label':_0x26b168['label']||_0x26b168['id'],'commandValue':_0x26b168['id']})});}}_0xb74427['ui']['componentFactory']['add']('previewMergeFields',_0x15cf77=>{const _0x4dfacb=_0xb74427['commands']['get']('previewMergeFields'),_0x5742ec=new _0x24e625();for(const _0x1744a0 of _0x209f4f(_0x1a1f8e))_0x1744a0['model']['bind']('isOn')['to'](_0x4dfacb,'value',_0xa2cbad=>_0xa2cbad===_0x1744a0['model']['commandValue']),_0x5742ec['add'](_0x1744a0);const _0x44ae70=_0x41933f(_0x15cf77),_0x32a5a3=A(_0x15cf77,'Merge\x20fields\x20preview');return _0x44ae70['bind']('isEnabled')['to'](_0x4dfacb),_0x4e3d74(_0x44ae70,_0x5742ec,{'ariaLabel':_0x32a5a3,'role':'menu'}),_0x44ae70['set']({'class':'ck-merge-fields-preview-dropdown'}),_0x44ae70['buttonView']['set']({'label':_0x32a5a3,'ariaLabel':_0x32a5a3,'ariaLabelledBy':void 0x0,'isOn':!0x1,'icon':_0xc7c7ff,'tooltip':!0x0}),this['listenTo'](_0x44ae70,'execute',_0x113a7e=>{const {commandValue:_0x57b934}=_0x113a7e['source'];_0xb74427['execute']('previewMergeFields',_0x57b934),_0xb74427['editing']['view']['focus']();}),_0x44ae70;}),_0xb74427['ui']['componentFactory']['add']('menuBar:previewMergeFields',_0xc54ad7=>{const _0x564c18=new _0x93dd74(_0xc54ad7),_0x4d33dc=_0xb74427['commands']['get']('previewMergeFields');_0x564c18['buttonView']['set']({'label':A(_0xc54ad7,'Merge\x20fields\x20preview'),'icon':_0xc7c7ff}),_0x564c18['bind']('isEnabled')['to'](_0x4d33dc);const _0xe55e48=new _0x4885c7(_0xc54ad7);_0xe55e48['set']({'ariaLabel':A(_0xc54ad7,'Merge\x20fields\x20preview')});for(const _0x5ce5e1 of _0x209f4f(_0x1a1f8e)){const _0x367b74=new _0x55c1ad(_0xc54ad7,_0x564c18),_0x35bcab=new _0x9f1a06(_0xc54ad7);_0x5ce5e1['model']['bind']('isOn')['to'](_0x4d33dc,'value',_0x1c296d=>_0x1c296d===_0x5ce5e1['model']['commandValue']),_0x35bcab['isToggleable']=!0x0,_0x35bcab['bind'](...Object['keys'](_0x5ce5e1['model']))['to'](_0x5ce5e1['model']),_0x35bcab['delegate']('execute')['to'](_0x564c18),_0x35bcab['on']('execute',_0x15a440=>{const {commandValue:_0x15cb7a}=_0x15a440['source'];_0xb74427['execute']('previewMergeFields',_0x15cb7a),_0xb74427['editing']['view']['focus']();}),_0x367b74['children']['add'](_0x35bcab),_0xe55e48['items']['add'](_0x367b74);}return _0x564c18['panelView']['children']['add'](_0xe55e48),_0x564c18;}),this['_balloon']=_0xb74427['plugins']['get'](_0x319060),this['listenTo'](_0xb74427['ui'],'update',()=>{this['_updateBalloonVisibility']();},{'priority':'low'}),this['listenTo'](_0xb74427['ui']['focusTracker'],'change:isFocused',(_0x1cf113,_0x18a162,_0x4d7b40)=>{this['_balloon']['visibleView']&&this['_balloon']['visibleView']===this['_balloonPanelView']&&(_0x4d7b40?this['_updateBalloonVisibility']():this['_hideBalloon']());},{'priority':'low'}),this['editor']['once']('ready',this['_overrideMentionExecuteListener']['bind'](this)),this['licenseKey']=this['editor']['config']['get']('licenseKey');const _0x4c3a4b=this['editor'];this['_licenseKeyCheckInterval']=setInterval(()=>{let _0x292b5d;for(const _0x373038 in _0x4c3a4b){const _0x3e3040=_0x373038,_0x438fca=_0x4c3a4b[_0x3e3040];if('mergeFieldsLicenseKeyValid'==_0x438fca||'mergeFieldsLicenseKeyInvalid'==_0x438fca||'mergeFieldsLicenseKeyExpired'==_0x438fca||'mergeFieldsLicenseKeyDomainLimit'==_0x438fca||'mergeFieldsLicenseKeyNotAllowed'==_0x438fca||'mergeFieldsLicenseKeyEvaluationLimit'==_0x438fca||'mergeFieldsLicenseKeyTrialLimit'==_0x438fca||'mergeFieldsLicenseKeyUsageLimit'==_0x438fca){delete _0x4c3a4b[_0x3e3040],_0x292b5d=_0x438fca,clearInterval(this['_licenseKeyCheckInterval']),this['_licenseKeyCheckInterval']=void 0x0;break;}}'mergeFieldsLicenseKeyInvalid'==_0x292b5d&&_0x4c3a4b['_showLicenseError']('invalid'),'mergeFieldsLicenseKeyExpired'==_0x292b5d&&_0x4c3a4b['_showLicenseError']('expired'),'mergeFieldsLicenseKeyDomainLimit'==_0x292b5d&&_0x4c3a4b['_showLicenseError']('domainLimit'),'mergeFieldsLicenseKeyNotAllowed'==_0x292b5d&&_0x4c3a4b['_showLicenseError']('featureNotAllowed','MergeFields'),'mergeFieldsLicenseKeyEvaluationLimit'==_0x292b5d&&_0x4c3a4b['_showLicenseError']('evaluationLimit'),'mergeFieldsLicenseKeyTrialLimit'==_0x292b5d&&_0x4c3a4b['_showLicenseError']('trialLimit'),'mergeFieldsLicenseKeyUsageLimit'==_0x292b5d&&_0x4c3a4b['_showLicenseError']('usageLimit');},0x3e8);}['destroy'](){super['destroy'](),this['_licenseKeyCheckInterval']&&clearInterval(this['_licenseKeyCheckInterval']);}['_updateBalloonVisibility'](){const _0x63ba3f=this['editor']['editing']['view']['document']['selection']['getSelectedElement'](),_0x414afb=!(!_0x63ba3f||!_0x63ba3f['getCustomProperty']('mergeFieldStatus'));if(this['_balloon']['hasView'](this['_balloonPanelView'])&&this['_balloon']['visibleView']===this['_balloonPanelView']){if(_0x414afb){const _0x2f84e4=_0x63ba3f['getCustomProperty']('mergeFieldStatus');this['_balloonPanelView']['text']=A(this['editor']['locale'],_0x2f84e4),this['_balloon']['updatePosition'](this['_getBalloonPositionData']());}else this['_hideBalloon']();}else{if(_0x414afb){const _0x65b636=_0x63ba3f['getCustomProperty']('mergeFieldStatus');this['_showBalloon'](A(this['editor']['locale'],_0x65b636));}}}['_showBalloon'](_0x17d67d){this['_balloonPanelView']||(this['_balloonPanelView']=new D(this['editor']['locale']),this['_balloonPanelView']['text']=_0x17d67d),this['_balloon']['hasView'](this['_balloonPanelView'])||(this['_balloon']['add']({'stackId':'mergeFieldsStatus','view':this['_balloonPanelView'],'position':this['_getBalloonPositionData']()}),this['_balloon']['showStack']('mergeFieldsStatus'));}['_getBalloonPositionData'](){const _0x33c523=this['editor']['editing']['view'];return{'target':()=>{const _0x113ef4=_0x33c523['document']['selection']['getFirstRange'](),_0x4d089a=_0x33c523['domConverter']['mapViewToDom'](_0x113ef4['getContainedElement']());return _0x4d089a?Array['from'](_0x4d089a['getClientRects']())[0x0]:_0x33c523['domConverter']['viewRangeToDom'](_0x113ef4);}};}['_hideBalloon'](){this['_balloon']['remove'](this['_balloonPanelView']);}['_removeDefaultValuesPreviewIfUnnecessary'](){if(Object['values'](this['editor']['plugins']['get']('MergeFieldsEditing')['getDefaultValues']())['some'](_0x60ab63=>_0x60ab63))return;const _0x44fdee=this['editor']['config']['get']('mergeFields.previewModes');_0x44fdee['indexOf']('$defaultValues')>-0x1&&_0x44fdee['length']>0x1&&(_0x44fdee['splice'](_0x44fdee['indexOf']('$defaultValues'),0x1),this['editor']['config']['set']('mergeFields.previewModes',_0x44fdee));}['_removeMenuBarButtonIfUnnecessary'](){const _0x334d6c=this['editor']['config'];if(_0x334d6c['get']('mergeFields.previewModes')){const _0x15af3f=_0x334d6c['get']('mergeFields.previewModes');if(0x1===_0x15af3f['length']){if(_0x15af3f['includes']('$dataSets'))0x1===_0x334d6c['get']('mergeFields.dataSets')['length']&&_0x564e1d();else _0x564e1d();}}function _0x564e1d(){const _0x55a946=_0x334d6c['get']('menuBar.removeItems');_0x55a946?(_0x55a946['push']('menuBar:previewMergeFields'),_0x334d6c['set']('menuBar.removeItems',_0x55a946)):_0x334d6c['set']('menuBar.removeItems',['menuBar:previewMergeFields']);}}['_setupMentionConfiguration'](){const _0x52321c=this['editor'],_0x18a88d=_0x52321c['config']['get']('mention.feeds'),_0x26df1a=_0x52321c['config']['get']('mergeFields.prefix');_0x18a88d['push']({'marker':_0x26df1a,'dropdownLimit':0xa,'feed':_0x289f73=>_0x52321c['plugins']['get']('MergeFieldsEditing')['flattenedMergeFieldDefinitions']['filter'](_0x7abb58=>{const _0x5b0f73=_0x52321c['commands']['get']('insertMergeField')['isEnabled'],_0x17ebbc=_0x52321c['commands']['get']('insertMergeFieldBlock')['isEnabled'],_0x287b7d=_0x52321c['commands']['get']('insertMergeFieldImage')['isEnabled'],_0x33ded8=_0x52321c['plugins']['get']('MergeFieldsEditing')['getMergeFieldType'](_0x7abb58['id']);if('text'===_0x33ded8&&!_0x5b0f73)return!0x1;if('block'===_0x33ded8&&!_0x17ebbc)return!0x1;if('image'===_0x33ded8&&!_0x287b7d)return!0x1;return(_0x52321c['plugins']['get']('MergeFieldsEditing')['getLabel'](_0x7abb58['id'])||_0x7abb58['id'])['toLowerCase']()['includes'](_0x289f73['toLowerCase']());}),'itemRenderer':_0x2aa8ac=>{const _0x307670=document['createElement']('button');return _0x307670['innerHTML']=''+(_0x2aa8ac['label']||_0x2aa8ac['id']),_0x307670;}}),_0x52321c['config']['set']('mention.feeds',_0x18a88d);}['_overrideMentionExecuteListener'](){const _0x18309b=this['editor'];_0x18309b['commands']['get']('mention')['on']('execute',(_0x38bbc5,_0x1749f0)=>{const _0x3c59f0=_0x1749f0[0x0];_0x3c59f0['marker']===_0x18309b['config']['get']('mergeFields.prefix')&&_0x18309b['model']['change'](_0x253f60=>{_0x253f60['remove'](_0x3c59f0['range']);const _0x495168=_0x3c59f0['mention']['id'],_0x101178=_0x18309b['plugins']['get']('MergeFieldsEditing')['getMergeFieldType'](_0x495168);'text'===_0x101178?_0x18309b['execute']('insertMergeField',_0x495168):'block'===_0x101178?_0x18309b['execute']('insertMergeFieldBlock',_0x495168,!0x1):_0x18309b['execute']('insertMergeFieldImage',_0x495168,{'breakBlock':!0x0}),_0x38bbc5['stop']();});},{'priority':'high'});}}function q(_0x2e63ce,_0x3dac83,_0x22ac7d,_0x2319a3){const _0x12c855=new _0x18e45d(_0x2e63ce,new _0x493430());_0x12c855['label']=_0x3dac83;for(const _0x2568d3 of _0x22ac7d){let _0x5ab054;_0x5ab054='block'===_0x2568d3['type']?_0x2319a3['insertBlock']:'image'===_0x2568d3['type']?_0x2319a3['insertImage']:_0x2319a3['insertInline'];const _0x1f7912=C(_0x2e63ce,_0x2568d3,_0x5ab054);_0x1f7912['delegate']('execute')['to'](_0x12c855),_0x12c855['items']['add'](_0x1f7912);}return _0x12c855;}function C(_0x147d5a,_0x43b4c6,_0x241a01){const _0x312eae=new _0x387c92(_0x147d5a),_0x3dce43=new _0xb6ad82(),_0x567f33=new _0x1efa5(_0x147d5a,_0x3dce43);return _0x312eae['children']['add'](_0x567f33),_0x567f33['set']({'label':_0x43b4c6['label']||_0x43b4c6['id'],'withText':!0x0}),_0x567f33['bind']('isEnabled')['to'](_0x241a01),_0x567f33['on']('execute',()=>{_0x312eae['fire']('execute',_0x43b4c6['id']);}),_0x312eae;}function R(_0x34f556,_0x59dee7,_0x4b929b){const _0x465e0a=new _0x93dd74(_0x34f556),_0x23459f=new _0x4885c7(_0x34f556);for(const _0x384628 of _0x59dee7['definitions']){let _0x342cf8;_0x342cf8='block'===_0x384628['type']?_0x4b929b['insertBlock']:'image'===_0x384628['type']?_0x4b929b['insertImage']:_0x4b929b['insertInline'];const _0x18e87b=z(_0x34f556,_0x384628,_0x465e0a,_0x342cf8);_0x23459f['items']['add'](_0x18e87b);}return _0x465e0a['set']({'class':'ck-menu-bar__merge-fields-submenu'}),_0x465e0a['buttonView']['set']({'label':_0x59dee7['groupLabel']||_0x59dee7['groupId']}),_0x465e0a['panelView']['children']['add'](_0x23459f),_0x465e0a;}function z(_0x2127f4,_0x525a76,_0x41fbcd,_0x337d1e){const _0x5cf90b=new _0x55c1ad(_0x2127f4,_0x41fbcd),_0xc0f296=new _0x9f1a06(_0x2127f4);return _0xc0f296['set']({'label':_0x525a76['label']||_0x525a76['id']}),_0x5cf90b['delegate']('execute')['to'](_0x41fbcd),_0x5cf90b['children']['add'](_0xc0f296),_0xc0f296['bind']('isEnabled')['to'](_0x337d1e),_0xc0f296['on']('execute',()=>{_0x5cf90b['fire']('execute',_0x525a76['id']);}),_0x5cf90b;}class W extends _0x72a874{static get['requires'](){return[i,s];}static get['pluginName'](){return'MergeFields';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}}export{w as InsertMergeFieldBlockCommand,h as InsertMergeFieldCommand,_ as InsertMergeFieldImageCommand,W as MergeFields,i as MergeFieldsEditing,s as MergeFieldsUI,k as PreviewMergeFieldsCommand};