/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x1de2f8=_0x4cb8;(function(_0x2d1414,_0x226997){const _0x2b7096=_0x4cb8,_0x1d8e37=_0x2d1414();while(!![]){try{const _0x1cbe1e=-parseInt(_0x2b7096(0x1f3))/0x1+parseInt(_0x2b7096(0x203))/0x2+-parseInt(_0x2b7096(0x215))/0x3*(parseInt(_0x2b7096(0x205))/0x4)+-parseInt(_0x2b7096(0x21c))/0x5+-parseInt(_0x2b7096(0x20c))/0x6+parseInt(_0x2b7096(0x229))/0x7+parseInt(_0x2b7096(0x202))/0x8;if(_0x1cbe1e===_0x226997)break;else _0x1d8e37['push'](_0x1d8e37['shift']());}catch(_0x2efedb){_0x1d8e37['push'](_0x1d8e37['shift']());}}}(_0x5d5f,0xa1e75));import{Plugin as _0x59a740}from'ckeditor5/src/core.js';import{User as _0xfb525,TrackChangesService as _0x3f8c7f}from'@ckeditor/ckeditor-cloud-services-collaboration/src/services.js';import{WebSocketGateway as _0x30fccf}from'../realtimecollaborativeediting/websocketgateway.js';import{CloudServicesCommentsAdapter as _0x39a775}from'../realtimecollaborativecomments/cloudservicescommentsadapter.js';function _0x4cb8(_0x18dcac,_0xe3e77b){const _0x5d5f9a=_0x5d5f();return _0x4cb8=function(_0x4cb8f3,_0x4c1a57){_0x4cb8f3=_0x4cb8f3-0x1ef;let _0x417378=_0x5d5f9a[_0x4cb8f3];return _0x417378;},_0x4cb8(_0x18dcac,_0xe3e77b);}import{Users as _0x24babc}from'ckeditor5-collaboration/src/collaboration-core.js';export class CloudServicesTrackChangesAdapter extends _0x59a740{static [_0x1de2f8(0x20f)]=/* #__PURE__ -- @preserve */
((()=>_0x3f8c7f)());[_0x1de2f8(0x1f2)];[_0x1de2f8(0x225)];static get[_0x1de2f8(0x211)](){const _0x4ca645=_0x1de2f8;return[_0x39a775,_0x4ca645(0x1ff),_0x30fccf];}static get[_0x1de2f8(0x207)](){const _0x567dc5=_0x1de2f8;return _0x567dc5(0x20b);}static get[_0x1de2f8(0x21b)](){return!0x0;}static get[_0x1de2f8(0x20a)](){return!0x0;}constructor(_0x1ce87c){const _0x3aab3d=_0x1de2f8;super(_0x1ce87c);const _0x3c0837=this[_0x3aab3d(0x1f6)][_0x3aab3d(0x1f8)][_0x3aab3d(0x1fb)](_0x3aab3d(0x20e));this[_0x3aab3d(0x1f2)]=new Map(),this[_0x3aab3d(0x225)]=new CloudServicesTrackChangesAdapter[(_0x3aab3d(0x20f))](_0x3c0837);}[_0x1de2f8(0x1fe)](){const _0x362aac=_0x1de2f8,_0x2222da=this[_0x362aac(0x1f6)][_0x362aac(0x220)][_0x362aac(0x1fb)](_0x30fccf),_0x1b6625=this[_0x362aac(0x1f6)][_0x362aac(0x220)][_0x362aac(0x1fb)](_0x362aac(0x1ff));return _0x1b6625[_0x362aac(0x216)]={'getSuggestion':async _0x52746d=>{const _0x26d8e6=_0x362aac;await this[_0x26d8e6(0x227)]();const _0x1c7f38=await this[_0x26d8e6(0x225)][_0x26d8e6(0x1fb)](_0x52746d)[_0x26d8e6(0x217)](A);return await this[_0x26d8e6(0x1fc)]([_0x1c7f38]),_0x1c7f38;},'addSuggestion':async({id:_0x33e168,type:_0x3600ce,data:_0x17d836,originalSuggestionId:_0x2ef9c1,attributes:_0x391da2})=>{const _0x185ad0=_0x362aac;await this[_0x185ad0(0x227)]();const _0x3bfbf8={'id':_0x33e168,'type':_0x3600ce,'data':_0x17d836,'originalSuggestionId':_0x2ef9c1,'attributes':_0x391da2},_0x5e0120=await this[_0x185ad0(0x225)][_0x185ad0(0x1fd)](_0x33e168,_0x3600ce,_0x17d836,_0x2ef9c1,_0x391da2)[_0x185ad0(0x217)](_0xfdd562=>{if(M(_0xfdd562))return new Promise(_0x40cfd3=>{const _0x2115a2=_0x4cb8;this[_0x2115a2(0x1f2)][_0x2115a2(0x228)](_0x33e168,{'resolve':_0x40cfd3,'suggestionData':_0x3bfbf8});});throw _0xfdd562;});return this[_0x185ad0(0x1f2)][_0x185ad0(0x208)](_0x33e168),_0x5e0120;},'updateSuggestion':async(_0x10fae3,_0x333477)=>{const _0x20ee82=_0x362aac;if(await this[_0x20ee82(0x227)](),_0x20ee82(0x218)!==_0x333477[_0x20ee82(0x21e)])return this[_0x20ee82(0x225)][_0x20ee82(0x224)](_0x10fae3,_0x333477)[_0x20ee82(0x217)](A);}},this[_0x362aac(0x1f7)](this[_0x362aac(0x225)],_0x362aac(0x21a),(_0x33e528,_0x3c3d34)=>{const _0x444b81=_0x362aac;_0x1b6625[_0x444b81(0x1f0)](_0x3c3d34['id'])&&(_0x1b6625[_0x444b81(0x201)](_0x3c3d34['id'])[_0x444b81(0x219)]=_0x3c3d34[_0x444b81(0x219)]);}),this[_0x362aac(0x225)][_0x362aac(0x214)](_0x2222da[_0x362aac(0x221)])[_0x362aac(0x21f)](_0x566722=>(_0x2222da[_0x362aac(0x21d)](this),this[_0x362aac(0x1fc)](_0x566722)[_0x362aac(0x21f)](()=>{const _0x2666a9=_0x362aac;for(const _0x1dec13 of _0x566722){_0x1b6625[_0x2666a9(0x1f5)](_0x1dec13)[_0x2666a9(0x204)]=!0x0;}})));}async[_0x1de2f8(0x209)](){const _0x1be058=_0x1de2f8,_0x3a826e=this[_0x1be058(0x1f6)][_0x1be058(0x220)][_0x1be058(0x1fb)](_0x1be058(0x1ff)),{connection:_0x4a83a5}=this[_0x1be058(0x1f6)][_0x1be058(0x220)][_0x1be058(0x1fb)](_0x30fccf),_0x49f90d=await this[_0x1be058(0x225)][_0x1be058(0x214)](_0x4a83a5);await this[_0x1be058(0x1fc)](_0x49f90d);for(const {suggestionData:_0x54f4b5,resolve:_0x36945c}of this[_0x1be058(0x1f2)][_0x1be058(0x226)]()){let _0x2ff01a=_0x49f90d[_0x1be058(0x1fa)](_0x3fead7=>_0x3fead7['id']===_0x54f4b5['id']);_0x2ff01a||(_0x2ff01a=await this[_0x1be058(0x225)][_0x1be058(0x1fd)](_0x54f4b5['id'],_0x54f4b5[_0x1be058(0x223)],_0x54f4b5[_0x1be058(0x212)],_0x54f4b5[_0x1be058(0x1f4)])),_0x36945c(_0x2ff01a);}for(const _0x53e66e of _0x49f90d)_0x3a826e[_0x1be058(0x1f0)](_0x53e66e['id'])||_0x3a826e[_0x1be058(0x1f5)](_0x53e66e);}async[_0x1de2f8(0x227)](){const _0x514ab0=_0x1de2f8;this[_0x514ab0(0x225)][_0x514ab0(0x206)]||await new Promise(_0x566a55=>{const _0x2620b7=_0x514ab0;this[_0x2620b7(0x1f7)](this[_0x2620b7(0x225)],_0x2620b7(0x200),_0x3f5380=>{const _0x15357c=_0x2620b7;_0x3f5380[_0x15357c(0x222)](),_0x566a55();});});}async[_0x1de2f8(0x1fc)](_0x37b646){const _0x3ca28b=_0x1de2f8,_0x9fada9=this[_0x3ca28b(0x1f6)][_0x3ca28b(0x220)][_0x3ca28b(0x1fb)](_0x24babc),{connection:_0x50e843}=this[_0x3ca28b(0x1f6)][_0x3ca28b(0x220)][_0x3ca28b(0x1fb)](_0x30fccf),_0x1a875f=new Set();for(const {authorId:_0x48213b}of _0x37b646)_0x9fada9[_0x3ca28b(0x1f9)](_0x48213b)||_0x1a875f[_0x3ca28b(0x1fd)](_0x48213b);if(0x0===_0x1a875f[_0x3ca28b(0x1f1)])return;const _0xe489a3=await _0xfb525[_0x3ca28b(0x22a)](_0x50e843,Array[_0x3ca28b(0x1ef)](_0x1a875f));for(const _0x5b9e16 of _0xe489a3)_0x9fada9[_0x3ca28b(0x1f9)](_0x5b9e16['id'])||_0x9fada9[_0x3ca28b(0x22b)](_0x5b9e16);}}function _0x5d5f(){const _0x4d829b=['update','_trackChangesService','values','_waitForServiceReady','set','7308525uZfcTW','getMany','addUser','cloud-services-internal-error:\x20Not\x20connected.','from','hasSuggestion','size','_bufferedRequests','653285QBHaWy','originalSuggestionId','addSuggestionData','editor','listenTo','config','getUser','find','get','_fetchMissingUsersForThreads','add','init','TrackChangesEditing','connected','getSuggestion','15437656COaqDn','2420550jlysNF','_saved','421556uAvthS','isConnected','pluginName','delete','reconnect','isPremiumPlugin','CloudServicesTrackChangesAdapter','3321264fHizGo','message','collaboration.channelId','TrackChangesService','cloud-services-internal-error:\x20Request\x20timeout.','requires','data','startsWith','connect','33ZRJbov','adapter','catch','open','attributes','suggestionUpdated','isOfficialPlugin','5773960kXFKlp','addToReconnectionStack','state','then','plugins','connection','off','type'];_0x5d5f=function(){return _0x4d829b;};return _0x5d5f();}function A(_0x2ff713){if(M(_0x2ff713))return new Promise(()=>{});throw _0x2ff713;}function M(_0xf12aea){const _0x3c26f5=_0x1de2f8;return _0xf12aea[_0x3c26f5(0x20d)][_0x3c26f5(0x213)](_0x3c26f5(0x22c))||_0xf12aea[_0x3c26f5(0x20d)][_0x3c26f5(0x213)](_0x3c26f5(0x210));}