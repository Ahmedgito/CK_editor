/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0xe3c558=_0x10a4;(function(_0x46408c,_0x5a437a){const _0x3c348d=_0x10a4,_0x54b6f9=_0x46408c();while(!![]){try{const _0x3a68ff=parseInt(_0x3c348d(0x114))/0x1+-parseInt(_0x3c348d(0xfa))/0x2+-parseInt(_0x3c348d(0xf1))/0x3*(parseInt(_0x3c348d(0xda))/0x4)+-parseInt(_0x3c348d(0xd9))/0x5+-parseInt(_0x3c348d(0xe1))/0x6+-parseInt(_0x3c348d(0x112))/0x7*(parseInt(_0x3c348d(0xf5))/0x8)+parseInt(_0x3c348d(0x101))/0x9;if(_0x3a68ff===_0x5a437a)break;else _0x54b6f9['push'](_0x54b6f9['shift']());}catch(_0x50d178){_0x54b6f9['push'](_0x54b6f9['shift']());}}}(_0x4e43,0x1ed22));function _0x10a4(_0x4959ed,_0xa483e8){const _0x4e4372=_0x4e43();return _0x10a4=function(_0x10a4ec,_0x131d7a){_0x10a4ec=_0x10a4ec-0xd8;let _0x1a37e8=_0x4e4372[_0x10a4ec];return _0x1a37e8;},_0x10a4(_0x4959ed,_0xa483e8);}import{ContextPlugin as _0x4c768b}from'ckeditor5/src/core.js';import{Collection as _0x7444ce,CKEditorError as _0xdb5015}from'ckeditor5/src/utils.js';import{WebSocketGateway as _0xc773bb}from'./websocketgateway.js';import{Users as _0x352ba6}from'ckeditor5-collaboration/src/collaboration-core.js';function _0x4e43(){const _0x113eb6=['orderNumber','isPremiumPlugin','plugins','channelConnectedUsers','register','70203Sxoath','isMe','138116qMDBNi','_uniqueUsersCount','hiddenInPresenceList','1118165gNefLK','53860dtdkCU','has','get','_createUser','_handleSessionAdd','context','getUserSessions','530586BWWbUy','defineMe','channelSessions','connection','sessions-unregister-not-exist','fire','role','getUserRole','delete','values','isOfficialPlugin','allConnectedUsers','init','_handleSessionRemove','add','Sessions','6kWHirC','pluginName','forEach','_registeredSessions','72GGHjZu','state','getUserBySessionId','change:state','assign','67440rgyuKs','listenTo','remove','clear','sessionAdd:','_users','unregister','4059909nyFIji','mySessionId','set','requires','addUser','user','connected','size','sessionId','stopListening','sessions-register-already-registered','getUser'];_0x4e43=function(){return _0x113eb6;};return _0x4e43();}export class Sessions extends _0x4c768b{[_0xe3c558(0xe3)];[_0xe3c558(0x110)];[_0xe3c558(0xec)];[_0xe3c558(0xf4)];[_0xe3c558(0x115)];[_0xe3c558(0xff)];static get[_0xe3c558(0xf2)](){const _0x259a76=_0xe3c558;return _0x259a76(0xf0);}static get[_0xe3c558(0xeb)](){return!0x0;}static get[_0xe3c558(0x10e)](){return!0x0;}static get[_0xe3c558(0x104)](){return[_0xc773bb,_0x352ba6];}constructor(_0x275ab6){const _0x448b46=_0xe3c558;super(_0x275ab6),this[_0x448b46(0xe3)]=new Map(),this[_0x448b46(0x110)]=new Map(),this[_0x448b46(0xec)]=new _0x7444ce(),this[_0x448b46(0xf4)]=new Map(),this[_0x448b46(0x115)]=0x0,this[_0x448b46(0xff)]=this[_0x448b46(0xdf)][_0x448b46(0x10f)][_0x448b46(0xdc)](_0x352ba6);}[_0xe3c558(0xed)](){const _0x2978ae=_0xe3c558,_0x1126b5=this[_0x2978ae(0xdf)][_0x2978ae(0x10f)][_0x2978ae(0xdc)](_0xc773bb);this[_0x2978ae(0xfb)](_0x1126b5,_0x2978ae(0xf8),(_0x2cc1a1,_0x3824db,_0x27763f)=>{const _0x5ccbaf=_0x2978ae;if(_0x5ccbaf(0x107)!==_0x27763f)this[_0x5ccbaf(0xe3)][_0x5ccbaf(0xf3)](_0x366ae8=>_0x366ae8[_0x5ccbaf(0xfd)]()),this[_0x5ccbaf(0x110)][_0x5ccbaf(0xf3)](_0x3b8059=>_0x3b8059[_0x5ccbaf(0xfd)]()),this[_0x5ccbaf(0xec)][_0x5ccbaf(0xfd)]();else{for(const [_0x28b044,_0x132676]of this[_0x5ccbaf(0xf4)])for(const _0x2f8170 of _0x132676)this[_0x5ccbaf(0xde)](_0x28b044,_0x2f8170);}}),this[_0x2978ae(0xdd)](_0x1126b5[_0x2978ae(0xe4)]['me'],!0x0);}[_0xe3c558(0x111)](_0x551ae3,_0x30b693){const _0x2585be=_0xe3c558;if(this[_0x2585be(0xf4)][_0x2585be(0xdb)](_0x551ae3))throw new _0xdb5015(_0x2585be(0x10b),null,{'channelId':_0x551ae3});this[_0x2585be(0xf4)][_0x2585be(0x103)](_0x551ae3,_0x30b693),this[_0x2585be(0xe3)][_0x2585be(0x103)](_0x551ae3,new _0x7444ce()),this[_0x2585be(0x110)][_0x2585be(0x103)](_0x551ae3,new _0x7444ce()),this[_0x2585be(0xfb)](_0x30b693,_0x2585be(0xef),(_0x3141a4,_0x53fa08)=>this[_0x2585be(0xde)](_0x551ae3,_0x53fa08)),this[_0x2585be(0xfb)](_0x30b693,_0x2585be(0xfc),(_0x1771ac,_0x4d1f16)=>this[_0x2585be(0xee)](_0x551ae3,_0x4d1f16));for(const _0x4b3c76 of _0x30b693)this[_0x2585be(0xde)](_0x551ae3,_0x4b3c76);}[_0xe3c558(0x100)](_0x1d06fb){const _0x5e410e=_0xe3c558;if(!this[_0x5e410e(0xf4)][_0x5e410e(0xdb)](_0x1d06fb))throw new _0xdb5015(_0x5e410e(0xe5),null,{'channelId':_0x1d06fb});const _0x22b902=this[_0x5e410e(0xf4)][_0x5e410e(0xdc)](_0x1d06fb);this[_0x5e410e(0x10a)](_0x22b902);for(const _0x25fb3d of _0x22b902)_0x5e410e(0x107)===this[_0x5e410e(0xdf)][_0x5e410e(0x10f)][_0x5e410e(0xdc)](_0xc773bb)[_0x5e410e(0xf6)]&&this[_0x5e410e(0xee)](_0x1d06fb,_0x25fb3d);this[_0x5e410e(0xf4)][_0x5e410e(0xe9)](_0x1d06fb),this[_0x5e410e(0xe3)][_0x5e410e(0xe9)](_0x1d06fb),this[_0x5e410e(0x110)][_0x5e410e(0xe9)](_0x1d06fb);}get[_0xe3c558(0x102)](){const _0xef557d=_0xe3c558;return this[_0xef557d(0xdf)][_0xef557d(0x10f)][_0xef557d(0xdc)](_0xc773bb)[_0xef557d(0xe4)][_0xef557d(0x109)];}[_0xe3c558(0xf7)](_0x4c2d78){const _0x3e2bc2=_0xe3c558;for(const _0x1e4fab of this[_0x3e2bc2(0xe3)][_0x3e2bc2(0xea)]())for(const _0x5488a3 of _0x1e4fab)if(_0x5488a3['id']===_0x4c2d78)return _0x5488a3[_0x3e2bc2(0x106)];}[_0xe3c558(0xe0)](_0x1ce8e6,_0x1dc1b0){const _0x32a063=_0xe3c558,_0x15e358=_0x1dc1b0?[this[_0x32a063(0xe3)][_0x32a063(0xdc)](_0x1dc1b0)]:this[_0x32a063(0xe3)][_0x32a063(0xea)](),_0x9ad977=new Set();for(const _0x395c25 of _0x15e358)for(const _0x1cbe6a of _0x395c25)_0x1cbe6a[_0x32a063(0x106)]['id']===_0x1ce8e6['id']&&_0x9ad977[_0x32a063(0xef)](_0x1cbe6a['id']);return _0x9ad977;}[_0xe3c558(0xe8)](_0x474625){const _0x5cbba0=_0xe3c558;for(const _0x386eec of this[_0x5cbba0(0xe3)][_0x5cbba0(0xea)]())for(const _0x30d539 of _0x386eec)if(_0x30d539[_0x5cbba0(0x106)]===_0x474625)return _0x30d539[_0x5cbba0(0xe7)];}[_0xe3c558(0xde)](_0xe85f05,_0x472e22){const _0x126d19=_0xe3c558;if(_0x126d19(0x107)!==this[_0x126d19(0xdf)][_0x126d19(0x10f)][_0x126d19(0xdc)](_0xc773bb)[_0x126d19(0xf6)])return;const _0x32b08b=_0x472e22[_0x126d19(0x106)],_0xbd9703=this[_0x126d19(0xff)][_0x126d19(0x10c)](_0x32b08b['id'])||this[_0x126d19(0xdd)](_0x32b08b),_0x6e909e=Object[_0x126d19(0xf9)]({},_0x472e22,{'user':_0xbd9703});if(this[_0x126d19(0xe3)][_0x126d19(0xdc)](_0xe85f05)[_0x126d19(0xef)](_0x6e909e),!_0x32b08b[_0x126d19(0xd8)]){const _0x48694f=this[_0x126d19(0x110)][_0x126d19(0xdc)](_0xe85f05);_0x48694f[_0x126d19(0xdb)](_0xbd9703['id'])||_0x48694f[_0x126d19(0xef)](_0xbd9703),this[_0x126d19(0xec)][_0x126d19(0xdb)](_0xbd9703['id'])||_0x32b08b[_0x126d19(0xd8)]||this[_0x126d19(0xec)][_0x126d19(0xef)](_0xbd9703,_0xbd9703[_0x126d19(0x113)]?0x0:void 0x0);}this[_0x126d19(0xe6)](_0x126d19(0xfe)+_0xe85f05,{'channelId':_0xe85f05,'session':_0x6e909e});}[_0xe3c558(0xee)](_0x4912c4,_0x4cd2df){const _0x4d284c=_0xe3c558;if(_0x4d284c(0x107)!==this[_0x4d284c(0xdf)][_0x4d284c(0x10f)][_0x4d284c(0xdc)](_0xc773bb)[_0x4d284c(0xf6)])return;const _0x4f2837=this[_0x4d284c(0x110)][_0x4d284c(0xdc)](_0x4912c4),_0x3b339d=_0x4cd2df[_0x4d284c(0x106)];_0x3b339d['id']&&(this[_0x4d284c(0xe3)][_0x4d284c(0xdc)](_0x4912c4)[_0x4d284c(0xfc)](_0x4cd2df['id']),_0x4f2837[_0x4d284c(0xdb)](_0x3b339d['id'])&&!this[_0x4d284c(0xe0)](_0x3b339d,_0x4912c4)[_0x4d284c(0x108)]&&_0x4f2837[_0x4d284c(0xfc)](_0x3b339d['id']),this[_0x4d284c(0xec)][_0x4d284c(0xdc)](_0x3b339d['id'])&&!this[_0x4d284c(0xe0)](_0x3b339d)[_0x4d284c(0x108)]&&this[_0x4d284c(0xec)][_0x4d284c(0xfc)](_0x3b339d['id']));}[_0xe3c558(0xdd)](_0x4fb77c,_0x3beb50){const _0x54a821=_0xe3c558,_0x19ca31=this[_0x54a821(0xff)][_0x54a821(0x105)](_0x4fb77c);return _0x3beb50&&this[_0x54a821(0xff)][_0x54a821(0xe2)](_0x4fb77c['id']),_0x19ca31[_0x54a821(0x10d)]=this[_0x54a821(0x115)]++,_0x19ca31;}}