/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0x4aac8b}from'ckeditor5/src/core.js';import{addListToDropdown as _0x5abbbb,createDropdown as _0x3f2b62,MenuBarMenuListItemButtonView as _0x595924,MenuBarMenuListItemView as _0x26e3ee,MenuBarMenuListView as _0x21a9ad,MenuBarMenuView as _0x1279bb,UIModel as _0x1fed9f}from'ckeditor5/src/ui.js';import{Collection as _0x4c8647}from'ckeditor5/src/utils.js';import{IconLineHeight as _0x35e5d0}from'ckeditor5/src/icons.js';import{normalizeOptions as _0x226b2b}from'./utils.js';import'../theme/lineheight.css';export class LineHeightUI extends _0x4aac8b{['licenseKey'];['_licenseKeyCheckInterval'];static get['pluginName'](){return'LineHeightUI';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}['init'](){const _0x4cc2a0={'accessibleLabel':(0x0,this['editor']['t'])('Line\x20height'),'options':this['_prepareListOptions']()};this['_registerToolbarComponent'](_0x4cc2a0),this['_registerMenuBarComponent'](_0x4cc2a0),this['licenseKey']=this['editor']['config']['get']('licenseKey');const _0x39f8f4=this['editor'];this['_licenseKeyCheckInterval']=setInterval(()=>{let _0x2781fe;for(const _0x2cbfc9 in _0x39f8f4){const _0x28cba6=_0x2cbfc9,_0x11d59b=_0x39f8f4[_0x28cba6];if('lineHeightLicenseKeyValid'==_0x11d59b||'lineHeightLicenseKeyInvalid'==_0x11d59b||'lineHeightLicenseKeyExpired'==_0x11d59b||'lineHeightLicenseKeyDomainLimit'==_0x11d59b||'lineHeightLicenseKeyNotAllowed'==_0x11d59b||'lineHeightLicenseKeyEvaluationLimit'==_0x11d59b||'lineHeightLicenseKeyTrialLimit'==_0x11d59b||'lineHeightLicenseKeyUsageLimit'==_0x11d59b){delete _0x39f8f4[_0x28cba6],_0x2781fe=_0x11d59b,clearInterval(this['_licenseKeyCheckInterval']),this['_licenseKeyCheckInterval']=void 0x0;break;}}'lineHeightLicenseKeyInvalid'==_0x2781fe&&_0x39f8f4['_showLicenseError']('invalid'),'lineHeightLicenseKeyExpired'==_0x2781fe&&_0x39f8f4['_showLicenseError']('expired'),'lineHeightLicenseKeyDomainLimit'==_0x2781fe&&_0x39f8f4['_showLicenseError']('domainLimit'),'lineHeightLicenseKeyNotAllowed'==_0x2781fe&&_0x39f8f4['_showLicenseError']('featureNotAllowed','LineHeight'),'lineHeightLicenseKeyEvaluationLimit'==_0x2781fe&&_0x39f8f4['_showLicenseError']('evaluationLimit'),'lineHeightLicenseKeyTrialLimit'==_0x2781fe&&_0x39f8f4['_showLicenseError']('trialLimit'),'lineHeightLicenseKeyUsageLimit'==_0x2781fe&&_0x39f8f4['_showLicenseError']('usageLimit');},0x3e8);}['destroy'](){super['destroy'](),this['_licenseKeyCheckInterval']&&clearInterval(this['_licenseKeyCheckInterval']);}['_shouldRenderCustomValueOption'](){return this['editor']['config']['get']('lineHeight.supportAllValues');}['_getLocalizedLineHeightOptions'](){const _0x4766bc=this['editor'],t=_0x4766bc['t'],_0x5c3157=_0x4766bc['config']['get']('lineHeight'),_0x58f9ee={'Single':t({'string':'Single','id':'LINE_HEIGHT_SINGLE_OPTION_LABEL'}),'Double':t({'string':'Double','id':'LINE_HEIGHT_DOUBLE_OPTION_LABEL'})};return _0x226b2b(_0x5c3157)['map'](_0x2f6d00=>{const _0x2eed66=_0x58f9ee[_0x2f6d00['title']];return _0x2eed66&&_0x2eed66!=_0x2f6d00['title']&&(_0x2f6d00=Object['assign']({},_0x2f6d00,{'title':_0x2eed66})),_0x2f6d00;});}['_prepareListOptions'](){const _0x54f25c=this['editor']['commands']['get']('lineHeight'),_0x124c5a=this['editor']['config']['get']('lineHeight.defaultValue'),_0x4fff81=this['_getLocalizedLineHeightOptions'](),_0x152945=new _0x4c8647(),_0x5c927f=_0x49b4de=>'default'===_0x49b4de||String(_0x124c5a)===_0x49b4de;for(const _0x1b140d of _0x4fff81){const _0x5eb71a={'type':'button','model':new _0x1fed9f({'commandName':'lineHeight','class':'ck-line-height-option','role':'menuitemradio','label':_0x1b140d['title'],'withText':!0x0})};_0x5c927f(_0x1b140d['model'])?(_0x5eb71a['model']['bind']('isOn')['to'](_0x54f25c,'value',_0x427ef9=>!_0x427ef9),_0x5eb71a['model']['commandParam']=void 0x0):(_0x5eb71a['model']['bind']('isOn')['to'](_0x54f25c,'value',_0x385db9=>_0x385db9===_0x1b140d['model']),_0x5eb71a['model']['commandParam']=_0x1b140d['model']),_0x152945['add'](_0x5eb71a);}if(this['_shouldRenderCustomValueOption']()){const _0x580480=this['_getCustomValueOptionDefinition'](_0x4fff81);_0x152945['add'](_0x580480);}return _0x152945;}['_getCustomValueOptionDefinition'](_0x309567){const _0x474b08=this['editor'],t=_0x474b08['t'],_0x3bd7cb=_0x474b08['commands']['get']('lineHeight'),_0x45bf01=_0x309567['map'](_0x3622f6=>_0x3622f6['model']),_0x5f2828={'type':'button','model':new _0x1fed9f({'commandName':'lineHeight','class':'ck-line-height-option','role':'menuitemradio','withText':!0x0})};return _0x5f2828['model']['bind']('commandParam')['to'](_0x3bd7cb,'value'),_0x5f2828['model']['bind']('isOn')['to'](_0x3bd7cb,'value',_0x3bc880=>!!_0x3bc880&&!_0x45bf01['includes'](String(_0x3bc880))),_0x5f2828['model']['bind']('label')['to'](_0x3bd7cb,'value',_0x6e9c15=>t({'string':'Custom:\x20%0','id':'LINE_HEIGHT_CUSTOM_OPTION_LABEL'},String(_0x6e9c15))),_0x5f2828;}['_registerToolbarComponent']({accessibleLabel:_0x413e5f,options:_0x8ac4ee}){const _0x19f32d=this['editor'],_0x392183=_0x19f32d['commands']['get']('lineHeight');_0x19f32d['ui']['componentFactory']['add']('lineHeight',_0x5d7cc1=>{const _0x48e289=_0x3f2b62(_0x5d7cc1);return _0x5abbbb(_0x48e289,_0x8ac4ee,{'role':'menu','ariaLabel':_0x413e5f}),_0x48e289['buttonView']['set']({'label':_0x413e5f,'tooltip':!0x0,'icon':_0x35e5d0}),_0x48e289['extendTemplate']({'attributes':{'class':['ck-line-height-dropdown']}}),_0x48e289['bind']('isEnabled')['to'](_0x392183),this['listenTo'](_0x48e289,'execute',_0x57d87a=>{_0x19f32d['execute'](_0x57d87a['source']['commandName'],{'value':_0x57d87a['source']['commandParam']}),_0x19f32d['editing']['view']['focus']();}),_0x48e289['once']('change:isOpen',()=>{const _0x53fb2c=_0x48e289['panelView']['children']['first'];this['_attachCustomOptionVisibilityHandler'](_0x48e289,_0x8ac4ee,_0x53fb2c);}),_0x48e289;});}['_registerMenuBarComponent']({accessibleLabel:_0x13bc80,options:_0x47b3a8}){const _0x3b49f9=this['editor'],_0x22e08=_0x3b49f9['commands']['get']('lineHeight');_0x3b49f9['ui']['componentFactory']['add']('menuBar:lineHeight',_0x57d9b3=>{const _0x38d860=new _0x1279bb(_0x57d9b3);_0x38d860['buttonView']['set']({'label':_0x13bc80,'icon':_0x35e5d0}),_0x38d860['bind']('isEnabled')['to'](_0x22e08);const _0x59bca8=new _0x21a9ad(_0x57d9b3);for(const _0x56a827 of _0x47b3a8){const _0x458ac1=new _0x26e3ee(_0x57d9b3,_0x38d860),_0x22a789=new _0x595924(_0x57d9b3);_0x22a789['set']({'role':'menuitemradio','isToggleable':!0x0}),_0x22a789['bind'](...Object['keys'](_0x56a827['model']))['to'](_0x56a827['model']),_0x22a789['delegate']('execute')['to'](_0x38d860),_0x22a789['on']('execute',()=>{_0x3b49f9['execute'](_0x56a827['model']['commandName'],{'value':_0x56a827['model']['commandParam']}),_0x3b49f9['editing']['view']['focus']();}),_0x458ac1['children']['add'](_0x22a789),_0x59bca8['items']['add'](_0x458ac1);}return _0x38d860['panelView']['children']['add'](_0x59bca8),this['_attachCustomOptionVisibilityHandler'](_0x38d860,_0x47b3a8,_0x59bca8),_0x38d860;});}['_attachCustomOptionVisibilityHandler'](_0x4f7290,_0x4a5f95,_0xd6390d){if(!this['_shouldRenderCustomValueOption']())return;const _0x5b1cfc=()=>{if(!_0x4f7290['isOpen'])return;_0xd6390d['items']['last']['isVisible']=Boolean(_0x4a5f95['last']['model']['isOn']);};_0x5b1cfc(),_0x4f7290['on']('change:isOpen',()=>{_0x5b1cfc();});}}